// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let k=function(t){xn=t},L=function(t){return t*Ln},B=function(t,s){return Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new xn(4);return xn!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new xn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},V=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},j=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,i,e){var n=new xn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},U=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*(s=s[3])-n*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-n*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*h+r*o,t[1]=n*h+s*o,t[2]=e*a+r*i,t[3]=n*a+s*i,t},X=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*h,t[1]=n*i+s*h,t[2]=e*-h+r*i,t[3]=n*-h+s*i,t},Y=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],i=i[1];return t[0]=e*h,t[1]=n*h,t[2]=r*i,t[3]=s*i,t},Z=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},nt=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=Mn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=Mn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ht=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new xn(6);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new xn(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,n,r){var h=new xn(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},ft=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},dt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],s=s[5],o=i*r-e*n;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-n*o,t[3]=i*o,t[4]=(n*s-r*h)*o,t[5]=(e*h-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=n*a+h*l,t[2]=e*u+r*c,t[3]=n*u+h*c,t[4]=e*f+r*i+o,t[5]=n*f+h*i+s,t},mt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=n*i+h*a,t[2]=e*-a+r*i,t[3]=n*-a+h*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=n*a,t[2]=r*i,t[3]=h*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*a+r*i+o,t[5]=n*a+h*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},bt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Tt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},_t=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Gt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mn*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mn*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-l)<=Mn*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=Mn*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-c)<=Mn*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},n=function(){var t=new xn(9);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new xn(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},At=function(t,s,i,e,n,r,h,o,a){var l=new xn(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},Rt=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,n;return t===s?(i=s[1],e=s[2],n=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*h-o*l,c=-s*r+o*a,f=l*r-h*a,d=i*u+e*c+n*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+n*l)*d,t[2]=(o*e-n*h)*d,t[3]=c*d,t[4]=(s*i-n*a)*d,t[5]=(-o*i+n*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(h*i-e*r)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=h*s-o*l,t[1]=n*l-e*s,t[2]=e*o-n*h,t[3]=o*a-r*s,t[4]=i*s-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],n=t[5],r=t[6],h=t[7],o=t[8];return s*(o*e-n*h)+t[1]*(-o*i+n*r)+t[2]*(h*i-e*r)},r=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*h+d*l,t[1]=c*n+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*h+g*l,t[4]=p*n+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+w*h+i*l,t[7]=y*n+w*o+i*u,t[8]=y*r+w*a+i*s,t},Bt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=c*e+i*h+l,t[7]=c*n+i*o+u,t[8]=c*r+i*a+s,t},Nt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*h,t[1]=i*n+c*o,t[2]=i*r+c*a,t[3]=i*h-c*e,t[4]=i*o-c*n,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},jt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-h,t},Jt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,M=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*_+v*(u=u*s-d*p)-b*T+M*x)?(t[0]=(o*f-a*c+l*_)*(d=1/d),t[1]=(a*u-h*f-l*T)*d,t[2]=(h*c-o*u+l*x)*d,t[3]=(n*c-e*f-r*_)*d,t[4]=(i*f-n*u+r*T)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*M-g*b+s*v)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*b-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},h=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mn*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mn*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=Mn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=Mn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=Mn*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=Mn*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mn*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new xn(16);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new xn(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ns=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new xn(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hs=function(t,s){var i,e,n,r,h,o;return t===s?(i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,M=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=u*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,C=f*s-d*g,P=y*C-w*I+S*G+v*_-b*T+M*x;return P?(t[0]=(o*C-a*I+l*G)*(P=1/P),t[1]=(n*I-e*C-r*G)*P,t[2]=(m*M-g*b+s*v)*P,t[3]=(f*b-c*M-d*v)*P,t[4]=(a*_-h*C-l*T)*P,t[5]=(i*C-n*_+r*T)*P,t[6]=(g*S-p*M-s*w)*P,t[7]=(u*M-f*S+d*w)*P,t[8]=(h*I-o*_+l*x)*P,t[9]=(e*_-i*I-r*x)*P,t[10]=(p*b-m*S+s*y)*P,t[11]=(c*S-u*b-d*y)*P,t[12]=(o*T-h*G-a*x)*P,t[13]=(i*G-e*T+n*x)*P,t[14]=(m*w-p*v-g*y)*P,t[15]=(u*v-c*w+f*y)*P,t):null},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,M=n*l-r*a,x=u*m-c*p,T=u*g-f*p,_=u*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*G,t[1]=n*I-e*C-r*G,t[2]=m*M-g*b+s*v,t[3]=f*b-c*M-d*v,t[4]=a*_-h*C-l*T,t[5]=i*C-n*_+r*T,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=h*I-o*_+l*x,t[9]=e*_-i*I-r*x,t[10]=p*b-m*S+s*y,t[11]=c*S-u*b-d*y,t[12]=o*T-h*G-a*x,t[13]=i*G-e*T+n*x,t[14]=m*w-p*v-g*y,t[15]=u*v-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],n=t[4],r=t[5],h=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*n,p=s*h-e*n,m=i*h-e*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(n*w-r*y+h*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],v=i[2],b=i[3];return t[0]=w*e+S*o+v*c+b*m,t[1]=w*n+S*a+v*f+b*g,t[2]=w*r+S*l+v*d+b*y,t[3]=w*h+S*u+v*p+b*s,t[4]=(w=i[4])*e+(S=i[5])*o+(v=i[6])*c+(b=i[7])*m,t[5]=w*n+S*a+v*f+b*g,t[6]=w*r+S*l+v*d+b*y,t[7]=w*h+S*u+v*p+b*s,t[8]=(w=i[8])*e+(S=i[9])*o+(v=i[10])*c+(b=i[11])*m,t[9]=w*n+S*a+v*f+b*g,t[10]=w*r+S*l+v*d+b*y,t[11]=w*h+S*u+v*p+b*s,t[12]=(w=i[12])*e+(S=i[13])*o+(v=i[14])*c+(b=i[15])*m,t[13]=w*n+S*a+v*f+b*g,t[14]=w*r+S*l+v*d+b*y,t[15]=w*h+S*u+v*p+b*s,t},us=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=n*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=h*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],n=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,x,T=e[0],_=e[1],e=e[2],G=Math.hypot(T,_,e);return G<Mn?null:(T*=G=1/G,_*=G,e*=G,G=Math.sin(i),i=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=T*_*(n=1-i)-e*G,S=_*_*n+i,v=e*_*n+T*G,b=T*e*n+_*G,M=_*e*n-T*G,x=e*e*n+i,t[0]=r*(i=T*T*n+i)+(l=s[4])*(y=_*T*n+e*G)+(d=s[8])*(e=e*T*n-_*G),t[1]=h*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+l*S+d*v,t[5]=h*w+u*S+p*v,t[6]=o*w+c*S+m*v,t[7]=a*w+f*S+g*v,t[8]=r*b+l*M+d*x,t[9]=h*b+u*M+p*x,t[10]=o*b+c*M+m*x,t[11]=a*b+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[4],r=s[5],h=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*i+a*e,t[5]=r*i+l*e,t[6]=h*i+u*e,t[7]=o*i+c*e,t[8]=a*i-n*e,t[9]=l*i-r*e,t[10]=u*i-h*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i-a*e,t[1]=r*i-l*e,t[2]=h*i-u*e,t[3]=o*i-c*e,t[8]=n*e+a*i,t[9]=r*e+l*i,t[10]=h*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i+a*e,t[1]=r*i+l*e,t[2]=h*i+u*e,t[3]=o*i+c*e,t[4]=a*i-n*e,t[5]=l*i-r*e,t[6]=u*i-h*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,n=i[0],r=i[1],i=i[2],h=Math.hypot(n,r,i);return h<Mn?null:(n*=h=1/h,r*=h,i*=h,h=Math.sin(s),s=Math.cos(s),t[0]=n*n*(e=1-s)+s,t[1]=r*n*e+i*h,t[2]=i*n*e-r*h,t[3]=0,t[4]=n*r*e-i*h,t[5]=r*r*e+s,t[6]=i*r*e+n*h,t[7]=0,t[8]=n*i*e+r*h,t[9]=r*i*e-n*h,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],n=s[2],r=n+n,h=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(n=n*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(h+n),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(h+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new xn(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return 0<c?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],n=s[5],r=s[6],h=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,n,r),t[2]=Math.hypot(h,o,a),t},l=function(t,s){var i=new xn(3),e=(d(i,s),1/i[0]),n=s[0]*e,r=s[1]*(u=1/i[1]),h=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=n+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-h)/c,t[2]=(r-o)/c):a<n&&s<n?(c=2*Math.sqrt(1+n-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+h)/c):s<a?(c=2*Math.sqrt(1+a-n-s),t[3]=(e-h)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-n-a),t[3]=(r-o)/c,t[0]=(e+h)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],n=e[1],r=e[2],h=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,n,r),i[1]=Math.hypot(h,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,n=n*f,r=r*(i=1/i[2]),h=h*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(n-h)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(n+h)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(n+h)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(n-h)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Ts=function(t,s,i,e){var n=(h=s[0])*(u=h+h),r=h*(c=(a=s[1])+a),h=h*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(h-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(n+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(h+c)*e,t[9]=(a-u)*e,t[10]=(1-(n+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},_s=function(t,s,i,e,n){var r=(o=s[0])*(c=o+o),h=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=n[0],g=n[1],n=n[2],y=(1-(a+u))*d,w=(h+s)*d,d=(o-f)*d,h=(h-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=h,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+h*g+p*n),t[13]=i[1]+g-(w*m+s*g+o*n),t[14]=i[2]+n-(d*m+u*g+f*n),t[15]=1,t},Gs=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},u=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+e)*(i=1/(e-n)),t[14]=2*n*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=n*(i=1/(e-n)),t[14]=n*e*i):(t[10]=-1,t[14]=-e),t},Ps=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=2/(h+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(n+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-s)*o*.5,t[9]=(n-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Es=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),h=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*h,t[15]=1,t},As=function(t,s,i,e){var n,r,h,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mn&&Math.abs(l-d)<Mn&&Math.abs(s-i)<Mn?p(t):(f=a-f,d=l-d,i=s-i,n=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(n,e,u))?(n*=o=1/o,e*=o,u*=o):u=e=n=0,c=d*u-i*e,r=i*n-f*u,h=f*e-d*n,(o=Math.hypot(c,r,h))?(c*=o=1/o,r*=o,h*=o):h=r=c=0,t[0]=n,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=i,t[11]=0,t[12]=-(n*a+e*l+u*s),t[13]=-(c*a+r*l+h*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Rs=function(t,s,i,e){var n=s[0],r=s[1],s=s[2],h=e[0],o=e[1],e=e[2],a=n-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-h*i)*e+(h=h*l-o*a)*h)&&(c*=u=1/Math.sqrt(u),e*=u,h*=u),t[0]=c,t[1]=e,t[2]=h,t[3]=0,t[4]=l*h-i*e,t[5]=i*c-a*h,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=n,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],v=s[3],b=s[4],M=s[5],x=s[6],T=s[7],_=s[8],G=s[9],I=s[10],C=s[11],P=s[12],E=s[13],A=s[14],s=s[15];return Math.abs(i-y)<=Mn*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=Mn*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-S)<=Mn*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-v)<=Mn*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(h-b)<=Mn*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(o-M)<=Mn*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=Mn*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=Mn*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-_)<=Mn*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-G)<=Mn*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-I)<=Mn*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mn*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=Mn*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-E)<=Mn*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-A)<=Mn*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new xn(3);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Vs=function(t){var s=new xn(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},js=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new xn(3);return e[0]=t,e[1]=s,e[2]=i,e},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Zs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},ni=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},hi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],n=s[2];return 0<(i=i*i+e*e+n*n)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[0],h=i[1],i=i[2];return t[0]=n*i-s*h,t[1]=s*r-e*i,t[2]=e*h-n*r,t},oi=function(t,s,i,e){var n=s[0],r=s[1],s=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,e=Math.sin(e*n)/r;return t[0]=h*s[0]+e*i[0],t[1]=h*s[1]+e*i[1],t[2]=h*s[2]+e*i[2],t},li=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*(h=h*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*h,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*h,t},ui=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(h=3*a*h)+n[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*h+n[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*h+n[2]*a,t},ci=function(t,s){s=s||1;var i=2*On()*Math.PI,e=2*On()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[3]*e+i[7]*n+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*n+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*n+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*n+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],n=s[1],s=s[2];return t[0]=e*i[0]+n*i[3]+s*i[6],t[1]=e*i[1]+n*i[4]+s*i[7],t[2]=e*i[2]+n*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],n=i[1],r=s[0],h=s[1],o=n*(s=s[2])-(c=i[2])*h,a=c*r-e*s,l=e*h-n*r,u=n*l-c*a,c=c*o-e*l,e=e*a-n*o;return a*=n=2*i[3],l*=n,c*=2,e*=2,t[0]=r+(o*=n)+(u*=2),t[1]=h+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},vi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},bi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],n=s[0],r=s[1],s=s[2];return Math.abs(i-n)<=Mn*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Mn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new xn(4);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new xn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Ti=function(t,s,i,e){var n=new xn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},_i=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Gi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Pi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ei=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ai=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ri=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Bi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ni=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n+(s=s[3]-t[3])*s},b=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Vi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},ji=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Hi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*h-s*r,t[2]=e*a-l*h+s*n,t[3]=-e*o+l*r-u*n,t},Ui=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],s=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,n,r,h,o;for(s=s||1;1<=(h=(i=2*On()-1)*i+(e=2*On()-1)*e););for(;1<=(o=(n=2*On()-1)*n+(r=2*On()-1)*r););var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*n,u=i*n+a*e-h*r,c=i*r+h*n-o*e;return t[0]=l*i+(e=-h*e-o*n-a*r)*-h+u*-a-c*-o,t[1]=u*i+e*-o+c*-h-l*-a,t[2]=c*i+e*-a+l*-o-u*-h,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Zi=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=Mn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=Mn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},T=function(){var t=new xn(4);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},_=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mn<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jn(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*h+n*a-r*o,t[1]=n*i+s*o+r*h-e*a,t[2]=r*i+s*a+e*o-n*h,t[3]=s*i-e*h-n*o-r*a,t},G=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*h,t[1]=n*i+r*h,t[2]=r*i-n*h,t[3]=s*i-e*h,t},I=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*h,t[1]=n*i+s*h,t[2]=r*i+e*h,t[3]=s*i-n*h,t},C=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*h,t[1]=n*i-e*h,t[2]=r*i+s*h,t[3]=s*i-r*h,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},P=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=Math.sqrt(i*i+e*e+n*n),s=Math.exp(s),h=0<r?s*Math.sin(r)/r:0;return t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=s*Math.cos(r),t},E=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+n*n))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=.5*Math.log(i*i+e*e+n*n+s*s),t},ee=function(t,s,i){return E(t,s),zn(t,t,i),P(t,t),t},A=function(t,s,i,e){var n,r,h=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=h*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mn<1-f?(f=Math.acos(f),n=Math.sin(f),r=Math.sin((1-e)*f)/n,Math.sin(e*f)/n):(r=1-e,e),t[0]=r*h+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},ne=function(t){var s=On(),i=On(),e=On(),n=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-n*r,t[3]=s*r,t},he=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},R=function(t,s){var i,e,n,r=s[0]+s[4]+s[8];return 0<r?(n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(s[5]-s[7])*(n=.5/n),t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,n=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*n,t[3]=(s[3*i+e]-s[3*e+i])*(n=.5/n),t[i]=(s[3*i+r]+s[3*r+i])*n,t[e]=(s[3*e+r]+s[3*r+e])*n),t},oe=function(t,s,i,e){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:kn,r=Math.PI/360,h=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Mn},ue=function(){var t=new xn(8);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new xn(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,n,r,h,o){var a=new xn(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},de=function(t,s,i,e,n,r,h){var o=new xn(8),n=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*n),r=.5*r,h=.5*h;return o[4]=n*e+r*i-h*s,o[5]=r*e+h*t-n*i,o[6]=h*e+n*s-r*t,o[7]=-n*t-r*s-h*i,o},F=function(t,s,i){var e=.5*i[0],n=.5*i[1],i=.5*i[2],r=s[0],h=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=h,t[2]=o,t[3]=s,t[4]=e*s+n*o-i*h,t[5]=n*s+i*r-e*o,t[6]=i*s+e*h-n*r,t[7]=-e*r-n*h-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=T(),e=(l(i,s),new xn(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},ve=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},be=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*h+e*a-n*o),t[1]=2*(e*s+r*o+n*h-i*a),t[2]=2*(n*s+r*a+i*o-e*h),t},Me=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*i-r*a+l,t[5]=h*a+r*o-e*i+u,t[6]=h*i+e*a-n*o+c,t[7]=-e*o-n*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return G(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Te=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return I(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},_e=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return C(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Ge=function(t,s,i){var e=i[0],n=i[1],r=i[2],i=i[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h*i+l*e+o*r-a*n,t[1]=o*i+l*n+a*e-h*r,t[2]=a*i+l*r+h*n-o*e,t[3]=l*i-h*e-o*n-a*r,t[4]=(h=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*e-h*r,t[6]=a*i+l*r+h*n-o*e,t[7]=l*i-h*e-o*n-a*r,t},Ie=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*h+n*a-r*o,t[1]=n*l+s*o+r*h-e*a,t[2]=r*l+s*a+e*o-n*h,t[3]=s*l-e*h-n*o-r*a,t[4]=e*(l=i[7])+s*(h=i[4])+n*(a=i[6])-r*(o=i[5]),t[5]=n*l+s*o+r*h-e*a,t[6]=r*l+s*a+e*o-n*h,t[7]=s*l-e*h-n*o-r*a,t},Ce=function(t,s,i,e){var n,r,h,o,a,l;return Math.abs(e)<Mn?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,n=(h=Math.sin(e))*i[0]/l,r=h*i[1]/l,h=h*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*n+(o=s[1])*h-(a=s[2])*r,t[1]=o*i+e*r+a*n-l*h,t[2]=a*i+e*h+l*r-o*n,t[3]=e*i-l*n-o*r-a*h,t[4]=(e=s[4])*i+(l=s[7])*n+(o=s[5])*h-(a=s[6])*r,t[5]=o*i+l*r+a*n-e*h,t[6]=a*i+l*h+e*r-o*n,t[7]=l*i-e*n-o*r-a*h,t)},Pe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ee=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+h*p+n*g-r*m,t[1]=n*i+h*m+r*p-e*g,t[2]=r*i+h*g+e*m-n*p,t[3]=h*i-e*p-n*m-r*g,t[4]=e*u+h*o+n*l-r*a+c*i+s*p+f*g-d*m,t[5]=n*u+h*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+h*l+e*a-n*o+d*i+s*g+c*m-f*p,t[7]=h*u-e*o-n*a-r*l+s*i-c*p-f*m-d*g,t},Ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Re=function(t,s,i,e){var n=1-e;return Zn(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Fe=function(t,s){var i=Kn(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,n,r,h,o,a,l,u=Kn(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(h=s[4])+(e=s[1]/u)*(o=s[5])+(n=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=n,t[3]=r,t[4]=(h-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-n*l)/u,t[7]=(s-r*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Be=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mn*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mn*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-c)<=Mn*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=Mn*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=Mn*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=Mn*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mn*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new xn(2);return xn!=Float32Array&&(t[0]=0,t[1]=0),t},Ne=function(t){var s=new xn(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new xn(2);return i[0]=t,i[1]=s,i},Ve=function(t,s){return t[0]=s[0],t[1]=s[1],t},je=function(t,s,i){return t[0]=s,t[1]=i,t},He=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ze=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},tn=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sn=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},en=function(t){var s=t[0];return Math.hypot(s,t[1])},nn=function(t){var s=t[0];return s*s+(t=t[1])*t},rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},hn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},on=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},an=function(t,s){return t[0]*s[0]+t[1]*s[1]},ln=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},un=function(t,s,i,e){var n=s[0],s=s[1];return t[0]=n+e*(i[0]-n),t[1]=s+e*(i[1]-s),t},cn=function(t,s){s=s||1;var i=2*On()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},fn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},dn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},pn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},mn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},gn=function(t,s,i,e){var n=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=n*e-s*r+i[0],t[1]=n*r+s*e+i[1],t},yn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],n=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(n&&(i*e+t*s)/n,-1),1))},wn=function(t){return t[0]=0,t[1]=0,t},Sn=function(t){return"vec2("+t[0]+", "+t[1]+")"},vn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mn*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))};n,p,f,a,d,l,m,g,y,w,S,v,x,T,_,G,I,C,P,E,A,R,F,D,O,Mn=1e-6,xn="undefined"!=typeof Float32Array?Float32Array:Array,On=Math.random,kn="zyx",Ln=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Bn={__proto__:null,EPSILON:Mn,get g(){return xn},S:On,M:kn,T:k,_:L,equals:B},Nn=Object.freeze({__proto__:null,create:N,clone:W,G:V,identity:j,I:H,set:U,C:z,P:J,A:q,R:$,multiply:t,rotate:X,scale:Y,F:Z,D:K,O:Q,L:tt,B:st,add:it,N:s,W:et,equals:nt,V:rt,j:ht,mul:t,sub:s}),Wn=Object.freeze({__proto__:null,create:ot,clone:at,G:lt,identity:ut,I:ct,set:ft,P:dt,R:pt,multiply:i,rotate:mt,scale:gt,translate:yt,F:wt,D:St,H:vt,O:bt,L:Mt,add:xt,N:e,V:Tt,j:_t,W:Gt,equals:It,mul:i,sub:e}),Vn=Object.freeze({__proto__:null,create:n,U:Ct,clone:Pt,G:Et,I:At,set:Rt,identity:Ft,C:Dt,P:Ot,A:kt,R:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,H:Vt,F:jt,D:Ht,J:Ut,$:zt,X:Jt,Y:qt,O:$t,L:Xt,add:Yt,N:h,V:Zt,j:Kt,W:Qt,equals:ts,mul:r,sub:h}),Tn=Object.freeze({__proto__:null,create:ss,clone:is,G:es,I:ns,set:rs,identity:p,C:hs,P:os,A:as,R:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,K:ps,tt:ms,H:gs,D:ys,F:ws,it:Ss,et:vs,nt:bs,ht:f,ot:Ms,lt:a,ut:d,ct:l,gt:xs,yt:Ts,St:_s,$:Gs,vt:Is,bt:u,perspective:u,Mt:Cs,xt:Ps,Tt:c,ortho:c,_t:Es,Gt:As,It:Rs,O:Fs,L:Ds,add:Os,N:ks,V:Ls,j:Bs,W:Ns,equals:Ws,mul:o,sub:ks}),Yn=Js,Qn=qs,Un=$s,tr=ii,sr=ei,jn=js,ir=ni,Dn=m(),_n=Object.freeze({__proto__:null,create:m,clone:Vs,length:js,I:g,G:Hs,set:Us,add:zs,N:Js,multiply:qs,Ct:$s,ceil:Xs,floor:Ys,min:Zs,max:Ks,round:Qs,scale:ti,Pt:si,Et:ii,At:ei,Rt:ni,Ft:ri,inverse:hi,normalize:y,Dt:w,Ot:S,kt:oi,Lt:ai,Bt:li,Nt:ui,random:ci,Wt:fi,Vt:di,jt:pi,Z:mi,K:gi,tt:yi,angle:wi,Ht:Si,O:vi,W:bi,equals:Mi,sub:Yn,mul:Qn,div:Un,Ut:tr,zt:sr,Jt:jn,qt:ir,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Dn[0]=t[h],Dn[1]=t[h+1],Dn[2]=t[h+2],n(Dn,Dn,r),t[h]=Dn[0],t[h+1]=Dn[1],t[h+2]=Dn[2];return t}}),Yn=Ci,Qn=Pi,Un=Ei,tr=Bi,sr=Ni,ir=b,er=M,Fn=v(),Hn=Object.freeze({__proto__:null,create:v,clone:xi,I:Ti,G:_i,set:Gi,add:Ii,N:Ci,multiply:Pi,Ct:Ei,ceil:Ai,floor:Ri,min:Fi,max:Di,round:Oi,scale:ki,Pt:Li,Et:Bi,At:Ni,length:b,Rt:M,Ft:Wi,inverse:Vi,normalize:ji,Dt:x,Ot:Hi,kt:Ui,random:zi,Wt:Ji,jt:qi,Ht:$i,O:Xi,W:Yi,equals:Zi,sub:Yn,mul:Qn,div:Un,Ut:tr,zt:sr,Jt:ir,qt:er,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Fn[0]=t[h],Fn[1]=t[h+1],Fn[2]=t[h+2],Fn[3]=t[h+3],n(Fn,Fn,r),t[h]=Fn[0],t[h+1]=Fn[1],t[h+2]=Fn[2],t[h+3]=Fn[3];return t}}),Yn=xi,Qn=Ti,Un=_i,tr=Gi,sr=Ii,ir=se,zn=ki,Jn=x,er=Ui,nr=qn=b,rr=$n=M,Xn=ji,hr=Yi,En=m(),An=g(1,0,0),Rn=g(0,1,0),or=function(t,s,i){var e=w(s,i);return e<-.999999?(S(En,An,s),jn(En)<1e-6&&S(En,Rn,s),y(En,En),_(t,En,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(En,s,i),t[0]=En[0],t[1]=En[1],t[2]=En[2],t[3]=1+e,Xn(t,t))},Cn=T(),Pn=T(),ar=function(t,s,i,e,n,r){return A(Cn,s,n,r),A(Pn,i,e,r),A(t,Cn,Pn,2*r*(1-r)),t},In=n(),Yn=Object.freeze({__proto__:null,create:T,identity:Ki,$t:_,Xt:Qi,Yt:te,multiply:se,Z:G,K:I,tt:C,Zt:ie,exp:P,Kt:E,pow:ee,Lt:A,random:ne,P:re,Qt:he,ts:R,es:oe,O:ae,clone:Yn,I:Qn,G:Un,set:tr,add:sr,mul:ir,scale:zn,Dt:Jn,kt:er,length:qn,Jt:nr,Rt:$n,qt:rr,normalize:Xn,W:hr,equals:le,ns:or,rs:ar,hs:function(t,s,i,e){return In[0]=i[0],In[3]=i[1],In[6]=i[2],In[1]=e[0],In[4]=e[1],In[7]=e[2],In[2]=-s[0],In[5]=-s[1],In[8]=-s[2],Xn(t,R(t,In))}}),Zn=Jn,Qn=Kn=$n,tr=Object.freeze({__proto__:null,create:ue,clone:ce,I:fe,os:de,ht:F,H:pe,F:me,U:ge,G:D,identity:ye,set:we,ls:Un,us:Se,cs:Un,ds:ve,lt:be,translate:Me,Z:xe,K:Te,tt:_e,gs:Ge,ys:Ie,ws:Ce,add:Pe,multiply:Ee,mul:Ee,scale:Ae,Dt:Zn,kt:Re,P:Fe,Qt:De,length:qn,Jt:qn,Rt:Kn,qt:Qn,normalize:Oe,O:ke,W:Le,equals:Be}),sr=en,ir=Ue,er=ze,nr=Je,rr=tn,hr=sn,or=nn,Gn=O(),ar=Object.freeze({__proto__:null,create:O,clone:Ne,I:We,G:Ve,set:je,add:He,N:Ue,multiply:ze,Ct:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ze,scale:Ke,Pt:Qe,Et:tn,At:sn,length:en,Rt:nn,Ft:rn,inverse:hn,normalize:on,Dt:an,Ot:ln,kt:un,random:cn,Ss:fn,vs:dn,Vt:pn,Wt:mn,rotate:gn,angle:yn,Ht:wn,O:Sn,W:vn,equals:bn,Jt:sr,sub:ir,mul:er,div:nr,Ut:rr,zt:hr,qt:or,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Gn[0]=t[h],Gn[1]=t[h+1],n(Gn,Gn,r),t[h]=Gn[0],t[h+1]=Gn[1];return t}}),globalThis.bs=Bn,globalThis.bs.Ms=Nn,globalThis.bs.xs=Wn,globalThis.bs.Ts=Vn,globalThis.bs._s=Tn,globalThis.bs.Gs=Yn,globalThis.bs.Is=tr,globalThis.bs.Cs=ar,globalThis.bs.Ps=_n,globalThis.bs.Es=Hn}var Gn,In,Cn,Pn,En,An,Rn,Fn,Dn,Mn,xn,On,kn,Ln,Bn,Nn,Wn,Vn,Tn,jn,_n,Hn,Un,zn,Jn,qn,$n,Xn,Yn,Zn,Kn,Qn,tr,sr,ir,er,nr,rr,hr,or,ar,D,O,k,L;{let a=function(t,s,i){var e=[0,0],n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=n*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=h*s[0][0]+o*s[0][1],a=n*o-h*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(n*s-h*t)/a),e},n=function(t,s,i,e){var n,r=s[0]-t[0],s=s[1]-t[1],h=e[0]-i[0];return h*s-(e=e[1]-i[1])*r!=0&&(n=(h*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-h*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(h*s-e*r)))&&t<=1&&0<=n&&n<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},T=function(t,s,i){return 0<=o(t,s,i)},_=function(t,s,i){return o(t,s,i)<0},G=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var n,r,h;return e?(h=O,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],h[0]=i[0]-s[0],h[1]=i[1]-s[1],n=r[0]*h[0]+r[1]*h[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(n/(r*h))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},h=function(t){t.length=0},P=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},E=function(t,s){return _(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,n=k,r=L;if(T(C(t,s+1),C(t,s),C(t,i))&&G(C(t,s-1),C(t,s),C(t,i)))return!1;for(var h=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&T(C(t,s),C(t,i),C(t,o+1))&&G(C(t,s),C(t,i),C(t,o))&&(n[0]=C(t,s),n[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(n,r),I(C(t,s),e)<h))return!1;return!0},A=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&n(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var n=e||[];if(h(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},f=function(t){for(var s=[],i=[],e=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(E(t,r))for(var h=0;h<t.length;++h)if(u(t,r,h)){for(var i=f(c(t,r,h,e)),o=f(c(t,h,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<n&&(n=(s=i).length,s.push([C(t,r),C(t,h)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=d(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return e=t.indexOf((n=s)[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(n(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(n(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},R=function(t,s,i,e,n){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],h=e[1]-i[1],e=i[0]-e[0],i=h*i[0]+e*i[1],o=r*e-h*s;return m(o,0,n=n||0)?[0,0]:[(e*t-s*i)/o,(r*i-h*t)/o]},F=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(!(v.length<3))if(r<++h)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var b=0;b<t.length;++b)if(E(S,b)){i.push(S[b]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,b-1),C(S,b),C(S,M))&&G(C(S,b-1),C(S,b),C(S,M-1))&&(l=R(C(S,b-1),C(S,b),C(S,M),C(S,M-1)),_(C(S,b+1),C(S,b),l))&&(f=I(S[b],l))<c&&(c=f,a=l,m=M),x(C(S,b+1),C(S,b),C(S,M+1))&&G(C(S,b+1),C(S,b),C(S,M))&&(l=R(C(S,b+1),C(S,b),C(S,M),C(S,M+1)),x(C(S,b-1),C(S,b),l))&&(f=I(S[b],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(P(y,S,b,p+1),y.push(l),w.push(l),0!==m&&P(w,S,m,S.length),P(w,S,0,b+1)):(0!==b&&P(y,S,b,S.length),P(y,S,0,p+1),y.push(l),w.push(l),P(w,S,m,b+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)T(C(S,b-1),C(S,b),C(S,M))&&G(C(S,b+1),C(S,b),C(S,M))&&(f=I(C(S,b),C(S,M)))<d&&A(S,b,M)&&(d=f,g=M%t.length);b<g?(P(y,S,b,g+1),0!==g&&P(w,S,g,v.length),P(w,S,0,b+1)):(0!==b&&P(y,S,b,v.length),P(y,S,0,g+1),P(w,S,g,b+1))}return y.length<w.length?(F(y,s,i,e,n,r,h),F(w,s,i,e,n,r,h)):(F(w,s,i,e,n,r,h),F(y,s,i,e,n,r,h)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],n=i-1;0<=n;--n)g(e,t[n],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,n,o,x,T,_,G,r,I,C,h,P,l,E,u,A,c,f,d,R,F,m,g,D=[],O=[],k=[],L=[],self.As={Rs:s,Fs:F,Ds:i,Os:e,ks:p,Ls:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),n=14,r=self.Bs=class{constructor(){throw TypeError("static class can't be instantiated")}static Ns(){if(n<=0)throw new Error("cannot obtain internal API token");return--n,e}static Ws(){t=!0}static Vs(){return t}static js(){s=!0}static Hs(){return s}static Us(t){i=t}static zs(){return i}static Js(){return"final"===i}};r.isDebug=!1,r.qs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.$s={}}{const s=self.Bs;s.Xs=class{constructor(t){this.Ys=t,this.Zs=new Map,this.Ks()}Ks(){let t=this.Ys,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Qs(i)}Qs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Zs.set(i,e)}else this.Zs.set(t,null)}ti(){for(const t of this.Zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}si(t){return this.Zs.has(t)}ei(t){const s=this.Zs.get(t);return void 0===s?null:s}ni(){history.replaceState("",document.title,location.pathname+location.search)}ri(t){this.Ys=t,this.Zs.clear(),this.Ks()}},s.hi=new s.Xs(location.search),s.oi=new s.Xs(location.hash),s.hi.si("perf")&&(s.ai=!0),"dev"!==s.hi.ei("mode")&&s.Us("final")}{let e=function(t){const s=parseFloat(t),i=V.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Bs,W="(unknown)",V=(a.li={ci:W,fi:W,di:W,mi:W,gi:NaN,yi:W,wi:"browser",Si:!0,vi:!1,bi:!1,Mi:!1,xi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),j=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",n="";for(const r of t){const h=U.get(r.brand),o=(!s&&h&&(s=h,i=r.version),z.get(r.brand));!e&&o&&(e=o,n=r.version)}s||"Chromium"!==e||(a.li.di="Chromium",a.li.mi=n),a.li.di=s||W,a.li.mi=i||W,a.li.yi=e||W};s,a.li.ci=H.platform,a.li.vi=H.mobile,a.li.Si=!a.li.vi;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.li.xi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.li.ci?a.li.fi=e(t.platformVersion):a.li.fi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const n=e.exec(j);if(n){s(n);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.li.ci="Windows";const s=t[1];a.li.fi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.li.ci="macOS",a.li.fi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.li.ci="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.li.ci="Linux"}),t(/android/i,()=>{a.li.ci="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.li.ci="Android",a.li.fi=t[1]}),a.li.ci===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.li.ci="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.li.ci="iOS",a.li.fi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(j),q=/chromium\//i.test(j),$=/edg\//i.test(j),X=/OPR\//.test(j),Y=/nwjs/i.test(j),Z=/safari\//i.test(j),K=/webkit/i.test(j),Q=($||X||t(/chrome\/([\d\.]+)/i,t=>{a.li.di="Chrome",a.li.mi=t[1],a.li.yi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.li.di="Edge",a.li.mi=t[1],a.li.yi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.li.di="Opera",a.li.mi=t[1],a.li.yi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.li.di="Chromium",a.li.mi=t[1],a.li.yi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.li.di="NW.js",a.li.mi=t[1],a.li.yi="Chromium",a.li.wi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.li.di="Firefox",a.li.mi=t[1],a.li.yi="Gecko"}),!Z||J||q||$||X||Y||(a.li.di="Safari",a.li.yi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.li.mi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.li.di="Chrome for iOS",a.li.mi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.li.di="Firefox for iOS",a.li.mi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.li.di="Edge for iOS",a.li.mi=t[1]})),a.li.yi===W&&K&&(a.li.yi="WebKit"),"Android"===a.li.ci&&"Safari"===a.li.di&&(a.li.di="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.li.ci)||"nwjs"===a.li.wi;a.li.Si=tt,a.li.vi=!tt}"Chrome"===a.li.di&&"browser"===a.li.wi&&/wv\)/.test(j)&&(a.li.wi="webview"),"nwjs"!==a.li.wi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.li.wi="webapp"),a.li.gi=parseFloat(a.li.mi);const i="macOS"===a.li.ci&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.li.ci="iOS",a.li.fi=a.li.mi,a.li.Si=!1,a.li.vi=!0,a.li.Mi=!0),a.li.bi="macOS"===a.li.ci||"iOS"===a.li.ci}{let h=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),h(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,n){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(n){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};h,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,n=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(n&&"InvalidStateError"===t.name)return et.delete(s),B(s,i,e,!1);throw t}}class ht{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(n,r){return e(n),s(this.name,async t=>{const s=t.objectStore(it).put(r,n),i=h(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=h(s),e=o(t),[,n]=await Promise.all([e,i]);return n})}delete(n){return e(n),s(this.name,async t=>{const s=t.objectStore(it).delete(n),i=h(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=h(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const n=t.objectStore(it).getAllKeys();s=h(n)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(nt){const n=t.objectStore(it).getAll();s=h(n)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Ti=ht}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},n=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,n;const ot=self.Ti,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this._i=t,this.Gi=!this._i,this.Gi||"undefined"!=typeof indexedDB||(this.Gi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ii=new Map}Ci(t){if(!this.Gi)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Gi=!0;break}}async Pi(t){const s=this.Ii.get(t),i=await n(s);return void 0===i?null:i}async Ei(t,s){s=await n(s),this.Ii.set(t,s)}Ai(t){this.Ii.delete(t)}Ri(){this.Ii.clear()}Fi(){return Array.from(this.Ii.keys())}Di(){return this.Gi}Oi(){return this.Ii}ki(t){this.Ii=t}async getItem(s,t){if(e(t),this.Gi)return this.Pi(s);let i;try{i=await this._i.get(s)}catch(t){return this.Ci(t),this.Gi?this.Pi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Gi)await this.Ei(s,i);else try{await this._i.set(s,i)}catch(t){if(this.Ci(t),!this.Gi)throw t;await this.Ei(s,i)}}async removeItem(s,t){if(e(t),this.Gi)this.Ai(s);else try{await this._i.delete(s)}catch(t){this.Ci(t),this.Gi?this.Ai(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Gi)this.Ri();else try{await this._i.clear()}catch(t){this.Ci(t),this.Gi?this.Ri():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Gi)return this.Fi();let s=[];try{s=await this._i.keys()}catch(t){if(this.Ci(t),this.Gi)return this.Fi();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Gi?Promise.resolve(!0):this._i.ready()}Li(t){if(t.Bi)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Ni(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Wi(t){i("localforage.defineDriver()")}Vi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Bs;if(e.ji={},e.ji.Hi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.ji.Ui="undefined"!=typeof HTMLDialogElement,e.ji.Ji=!!self.requestIdleCallback,e.ji.ImageBitmap=!!self.createImageBitmap,e.ji.ImageBitmapOptions=!1,e.ji.$i=!1,e.ji.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.ji.ImageBitmapOptions=!0}).catch(()=>{e.ji.ImageBitmapOptions=!1})}catch(t){e.ji.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.ji.$i=10===t.width&&10===t.height}).catch(()=>{e.ji.$i=!1})}catch(t){e.ji.$i=!1}}if(e.ji.Xi=!(!navigator.clipboard||!navigator.clipboard.readText),e.ji.Yi=!(!navigator.permissions||!navigator.permissions.query),e.ji.Zi=!1,e.ji.Yi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.ji.Zi=!0}).catch(()=>{e.ji.Zi=!1})}e.ji.Ki=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.ji.Qi="undefined"!=typeof Proxy,e.ji.te=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.ji.ie="function"==typeof fetch,e.ji.ne=!!(self.isSecureContext&&"Opera"!==e.li.di&&navigator.storage&&navigator.storage.persist),e.ji.re=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.ji.he=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.li.ci)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.ji.ImageDecoder=void 0!==self.ImageDecoder,e.ji.oe=!!self.VideoEncoder,e.ji.ae=!!self.showOpenFilePicker,e.ji.le=!!self.queryLocalFonts,e.ji.UserActivation=!!navigator.userActivation,e.ji.ue=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.ji.ue=i&&"image/webp"===i.type}catch(t){e.ji.ue=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Bs;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.fe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.de||(Set.prototype.de=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.pe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Bs;self.assert=function(t,s){t||i(s)}}{const n=self.Bs,mt=self.$s,gt=(n.me=function(t){return"number"==typeof t},n.ge=function(t){return n.me(t)&&isFinite(t)},n.ye=function(t){if(!n.me(t))throw new TypeError("expected number")},n.we=function(t){n.Se(t)},n.ve=function(t,s,i){if(!n.me(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},n.Me=function(...s){for(let t of s);},n.xe=function(t){if(!n.ge(t))throw new TypeError("expected finite number")},n.Te=function(t){n.Se(t)},n._e=function(...s){for(let t of s);},n.Ge=function(t){return"string"==typeof t},n.Ie=function(t){if(!n.Ge(t))throw new TypeError("expected string")},n.Ce=function(t){n.Se(t)},n.Pe=function(...s){for(let t of s);},n.Ee=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},n.Ae=function(t){if(!n.Ee(t))throw new TypeError("expected simple object")},n.Re=function(t){if(!n.Se(t)&&!n.Ee(t))throw new TypeError("expected simple object")},n.Fe=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},n.De=function(t){if(!n.Fe(t))throw new TypeError("expected object")},n.Oe=function(t){n.Se(t)},n.ke=function(...s){for(let t of s);},n.Le=function(t){return n.Be(t,Blob)&&"string"==typeof t.name},n.Ne=function(t){if(!n.Le(t))throw new TypeError("expected file")},n.We=function(t){n.Se(t)},n.Ve=function(t){return Array.isArray(t)},n.je=function(t){if(!n.Ve(t))throw new TypeError("expected array")},n.He=function(t){n.Se(t)},n.Ue=function(...s){for(let t of s);},n.Je=function(t){return!(!n.Ve(t)||t.length&&!n.Ve(t[0]))},n.qe=function(s){if(!n.Je(s))throw new TypeError("expected 2d array");for(let t of s)if(!n.Ve(t))throw new TypeError("expected 2d array")},n.$e=function(t){n.Se(t)},n.Xe=function(t){return"function"==typeof t},n.Ye=function(t,s){if(!n.Xe(t))throw new TypeError("expected function");if(!n.Se(s)&&t!==s)throw new TypeError("expected same function reference")},n.Ze=function(t){n.Se(t)},n.Ke=function(...s){for(let t of s);},n.Qe=function(s,...i){if(!n.Xe(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!n.Se(t)&&s===t)return;throw new TypeError("expected same function reference")},n.tn=function(...s){if(!n.Se(s))for(let t of s);},n.sn=function(t,s){return t instanceof s},n.nn=function(s,...i){for(let t of i)if(n.sn(s,t))return!0;return!1},n.rn=function(t,s){if(!n.sn(t,s))throw new TypeError("unexpected type")},n.hn=function(t,s){n.Se(t)},n.an=function(t,...s){for(let t of s);},n.ln=function(t,...s){if(!n.nn(t,...s))throw new TypeError("unexpected type")},n.un=function(t,...s){if(!n.Se(t)&&!n.nn(t,...s))throw new TypeError("unexpected type")},n.cn=function(s,i){for(let t of s)if(!n.sn(t,i))return!1;return!0},n.dn=function(s){for(let t of s)if(!n.ge(t))return!1;return!0},n.pn=function(s,t){for(let t of s);},n.mn=function(s,t){if(!n.Se(s))for(let t of s);},n.gn=function(s,t){if(!n.Se(s))for(let t of s);},n.yn=function(s){for(let t of s);},n.wn=function(s){if(!n.Se(s))for(let t of s);},n.Sn=function(t,s){return!(n.Se(t)||!n.Ge(t.nodeName))&&(!s||n.vn(t.nodeName,s))},n.bn=function(t,s){if(n.Se(t)||!n.Ge(t.nodeName))throw new TypeError("expected DOM node");if(s&&!n.vn(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},n.Mn=function(t,s){n.Se(t)},n.xn=function(t,s){return!(n.Se(t)||!n.Ge(t.tagName))&&(!s||n.vn(t.tagName,s))},n.Tn=function(t,s){if(n.Se(t)||!n.Ge(t.tagName))throw new TypeError("expected HTML element");if(s&&!n.vn(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},n._n=function(t,s){n.Se(t)},n.Gn=function(t){return n.xn(t,"img")||n.xn(t,"canvas")||n.xn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},n.In=function(t){if(!n.Gn(t))throw new TypeError("expected drawable")},n.Cn=function(t){n.Se(t)},n.Pn=function(t){return t instanceof ImageData||n.Gn(t)},n.En=function(t){if(!n.Pn(t))throw new TypeError("expected drawable or image data")},n.An=function(t){if(!n.Se(t)&&!n.Pn(t))throw new TypeError("expected drawable or image data")},n.Rn=function(t){return"string"==typeof t||n.HtmlString&&t instanceof n.HtmlString||t instanceof n.Fn},n.Dn=function(t){if(!n.Rn(t))throw new TypeError("expected string-like")},n.On=function(t){n.Se(t)},n.kn=function(...s){for(let t of s);},n.Ln=function(){throw new Error("must be overridden")},n.Bn=function(){throw new Error("not yet implemented")},n.Nn=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},n.Se=function(t){return null==t},n.Wn=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},n.Vn=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));n.jn=function(t){return n.sn(t,gt)},n.Hn=function(t){},n.Un=function(t){n.zn(t,gt)},n.Jn=function(t,...s){if(!n.qn(t,...s))throw new TypeError("unexpected type")},n.qn=function(t,...s){for(const i of s)if(n.Be(t,i))return!0;return!1},n.zn=function(t,s){if(!n.Be(t,s))throw new TypeError("unexpected type")},n.Be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.ye=n.ye,mt.we=n.we,mt.xe=n.xe,mt.Te=n.Te,mt.Ie=n.Ie,mt.Ce=n.Ce,mt.De=n.De,mt.Oe=n.Oe,mt.je=n.je,mt.He=n.He,mt.Ye=n.Ye,mt.Ze=n.Ze,mt.rn=n.rn,mt.hn=n.hn,mt.Se=n.Se}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},n=function(t){console.warn("[Defence] "+t+" @",p.pe())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.$n(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},h=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Xn(s,[...i]),s.length&&console.warn(`[Defence] '${p.$n(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,n,i,r,h;const p=self.Bs,yt=new Map;p.Yn=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Zn=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.Kn=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Qn:0,tr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Qn.toPrecision(3)} :: calls => `+this.tr}})},p.ir=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Qn=i.total/i.tr,console.log(i.toString()),i.tr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.pe=function(){return(new Error).stack},p.er=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.$n=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.me(t)?"<number>":p.Ge(t)?"<string>":p.Ve(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Xe(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.nr={};const wt=new Set(["then","splice"]);p.nr.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||n(`Accessed missing property '${s}' from defended object '${p.$n(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&n(`Accessed property '${s}' on a released object '${p.$n(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.nr.set=function(t,s,i){return s in t||a.has(t)||n(`Set non-existent property '${s}' to '${i}' on defended object '${p.$n(t)}'`),e(t[s],i)||a.has(t)||n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.$n(t)}'`),c.has(t)&&n(`Set property '${s}' on a released object '${p.$n(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.nr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.$n(t)}'`)},p.nr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.$n(t)}'`)},p.nr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.$n(t)}'`)};let f=-1,d=(p.rr=class{constructor(){if(p.qs&&p.ji.Qi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.nr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.hr=function(s){if(p.qs&&p.ji.Qi&&s instanceof p.rr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.lr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.qs&&h(t,i),p.hr(i)},p.ur=function(t){let s=u.get(t);s&&c.set(s,p.pe())},p.cr=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.dr=class{constructor(t){this.pr="",t&&this.start(t)}start(t){p.ai&&(this.pr=t,performance.mark(this.pr+"-Start"))}end(){p.ai&&(performance.mark(this.pr+"-End"),performance.measure(this.pr,this.pr+"-Start",this.pr+"-End"))}next(t){p.ai&&(this.end(),this.pr=t,performance.mark(this.pr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Bs,St=2*Math.PI,vt=Math.PI/180,bt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},y.mr=function(t,s,i,e,n){const r=i-s;if(0==r&&0===e)return t;const h=n-e;return(t-s)*h/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.gr=function(t,s,i){return t<s?s:i<t?i:t},y.yr=function(t){return(t%=St)<0&&(t+=St),t},y.Sr=function(t){return t*vt},y.vr=function(t){return t*bt},y.br=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.Mr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},y.Tr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y._r=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s),h=i*n+e*r;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},y.Gr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?0<n*r-e*h?y.yr(t+i):y.yr(t-i):y.yr(s)},y.Ir=function(t,s){let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return e*n-i*r<=0},y.Cr=function(t,s,i,e=0){let n=y._r(t,s),r=St*e;return y.Ir(s,t)?y.yr(t+(n+r)*i):y.yr(t-(n+r)*i)},y.Pr=function(t,s,i,e=0){const n=y._r(t,s),r=St*e;return y.Ir(s,t)?y.yr(t+(n+r)*i):y.yr(t+(St-n+r)*i)},y.Er=function(t,s,i,e=0){const n=y._r(t,s),r=St*e;return y.Ir(s,t)?y.yr(t-(-St+n-r)*i):y.yr(t-(n+r)*i)},y.Ar=function(t,s){const i=y._r(t,s);return y.Ir(t,s)?y.yr(s-i):y.yr(s+i)},y.kt=function(t,s,i){return t+i*(s-t)},y.Rr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Fr=function(t,s,i,e,n){return y.kt(e,n,y.Rr(t,s,i))},y.Dr=function(t,s,i,e){return y.kt(y.kt(t,s,e),y.kt(s,i,e),e)},y.Or=function(t,s,i,e,n){return y.kt(y.Dr(t,s,i,n),y.Dr(s,i,e,n),n)},y.kr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Lr=function(t){return 0<t&&0==(t-1&t)},y.Br=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Nr=function(t,s){return Math.round(t*s)/s},y.Wr=function(t,s){return Math.floor(t*s)/s},y.Vr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.jr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Hr=function(t,s,i){return y.gr(t,0,255)|y.gr(s,0,255)<<8|y.gr(i,0,255)<<16},1024),xt=16384,Tt=8191,_t=(y.Ur=function(t,s,i,e){return t=y.gr(Math.floor(1024*t),-8192,Tt),s=y.gr(Math.floor(1024*s),-8192,Tt),i=y.gr(Math.floor(1024*i),-8192,Tt),e=y.gr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*Mt+s*xt*Mt+i*Mt+e)},y.zr=function(t,s,i){return y.Ur(t,s,i,1)},y.Jr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*Mt));return t>Tt&&(t-=xt),t/1024}},y.qr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*Mt)/(xt*Mt));return t>Tt&&(t-=xt),t/1024}},y.$r=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*Mt)/Mt);return t>Tt&&(t-=xt),t/1024}},y.Xr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.Yr=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Zr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of _t){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Yr(i,e);return[i/t,e/t]},y.Kr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},y.Qr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<n)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<h)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},y.th=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.ih(),u=n.eh(),c=n.nh(),f=n.rh(),d=n.hh(),p=n.oh(),m=n.ah(),g=n.lh();return y.Qr(t,s,i,e,r,h,o,a,l,u,c,f)||y.Qr(t,s,i,e,r,h,o,a,c,f,d,p)||y.Qr(t,s,i,e,r,h,o,a,d,p,m,g)||y.Qr(t,s,i,e,r,h,o,a,m,g,l,u)},y.uh=function(s,i,e,n,r){let h=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,n),l=Math.max(i,n),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.Qr(s,i,e,n,h,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.Qr(s,i,e,n,h,o,a,l,r[u],r[u+1],r[0],r[1])};y.fh=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(h-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(h-t)+(n-h)*(o-s))/f:2},y.ph=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return y.fh(t,s,i,e,n-l,r-u,h+l,o+u)},y.mh=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return 0<=v&&0<=b&&v+b<=1},y.gh=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S,M=1-v-b;return[M,v,b]},y.yh=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Bs,s=null,i="";if("undefined"!=typeof document){const Gt=(s=document).querySelector("base");(i=Gt&&Gt.hasAttribute("href")?Gt.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.wh=function(){return i},l.Sh=function(){if(!s)return"";const t=s.location;return l.bh(t.origin+t.pathname)+i},l.bh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Mh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.xh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Th=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l._h=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Gh=function(t){return t.replace(/\\/g,"/")},l.Ih=function(t,s){const i=t?l.xh(t).slice(1):"";return s===i},l.Ch=function(t,s){let i,e;return l.Le(t)&&(i=l._h(t.name)),l.Ge(t)&&(i=l._h(t)),l.Le(s)&&(e=l._h(s.name)),l.Ge(s)&&(e=l._h(s)),i===e},l.Ph=function(t){t=l.Gh(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",n=t,r,h="";0<i&&(e=t.slice(0,i),n=t.slice(i));const o=(r=n).lastIndexOf("."),a=(0<o&&(h=n.slice(o),r=n.slice(0,-h.length)),s+e+n);return{dir:e,Eh:n,name:r,root:s,ext:h,Ah:a}},l.Rh=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Fh=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Dh=function(){},l.vn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Oh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.kh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Lh=function(t,s){t.length=s},l.Bh=function(t){t&&0!==t.length&&l.Lh(t,0)},l.Nh=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Lh(t,0)}l.Lh(i,0)}},l.Wh=function(s,i,e){const n=s.length;if(!((i|=0)<=n))for(let t=n;t<i;++t)s.push(e)},l.Vh=function(t,s,i){const e=t.length;(s|=0)<e?l.Lh(t,s):e<s&&l.Wh(t,s,i)},l.jh=function(t,s){l.Bh(t),l.Xn(t,s)},l.Xn=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Hh=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Lh(i,s)}},l.Uh=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.zh=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Jh=function(i,e){let n=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?n.push(t):(i[r]=t,++r)}return l.Lh(i,r),n},l.qh=function(i,e){let t=i.length,n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[n++]=t)}return l.Lh(i,n),t-n},l.$h=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Xh=function(t,s){if(!l.$h(t,s))throw new RangeError("array index out of bounds")},l.Yh=function(t){return t.slice()},l.Zh=function(t,i){let e=[];for(let s of t)if(l.Fe(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ve(s)?e.push(l.Zh(s,i)):e.push(s);return e},l.Kh=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.Qh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.io=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},l.eo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.no=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.ro=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.ho=function(o,a){return o.length?new Promise((i,e)=>{let n=[],r=0,h=!1;for(let s=0,t=o.length;s<t;++s)n.push(void 0),o[s].then(t=>{h||(n[s]=t,++r===o.length?i(n):a(r,o.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let e=[],n=(l.ao=function(t){e.push(t)},l.lo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,h=new MessageChannel,o=(h.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.uo=function(t){const s=n++;return r.set(s,t),h.port1.postMessage(s),s},l.co=function(t){r.delete(t)},l.fo=l.uo,l.do=function(){return new Promise(t=>l.fo(t))},new Set);l.po=function(s){const i=self.requestAnimationFrame(async t=>{await l.do(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.yo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Bs;r.wo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.So=function(t){return!r.wo(t)},r.vo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.bo=function(t,s){return fetch(t,s).then(t=>(r.vo(t),t))},r.Mo=function(t){return r.bo(t).then(t=>t.text())},r.xo=function(t){return r.bo(t).then(t=>t.json())},r.To=function(t){return r.bo(t).then(t=>t.blob())},r._o=function(t){return r.bo(t).then(t=>t.arrayBuffer())},r.Go=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Io=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Co=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Po=function(t){return r.Co(t).then(t=>JSON.parse(t))},r.Eo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Go(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Ao=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Ro=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.gr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Fo=function(t,s,i){const e=r.Ao(t.width,t.height),n=e.getContext("2d");return n.drawImage(t,0,0),r.Ro(e,s,i)},r.Do=function(t,s,i){if(r.ji.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Fo(t,s,i));if(r.ji.ImageBitmap)return createImageBitmap(t).then(t=>r.Fo(t,s,i));{const e=r.Ao(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),r.Ro(e,s,i)}},r.Oo=function(t,s){t.clear();for(const i of s)t.add(i)},r.ko=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Lo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Bo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}},r.No=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}}return t},r.Wo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?0<e&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},r.Vo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.jo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Bs,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Ho=class{constructor(t,s,i,e){this.Uo=NaN,this.zo=NaN,this.Jo=NaN,this.qo=NaN,this.Uo=0,this.zo=0,this.Jo=0,this.qo=0,t instanceof u.Ho?this.set(t):this.$o(t||0,s||0,i||0,e||0)}Xo(t,s,i){return this.Uo=+t,this.zo=+s,this.Jo=+i,this.gr(),this}$o(t,s,i,e){return this.Uo=+t,this.zo=+s,this.Jo=+i,this.qo=+e,this.gr(),this}set(t){return this.Uo=t.Uo,this.zo=t.zo,this.Jo=t.Jo,this.qo=t.qo,this}G(t){return this.set(t)}add(t){this.Uo+=t.Uo,this.zo+=t.zo,this.Jo+=t.Jo,this.qo+=t.qo,this.gr()}Yo(t,s,i,e=0){this.Uo+=+t,this.zo+=+s,this.Jo+=+i,this.qo+=+e,this.gr()}Zo(t){this.Ko(Math.max(this.Uo,t.Uo)-Math.min(this.Uo,t.Uo)),this.Qo(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.ta(Math.max(this.Jo,t.Jo)-Math.min(this.Jo,t.Jo)),this.ia(Math.max(this.qo,t.qo)-Math.min(this.qo,t.qo)),this.gr()}ea(t){this.Uo=t.Uo,this.zo=t.zo,this.Jo=t.Jo}Ko(t){this.Uo=u.gr(+t,0,1)}na(){return this.Uo}Qo(t){this.zo=u.gr(+t,0,1)}ra(){return this.zo}ta(t){this.Jo=u.gr(+t,0,1)}oa(){return this.Jo}ia(t){this.qo=u.gr(+t,0,1)}aa(){return this.qo}clone(){return u.lr(u.Ho,this.Uo,this.zo,this.Jo,this.qo)}toArray(){return[this.Uo,this.zo,this.Jo,this.qo]}la(){return new Float64Array(this.toArray())}ua(t,s){t[s++]=this.Uo,t[s++]=this.zo,t[s++]=this.Jo,t[s]=this.qo}ca(t,s){t[s++]=this.Uo,t[s++]=this.zo,t[s]=this.Jo}equals(t){return this.Uo===t.Uo&&this.zo===t.zo&&this.Jo===t.Jo&&this.qo===t.qo}fa(t){return this.Uo===t.Uo&&this.zo===t.zo&&this.Jo===t.Jo}ma(t,s,i){return this.Uo===t&&this.zo===s&&this.Jo===i}ga(t,s,i,e){return this.Uo===t&&this.zo===s&&this.Jo===i&&this.qo===e}ya(t,s){return t[s]===Math.fround(this.Uo)&&t[s+1]===Math.fround(this.zo)&&t[s+2]===Math.fround(this.Jo)&&t[s+3]===Math.fround(this.qo)}wa(t,s){return t[s]===Math.fround(this.Uo)&&t[s+1]===Math.fround(this.zo)&&t[s+2]===Math.fround(this.Jo)}multiply(t){this.Uo*=t.Uo,this.zo*=t.zo,this.Jo*=t.Jo,this.qo*=t.qo}Sa(t){this.Uo*=t,this.zo*=t,this.Jo*=t,this.qo*=t}ba(){return this.Uo*=this.qo,this.zo*=this.qo,this.Jo*=this.qo,this}Ma(){return this.Uo/=this.qo,this.zo/=this.qo,this.Jo/=this.qo,this}gr(){return this.Uo=u.gr(this.Uo,0,1),this.zo=u.gr(this.zo,0,1),this.Jo=u.gr(this.Jo,0,1),this.qo=u.gr(this.qo,0,1),this}xa(t){this.Uo=u.Jr(t),this.zo=u.qr(t),this.Jo=u.$r(t),this.qo=u.Xr(t)}Ta(t,s,i){const e=u.ge(t)?t:this.na(),n=u.ge(s)?s:this.ra(),r=u.ge(i)?i:this.oa();return`rgb(${100*e}%, ${100*n}%, ${100*r}%)`}_a(t,s,i,e){const n=u.ge(t)?t:this.na(),r=u.ge(s)?s:this.ra(),h=u.ge(i)?i:this.oa(),o=u.ge(e)?e:this.aa();return`rgba(${100*n}%, ${100*r}%, ${100*h}%, ${o})`}Ga(){const t=Math.round(255*this.na()),s=Math.round(255*this.ra()),i=Math.round(255*this.oa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Ia(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Ko(s),isFinite(i)&&this.Qo(i),isFinite(e)&&this.ta(e),this.ia(1),!0}Ca(){const t=Math.round(255*this.na()),s=Math.round(255*this.ra()),i=Math.round(255*this.oa());return t+`, ${s}, `+i}Pa(){const t=Math.round(255*this.na()),s=Math.round(255*this.ra()),i=Math.round(255*this.oa());return[t,s,i]}Ea(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ko(i),isFinite(e)&&this.Qo(e),isFinite(n)&&this.ta(n),this.ia(1),!0}Aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ko(i),isFinite(e)&&this.Qo(e),isFinite(n)&&this.ta(n),this.ia(1),!0}Ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ko(i),isFinite(e)&&this.Qo(e),isFinite(n)&&this.ta(n),isFinite(r)&&this.ia(r),!0}Fa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ko(i),isFinite(e)&&this.Qo(e),isFinite(n)&&this.ta(n),isFinite(r)&&this.ia(r),!0}Da(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Aa(t):this.Ea(t);if(t.startsWith("rgba("))return t.includes("%")?this.Fa(t):this.Ra(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Oa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Aa(t):4===s.length&&this.Fa(t):3===s.length?this.Ea(t):4===s.length&&this.Ra(t)}}return this.Ia(t)}toJSON(){return[this.Uo,this.zo,this.Jo,this.qo]}ka(t,s,i,e){let n,r,h;if(t%=360,s=u.gr(s,0,100),i=u.gr(i,0,100),e=u.gr(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;n=l(a,o,t+1/3),r=l(a,o,t),h=l(a,o,t-1/3)}return this.Ko(n),this.Qo(r),this.ta(h),this.ia(e),this}Oa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.ka(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ka(+i[1],+i[2],+i[3],+i[4]),0))}La(){const t=this.Uo,s=this.zo,i=this.Jo,e=this.qo,n=u.Ho.Ba(t,s,i),r=u.Ho.Na(t,s,i),h=u.Ho.Wa(t,s,i);return`hsla(${n}, ${r}%, ${h}%, ${e})`}Va(){const t=this.Uo,s=this.zo,i=this.Jo;return[u.Ho.Ba(t,s,i),u.Ho.Na(t,s,i),u.Ho.Wa(t,s,i),this.qo]}ja(t){!Array.isArray(t)||t.length<3||(this.Uo=t[0],this.zo=t[1],this.Jo=t[2],this.qo=4<=t.length?t[3]:1)}set r(t){this.Ko(t)}get r(){return this.na()}set Ha(t){this.Qo(t)}get Ha(){return this.ra()}set b(t){this.ta(t)}get b(){return this.oa()}set a(t){this.ia(t)}get a(){return this.aa()}Ua(t,s){switch(t){case 0:this.Ko(s);break;case 1:this.Qo(s);break;case 2:this.ta(s);break;case 3:this.ia(s);break;default:throw new RangeError("invalid color index")}}za(t){switch(t){case 0:return this.na();case 1:return this.ra();case 2:return this.oa();case 3:return this.aa();default:throw new RangeError("invalid color index")}}static Ja(t,s){let i,e;if(Array.isArray(t))(i=new u.Ho).ja(t);else{if(!(t instanceof u.Ho))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Ho).ja(s);else{if(!(s instanceof u.Ho))throw new Error("unexpected type");e=s}return i.equals(e)}static qa(t,s){return u.gr(Math.max(t,s)-Math.min(t,s),0,1)}static $a(t,s){const i=new u.Ho;return i.Ko(Math.max(t.Uo,s.Uo)-Math.min(t.Uo,s.Uo)),i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.ta(Math.max(t.Jo,s.Jo)-Math.min(t.Jo,s.Jo)),i.ia(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i}static Xa(t,s){const i=new u.Ho(0,0,0,1);return i.Ko(Math.max(t.Uo,s.Uo)-Math.min(t.Uo,s.Uo)),i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.ta(Math.max(t.Jo,s.Jo)-Math.min(t.Jo,s.Jo)),i}static Ba(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static Na(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=(e+n)/2,h=e-n,o=.5<r?h/(2-e-n):h/(e+n);return Math.round(100*o)}static Wa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i),r=(e+n)/2;return e?Math.round(100*r):0}},u.Ho.Ya=Object.freeze(u.lr(u.Ho,1,1,1,1)),u.Ho.Za=Object.freeze(u.lr(u.Ho,0,0,0,1)),u.Ho.Ka=Object.freeze(u.lr(u.Ho,0,0,0,0))}{const Pt=self.Bs;Pt.Qa=class{constructor(t,s){this.tl=0,this.sl=0,t instanceof Pt.Qa?this.G(t):this.set(t||0,s||0)}set(t,s){this.tl=+t,this.sl=+s}G(t){this.tl=t.tl,this.sl=t.sl}equals(t){return this.tl===t.tl&&this.sl===t.sl}il(t,s){return this.tl===t&&this.sl===s}ya(t,s){return t[s]===Math.fround(this.tl)&&t[s+1]===Math.fround(this.sl)}el(t){this.tl=+t}nl(){return this.tl}rl(t){this.sl=+t}hl(){return this.sl}toArray(){return[this.tl,this.sl]}la(){return new Float64Array(this.toArray())}ua(t,s){t[s++]=this.tl,t[s]=this.sl}offset(t,s){this.tl+=+t,this.sl+=+s}scale(t,s){this.tl*=t,this.sl*=s}Ct(t,s){this.tl/=t,this.sl/=s}round(){this.tl=Math.round(this.tl),this.sl=Math.round(this.sl)}floor(){this.tl=Math.floor(this.tl),this.sl=Math.floor(this.sl)}ceil(){this.tl=Math.ceil(this.tl),this.sl=Math.ceil(this.sl)}angle(){return Pt.Tr(0,0,this.tl,this.sl)}ol(){return this.tl*this.tl+this.sl*this.sl}length(){return Math.hypot(this.tl,this.sl)}al(t,s){const i=this.tl*s-this.sl*t;this.sl=this.sl*s+this.tl*t,this.tl=i}rotate(t){0!==t&&this.al(Math.sin(t),Math.cos(t))}ll(t,s,i){0===t||s===this.tl&&i===this.sl||(this.tl-=s,this.sl-=i,this.al(Math.sin(t),Math.cos(t)),this.tl+=+s,this.sl+=+i)}move(t,s){0!==s&&(this.tl+=Math.cos(t)*s,this.sl+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.tl/=t,this.sl/=t)}gr(t,s){this.tl=Pt.gr(this.tl,t,s),this.sl=Pt.gr(this.sl,t,s)}Dt(t){return this.tl*t.tl+this.sl*t.sl}reverse(){this.tl=-this.tl,this.sl=-this.sl}ul(){let t=this.tl;return this.tl=this.sl,this.sl=-t,this}}}{const Et=self.Bs;Et.Rect=class{constructor(t,s,i,e){this.cl=NaN,this.fl=NaN,this.dl=NaN,this.pl=NaN,this.cl=0,this.fl=0,this.dl=0,this.pl=0,t instanceof Et.Rect?this.G(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.cl=+t,this.fl=+s,this.dl=+i,this.pl=+e}ml(t,s,i,e){s=+s,this.cl=t=+t,this.fl=s,this.dl=t+ +i,this.pl=s+ +e}G(t){this.cl=+t.cl,this.fl=+t.fl,this.dl=+t.dl,this.pl=+t.pl}clone(){return new Et.Rect(this.cl,this.fl,this.dl,this.pl)}static gl(t,s){const i=new Et.Rect;return i.yl(Math.min(t.cl,s.cl)),i.wl(Math.min(t.fl,s.fl)),i.Sl(Math.max(t.dl,s.dl)),i.vl(Math.max(t.pl,s.pl)),i}static bl(t){return new Et.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.cl===t.cl&&this.fl===t.fl&&this.dl===t.dl&&this.pl===t.pl}Ml(t,s,i,e){return this.cl===t&&this.fl===s&&this.width()===i&&this.height()===e}ya(t,s){return t[s]===Math.fround(this.cl)&&t[s+1]===Math.fround(this.fl)&&t[s+2]===Math.fround(this.dl)&&t[s+3]===Math.fround(this.pl)}yl(t){this.cl=+t}xl(){return this.cl}wl(t){this.fl=+t}Tl(){return this.fl}Sl(t){this.dl=+t}_l(){return this.dl}vl(t){this.pl=+t}Gl(){return this.pl}toArray(){return[this.cl,this.fl,this.dl,this.pl]}la(){return new Float64Array(this.toArray())}Il(){return new DOMRect(this.cl,this.fl,this.width(),this.height())}static Cl(t){return Et.lr(Et.Rect,t.left,t.top,t.right,t.bottom)}ua(t,s){t[s++]=this.cl,t[s++]=this.fl,t[s++]=this.dl,t[s]=this.pl}Pl(t,s){t[s++]=this.cl,t[s++]=this.fl,t[s++]=this.dl,t[s++]=this.fl,t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.cl,t[s]=this.pl}El(t,s,i){t[s++]=this.cl,t[s++]=this.fl,t[s++]=i,t[s++]=this.dl,t[s++]=this.fl,t[s++]=i,t[s++]=this.dl,t[s++]=this.pl,t[s++]=i,t[s++]=this.cl,t[s++]=this.pl,t[s]=i}width(){return this.dl-this.cl}height(){return this.pl-this.fl}Al(){return(this.cl+this.dl)/2}Rl(){return(this.fl+this.pl)/2}offset(t,s){s=+s,this.cl+=t=+t,this.fl+=s,this.dl+=t,this.pl+=s}offsetLeft(t){this.cl+=+t}offsetTop(t){this.fl+=+t}Fl(t){this.dl+=+t}Dl(t){this.pl+=+t}Ol(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.fl<this.pl?this.cl<this.dl?this.pl=this.fl+this.width():this.pl=this.fl-this.width():this.cl<this.dl?this.pl=this.fl-this.width():this.pl=this.fl+this.width()}kl(t,s){s=+s,this.cl-=t=+t,this.fl-=s,this.dl+=t,this.pl+=s}Ll(t,s){s=+s,this.cl+=t=+t,this.fl+=s,this.dl-=t,this.pl-=s}multiply(t,s){this.cl*=t,this.fl*=s,this.dl*=t,this.pl*=s}Ct(t,s){this.cl/=t,this.fl/=s,this.dl/=t,this.pl/=s}Bl(t){this.cl=+t-this.cl,this.dl=+t-this.dl}Nl(t){this.fl=+t-this.fl,this.pl=+t-this.pl}Wl(t,s){const i=this.width(),e=this.height(),n=this.xl()+i*t,r=this.Tl()+e*s;this.ml(n-e*s,r-i*t,e,i)}Vl(){const t=this.cl;this.cl=this.dl,this.dl=t}jl(){const t=this.fl;this.fl=this.pl,this.pl=t}Hl(t){const s=this.fl;this.fl=+t-this.pl,this.pl=+t-s}round(){this.cl=Math.round(this.cl),this.fl=Math.round(this.fl),this.dl=Math.round(this.dl),this.pl=Math.round(this.pl)}Ul(){this.cl=Math.ceil(this.cl),this.fl=Math.ceil(this.fl),this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}zl(){this.cl=Math.floor(this.cl),this.fl=Math.floor(this.fl),this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}floor(){this.cl=Math.floor(this.cl),this.fl=Math.floor(this.fl),this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}ceil(){this.cl=Math.ceil(this.cl),this.fl=Math.ceil(this.fl),this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}gr(t,s,i,e){this.cl=Math.max(this.cl,+t),this.fl=Math.max(this.fl,+s),this.dl=Math.min(this.dl,+i),this.pl=Math.min(this.pl,+e)}Jl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.cl=Et.gr(this.cl,t,i),this.fl=Et.gr(this.fl,s,e),this.dl=Et.gr(this.dl,t,i),this.pl=Et.gr(this.pl,s,e)}normalize(){this.cl>this.dl&&this.Vl(),this.fl>this.pl&&this.jl()}ql(t){return!(t.dl<this.cl||t.pl<this.fl||t.cl>this.dl||t.fl>this.pl)}$l(t,s,i){return!(t.dl+s<this.cl||t.pl+i<this.fl||t.cl+s>this.dl||t.fl+i>this.pl)}Xl(t,s){return t>=this.cl&&t<=this.dl&&s>=this.fl&&s<=this.pl}Yl(t){return t.cl>=this.cl&&t.fl>=this.fl&&t.dl<=this.dl&&t.pl<=this.pl}Zl(t){t.cl<this.cl&&(this.cl=+t.cl),t.fl<this.fl&&(this.fl=+t.fl),t.dl>this.dl&&(this.dl=+t.dl),t.pl>this.pl&&(this.pl=+t.pl)}Kl(t){this.cl=Et.kt(t.cl,t.dl,this.cl),this.fl=Et.kt(t.fl,t.pl,this.fl),this.dl=Et.kt(t.cl,t.dl,this.dl),this.pl=Et.kt(t.fl,t.pl,this.pl)}}}{const At=self.Bs;At.Ql=class{constructor(t,s,i,e,n,r,h,o){this.tu=NaN,this.su=NaN,this.iu=NaN,this.eu=NaN,this.nu=NaN,this.ru=NaN,this.hu=NaN,this.ou=NaN,this.tu=0,this.su=0,this.iu=0,this.eu=0,this.nu=0,this.ru=0,this.hu=0,this.ou=0,t instanceof At.Ql?this.G(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.tu=+t,this.su=+s,this.iu=+i,this.eu=+e,this.nu=+n,this.ru=+r,this.hu=+h,this.ou=+o}au(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}G(t){this.tu=t.tu,this.su=t.su,this.iu=t.iu,this.eu=t.eu,this.nu=t.nu,this.ru=t.ru,this.hu=t.hu,this.ou=t.ou}equals(t){return this.tu===t.tu&&this.su===t.su&&this.iu===t.iu&&this.eu===t.eu&&this.nu===t.nu&&this.ru===t.ru&&this.hu===t.hu&&this.ou===t.ou}lu(t){this.tu=+t}ih(){return this.tu}uu(t){this.su=+t}eh(){return this.su}cu(t){this.iu=+t}nh(){return this.iu}fu(t){this.eu=+t}rh(){return this.eu}du(t){this.nu=+t}hh(){return this.nu}pu(t){this.ru=+t}oh(){return this.ru}mu(t){this.hu=+t}ah(){return this.hu}gu(t){this.ou=+t}lh(){return this.ou}yu(){return new DOMQuad(new DOMPoint(this.tu,this.su),new DOMPoint(this.iu,this.eu),new DOMPoint(this.nu,this.ru),new DOMPoint(this.hu,this.ou))}static wu(t){return At.lr(At.Ql,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.tu,this.su,this.iu,this.eu,this.nu,this.ru,this.hu,this.ou]}la(){return new Float64Array(this.toArray())}ua(t,s){t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.nu,t[s++]=this.ru,t[s++]=this.hu,t[s]=this.ou}Su(t,s,i){t[s++]=this.tu,t[s++]=this.su,t[s++]=i,t[s++]=this.iu,t[s++]=this.eu,t[s++]=i,t[s++]=this.nu,t[s++]=this.ru,t[s++]=i,t[s++]=this.hu,t[s++]=this.ou,t[s]=i}offset(t,s){s=+s,this.tu+=t=+t,this.su+=s,this.iu+=t,this.eu+=s,this.nu+=t,this.ru+=s,this.hu+=t,this.ou+=s}round(){this.tu=Math.round(this.tu),this.su=Math.round(this.su),this.iu=Math.round(this.iu),this.eu=Math.round(this.eu),this.nu=Math.round(this.nu),this.ru=Math.round(this.ru),this.hu=Math.round(this.hu),this.ou=Math.round(this.ou)}floor(){this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu),this.nu=Math.floor(this.nu),this.ru=Math.floor(this.ru),this.hu=Math.floor(this.hu),this.ou=Math.floor(this.ou)}ceil(){this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu),this.nu=Math.ceil(this.nu),this.ru=Math.ceil(this.ru),this.hu=Math.ceil(this.hu),this.ou=Math.ceil(this.ou)}vu(t){this.tu=t.cl,this.su=t.fl,this.iu=t.dl,this.eu=t.fl,this.nu=t.dl,this.ru=t.pl,this.hu=t.cl,this.ou=t.pl}bu(t,s){0===s?this.vu(t):this.Mu(t,Math.sin(s),Math.cos(s))}Mu(t,s,i){const e=t.cl*s,n=t.fl*s,r=t.dl*s,h=t.pl*s,o=t.cl*i,a=t.fl*i,l=t.dl*i,u=t.pl*i;this.tu=o-n,this.su=a+e,this.iu=l-n,this.eu=a+r,this.nu=l-h,this.ru=u+r,this.hu=o-h,this.ou=u+e}xu(t){t.set(Math.min(this.tu,this.iu,this.nu,this.hu),Math.min(this.su,this.eu,this.ru,this.ou),Math.max(this.tu,this.iu,this.nu,this.hu),Math.max(this.su,this.eu,this.ru,this.ou))}Xl(t,s){let i=this.iu-this.tu,e=this.eu-this.su,n=this.nu-this.tu,r=this.ru-this.su,h=t-this.tu,o=s-this.su,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,c=n*n+r*r,f=n*h+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.hu-this.tu)*i+(e=this.ou-this.su)*e)*f-(l=i*n+e*r)*(u=i*h+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Al(){return(this.tu+this.iu+this.nu+this.hu)/4}Rl(){return(this.su+this.eu+this.ru+this.ou)/4}Tu(t,s,i,e){return!(!this.Xl(t,s)&&!this.Xl(i,e))||At.th(t,s,i,e,this)}_u(t){let s=t.Al(),i=t.Rl();if(this.Xl(s,i))return!0;if(s=this.Al(),i=this.Rl(),t.Xl(s,i))return!0;const e=this.tu,n=this.su,r=this.iu,h=this.eu,o=this.nu,a=this.ru,l=this.hu,u=this.ou;return At.th(e,n,r,h,t)||At.th(r,h,o,a,t)||At.th(o,a,l,u,t)||At.th(l,u,e,n,t)}Gu(){const t=this.tu,s=this.su;this.tu=this.iu,this.su=this.eu,this.iu=this.nu,this.eu=this.ru,this.nu=this.hu,this.ru=this.ou,this.hu=t,this.ou=s}Iu(){this.Cu(0,2),this.Cu(1,3),this.Cu(6,4),this.Cu(7,5)}Pu(){this.Cu(0,6),this.Cu(1,7),this.Cu(2,4),this.Cu(3,5)}Eu(){this.Cu(2,6),this.Cu(3,7)}Cu(t,s){const i=this.Au(t);this.Ru(t,this.Au(s)),this.Ru(s,i)}Au(t){switch(t){case 0:return this.tu;case 1:return this.su;case 2:return this.iu;case 3:return this.eu;case 4:return this.nu;case 5:return this.ru;case 6:return this.hu;case 7:return this.ou;default:throw new RangeError("invalid quad point index")}}Ru(t,s){switch(s=+s,t){case 0:this.tu=s;break;case 1:this.su=s;break;case 2:this.iu=s;break;case 3:this.eu=s;break;case 4:this.nu=s;break;case 5:this.ru=s;break;case 6:this.hu=s;break;case 7:this.ou=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Rt=self.Bs,Ft=[0,0,1,0,1,1,0,1],Dt=Rt.lr(Rt.Ql);Rt.Fu=class extends Rt.rr{constructor(t,s=!0){super(),t=t||Ft,this.Du=Float64Array.from(t),this.Ou=new Rt.Rect,this.ku=!0,this.Lu=s}ur(){}Bu(){return this.Du}Nu(){return this.Du.length/2}Wu(t){this.Du.length===t.length?this.Du.set(t):this.Du=Float64Array.from(t),this.ku=!0}Vu(){this.Wu(Ft)}G(t){this.Wu(t.Du)}ju(){this.ku=!0}Hu(){if(this.ku){let i=this.Du,e=i[0],n=i[1],r=e,h=n;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>h&&(h=a)}this.Ou.set(e,n,r,h),this.ku=!1}}vu(t,s,i){let e=this.Du;8!==e.length&&(e=new Float64Array(8),this.Du=e),e[0]=t.xl()-s,e[1]=t.Tl()-i,e[2]=t._l()-s,e[3]=t.Tl()-i,e[4]=t._l()-s,e[5]=t.Gl()-i,e[6]=t.xl()-s,e[7]=t.Gl()-i,this.Ou.G(t),0===s&&0===i||this.Ou.offset(-s,-i),this.ku=!1}Uu(t,s,i){Dt.G(t),Dt.offset(s,i),this.Wu(Dt.toArray()),this.ku=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.zu(t,s,e,n)}zu(i,e,n,r){const h=this.Du;for(let t=0,s=h.length;t<s;t+=2){const o=t+1,a=h[t]*i,l=h[o]*e;h[t]=a*r-l*n,h[o]=l*r+a*n}this.ku=!0}offset(i,e){const n=this.Du;for(let t=0,s=n.length;t<s;t+=2)n[t]+=i,n[t+1]+=e}Xl(i,e){const n=this.Du;if(i===n[0]&&e===n[1])return!0;this.Hu();let t=this.Ou,r=t.xl()-110,h=t.Tl()-101,o=t._l()+131,a=t.Gl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=h<e?(u=h,e):(u=e,h),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=n.length;t<s;t+=2){const S=(t+2)%s,v=n[t],b=n[t+1],M=n[S],x=n[1+S];Rt.Qr(r,h,i,e,l,c,u,f,v,b,M,x)&&++y,Rt.Qr(o,a,i,e,d,m,p,g,v,b,M,x)&&++w}return y%2==1||w%2==1}Ju(t,c,f){const d=t.Du,p=this.Du;if(this.Xl(d[0]+c,d[1]+f))return!0;if(t.Xl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],n=p[t],r=p[1+t],h=0,o=0,a,l;a=i<n?(h=i,n):(h=n,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(Rt.Qr(i,e,n,r,h,a,o,l,g,y,w,S))return!0}}return!1}Tu(i,e,n,r,h,o){if(this.Xl(n-i,r-e))return!0;if(this.Xl(h-i,o-e))return!0;let a=0,l=0,u,c;u=n<h?(a=n,h):(a=h,n),c=r<o?(l=r,o):(l=o,r);const f=this.Du;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Rt.Qr(n,r,h,o,a,u,l,c,p,m,g,y))return!0}return!1}Iu(i){const e=this.Du;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.ku=!0}Pu(i){const e=this.Du;for(let t=0,s=e.length;t<s;t+=2){const n=t+1;e[n]=2*i-e[n]}this.ku=!0}Eu(){const i=this.Du;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,n=i[t];i[t]=i[e],i[e]=n}this.ku=!0}qu(){let i=this.Du,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Nu()}$u(){let i=this.Du,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Nu()}Xu(){return this.Du}Yu(){return this.Nu()}Zu(){return this.Lu}}}{const Ot=self.Bs;Ot.Ku=class extends Ot.rr{constructor(t){if(super(),this.Qu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}ur(){this.tc(),this.Qu=null}sc(){return 0===this.Qu.size}tc(){const t=this.Qu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Qu,n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}ei(t,s){const i=this.Qu.get(t);return i&&i.get(s)}si(t,s){const i=this.Qu.get(t);return!!i&&i.has(s)}ic(t,s){const i=this.Qu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}ec(t){const s=this.Qu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,n]of s.entries())n.delete(t)&&0===n.size&&s.delete(e)}nc(){let t=0;for(const s of this.Qu.values())t+=s.size;return t}*values(){for(const t of this.Qu.values())yield*t.values()}*rc(){for(const[t,s]of this.Qu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Qu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Bs;kt.hc=class extends kt.rr{constructor(){super(),this.oc=new Set,this.ac=[],this.lc=!1}ur(){this.tc()}tc(){this.oc.clear(),kt.Bh(this.ac),this.lc=!1}uc(t){this.oc.has(t)||(this.oc.add(t),this.lc)||this.ac.push(t)}si(t){return this.oc.has(t)}ic(t){this.oc.delete(t)&&(this.lc=!0)}nc(){return this.oc.size}sc(){return 0===this.oc.size}cc(){return this.lc&&(this.fc(),this.lc=!1),this.ac}fc(){const t=this.ac;kt.Bh(t);for(const s of this.oc)t.push(s)}}}{const Lt=self.Bs,Bt=new Map,Nt=new Map,Wt=new Map,Vt=new Map,jt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Xt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Yt=(self.mc=class ns{constructor(){}static yc(){return"default"}static wc(){return"noease"}static Sc(t){return Xt.get(t)}static vc(s,...i){this.Mc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!ns.xc(t,s)||ns.xc(t,s).transition.IsForAnyPurpose())):[...(t=jt).keys()]).sort();return[...Nt.keys()].concat(e).filter(t=>!i.includes(t))}static Tc(){this.Mc();const t=[...jt.keys()];return t.sort(),[...Nt.keys()].concat(t)}static _c(){this.Mc();const t=[...jt.keys()];return t.sort(),t}static Gc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of $t){const n=self.lang("ui.bars.timeline.short-eases."+e);if(n===t)return!0}}static Ic(t){return this.Mc(),[...Nt.keys()].includes(t)}static Cc(t){const s=Jt.get(t);return s?Bt.get(s):ns.Ic(t)?Bt.get(t):Ut.has(t)?Ut.get(t):void 0}static Pc(t){return this.Mc(),zt.get(t)}static Ec(t,s){this.Mc();const i=ns.Cc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static xc(t,s){this.Mc();const i=Vt.get(s);if(i)return i.get(t)}static Ac(t,s){this.Mc();const i=ns.Cc(t);return!!i||!!Wt.get(s).get(t)}static Rc(t){this.Mc();const s=ns.Cc(t);return s||jt.get(t)}static Fc(t){return this.Mc(),Ht.get(t)}static Dc(t){this.Mc();const s=this.Tc();return s[t]}static Oc(t,s){this.Mc();const i=this.vc(s);return i.indexOf(t)}static kc(t){return this.Oc(t)}static Mc(){0===Bt.size&&(this.Lc("default",()=>{}),this.Lc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Lc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Lc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Lc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Lc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Lc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Lc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Lc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Lc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Lc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Lc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Lc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Lc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Lc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Lc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Lc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Lc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Lc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Lc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Lc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Lc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Lc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Lc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Lc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Bc("cubicbezier",this.Nc),this.Bc("spline",this.Wc))}static Lc(t,s,i=!1){if("function"==typeof s)ns.Vc(t,s,"predefined");else{if(!Lt.Ve(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const n=Lt.lr(self.BuiltInTransition,t,i);n.SetFromJson(s),ns.Vc(t,(t,s,i,e)=>n.jc(t,s,i,e),"predefined"),zt.set(t,n)}else{const r=Lt.lr(Lt.Hc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Uc(i),ns.Vc(t,(t,s,i,e)=>r.jc(t,s,i,e),"predefined")}}}static Bc(t,s){ns.Vc(t,s,"private")}static zc(t,s,i,e){this.Mc(),ns.Vc(t,s,"custom",i,e)}static Jc(t,s){if(!this.Ic(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),Vt.get(s));e&&e.delete(t)}}static Vc(t,s,i,e,n){switch(i){case"predefined":Bt.set(t,s),Nt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),Vt.has(e)||Vt.set(e,new Map);const r=Wt.get(e),h=(r.set(t,s),Vt.get(e));h.set(t,n)}else jt.set(t,s),Ht.set(t,n);break;case"private":Bt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static qc(t,s,i,e){return 0===e?s:i*t/e+s}static Nc(t,s,i,e,n){const r=s,h=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(n-s+3*i-3*e);return r+h+o+a}static Wc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=es(t,s,e,r,o,l),c=Kt(i,n,h,a),f=Qt(i,n,h,a),d=ts(i,n,h,a);return ss(u,c,f,d)}static $c(t,s,i,e){const n=[],r=Kt(t,s,i,e),h=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Yt;++t){const a=ss(t*Zt,r,h,o);n.push(a)}return n}},11),Zt=1/(Yt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(h,t,s,i,e,n)=>{if(1==h)return 1;let o=0,r=1,a=n[r],l=Yt-1;for(Yt;r!=l&&a<=h;)r++,a=n[r],o+=Zt;r--;let u=(h-(a=n[r]))/(n[r+1]-a),c=o+u*Zt,f=Kt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-h,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Zt,e=0,n,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-h;0<t?i=c:s=c,n=1e-7<Math.abs(t),r=++e<10}while(n&&r);return c}}}{let o=function(t){rs.Ge(t)};o;const rs=self.Bs;rs.Xc=class{constructor(t){this.Yc=[],this.pr=t||"",this.Zc=0}ur(){this.tc(),this.Yc=null}Kc(){return this.pr}tc(){rs.Nh(this.Yc),this.Zc=0}Qc(){return this.Zc}tf(t=Math.random()*this.Qc()){let s=0;for(const[i,e]of this.Yc)if(t<(s+=i))return e;return 0}if(t,s){o(s),this.Zc+=t,this.Yc.push([t,s])}ef(s,i){o(i);const e=0===s;for(let t=0;t<this.Yc.length;t++){const n=this.Yc[t],r=e||n[0]===s,h=n[1]===i;if(r&&h){this.Yc.splice(t,1),this.Zc-=n[0];break}}}nf(){return JSON.stringify(this.Yc)}static rf(t,s){const i=new rs.Xc(s),e=JSON.parse(t);for(const n of e){const r=n[0],h=n[1];i.if(r,h)}return i}}}{let t=self.Bs,i=0;t.hf=class{constructor(t,s){this.lf=t,this.uf=s,this.cf=i++,this.lf.ff("runtime","screen-reader-text",{type:"create",id:this.cf,text:this.uf})}ur(){this.lf.ff("runtime","screen-reader-text",{type:"release",id:this.cf}),this.lf=null,this.uf="",this.cf=-1}df(t){this.uf!==t&&(this.uf=t,this.lf.ff("runtime","screen-reader-text",{type:"update",id:this.cf,text:this.uf}))}}}{const hs=self.Bs;hs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.pf=!1,this.mf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.mf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.pf=!0}}}{const os=self.Bs;os.Event.gf=class extends os.rr{constructor(t){super(),this.yf=t,this.wf=[],this.Sf=new Set,this.vf=[],this.bf=new Set,this.Mf=0,this.xf=[]}ur(){0<this.Mf||(os.Bh(this.wf),this.Sf.clear(),os.Bh(this.vf),this.bf.clear(),os.Bh(this.xf),os.ur(this))}Tf(t,s){this._f()?this.xf.push({Gf:"add",If:t,capture:s}):s?this.Sf.has(t)||(this.wf.push(t),this.Sf.add(t)):this.bf.has(t)||(this.vf.push(t),this.bf.add(t))}Cf(t,s){this._f()?this.xf.push({Gf:"remove",If:t,capture:s}):s?this.Sf.has(t)&&(this.Sf.delete(t),os.Uh(this.wf,t)):this.bf.has(t)&&(this.bf.delete(t),os.Uh(this.vf,t))}Pf(){return!this.wf.length&&!this.vf.length}_f(){return 0<this.Mf}Ef(){const t=new Set,s=new Set;for(const i of this.xf)if("add"===i.Gf)this.Tf(i.If,i.capture),(i.capture?s:t).delete(i.If);else{if("remove"!==i.Gf)throw new Error("invalid op");(i.capture?(this.Sf.delete(i.If),s):(this.bf.delete(i.If),t)).add(i.If)}os.qh(this.vf,t),os.qh(this.wf,s),os.Bh(this.xf)}Af(i){this.Rf();let e=!1;for(let t=0,s=this.wf.length;t<s;++t)if(this.wf[t](i),i.pf){e=!0;break}if(!e)for(let t=0,s=this.vf.length;t<s&&(this.vf[t](i),!i.pf);++t);return this.Ff(),!i.defaultPrevented}Df(i){this.Rf();for(let t=0,s=this.wf.length;t<s;++t)this.wf[t](i);for(let t=0,s=this.vf.length;t<s;++t)this.vf[t](i);return this.Ff(),!0}Rf(){this.Mf++}Ff(){this.Mf--,0===this.Mf&&0<this.xf.length&&this.Ef()}Of(t){t?this.Rf():this.Ff()}kf(i){let e=[];for(let s=0,t=this.wf.length;s<t;++s){let t=this.wf[s];e.push(os.Lf(()=>t(i)))}for(let s=0,t=this.vf.length;s<t;++s){let t=this.vf[s];e.push(os.Lf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Bf(i){const e=[];this.Rf();for(let t=0,s=this.wf.length;t<s;++t){const n=this.wf[t](i);n instanceof Promise&&e.push(n)}for(let t=0,s=this.vf.length;t<s;++t){const r=this.vf[t](i);r instanceof Promise&&e.push(r)}return this.Ff(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Nf(t){return this.Bf(t)}async Wf(i){this.Rf();for(let t=0,s=this.wf.length;t<s;++t){const e=this.wf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](i);n instanceof Promise&&await n}return this.Ff(),!i.defaultPrevented}*Vf(i){this.Rf();for(let t=0,s=this.wf.length;t<s;++t){const e=this.wf[t](i);os.Vo(e)&&(yield*e)}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](i);os.Vo(n)&&(yield*n)}this.Ff()}}}{const as=self.Bs;as.Event.jf=class extends as.rr{constructor(){super(),this.Hf=new Map,this.Uf=!1}ur(){if(this.Uf)throw new Error("already released");this.zf(),this.Uf=!0,as.ur(this)}cr(){return this.Uf}zf(){if(this.Hf){for(let t of this.Hf.values())t.ur();this.Hf.clear()}}Jf(t,s){let i=this.Hf.get(t);return i||(s?(i=as.lr(as.Event.gf,t),this.Hf.set(t,i),i):null)}qf(t){return this.Hf.has(t)}addEventListener(t,s,i){let e=this.Jf(t,!0);e.Tf(s,!!i)}removeEventListener(t,s,i){let e=this.Jf(t,!1);e&&(e.Cf(s,!!i),e.Pf())&&this.Hf.delete(t)}dispatchEvent(t){const s=this.Jf(t.type,!1);return!s||(t.cancelable?s.Af(t):s.Df(t))}$f(t){const s=this.Jf(t.type,!1);return s?(t.mf=!0,s.kf(t)):Promise.resolve(!0)}async Xf(t){const s=this.Jf(t.type,!1);if(!s)return!0;this.Hf.delete(t.type),t.mf=!0;const i=await s.kf(t);return s.ur(),i}async Yf(t){const s=this.Jf(t.type,!1);return!s||s.Nf(t)}Zf(t){const s=this.Jf(t.type,!1);return!s||s.Bf(t)}async Kf(t){const s=this.Jf(t.type,!1);return!s||s.Wf(t)}Qf(t){const s=this.Jf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Vf(t)}Of(t){for(const s of this.Hf.values())s.Of(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(n){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;h(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==n?s<n.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},h=function(s){let t;try{t=s.If()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,h,self.Bs),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,n=t.hi.si("disable-asyncify");n&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Lf=function(i){let e=null;return t.isDebug&&(e=t.pe()),new Promise((t,s)=>{u.push({If:i,resolve:t,reject:s,stack:e}),n?h(u.pop()):-1===c&&r(a)})},t.Lf.t0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){h=-1,o=-1;let i=Date.now();for(let s of a)if(s.s0(i)){let t=s.i0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+n,e);h=self.setTimeout(s,t)}},i=(t,s,self.Bs),e=1e3,n=100,r=-1,h=(i.e0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.n0=class{constructor(t,s){this.r0=t,this.h0=1e3*s,this.o0=0,this.a0=!1}l0(){let t=i.e0();this.o0=t+this.h0,this.a0||(a.add(this),this.a0=!0),-1===h?(o=this.o0,h=self.setTimeout(s,this.h0+n)):this.o0<o&&o>t+e&&(self.clearTimeout(h),o=this.o0,h=self.setTimeout(s,this.h0+n))}s0(t){return!(t>=this.o0)||(this.r0()?(this.o0=t+this.h0,!0):this.a0=!1)}i0(){return this.o0}u0(){this.a0&&(a.delete(this),this.a0=!1,0===a.size)&&-1!==h&&(self.clearTimeout(h),h=-1,o=-1)}ur(){this.u0(),this.r0=null}}}{const ls=self.Bs;ls.c0=class us{constructor(t){this.f0=!1,this.d0=t}p0(){this.f0||(this.f0=!0,this.d0&&(this.d0(),this.d0=null))}m0(){return this.f0}ur(){this.p0()}static ur(t){return new us(()=>t.ur())}static g0(s,i,e,n,t){if(null==n)n=!1;else if("boolean"!=typeof n&&"object"!=typeof n)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.y0;for(let t of i)s.addEventListener(t,e,n),r.uc(ls.lr(ls.c0,()=>s.removeEventListener(t,e,n)));return r}return s.addEventListener(i,e,n),ls.lr(ls.c0,()=>s.removeEventListener(i,e,n))}},ls.w0=class extends ls.c0{S0(t){this.d0=t}},ls.y0=class extends ls.c0{constructor(...s){super(),this.v0=new Set;for(let t of s)this.uc(t)}uc(...s){if(this.f0)throw new Error("already disposed");for(let t of s)this.v0.add(t)}b0(t){if(this.f0)throw new Error("already disposed");this.v0.delete(t)}M0(){if(this.f0)throw new Error("already disposed");if(this.v0){for(let t of this.v0)t.p0();this.v0.clear()}}m0(){return this.f0}p0(){if(this.f0)throw new Error("already disposed");this.f0=!0;for(let t of this.v0)t.p0();this.v0.clear(),this.v0=null}ur(){this.p0()}}}{const cs=self.Bs;cs.x0=class extends cs.rr{constructor(){super(),this.T0=0,this.sl=0,this._0=0,this.G0=0}uc(t){this.sl=(t=+t)-this.T0,this._0=this.G0+this.sl,this.T0=this._0-this.G0-this.sl,this.G0=this._0}I0(t){this.G0-=+t}ei(){return this.G0}l0(){this.T0=0,this.sl=0,this._0=0,this.G0=0}Set(t){this.T0=0,this.sl=0,this._0=0,this.G0=+t}C0(t){this.T0=t.T0,this.sl=t.sl,this._0=t._0,this.G0=t.G0}ur(){}}}{const fs=self.Bs,h={};h.P0=function(t){this.E0=t,this.right=this.E0.A0,this.left=this.E0.A0,this.parent=null,this.color=!1,this.key=null},h.R0=function(t){this.size=0,this.A0=new h.P0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0,this.compare=t||this.F0},h.R0.prototype.F0=function(t,s){return t<s?-1:s<t?1:0},h.R0.prototype.clone=function(){var t=new h.R0(this.compare);return t.D0(this),t},h.R0.prototype.clear=function(){this.size=0,this.A0=new h.P0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0},h.R0.prototype.O0=function(t){var s=t.right;t.right=s.left,s.left!=this.A0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},h.R0.prototype.k0=function(t){var s=t.left;t.left=s.right,s.right!=this.A0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},h.R0.prototype.L0=function(t){if(this.contains(t))this.B0(t).key=t;else{for(var s=new h.P0(this),i=(s.key=t,this.A0),e=this.root;e!=this.A0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.A0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.A0,s.right=this.A0,s.color=!0,this.N0(s),this.size++}},h.R0.prototype.N0=function(t){for(;t!=this.A0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.O0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.k0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.k0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.O0(t.parent.parent))}this.root.color=!1},h.R0.prototype.W0=function(t){var s=t.left==this.A0||t.right==this.A0?t:this.V0(t),i=s.left!=this.A0?s.left:s.right;i.parent=s.parent,s.parent==this.A0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.j0(i),this.size--},h.R0.prototype.j0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.O0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.k0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.O0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.k0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.O0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.k0(t.parent),this.root))}t.color=!1},h.R0.prototype.remove=function(t){var s;return(t=this.B0(t))!=this.A0?(s=t.key,this.W0(t),s):null},h.R0.prototype.H0=function(t,s){this.remove(s)},h.R0.prototype.min=function(t){for(;t.left!=this.A0;)t=t.left;return t},h.R0.prototype.max=function(t){for(;t.right!=this.A0;)t=t.right;return t},h.R0.prototype.V0=function(t){if(t.right!=this.A0)return this.min(t.right);for(var s=t.parent;s!=this.A0&&t==s.right;)s=(t=s).parent;return s},h.R0.prototype.U0=function(t){if(t.left!=this.A0)return this.max(t.left);for(var s=t.parent;s!=this.A0&&t==s.left;)s=(t=s).parent;return s},h.R0.prototype.z0=function(t){if(0<this.size){var s=this.B0(t);if(s==this.A0)return null;if(s.right!=this.A0)return this.min(s.right).key;for(var i=s.parent;i!=this.A0&&s==i.right;)i=(s=i).parent;return i!=this.A0?i.key:null}return null},h.R0.prototype.J0=function(t){if(0<this.size){var s=this.B0(t);if(s==this.A0)return null;if(s.left!=this.A0)return this.max(s.left).key;for(var i=s.parent;i!=this.A0&&s==i.left;)i=(s=i).parent;return i!=this.A0?i.key:null}return null},h.R0.prototype.q0=function(){return this.min(this.root).key},h.R0.prototype.$0=function(){return this.max(this.root).key},h.R0.prototype.B0=function(t){for(var s=this.root;s!=this.A0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},h.R0.prototype.contains=function(t){return null!=this.B0(t).key},h.R0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},h.R0.prototype.D0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.L0(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.L0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.L0(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.L0(t[e])},h.R0.prototype.X0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.H0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.remove(t[e])},h.R0.prototype.Y0=function(t){if("array"==h.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==h.typeOf(t.forEach))return t.every(this.contains,this);if("function"==h.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==h.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},h.R0.prototype.range=function(t,s){var i=[];return this.Z0(function(t){i.push(t)},t,s),i},h.R0.prototype.K0=function(t,s){if(!this.Q0())for(var i=this.min(this.root);i!=this.A0;){if(t.call(s,i.key,this))return;i=this.V0(i)}},h.R0.prototype.td=function(t,s,i){if(!this.Q0())for(var e=this.B0(s);e!=this.A0;){if(t.call(i,e.key,this))return;e=this.V0(e)}},h.R0.prototype.sd=function(t,s,i){if(!this.Q0())for(var e=this.min(this.root),n=this.B0(s);e!=n;){if(t.call(i,e.key,this))return;e=this.V0(e)}},h.R0.prototype.Z0=function(t,s,i,e){if(!this.Q0())for(var n=this.B0(s),r=this.B0(i);n!=r;){if(t.call(e,n.key,this))return;n=this.V0(n)}},h.R0.prototype.ed=function(t,s){if(!this.Q0())for(var i=this.max(this.root);i!=this.A0;){if(t.call(s,i.key,this))return;i=this.U0(i)}},h.R0.prototype.forEach=function(t,s){if(!this.Q0())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))t.call(s,i.key,i.key,this)},h.R0.prototype.some=function(t,s){if(!this.Q0())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},h.R0.prototype.every=function(t,s){if(this.Q0())return!1;for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},h.R0.prototype.map=function(t,s){var i=[];if(!this.Q0())for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))i.push(t.call(s,e.key,e.key,this));return i},h.R0.prototype.filter=function(t,s){var i=[];if(!this.Q0())for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},h.R0.prototype.getCount=function(){return this.size},h.R0.prototype.Q0=function(){return 0==this.size},h.R0.prototype.de=function(t){var s=h.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.Q0())return!0;for(var e=this.min(this.root);e!=this.A0;e=this.V0(e))h.contains.call(t,t,e.key)&&i++;return i==this.getCount()},h.R0.prototype.nd=function(t){var s=new h.R0(this.compare);if(!this.Q0())for(var i=this.min(this.root);i!=this.A0;i=this.V0(i))t.contains.call(t,i.key,i.key,this)&&s.L0(i.key);return s},fs.R0=class extends fs.rr{constructor(t){super(),this.rd=new h.R0(t),this.hd=!1,this.od=new Set,this.ad=new Set}uc(t){this.hd?this.rd.contains(t)?this.ad.delete(t):this.od.add(t):this.rd.L0(t)}b0(t){this.hd?this.rd.contains(t)?this.ad.add(t):this.od.delete(t):this.rd.remove(t)}si(t){return this.hd?!!this.od.has(t)||!this.ad.has(t)&&this.rd.contains(t):this.rd.contains(t)}tc(){this.rd.clear(),this.od.clear(),this.ad.clear()}toArray(){if(this.hd)throw new Error("cannot be used in queueing mode");return this.rd.getValues()}nc(){return this.rd.getCount()+this.od.size-this.ad.size}sc(){return 0===this.nc()}ld(){if(this.sc())throw new Error("empty set");if(this.hd)throw new Error("cannot be used in queueing mode");const t=this.rd,s=t.min(t.root);return s.key}ud(){if(this.sc())throw new Error("empty set");if(this.hd)throw new Error("cannot be used in queueing mode");const t=this.ld();return this.b0(t),t}fd(t){if(this.hd!==(t=!!t)&&!(this.hd=t)){for(const s of this.ad)this.rd.remove(s);this.ad.clear();for(const i of this.od)this.rd.L0(i);this.od.clear()}}dd(t){this.rd.forEach(t)}*values(){if(!this.sc()){const s=this.rd;for(let t=s.min(s.root);t!=s.A0;t=s.V0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Bs;ds.md=class{constructor(t=ds.hardwareConcurrency){this.gd=t,this.yd=[],this.wd=0}uc(i){return new Promise((t,s)=>{this.yd.push({If:i,resolve:t,reject:s}),this.Sd()})}vd(i){for(let t=0,s=this.yd.length;t<s;++t)if(this.yd[t].If===i)return t;return-1}bd(t,s){const i=this.vd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.yd[i].resolve(s),this.yd.splice(i,1)}Md(t,s){const i=this.vd(t);if(-1===i)throw new Error("cannot find promise to reject");this.yd[i].reject(s),this.yd.splice(i,1)}async Sd(){if(this.yd.length&&!(this.wd>=this.gd)){this.wd++;const s=this.yd.shift();try{const t=await s.If();s.resolve(t)}catch(t){s.reject(t)}this.wd--,this.Sd()}}static async xd(t,s){let i=[],e=!1,n=[];for(;t--;)n.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(n),i}}}{const ps=self.Bs;ps.Td=class{constructor(t,s,i){this.r0=t,this._d=s,this.Gd=i||2*s,this.Id=-1,this.Cd=-1/0,this.Pd=()=>this.Ed(),this.Ad=!1,this.Rd=!1,this.Fd=null}Dd(t){this.Rd=!!t}Od(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Gd:this._d}kd(...e){if(-1===this.Id){this.Fd=e;let t=ps.e0(),s=t-this.Cd,i=this.Od();i<=s&&this.Rd?(this.Cd=t,this.Ld()):this.Id=self.setTimeout(this.Pd,Math.max(i-s,4))}}Ld(){this.Ad=!0;const t=this.Fd;this.Fd=null,t?this.r0(...t):this.r0(),this.Ad=!1}l0(){this.Ad||(this.Bd(),this.Fd=null,this.Cd=ps.e0())}Ed(){this.Id=-1,this.Cd=ps.e0(),this.Ld()}Bd(){-1!==this.Id&&(self.clearTimeout(this.Id),this.Id=-1)}ur(){this.Bd(),this.r0=null,this.Fd=null,this.Pd=null}}}{const ms=self.Bs;ms.Nd=class{constructor(){this.Wd=new Map,this.Vd=!1,this.jd=null,this.Hd=null,this.Ud=null,this.zd=null}Jd(t){this.Vd=!!t}qd(){return this.Vd}$d(t){this.jd=t}Xd(t){if(this.jd)return this.jd(t);throw new Error("no get base size callback set")}Yd(t){this.Hd=t}Zd(t,s,i,e,n,r){if(this.Hd)return this.Hd(t,s,i,e,n,r);throw new Error("no raster at size callback set")}Kd(t){this.Ud=t}Qd(t){if(!this.Ud)throw new Error("no release result callback set");this.Ud(t)}t1(t){this.zd=t}s1(){if(!this.zd)throw new Error("no redraw callback set");this.zd()}i1(t){let s=this.Wd.get(t);return s||(s=ms.lr(ms.e1,this,t),this.Wd.set(t,s)),s.n1(),s}h1(t){this.Wd.delete(t.o1())}a1(){for(const t of this.Wd.values())t.l1(),t.u1()}}}{const gs=self.Bs;gs.e1=class{constructor(t,s){this.c1=t,this.f1=s,this.d1=0,this.m1=0,this.g1=0,this.w1=this.c1.Xd(s).then(t=>{this.c1&&(this.m1=t[0],this.g1=t[1],this.c1.s1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.S1=!0,this.c1&&this.c1.s1()}),this.v1=0,this.b1=0,this.M1=0,this.T1=0,this._1=!1,this.G1=null,this.I1=!1,this.S1=!1}ur(){if(this.d1<=0)throw new Error("already released");this.d1--,0===this.d1&&this.C1()}l1(){this.G1&&(this.c1.Qd(this.G1),this.G1=null)}C1(){this.l1(),this.c1.h1(this),this.c1=null}o1(){return this.f1}n1(){this.d1++}P1(){return 0<this.d1}E1(){return this.G1}u1(){this.I1=!0}async A1(e,n,r){if(0!==n&&0!==r&&!this.S1&&!this._1){let t=gs.Br(Math.ceil(n)),s=gs.Br(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const h=4096/i;n*=h,r*=h,t=Math.min(Math.ceil(t*h),4096),s=Math.min(Math.ceil(s*h),4096)}if(n<t&&r<s){const o=n/r,a=t/s;r=o<a?(n=s*o,s):(n=t)/o}if(this.c1.qd()&&(t=Math.ceil(n),s=Math.ceil(r)),!(t<=this.v1&&s<=this.b1)||this.I1){this._1=!0,this.v1=t,this.b1=s;const l=await this.c1.Zd(this.f1,e,this.v1,this.b1,n,r);this.c1&&(this.l1(),this.G1=l,this.M1=n,this.T1=r,this._1=!1,this.I1=!1,this.c1.s1())}}}R1(){return this.w1}F1(){return this.m1}D1(){return this.g1}O1(){return this.M1}L1(){return this.T1}B1(){return this.S1}}}{let s=function(t){return vs.get(t)};s;const c=self.Bs,ys=(c.N1="\ufeff",new Set("0123456789")),ws=(c.W1=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.V1=function(t){return ws.has(t)},c.j1=function(t){return[...t].filter(t=>!c.V1(t)).join("")},c.H1=function(t){for(const s of t)if(!c.V1(s))return!1;return!0},c.U1=function(t){for(const s of t)if(!c.V1(s))return!1;return!0},c.z1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.J1=function(t){return[...t].filter(t=>!c.z1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.q1=function(t){return!c.V1(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),vs=(c.X1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.Y1=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.W1(t))break;--i}return s.substr(0,i)},c.Z1=function(t){let s=c.Y1(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),bs=/[&<>"']/g,Ms=(c.K1=function(t){return t.replace(bs,s)},c.Q1=function(t){let s=c.tp(t,"\\","\\\\");return s=c.tp(s,'"','\\"'),s=c.tp(s,"\t","\\t"),s=c.tp(s,"\r",""),c.tp(s,"\n","\\n")},c.sp=function(t){let s=c.tp(t,"&","&amp;");return s=c.tp(s,"<","&lt;"),s=c.tp(s,">","&gt;"),c.tp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.fe=function(t){return t.replace(Ms,"\\$&")},c.ep=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.np=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,n=0,r,h=[];for(;-1<(r=t.indexOf(s,n));)h.push(r),n=r+e;return h},c.tp=function(t,s,i){return t.replaceAll(s,()=>i)},c.rp=function(t,s,i){return t.replace(new RegExp(c.fe(s),"gi"),()=>i)},c.hp=function(t,s){"string"==typeof s?t.textContent=s:s.op()?t.textContent=s.toString():(t.innerHTML=s.lp(),s instanceof c.Fn&&s.up(t))},c.cp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Fn?t.equals(s):s instanceof c.HtmlString||s instanceof c.Fn?s.equals(t):t===s},c.fp=function(i,...e){let n=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);n=n.replace(r,e[t].toString())}return n},c.pp=function(i,...e){let n=i,r=-1,h=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(h=t,n=n.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=h&&r<h)throw new Error(`missing placeholder '${r}' in string substitution`);return n},c.mp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.gp=function(t,s){return s<t?1:t<s?-1:0},c.yp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Ts=(c.wp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Sp=function*(t){for(const s of xs.segment(t))yield s.segment},c.vp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),_s=1024*Ts,Gs={bp:!(c.Mp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Ts){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<_s){let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/_s;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),xp:!0,Tp:!0,_p:!0,Gp:!0};c.Ip=function(t,s){s=Object.assign({},Gs,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,n=self.langPluralSub;if(s.xp){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,i.push(n(".days",null,h)))}if(s.Tp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(n(".hours",null,o)))}if(s._p){const a=Math.floor(t/60);(0<a||i.length||!s.Gp)&&(t-=60*a,i.push(n(".minutes",null,a)))}if(s.Gp){const l=Math.floor(t%60);i.push(n(".seconds",null,l))}const r=(s.bp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Cp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},c.Pp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Ep=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Vh(i,4,"0"),c.Vh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const n=i[t]-e[t];if(0!=n)return n<0?-1:1}return 0},c.Ap=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Rp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let n=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++n;return n},c.Fp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const n=o.get(e);if(!n)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof n){if("a"===n&&0===a.length||"abbr"===n&&0===l.length)return t;if("a"!==n||i){if("abbr"!==n||i)return"<"+i+n+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.tp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const h=a[s];if("string"==typeof h)return`<a href="${a[s]}">`;if("function"==typeof h)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(n)){let t=n[0],s=n[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Bs),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Fn=class{constructor(t,s){if(this.Dp=s&&s.Op?t:f.K1(t),this.kp="",this.Lp=!1,this.Bp=[],this.Np=[],s){if(this.Lp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Bp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Np=s.tips}}this.Wp=this.Dp.includes("["),this.Vp=this.Lp&&this.Dp.includes("\n"),this.jp=!this.Wp&&!this.Vp&&!this.Dp.includes("&"),this.Hp=!1,this.Up=[]}toString(){return this.Dp}valueOf(){return this.Dp}op(){return this.jp}zp(){return this.Wp?this.Dp.replace(i,""):this.Dp}lp(){if(this.jp)return this.Dp;if(!this.kp&&this.Dp){let t=this.Dp;this.Wp&&(u=0,a=this.Bp,l=this.Np,t=t.replace(i,s),a=null,l=null),this.Vp&&(t=t.replace(e,"<br>")),this.kp=t}return this.kp}up(i){if(this.Bp.length)for(let t=0,s=this.Bp.length;t<s;++t){const e=this.Bp[t];if("function"==typeof e){const n=i.querySelector(".bblink"+t);if(!n)throw new Error("unable to attach BBString link handler");n.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.lp()===t.lp():t instanceof f.Fn?this.Dp===t.Dp:this.Dp===t}Jp(){if(!this.Hp){let e=[],t=this.Dp,n=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const h=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+h.length,l&&e.push({text:l,qp:n.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=n.length-1;0<=t;--t)if(n[t].tag===u){n.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,qp:n.slice(0)})}else n.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),qp:n.slice(0)});for(const c of e)c.text&&(c.text=this.$p(c.text));this.Up=e.map(t=>t.icon?f.lr(f.Xp,{icon:t.icon,qp:t.qp}):f.lr(f.Yp,{Zp:f.wp(t.text),qp:t.qp})),this.Hp=!0}return this.Up}$p(t){return t=f.tp(t,"\\[","["),f.tp(t,"\\\\","\\")}static Kp(t){return f.lr(f.Fn,t,{Op:!0}).zp()}static Qp(t){return t.replace(p,"")}}}{let l=function(t){return""!==t&&""!==t&&w.V1(t)},a=function(t){return Is.has(t)},u=function(t){return w.q1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Bs,Is=new Set("");w.tm=class{constructor(){this.im=[],this.nm=null}rm(){return this.im}hm(){return this.im.length}om(t){this.nm=t}lm(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.um()){const a=s(o);o.fm(a.height),o.dm(a.fontBoundingBoxAscent||0),o.pm(a.fontBoundingBoxDescent||0),o.gm(a.ym||0),o.wm()?o.Sm(a.width):o.vm()&&o.Mm(this.nm)}i+=o.um(),e=Math.max(e,o.xm()),n=Math.max(n,o.Tm()),r=Math.max(r,o._m()),h=Math.max(h,o.Gm())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,ym:h}}Im(t,s,i,e,n,r){this.im.push(w.lr(w.tm.Cm,{Pm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,ym:r}))}tm(s,r,h,i,o){if("string"==typeof s&&(s=[w.lr(w.Yp,{Zp:w.wp(s)})]),w.Bh(this.im),!(!s.length||1===s.length&&s[0].wm()&&s[0].sc()||h<2)){if(1===s.length){const a=s[0];if(a.wm()&&a.Em()<=100&&!a.Am()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,ym:n}=r(a);if(t+=o,a.Sm(t),a.fm(s),a.dm(i||0),a.pm(e||0),a.gm(n||0),t<=h)return void this.Im([a],t,s,i,e,n)}}let t;t="word"===i?this.Rm(s):"cjk"===i?this.Fm(s):this.Dm(s),this.Om(t,r,h,o)}}Rm(t){let s=[],i=[],e=!1;for(const n of t){const r=n.km();if(n.vm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Lm())if(y(h))0<i.length&&s.push(i),s.push([w.lr(w.Yp,{Zp:["\n"],qp:r})]),i=[];else if(0===i.length)i.push(w.lr(w.Yp,{Zp:[h],qp:r})),e=l(h);else{const o=l(h);if(o===e){const a=i.at(-1);a.km()===r?a.Bm(h):i.push(w.lr(w.Yp,{Zp:[h],qp:r}))}else s.push(i),i=[w.lr(w.Yp,{Zp:[h],qp:r})],e=o}}return 0<i.length&&s.push(i),s}Fm(t){let s=[],i=[],e=!1;for(const n of t){const r=n.km();if(n.vm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Lm())if(y(h))0<i.length&&s.push(i),s.push([w.lr(w.Yp,{Zp:["\n"],qp:r})]),i=[];else{if(0===i.length)i.push(w.lr(w.Yp,{Zp:[h],qp:r}));else if(e||u(h)){const o=i.at(-1);o.km()===r?o.Bm(h):i.push(w.lr(w.Yp,{Zp:[h],qp:r}))}else s.push(i),i=[w.lr(w.Yp,{Zp:[h],qp:r})];e=a(h)}}return 0<i.length&&s.push(i),s}Dm(t){const s=[];for(const i of t)if(i.wm()){const e=i.Lm();w.Xn(s,e.map(t=>[w.lr(w.Yp,{Zp:[t],qp:i.km()})]))}else s.push([i]);return s}Nm(t){return t.map(t=>t.Wm())}Vm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.wm()&&i[0].wm()&&i[0].km()===t.km()&&(t.jm(i[0].Lm()),e=1);for(let t=i.length;e<t;++e){const n=i[e];s.push(n.Wm())}}Om(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].wm()&&1===u[0].Em()&&y(u[0].Lm()[0])){if(0===h){const c=w.lr(w.Yp,{Zp:[" "],qp:u[0].km()}),f=s(c);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.ym||0}this.Im(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0}else{const d=this.Nm(n),p=(this.Vm(d,u),this.lm(d,s)),m=p.width;if(i<=m)if(0<n.length&&this.Im(n,r,h,o,a,l),n=[],u[0].wm()&&w.U1(u[0].Lm()))r=0,h=0,o=0,a=0,l=0;else{this.Vm(n,u);const g=this.lm(n,s);r=g.width,h=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.ym}else n=d,r=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.ym}0<n.length&&this.Im(n,r,h,o,a,l),this.Hm(s,e)}Hm(s,i){for(const e of this.im){const n=e.Um();if(n.length){let t=n.at(-1);if(t.wm()){const r=t.Lm(),h=r.slice(0);if(c(h),0===h.length)e.zm(-t.um()),n.pop();else if(h.length<r.length){t.Jm(h);const o=s(t).width,a=t.um()-o;t.Sm(o),e.zm(-a)}0!==i&&0<n.length&&((t=n.at(-1)).zm(i),e.zm(i))}}}}tc(){w.Bh(this.im)}qm(){return this.im.reduce((t,s)=>Math.max(t,s.um()),0)}$m(){return this.im.reduce((t,s)=>t+s.xm(),0)}}}{const Cs=self.Bs;Cs.tm.Cm=class{constructor(t){this.Up=t.Pm||[],this.Xm=t.width||-1,this.Ym=t.height||-1,this.Zm=t.fontBoundingBoxAscent||-1,this.Km=t.fontBoundingBoxDescent||-1,this.Qm=t.ym||-1,this.tg=0,this.sg=0}Pm(){return this.Up.values()}*ig(){const s=this.Up;for(let t=s.length-1;0<=t;--t)yield s[t]}Um(){return this.Up}zm(t){this.Xm+=t}um(){return this.Xm}xm(){return this.Ym}eg(){return this.Zm}_m(){return this.Km}Gm(){return this.Qm}ng(t){this.tg=t}rg(){return this.tg}hg(t){this.sg=t}og(){return this.sg}}}{const Ps=self.Bs;Ps.ag=class{constructor(t){this.lg=t.qp||[],this.Xm=t.width||-1,this.Ym=t.height||-1,this.Zm=t.fontBoundingBoxAscent||-1,this.Km=t.fontBoundingBoxDescent||-1,this.Qm=t.ym||-1,this.tg=0,this.sg=0}wm(){return!1}vm(){return!1}km(){return this.lg}ug(s){const i=this.lg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}fg(t){return!!this.ug(t)}dg(){const t=new Map;for(const s of this.lg)t.set(s.tag,s.param);return t}zm(t){this.Xm+=t}Sm(t){this.Xm=t}um(){return this.Xm}fm(t){this.Ym=t}xm(){return this.Ym}dm(t){this.Zm=t}Tm(){return this.Zm}pm(t){this.Km=t}_m(){return this.Km}gm(t){this.Qm=t}Gm(){return this.Qm}ng(t){this.tg=t}rg(){return this.tg}hg(t){this.sg=t}og(){return this.sg}}}{const Es=self.Bs;Es.Yp=class extends Es.ag{constructor(t){super(t),this.pg=t.Zp}wm(){return!0}jm(t){Es.Xn(this.pg,t),this.Xm=-1,this.Ym=-1,this.Zm=-1,this.Km=-1,this.Qm=-1}Bm(t){this.pg.push(t)}Wm(){return Es.lr(Es.Yp,{Zp:this.pg.slice(0),qp:this.lg,width:this.Xm,height:this.Ym,fontBoundingBoxAscent:this.Zm,fontBoundingBoxDescent:this.Km,ym:this.Qm})}Lm(){return this.pg}Jm(t){this.pg=t}Em(){return this.pg.length}sc(){return 0===this.pg.length}Am(){return this.pg.includes("\n")}}}{const As=self.Bs;As.Xp=class extends As.ag{constructor(t){super(t),this.mg=t.icon}vm(){return!0}gg(){return this.mg}Wm(){return As.lr(As.Xp,{icon:this.mg,qp:this.lg,width:this.Xm,height:this.Ym,fontBoundingBoxAscent:this.Zm,fontBoundingBoxDescent:this.Km,ym:this.Qm})}yg(t){if(!t)return null;let s=Number(this.mg);return String(s)===this.mg?(s=Math.floor(s),t.wg(s)):t.Sg(this.mg)}Mm(t){const s=this.yg(t);this.Xm=s?this.Ym*s.um()/s.xm():0}vg(t){const s=this.yg(t);return s?s.vg():null}Em(){return 1}}}{const Rs=self.Bs;Rs.bg=class{constructor(t){this.Mg=new Map,this.xg=t.Tg,this._g=t.Gg}ur(){for(const t of this.Mg.values())t.ur();this.Mg.clear()}Ig(t){let s=this.Mg.get(t);if(!s){const i=this.xg(t);s=Rs.lr(Rs.Cg,this,{source:t,Pg:i}),this.Mg.set(t,s)}return s}Eg(t){return this.Mg.has(t)}Ag(t){const s=this.Mg.get(t);s&&s.ur(),this.Mg.delete(t)}async Rg(t){return this._g(t)}}}{const Fs=self.Bs;Fs.Cg=class{constructor(t,s){this.Fg=t,this.Dg=s.source,this.Og=[],this.kg=new Map,this.Lg=!1,this.Bg=!1,this.Ng=null;const i=s.Pg.Wg;for(let t=0,s=i.length;t<s;++t){const e=i[t],n=Fs.lr(Fs.Vg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Og.push(n),e.tag&&this.kg.set(e.tag.toLowerCase(),n)}}ur(){for(const t of this.Og)t.ur();Fs.Bh(this.Og),this.kg.clear(),this.Fg=null,this.Dg=null}jg(){return this.Lg}Hg(){return this.Bg}Ug(){return this.Ng||(this.Ng=this.zg()),this.Ng}async zg(){if(!this.Lg){this.Lg=!0,this.Bg=!0;const t=await this.Fg.Rg(this.Dg);if(this.Fg){const i=t.Wg;for(let t=0,s=Math.min(i.length,this.Og.length);t<s;++t){const e=i[t].Jg;this.Og[t].qg(e)}this.Bg=!1}}}wg(t){return(t=Math.floor(t))<0||t>=this.Og.length?null:this.Og[t]}Sg(t){return this.kg.get(t.toLowerCase())||null}}}{const Ds=self.Bs;Ds.Vg=class{constructor(t,s){this.$g=t,this.Dg=s.source||null,this.Xg=s.index,this.Yg=s.tag,this.Xm=s.width,this.Ym=s.height,this.Zg=null}ur(){this.Xm=0,this.Ym=0,this.$g=null}Kg(){return this.Dg}um(){return this.Xm}xm(){return this.Ym}qg(t){this.Zg=t}vg(){return this.Zg}}}{let e=function(t,s,i,e){const n=Ns;_n.N(Ls,i,s),_n.N(Bs,t,s),_n.Ot(n,Ls,Bs),_n.normalize(n,n),e.set(n[0],n[1],n[2],_n.Dt(t,n))},h=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Qg,f=h.ty,d=h.iy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g;return u<w},n=function(t,s,i,e){const n=e.x,r=e.y,h=e.z,o=e.w,a=n*t+r*s+h*i;return o<=a};e,h,n;const Os=self.Bs,ks=self.bs,_n=ks.Ps,Hn=ks.Es,Tn=ks._s,Ls=_n.create(),Bs=_n.create(),Ns=_n.create(),Ws=Hn.create(),Vs=Tn.create(),js=_n.create(),Hs=_n.create(),Us=_n.create(),zs=_n.create(),Js=_n.create(),qs=_n.create(),$s=_n.create(),Xs=_n.create(),Ys=Hn.I(0,0,1,1);Os.ey={ny(t,s,i,e,n,r,h){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(c*=p)+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},hy(t,s,i,e,n,r,h){const o=Vs,a=Ws;return Tn.multiply(o,n,e),null!==Tn.P(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Hn.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},oy(t,s,i,e,n,r,h){const o=Ls,a=Bs;if(!Os.ey.hy(t,s,0,e,n,r,o))return!1;if(!Os.ey.hy(t,s,1,e,n,r,a))return!1;let l=Bs,u=(_n.N(l,a,o),Ns),c=(_n.set(u,0,0,1),-i),f=_n.Dt(u,l),d=0;if(0===f){const p=_n.Dt(u,o)+c;if(0!==p)return!1}else if((d=-(_n.Dt(o,u)+c)/f)<0)return!1;return _n.Pt(h,o,l,d),!0}};class Zs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Qg=NaN,this.ty=NaN,this.iy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Qg=0<t?1:0,this.ty=0<s?1:0,this.iy=0<i?1:0}}Os.ey.ly=class{constructor(){this.uy=new Zs,this.my=new Zs,this.gy=new Zs,this.yy=new Zs,this.wy=new Zs,this.Sy=new Zs}vy(t,s){const i=Ys;Os.ey.hy(0,1,0,t,s,i,js),Os.ey.hy(1,1,0,t,s,i,Hs),Os.ey.hy(0,0,0,t,s,i,Us),Os.ey.hy(1,0,0,t,s,i,zs),Os.ey.hy(0,1,1,t,s,i,Js),Os.ey.hy(1,1,1,t,s,i,qs),Os.ey.hy(0,0,1,t,s,i,$s),Os.ey.hy(1,0,1,t,s,i,Xs),e(Us,js,Js,this.uy),e(js,Hs,qs,this.my),e(Hs,zs,Xs,this.gy),e(zs,Us,$s,this.yy),e($s,Js,qs,this.Sy),e(zs,Hs,js,this.wy)}by(t,s,i,e,n,r){return h(t,s,i,e,n,r,this.uy)&&h(t,s,i,e,n,r,this.my)&&h(t,s,i,e,n,r,this.gy)&&h(t,s,i,e,n,r,this.yy)&&h(t,s,i,e,n,r,this.wy)&&h(t,s,i,e,n,r,this.Sy)}My(t,s,i){return!n(t,s,i,this.wy)}}}{const Ks=self.Bs,Qs=self.bs,_n=Qs.Ps,Hn=Qs.Es,Tn=Qs._s,ti=Tn.create(),si=_n.I(0,0,0),ii=_n.I(0,0,0),ei=_n.I(0,0,0),ni=_n.I(0,1,0),ri=(Hn.I(0,0,0,0),new Ks.Ql),hi=new Ks.Rect,oi=new Ks.Ql(0,0,1,0,1,1,0,1),ai={xy:1,Ty:1e4},li=Tn.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.ey._y=class{constructor(t){t=Object.assign({},ai,t),this.Xm=0,this.Ym=0,this.Gy=Ks.Sr(45),this.Iy=Math.tan(this.Gy/2),this.Cy=Tn.create(),this.Py=Tn.create(),this.Ey=!1,this.Ay=t.xy,this.Ry=t.Ty,this.Fy=[],this.Dy=new Map,this.Oy=null,this.ky=null,this.Ly=null,this.By=null,this.Ny=null,this.Wy=null,this.Vy=null,this.jy=null,this.Hy=null,this.Uy=null,this.zy=null,this.Jy=null,this.qy=new Map,this.$y=null,this.Xy=[],this.Yy=new Map,this.Zy=0,this.Ky=0,this.Qy=1,this.iw=[this.Qy],this.ew=1,this.rw=[this.ew],this.hw=.5,this.ow=[this.hw],this.aw=0,this.lw=!0,this.uw=!1}cw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}fw(){this.Zy=0,this.Ky=0,this.Oy=null,this.ky=null,this.Ly=null,this.By=null,this.Ny=null,this.Wy=null,this.Vy=null,this.jy=null,this.Hy=null,this.Uy=null,this.zy=null,this.Jy=null,this.pw()}mw(){this.fw(),this.$y=null}gw(){for(const t of this.Fy)t.ur();this.fw()}um(){return this.Xm}xm(){return this.Ym}yw(t){return this.ww()?100:t/(2*this.Sw())}bw(t){if(this.ww()){const s=t/(2*this.Sw());return s/this.yw(t)}return 1}Mw(t){this.Ay=t}xw(){return this.Ay}Tw(t){this.Ry=t}_w(){return this.Ry}Gw(t){this.Gy=t,this.Iy=Math.tan(this.Gy/2)}Iw(){return this.Gy}Sw(){return this.Iy}Cw(){this.Ey=!1}Pw(){this.Ey=!0}ww(){return!this.Ey}Ew(){return this.Ey}Aw(t,s,i=.5,e=.5){const n=this.xw(),r=this._w(),h=this.Iw();if(.5===i&&.5===e)this.Rw()?Tn.Mt(t,h,s,n,r):Tn.perspective(t,h,s,n,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.Sw()*n,f=c*s;Tn.vt(t,o*f,a*f,l*c,u*c,n,r),this.Rw()&&Tn.mul(t,li,t)}}Fw(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.yw(i)*n*this.Sw()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.Rw()?Tn._t(t,a,l,u,c,this.xw(),this._w()):Tn.ortho(t,a,l,u,c,this.xw(),this._w())}Dw(t,s,i,e,n,r=1){let h=1;this.ww()&&(h=200*this.Sw()/n);const o=ei,a=(_n.set(o,h,-h,1),si),l=ii;_n.multiply(a,s,o),_n.multiply(l,i,o),Tn.Gt(t,a,l,e||ni),o[2]=r,Tn.scale(t,t,o)}Ow(t,s,i,e,n,r,h,o){return _n.set(si,t,s,i),_n.set(ii,e,n,r),this.Dw(ti,si,ii,ni,h,o),ti}kw(t){this.Fy.push(t),this.Dy.set(t.Kc(),t)}Lw(t){const s=this.Fy.indexOf(t);-1!==s&&this.Fy.splice(s,1),this.Dy.delete(t.Kc())}pw(){Ks.Bh(this.Fy),this.Dy.clear()}Bw(t){return this.Dy.get(t)||null}Nw(){return this.Oy}Ww(){this.Vw(this.Oy)}jw(){return this.ky}Hw(){this.Vw(this.ky)}Uw(){this.Vw(this.Ly)}zw(){this.Vw(this.By)}Jw(){this.Vw(this.Ny)}qw(){this.Vw(this.Wy)}$w(){this.Vw(this.Vy)}Xw(){this.Vw(this.jy)}Yw(){this.Vw(this.Hy)}Zw(){this.Vw(this.Uy)}Kw(){this.Vw(this.zy)}Qw(){this.Vw(this.Jy)}tS(t){this.$y=t}sS(){return this.$y}iS(t,s,i,e){let n=Ks.ey.nS.eS(t,s,i,e),r=this.qy.get(n);return r||(r=Ks.lr(Ks.ey.nS,this,t,s,i,e),this.qy.set(n,r)),r.rS(),r}hS(t){t.oS(),0===t.aS()&&(this.$y===t&&(this.$y=null),this.qy.delete(t.lS()),t.ur())}uS(t){Ks.Bh(this.Xy),this.Yy.clear();let s=0;for(const i of t){const e=i[0],n=i[1],r=i[2];this.Xy.push([n,r]),this.Yy.set(e,{number:s,cS:n,fS:r}),s++}}dS(t){return this.Xy[t]}pS(t){return this.dS(t)[0]}mS(t){return this.dS(t)[1]}gS(t){const s=this.Yy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}yS(t){const s=this.Yy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}wS(t){this.Zy=t}SS(){return this.Zy}vS(t){this.Ky=t,this.$y=null}bS(){return this.Ky}Cm(t,s,i,e){const n=Ks.Tr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Qy,a=r*o,l=h*o,u=this.ew;2===u?this.MS(t,s,0,i,e,0,a,l):1===u?this.xS(t,s,0,i,e,0,a,l):this.TS(t,s,0,i,e,0,a,l)}_S(t,s,i,e,n,r){const h=Ks.Tr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.Qy,u=o*l,c=a*l,f=this.ew;2===f?this.MS(t,s,i,e,n,r,u,c):1===f?this.xS(t,s,i,e,n,r,u,c):this.TS(t,s,i,e,n,r,u,c)}MS(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.GS(m,g,i,S,v,r,b,M,r,y,w,i,oi)}xS(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.GS(d,p,i,y,w,r,S,v,r,m,g,i,oi)}TS(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.GS(d,p,i,y,w,r,S,v,r,m,g,i,oi)}IS(t,s,i,e,n,r){const h=Ks.Tr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.Qy,u=o*l,c=a*l,f=this.ew;2===f?this.CS(t,s,i,e,u,c,n,r):1===f?this.PS(t,s,i,e,u,c,n,r):this.ES(t,s,i,e,u,c,n,r)}CS(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,M=f+r-p;ri.set(m,g,S,v,b,M,y,w),hi.set(h,0,o,0),this.AS(ri,hi)}PS(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;ri.set(d,p,y,w,S,v,m,g),hi.set(h,0,o,0),this.AS(ri,hi)}ES(t,s,i,e,n,r,h,o){const a=this.hw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;ri.set(d,p,y,w,S,v,m,g),hi.set(h,0,o,0),this.AS(ri,hi)}RS(t,s,i,e){const n=.5*this.Qy,r=this.ew;2===r?this.FS(t,s,i,e,n):1===r?this.DS(t,s,i,e,n):this.OS(t,s,i,e,n)}FS(t,s,i,e,n){this.MS(t,s,0,i,s,0,0,n),this.MS(i,s,0,i,e,0,n,0),this.MS(i,e,0,t,e,0,0,-n),this.MS(t,e,0,t,s,0,-n,0)}DS(t,s,i,e,n){this.xS(t,s,0,i,s,0,0,n),this.xS(i,s,0,i,e,0,n,0),this.xS(i,e,0,t,e,0,0,-n),this.xS(t,e,0,t,s,0,-n,0)}OS(t,s,i,e,n){this.TS(t,s,0,i,s,0,0,n),this.TS(i,s,0,i,e,0,n,0),this.TS(i,e,0,t,e,0,0,-n),this.TS(t,e,0,t,s,0,-n,0)}kS(t){this.RS(t.xl(),t.Tl(),t._l(),t.Gl())}LS(t){const s=Ks.Tr(t.ih(),t.eh(),t.nh(),t.rh()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Qy,r=i*n,h=e*n,o=this.ew;2===o?this.BS(t,r,h):1===o?this.NS(t,r,h):this.WS(t,r,h)}BS(t,s,i){this.MS(t.ih(),t.eh(),0,t.nh(),t.rh(),0,s,i),this.MS(t.nh(),t.rh(),0,t.hh(),t.oh(),0,i,-s),this.MS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,-s,-i),this.MS(t.ah(),t.lh(),0,t.ih(),t.eh(),0,-i,s)}NS(t,s,i){this.xS(t.ih(),t.eh(),0,t.nh(),t.rh(),0,s,i),this.xS(t.nh(),t.rh(),0,t.hh(),t.oh(),0,i,-s),this.xS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,-s,-i),this.xS(t.ah(),t.lh(),0,t.ih(),t.eh(),0,-i,s)}WS(t,s,i){this.TS(t.ih(),t.eh(),0,t.nh(),t.rh(),0,s,i),this.TS(t.nh(),t.rh(),0,t.hh(),t.oh(),0,i,-s),this.TS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,-s,-i),this.TS(t.ah(),t.lh(),0,t.ih(),t.eh(),0,-i,s)}VS(t){this.Qy=t,this.iw[this.iw.length-1]=t}jS(){return this.Qy}HS(t){if(100<=this.iw.length)throw new Error("pushed too many line widths - check push/pop pairs");this.iw.push(t),this.Qy=t}US(){if(this.iw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.iw.pop(),this.Qy=this.iw.at(-1)}zS(){this.ew=0,this.rw[this.rw.length-1]=0}JS(){this.ew=1,this.rw[this.rw.length-1]=0}qS(){this.ew=2,this.rw[this.rw.length-1]=0}$S(t){if("butt"===t)this.XS();else if("square"===t)this.YS();else{if("zag"!==t)throw new Error("invalid line cap");this.ZS()}}XS(){if(100<=this.rw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rw.push(0),this.ew=0}YS(){if(100<=this.rw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rw.push(1),this.ew=1}ZS(){if(100<=this.rw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rw.push(2),this.ew=2}KS(){if(this.rw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.rw.pop(),this.ew=this.rw.at(-1)}QS(t){this.hw=t,this.ow[this.ow.length-1]=t}tv(){return this.hw}sv(t){if(100<=this.ow.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.ow.push(t),this.hw=t}nv(){if(this.ow.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.ow.pop(),this.hw=this.ow.at(-1)}rv(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,n=s[0],r=s[1];for(let t=0;t<i;t+=2){const h=2*t,o=s[2+h],a=s[3+h],l=s[4+h],u=s[5+h];if(t===e)this.hv(n,r,o,a,l,u,l,u);else{const c=s[6+h],f=s[7+h];this.hv(n,r,o,a,l,u,c,f)}}}ov(){return 3}av(){this.lv(!0),this.aw++}uv(){return this.aw}cv(){this.aw++}dv(t){this.lw=!!t}pv(){return this.lw}mv(t){this.uw=!!t}gv(){return this.uw}yv(){return!1}Rw(){return!1}wv(){}Sv(){}vv(){}bv(){return this.wv()+this.Sv()+this.vv()}Mv(){return Ks.lr(Ks.ey.xv,this)}}}{const ui=self.Bs;ui.ey.Tv=class{constructor(t,s){this.pr=s.name,this._v=t,this.Gv=s.Iv||0,this.Cv=s.Pv||0,this.Ev=!!s.Av,this.Rv=!!s.Fv,this.Dv=!!s.Ov,this.kv=!!s.Lv,this.Bv=!!s.Nv,this.Wv=!!s.Vv,this.jv=!!s.Hv,this.Uv=!1,this.zv=this.Ev||this.Wv||0!==this.Gv||0!==this.Cv}ur(){this._v=null}Jv(){return this._v}Kc(){return this.pr}qv(){return 0!==this.Gv||0!==this.Cv}$v(){return this.Gv}Xv(){return this.Cv}Yv(){return this.Ev}Zv(){return this.Rv}Kv(){return this.Dv}Qv(){return this.kv}t2(){return this.Bv}s2(){return this.Wv}i2(){return this.jv}e2(){return this.Uv}n2(){return this.zv}h2(){return!1}}}{const ci=self.Bs;ci.ey.nS=class{constructor(t,s,i,e,n){this._v=t,this.d1=0,this.o2=null,this.a2="",this.l2=i,this.u2=ci.lr(ci.Ho),this.u2.set(e),this.c2=n,"string"==typeof s?this.a2=s:(this.o2=s,this.a2=this.o2.Kc())}ur(){if(0<this.d1)throw new Error("releasing state group still in use");this._v=null,this.o2=null,this.a2=""}f2(){const t=this._v;t.Vw(this.o2),t.d2(this.l2),t.m2(this.u2),t.vS(this.c2),t.tS(this)}lS(){return ci.ey.nS.eS(this.a2,this.l2,this.u2,this.c2)}rS(){++this.d1}oS(){--this.d1}aS(){return this.d1}g2(){this.o2=null}w2(t){if(this.o2=t.Bw(this.a2),!this.o2)throw new Error("failed to restore shader program")}static eS(t,s,i,e){const n="string"==typeof t?t:t.Kc();return n+","+s+","+i.na()+","+i.ra()+","+i.oa()+","+i.aa()+","+e}}}{let e=function(t,s,i){const e=i.ih(),n=i.eh(),r=i.nh()-e,h=i.rh()-n,o=i.ah()-e,a=i.lh()-n,l=r*t,u=h*t,c=o*s,f=a*s;return[e+l+c,n+u+f]};e;const G=self.Bs,fi=G.lr(G.Ql);G.ey.S2=class{constructor(t,s,i){this.v2=t,this.b2=s,this.M2=i,this.tl=NaN,this.sl=NaN,this.c2=NaN,this.T2=NaN,this._2=NaN,this.tl=0,this.sl=0,this.c2=0,this.T2=0,this._2=0}G2(t,s,i,e){this.tl=t,this.sl=s,this.T2=i,this._2=e}I2(){return this.tl}C2(t){this.tl!==t&&(this.tl=t,this.v2.P2())}E2(){return this.sl}A2(t){this.sl!==t&&(this.sl=t,this.v2.P2())}R2(){return this.c2}F2(t){this.c2!==t&&(this.c2=Math.max(t,0),this.v2.P2())}D2(){return this.T2}O2(t){this.T2=t}L2(){return this._2}B2(t){this._2=t}N2(t,s,i){[this.tl,this.sl]=e(t.tl,t.sl,s),this.c2=t.c2,this.T2=G.kt(i.xl(),i._l(),t.T2),this._2=G.kt(i.Tl(),i.Gl(),t._2)}W2(t,s,i){[this.tl,this.sl]=e(t.tl,t.sl,s),this.c2=t.c2,[this.T2,this._2]=e(t.T2,t._2,i)}V2(){return{x:this.I2(),y:this.E2(),z:this.R2(),u:this.D2(),v:this.L2()}}j2(t){this.C2(t.x),this.A2(t.y),t.hasOwnProperty("z")&&this.F2(t.z),this.O2(t.u),this.B2(t.v)}H2(){return this.v2}U2(){return this.b2}z2(){return this.M2}},G.ey.J2=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.q2=i,this.X2=t,this.Y2=s||null,this.Z2=[],this.K2=0,this.Q2=0,this.tb=1,this.sb=1,this.ib=0,this.eb=!1;const e=i-1,n=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const h=G.lr(G.ey.S2,this,t,s),o=t/e,a=s/n;h.G2(o,a,o,a),r.push(h)}this.Z2.push(r)}}ur(){G.Bh(this.Z2)}nb(){return this.q2}rb(){return this.X2}hb(){return this.Y2}ob(){return this.Z2}P2(){this.eb=!0}ab(){if(this.eb){let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.Z2)for(const h of r){const o=h.I2(),a=h.E2();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),n=Math.max(n,h.R2())}this.K2=t,this.Q2=s,this.tb=i,this.sb=e,this.ib=n,this.eb=!1}}lb(){return this.ab(),this.K2}ub(){return this.ab(),this.Q2}cb(){return this.ab(),this.tb}fb(){return this.ab(),this.sb}pb(){return this.ab(),this.ib}mb(){return 0<this.pb()}gb(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.q2||s<0||s>=this.X2?null:this.Z2[s][t]}yb(t,i,e){const n=e instanceof G.Rect;if(t.nb()!==this.nb()||t.rb()!==this.rb())throw new Error("source mesh wrong size");const r=t.Z2,h=this.Z2;for(let t=0,s=h.length;t<s;++t){const o=r[t],a=h[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];n?u.N2(l,i,e):u.W2(l,i,e)}}}wb(r){let h=this.Z2,o=h[0];for(let t=1,s=h.length;t<s;++t){let i=h[t],e=o[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.D2(),e.L2(),a.D2(),a.L2(),l.D2(),l.L2(),n.D2(),n.L2()),r.GS(e.I2(),e.E2(),e.R2(),a.I2(),a.E2(),a.R2(),l.I2(),l.E2(),l.R2(),n.I2(),n.E2(),n.R2(),fi),e=a,n=l}o=i}}Sb(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Z2,l=t[0];for(let r=1,h=t.length;r<h;++r){let i=t[r],e=l[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.I2(),e.E2(),e.R2()),[m,g,y]=a(u.I2(),u.E2(),u.R2()),[w,S,v]=a(c.I2(),c.E2(),c.R2()),[b,M,x]=a(n.I2(),n.E2(),n.R2());o._S(f,d,p,m,g,y),o._S(f,d,p,w,S,v),o._S(f,d,p,b,M,x),t===s-1&&o._S(m,g,y,w,S,v),r===h-1&&o._S(b,M,x,w,S,v),e=u,n=c}l=i}}vb(t){let i=.99999999,e=t.Bu(),n=[],r=this.nb()-1,h=this.rb()-1,o=1/r,a=1/h,l=r-1,u=h-1,c=e[0],f=e[1],d=G.gr(Math.floor(c*r),0,l),p=G.gr(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1,v=()=>{c=G.gr(G.kt(c,g,w),0,1),f=G.gr(G.kt(f,y,w),0,1),n.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=G.gr(Math.floor(c*r),0,l),p=G.gr(Math.floor(f*h),0,u);const b=(t+2)%s;for(g=e[b],y=e[1+b],S=-1;;){if(1e6<n.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,T=(d+1)*o,_=(p+1)*a;if(m=G.mh(c,f,M,x,T,x,T,_),0!==S&&0<=(w=G.ph(c,f,g,y,M,x,T,_,-.001))&&w<=i)v(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=G.ph(c,f,g,y,M,x,T,x,.001))&&w<=i)v(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=G.ph(c,f,g,y,T,x,T,_,.001))&&w<=i)v(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=G.ph(c,f,g,y,M,x,M,_,.001))&&w<=i)v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=G.ph(c,f,g,y,M,_,T,_,.001))&&w<=i))break;v(),p++,m=!0,S=2}}}return G.lr(G.Fu,n)}bb(t,s){const i=this.Mb(t);this.xb(i),s.Wu(i)}Mb(t){const i=[],e=t.Bu();for(let t=0,s=e.length;t<s;t+=2){const n=e[t],r=e[t+1],[h,o]=this.Tb(n,r);i.push(h,o)}return i}Tb(t,s){const i=this.nb()-1,e=this.rb()-1,n=1/i,r=1/e,h=G.gr(Math.floor(t*i),0,i-1),o=G.gr(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.gb(h,o),d=this.gb(h+1,o+1),p=G.mh(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.gb(h+(p?1:0),o+(p?0:1)),[w,S,v]=G.gh(t,s,a,l,m,g,u,c);return G.yh(w,S,v,f.I2(),f.E2(),f.R2(),y.I2(),y.E2(),y.R2(),d.I2(),d.E2(),d.R2())}xb(i){let e=[],n=i[0],r=i[1],h=n-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-n,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(h);(!d&&!p&&.001<Math.abs(c/h-f/o)||0==c&&0==f)&&e.push(n,r),n=l,r=u,h=c,o=f}6<=e.length&&e.length<i.length&&G.jh(i,e)}V2(){return{cols:this.nb(),rows:this.rb(),points:this.Z2.map(t=>t.map(t=>t.V2()))}}j2(t){const i=this.nb(),e=this.rb();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const n=t.points;for(let s=0;s<e;++s){const r=n[s];for(let t=0;t<i;++t){const h=this.gb(t,s);h.j2(r[t])}}}}}{let d=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{_b:i,Gb:e,format:n,type:r}};d;const di=self.Bs,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={Ib:"clamp-to-edge",Cb:"clamp-to-edge",Pb:"trilinear",Eb:0,Ab:"rgba8",Rb:!0,Fb:"default",premultiplyAlpha:!0,Db:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},vi=new Set;di.ey.Ob=class{constructor(t){this._v=t,this.kb=null,this.Xm=0,this.Ym=0,this.Lb=!0,this.Bb="clamp-to-edge",this.Nb="clamp-to-edge",this.Wb="trilinear",this.Vb=0,this.jb="rgba8",this.Hb=!1,this.Ub="default",this.d1=0}zb(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.kb)throw new Error("already created texture");if(this.Bb=t.Ib,this.Nb=t.Cb,this.Wb=t.Pb,this.Vb=t.Eb,this.jb=t.Ab,this.Hb=!!t.Rb&&this._v.pv(),this.Ub=t.Fb,!yi.has(this.Bb)||!yi.has(this.Nb))throw new Error("invalid wrap mode");if(!mi.has(this.Wb))throw new Error("invalid sampling");if(!pi.has(this.jb))throw new Error("invalid pixel format");if(!gi.has(this.Ub))throw new Error("invalid mipmap quality");if(this.Lb=!0,s instanceof ArrayBuffer||null===s||t.Db){if(this.Xm=t.width,this.Ym=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Xm*this.Ym*4)throw new Error("ArrayBuffer wrong size")}else this.Xm=s.width,this.Ym=s.height;if(this.Xm<=0||this.Ym<=0)throw new Error("invalid texture data size");if(t.Db){const o=di.Ao(this.Xm,this.Ym),a=o.getContext("2d");a.drawImage(s,0,0,this.Xm,this.Ym),s=o}const i=di.Lr(this.Xm)&&di.Lr(this.Ym),e=this._v.Jb();if(this.Xm>e||this.Ym>e)throw new Error("texture data exceeds maximum texture size");const n=this._v.qb(),r=this._v.$b(),h=(this.kb=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.kb),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.jb,n));if(this._v.Xb()||i||!this.Yb())if(2<=r){let t;t=this.Hb?Math.floor(Math.log2(Math.max(this.Xm,this.Ym))+1):1,n.texStorage2D(n.TEXTURE_2D,t,h._b,this.Xm,this.Ym),s instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Xm,this.Ym,h.format,h.type,new Uint8Array(s)):null!==s&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,s)}else s instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.Gb,this.Xm,this.Ym,0,h.format,h.type,new Uint8Array(s)):null===s?n.texImage2D(n.TEXTURE_2D,0,h.Gb,this.Xm,this.Ym,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.Gb,h.format,h.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Xm,this.Ym):s)instanceof ImageData){const c=di.Ao(this.Xm,this.Ym),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Ao(di.Br(this.Xm),di.Br(this.Ym)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.Wb,u.drawImage(s,0,0,this.Xm,this.Ym,0,0,l.width,l.height),n.texImage2D(n.TEXTURE_2D,0,h.Gb,h.format,h.type,l)}null!==s&&this.Zb(n),n.bindTexture(n.TEXTURE_2D,null),this._v.Kb(),this.d1=1,vi.add(this)}Qb(t,s,i){if(i=Object.assign({},wi,i),this.kb)throw new Error("already created texture");if(this.Bb=i.Ib,this.Nb=i.Cb,this.Wb=i.Pb,this.jb=i.Ab,this.Hb=!!i.Rb&&this._v.pv(),this.Ub=i.Fb,!yi.has(this.Bb)||!yi.has(this.Nb))throw new Error("invalid wrap mode");if(!mi.has(this.Wb))throw new Error("invalid sampling");if(!pi.has(this.jb))throw new Error("invalid pixel format");if(!gi.has(this.Ub))throw new Error("invalid mipmap quality");this.Lb=!1,this.Xm=Math.floor(t),this.Ym=Math.floor(s);const e=di.Lr(this.Xm)&&di.Lr(this.Ym),n=this._v.Jb();if(this.Xm<=0||this.Ym<=0)throw new Error("invalid texture size");if(this.Xm>n||this.Ym>n)throw new Error("texture exceeds maximum texture size");if(!this._v.Xb()&&this.Yb()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this._v.qb(),h=this._v.$b(),o=(this.kb=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.kb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.jb,r)),a=2<=h?o._b:o.Gb;r.texImage2D(r.TEXTURE_2D,0,a,this.Xm,this.Ym,0,o.format,o.type,null),this.Zb(r),r.bindTexture(r.TEXTURE_2D,null),this._v.Kb(),this.d1=1,vi.add(this)}tM(t){if("default"===this.Ub)return this.Lb?t.NICEST:t.FASTEST;if("low"===this.Ub)return t.FASTEST;if("high"===this.Ub)return t.NICEST;throw new Error("invalid mipmap quality")}Yb(){return"clamp-to-edge"!==this.Bb||"clamp-to-edge"!==this.Nb}sM(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Zb(t){const s=di.Lr(this.Xm)&&di.Lr(this.Ym);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.sM(t,this.Bb)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.sM(t,this.Nb)),"nearest"===this.Wb)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Hb=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this._v.Xb())&&this.Hb){t.hint(t.GENERATE_MIPMAP_HINT,this.tM(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.Wb&&!this._v.gv();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Hb=!1;const i=this._v.iM();i&&0<this.Vb&&"nearest"!==this.Wb&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Vb,this._v.eM()))}nM(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.kb||this.d1<=0)throw new Error("texture not created");if(this.Lb)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this._v.$b(),r=this._v.qb(),h=(r.bindTexture(r.TEXTURE_2D,this.kb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.jb,r)),o=2<=n?h._b:h.Gb;try{if(this.Xm===i&&this.Ym===e){const a=di.Lr(this.Xm)&&di.Lr(this.Ym);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this._v.Xb())&&this.Hb&&(r.hint(r.GENERATE_MIPMAP_HINT,this.tM(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Xm=i,this.Ym=e;const l=di.Lr(this.Xm)&&di.Lr(this.Ym);if(!this._v.Xb()&&this.Yb()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(l||this._v.Xb())&&this.Hb&&(r.hint(r.GENERATE_MIPMAP_HINT,this.tM(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this._v.Kb()}rM(){if(0<this.d1)throw new Error("texture still has references");if(!this.kb)throw new Error("already deleted texture");vi.delete(this);const t=this._v.qb();t.deleteTexture(this.kb),this.kb=null}hM(){return!!this.kb}oM(){return this.kb}Jv(){return this._v}aM(){this.d1++}lM(){if(this.d1<=0)throw new Error("no more references");this.d1--}uM(){return this.d1}um(){return this.Xm}xm(){return this.Ym}cM(){return this.Lb}fM(){let t=this.Xm*this.Ym;switch(this.jb){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Hb&&(t+=Math.floor(t/3)),t}static g2(){vi.clear()}static dM(){return vi.values()}}}{const bi=self.Bs,Mi=self.bs,_n=Mi.Ps,Tn=Mi._s,xi=new Set(["nearest","bilinear","trilinear"]),Ti={Pb:"trilinear",alpha:!0,depth:!1,pM:!0,mM:!0,gM:0},_i=new Set;bi.ey.yM=class{constructor(t){this._v=t,this.wM=null,this.SM=null,this.kb=null,this.vM=null,this.Xm=0,this.Ym=0,this.bM=!0,this.Wb="trilinear",this.MM=!0,this.xM=!1,this.TM=!0,this._M=0,this.GM=Tn.create(),this.IM=0,this.CM=0,this.PM=0}EM(t,s,i){i=Object.assign({},Ti,i);const e=this._v.$b();if(this.kb||this.vM)throw new Error("already created render target");if(this.Wb=i.Pb,this.MM=!!i.alpha,this.xM=!!i.depth,this.TM=!!i.pM,this.bM=!!i.mM,this._M=i.gM,!xi.has(this.Wb))throw new Error("invalid sampling");if(0<this._M&&(e<2||this.TM))throw new Error("invalid use of multisampling");if(e<2&&(this.TM=!0),this.Xm=t,this.Ym=s,this.Xm<=0||this.Ym<=0)throw new Error("invalid render target size");this.AM();const n=this._v.qb();if(this.wM=n.createFramebuffer(),this.xM&&(this.SM=n.createFramebuffer()),this.TM){this.kb=this._v.RM(this.Xm,this.Ym,{Pb:this.Wb,Ab:this.MM?"rgba8":"rgb8",Rb:!1});const h=this.kb.oM();n.bindFramebuffer(n.FRAMEBUFFER,this.wM),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),this.xM&&(n.bindFramebuffer(n.FRAMEBUFFER,this.SM),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0))}else{this.vM=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.vM);const o=this.MM?n.RGBA8:n.RGB8;if(0<this._M){const a=n.getInternalformatParameter(n.RENDERBUFFER,o,n.SAMPLES);if(a&&a[0]){const l=a[0];this._M>l&&(this._M=l)}else this._M=0}0===this._M?n.renderbufferStorage(n.RENDERBUFFER,o,this.Xm,this.Ym):n.renderbufferStorageMultisample(n.RENDERBUFFER,this._M,o,this.Xm,this.Ym),n.bindFramebuffer(n.FRAMEBUFFER,this.wM),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.vM),this.xM&&(n.bindFramebuffer(n.FRAMEBUFFER,this.SM),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.vM)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this._v.FM();this.xM&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.wM),this._v.DM()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),_i.add(this)}OM(t,s){if(this.Xm!==t||this.Ym!==s){this.Xm=t,this.Ym=s,this.AM();const i=this._v.qb(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.wM),this.kb?this.kb.nM(new ImageData(this.Xm,this.Ym)):(i.bindRenderbuffer(i.RENDERBUFFER,this.vM),i.renderbufferStorage(i.RENDERBUFFER,this.MM?i.RGBA8:i.RGB8,this.Xm,this.Ym),i.bindRenderbuffer(i.RENDERBUFFER,null)),this._v.FM());this.xM&&e&&(this._v.DM()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}rM(){if(!this.kb&&!this.vM)throw new Error("already deleted render target");_i.delete(this);const t=this._v.qb(),s=(this.kb?(t.bindFramebuffer(t.FRAMEBUFFER,this.wM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.xM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.SM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this._v.kM(this.kb),this.kb=null):this.vM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.wM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.xM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.SM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.vM),this.vM=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this._v.$b()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.wM),this.xM&&t.deleteFramebuffer(this.SM),this._v.LM());s.BM=null,this.wM=s.NM=null}AM(){this._v.Aw(this.GM,this.Xm/this.Ym),this.IM=this._v.Iw(),this.CM=this._v.xw(),this.PM=this._v._w()}WM(){return this.wM}VM(){return this.SM}Jv(){return this._v}jM(){return this.kb}HM(){return this._v.Iw()===this.IM&&this._v.xw()===this.CM&&this._v._w()===this.PM||this.AM(),this.GM}UM(){return"nearest"!==this.Wb}zM(){return this.MM}JM(){return this.TM}qM(){return this.xM}um(){return this.Xm}xm(){return this.Ym}$M(){return this.bM}XM(){return this._M}YM(){const t={Pb:this.Wb,alpha:this.MM,pM:this.TM};return this.bM||(t.width=this.Xm,t.height=this.Ym),t}ZM(t){return"nearest"!==(t=Object.assign({},Ti,t)).Pb===this.UM()&&!!t.alpha===this.zM()&&!!t.depth===this.qM()&&!(2<=this._v.$b()&&!!t.pM!==this.JM())&&("number"==typeof t.width||"number"==typeof t.height?!this.$M()&&this.um()===Math.floor(t.width)&&this.xm()===Math.floor(t.height):this.$M())}KM(){return this.kb?this.kb.oM():null}fM(){return this.kb?this.kb.fM():this.Xm*this.Ym*(this.MM?4:3)}static async QM(t,s){const i=await t.tx(s,!0);return bi.Do(i)}static g2(){_i.clear()}static ix(){return _i.values()}static nx(t,s){for(const i of _i)i.$M()&&i.OM(t,s)}}}{const m=self.Bs,Gi=self.bs,_n=Gi.Ps,Tn=Gi._s,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.ey.hx=class extends m.ey.Tv{static async ox(t,s){const i=t.qb(),e=s.src,n=s.lx,r=s.name,h=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(h,e),i.compileShader(h),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,n),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.ux());if(l?await t.mx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Rh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.J1(i.getProgramInfoLog(a)||"").trim();return u&&!m.H1(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async gx(t,s){const i=await m.ey.hx.ox(t,s);return new m.ey.hx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.qb(),n=t.LM(),r=(t.lv(),e.useProgram(s),this.yx=e,this.o2=s,this.wx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),h=e.getAttribLocation(s,"aTex"),o=(this.Sx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.vx),e.vertexAttribPointer(r,t.ov(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.bx),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.Sx&&(e.bindBuffer(e.ARRAY_BUFFER,t.Mx),e.vertexAttribPointer(this.Sx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Sx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.xx=new m.ey.Tx(this,"matP","mat4"),this._x=new m.ey.Tx(this,"matMV","mat4"),this.Gx=new m.ey.Tx(this,"color","vec4"),this.Ix=new m.ey.Tx(this,"samplerFront","sampler"),this.Cx=new m.ey.Tx(this,"pointTexStart","vec2"),this.Px=new m.ey.Tx(this,"pointTexEnd","vec2"),this.Ex=new m.ey.Tx(this,"zElevation","float"),this.Ax=new m.ey.Tx(this,"tileSize","vec2"),this.Rx=new m.ey.Tx(this,"tileSpacing","vec2"),this.Fx=new m.ey.Tx(this,"color2_","vec4"),this.Dx=new m.ey.Tx(this,"outlineThickness","float"),this.Ox=new m.ey.Tx(this,"samplerBack","sampler"),this.kx=new m.ey.Tx(this,"samplerDepth","sampler"),this.Lx=new m.ey.Tx(this,"destStart","vec2"),this.Bx=new m.ey.Tx(this,"destEnd","vec2"),this.Nx=new m.ey.Tx(this,"srcStart","vec2"),this.Wx=new m.ey.Tx(this,"srcEnd","vec2"),this.Vx=new m.ey.Tx(this,"srcOriginStart","vec2"),this.jx=new m.ey.Tx(this,"srcOriginEnd","vec2"),this.Hx=new m.ey.Tx(this,"pixelSize","vec2"),this.Ux=new m.ey.Tx(this,"seconds","float"),this.zx=new m.ey.Tx(this,"devicePixelRatio","float"),this.Jx=new m.ey.Tx(this,"layerScale","float"),this.qx=new m.ey.Tx(this,"layerAngle","float"),this.$x=new m.ey.Tx(this,"layoutStart","vec2"),this.Xx=new m.ey.Tx(this,"layoutEnd","vec2"),this.Yx=new m.ey.Tx(this,"zNear","float"),this.Zx=new m.ey.Tx(this,"zFar","float"),this.Kx=!!(this.Hx.Qx()||this.Ux.Qx()||this.Ox.Qx()||this.Lx.Qx()||this.Bx.Qx()||this.Nx.Qx()||this.Wx.Qx()||this.Vx.Qx()||this.jx.Qx()||this.zx.Qx()||this.Jx.Qx()||this.qx.Qx()||this.$x.Qx()||this.Xx.Qx()),i.parameters||[]);this.tT=[],this.Uv=this.Hx.Qx()||this.Nx.Qx()||this.Wx.Qx()||this.Vx.Qx()||this.jx.Qx(),this.sT=!1,this.iT=!1,this.Gx.eT(1,1,1,1),this.Fx.eT(1,1,1,1),this.Ix.nT(0),this.Ox.nT(1),this.kx.nT(2),this.Cx.rT(0,0),this.Px.rT(1,1),this.Ex.hT(0),this.Ax.rT(0,0),this.Rx.rT(0,0),this.Lx.rT(0,0),this.Bx.rT(1,1),this.Nx.rT(0,0),this.Wx.rT(0,0),this.Vx.rT(0,0),this.jx.rT(0,0),this.Hx.rT(0,0),this.zx.hT(1),this.Yx.hT(t.xw()),this.Zx.hT(t._w()),this.Jx.hT(1),this.qx.hT(0),this.Ux.hT(0),this.$x.rT(0,0),this.Xx.rT(0,0),this.Dx.hT(1);for(const l of o){const u=l[0],c=l[2],f=new m.ey.Tx(this,u,c);"color"===c?f.oT(0,0,0):f.hT(0),this.tT.push(f)}this.wx?this.aT(n.lT):(this.uT(n.lT,!0),this.cT(n.fT,!0));const a=n.dT;e.useProgram(a?a.o2:null)}ur(){this.yx.deleteProgram(this.o2),this.o2=null,this._v.Lw(this),this.yx=null,super.ur()}pT(){return this.yx}mT(){return this.o2}gT(){return this.tT.length}yT(t){return t<0||t>=this.tT.length?null:this.tT[t].wT()}ST(i){for(let t=0,s=i.length;t<s;++t)if(!this.tT[t].vT(i[t]))return!1;return!0}bT(i){for(let t=0,s=i.length;t<s;++t)this.tT[t].MT(i[t])}xT(t,s,i,e,n,r,h,o,a,l){return!this.Ox.Qx()&&!(this.Hx.Qx()&&!this.Hx.TT(n,r)||this.Lx.Qx()&&!this.Lx.TT(t.xl(),t.Tl())||this.Bx.Qx()&&!this.Bx.TT(t._l(),t.Gl())||this.zx.Qx()&&!this.zx._T(h)||this.Jx.Qx()&&!this.Jx._T(o)||this.qx.Qx()&&!this.qx._T(a)||this.Nx.Qx()&&!this.Nx.TT(s.xl(),s.Tl())||this.Wx.Qx()&&!this.Wx.TT(s._l(),s.Gl())||this.Vx.Qx()&&!this.Vx.TT(i.xl(),i.Tl())||this.jx.Qx()&&!this.jx.TT(i._l(),i.Gl())||this.$x.Qx()&&!this.$x.TT(e.xl(),e.Tl())||this.Xx.Qx()&&!this.Xx.TT(e.Tl(),e.Gl())||this.Ux.Qx()&&!this.Ux._T(l))}GT(t,s,i,e,n,r,h,o,a,l){this.Ox.Qx()||(this.Hx.Qx()&&this.Hx.IT(n,r),this.Lx.Qx()&&this.Lx.IT(t.xl(),t.Tl()),this.Bx.Qx()&&this.Bx.IT(t._l(),t.Gl()),this.zx.Qx()&&this.zx.CT(h),this.Jx.Qx()&&this.Jx.CT(o),this.qx.Qx()&&this.qx.CT(a),this.Nx.Qx()&&this.Nx.IT(s.xl(),s.Tl()),this.Wx.Qx()&&this.Wx.IT(s._l(),s.Gl()),this.Vx.Qx()&&this.Vx.IT(i.xl(),i.Tl()),this.jx.Qx()&&this.jx.IT(i._l(),i.Gl()),this.$x.Qx()&&this.$x.IT(e.xl(),e.Tl()),this.Xx.Qx()&&this.Xx.IT(e.Tl(),e.Gl()),this.Ux.Qx()&&this.Ux.CT(l))}uT(t,s){this.sT&&!s||this.wx||(this.xx.Qx()&&this.xx.PT(t),this.sT=!0)}ET(){this.sT=!1}cT(t,s){this.iT&&!s||this.wx||(this._x.Qx()&&this._x.PT(t),this.iT=!0)}AT(){this.iT=!1}aT(t){if(!this.wx)throw new Error("not device transform shader");this.xx.PT(t);const s=this._v,i=s.um()/2,e=s.xm()/2,n=s.Ow(i,e,s.yw(s.xm()),i,e,0,s.xm());this._x.PT(n)}RT(t){this.Gx.Qx()&&this.Gx.FT(t[0],t[1],t[2],t[3])}static DT(){return Ii}static OT(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static kT(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static LT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static BT(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static NT(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static WT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static VT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static jT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static HT(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static UT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static zT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static JT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static qT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static $T(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static XT(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static YT(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static ZT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static KT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static QT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static t_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static s_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static i_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Bs,Pi=self.bs,Tn=Pi._s,Ei=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.ey.Tx=class{constructor(t,s,i){if(!Ei.has(i))throw new Error("invalid uniform type");this.Y2=t,this.yx=this.Y2.pT(),this.pr=s,this.yf=i,this.e_="color"===this.yf,this.n_=this.yx.getUniformLocation(this.Y2.mT(),s),this.r_=!!this.n_;const e=Ei.get(i);this.h_=new Float32Array(e),this.o_=new Float32Array(e)}ur(){this.Y2=null,this.yx=null,this.n_=null}Qx(){return this.r_}wT(){return this.yf}a_(){return this.e_}hT(t){this.Qx()&&(this.h_[0]=t,this.o_.set(this.h_),this.yx.uniform1f(this.n_,t))}nT(t){this.Qx()&&(this.h_[0]=t,this.o_.set(this.h_),this.yx.uniform1i(this.n_,t))}rT(t,s){this.Qx()&&(this.h_[0]=t,this.h_[1]=s,this.o_.set(this.h_),this.yx.uniform2f(this.n_,t,s))}oT(t,s,i){this.Qx()&&(this.h_[0]=t,this.h_[1]=s,this.h_[2]=i,this.o_.set(this.h_),this.yx.uniform3f(this.n_,t,s,i))}eT(t,s,i,e){this.Qx()&&(this.h_[0]=t,this.h_[1]=s,this.h_[2]=i,this.h_[3]=e,this.o_.set(this.h_),this.yx.uniform4f(this.n_,t,s,i,e))}l_(t){t=Math.fround(t);const s=this.h_;s[0]!==t&&(s[0]=t,this.yx.uniform1f(this.n_,t))}u_(t){const s=this.h_;s[0]!==t&&this.yx.uniform1i(this.n_,s[0]=t)}c_(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.h_;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.yx.uniform2f(this.n_,t,s))}f_(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.h_;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.yx.uniform3f(this.n_,t,s,i))}FT(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.h_;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.yx.uniform4f(this.n_,t,s,i,e))}PT(t){const s=this.h_;Tn.W(s,t)||(Ci.kh(s,t,0),this.yx.uniformMatrix4fv(this.n_,!1,t))}vT(t){const s=this.o_;return this.a_()?s[0]===Math.fround(t.na())&&s[1]===Math.fround(t.ra())&&s[2]===Math.fround(t.oa()):s[0]===Math.fround(t)}MT(t){const s=this.o_;this.a_()?(s[0]=t.na(),s[1]=t.ra(),s[2]=t.oa()):s[0]=t}_T(t){return this.o_[0]===Math.fround(t)}TT(t,s){const i=this.o_;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}CT(t){this.o_[0]=t}IT(t,s){const i=this.o_;i[0]=t,i[1]=s}}}{const Ai=self.Bs,Ri=self.bs,Hn=Ri.Es,Tn=Ri._s;Ai.ey.d_=class{constructor(t){this.renderer=t,this.fT=Tn.create(),this.lT=Tn.create(),this.BM=null,this.NM=null,this.p_=!1,this.m_=Hn.I(1,1,1,1),this.dT=null,this.g_=new Ai.Rect,this.clearColor=Ai.lr(Ai.Ho,0,0,0,0)}},Ai.ey.y_=class{constructor(t){const s=new ArrayBuffer(96);this.yf=0,this.w_=t,this.yx=t.renderer.qb(),this.S_=0,this.v_=0,this.b_=null,this.M_=new Float32Array(s,0,16),this.x_=new Float32Array(s,64,4),this.T_=new Float32Array(s,80,4),this.__=[]}G_(t,s){this.yf=1,this.S_=t,this.v_=s}I_(){const t=this.yx;t.drawElements(t.TRIANGLES,this.v_,t.UNSIGNED_SHORT,this.S_)}C_(t){this.yf=2,this.b_=t}P_(){const t=this.yx,s=this.b_;t.bindTexture(t.TEXTURE_2D,s?s.oM():null)}E_(t){this.yf=3,t.ua(this.x_,0)}A_(){const t=this.x_,s=this.w_;Hn.G(s.m_,t),s.dT.RT(t)}R_(t){this.yf=21,t.ua(this.x_,0)}F_(){const t=this.x_,s=this.w_.dT;s.Fx.Qx()&&s.Fx.FT(t[0],t[1],t[2],t[3])}D_(t,s){this.yf=4,this.S_=t,this.v_=s}O_(){this.yx.blendFunc(this.S_,this.v_)}k_(t,s,i,e){this.yf=5;const n=this.x_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}L_(){const t=this.x_;this.yx.viewport(t[0],t[1],t[2],t[3])}B_(t){this.yf=6,Tn.G(this.M_,t)}N_(){const t=this.w_,i=t.renderer.Fy,e=t.dT,n=this.M_;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.uT(n,!0):r.ET()}Tn.G(t.lT,n)}W_(t){this.yf=7,Tn.G(this.M_,t)}V_(){const t=this.w_,i=t.renderer.Fy,e=t.dT,n=this.M_;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.cT(n,!0):r.AT()}Tn.G(t.fT,n)}j_(t){this.yf=8,this.b_=t}H_(){const t=this.yx,s=this.b_,i=this.w_;s?(i.BM=s.WM(),i.NM=s.VM(),i.p_&&i.NM?t.bindFramebuffer(t.FRAMEBUFFER,i.NM):t.bindFramebuffer(t.FRAMEBUFFER,i.BM)):(i.BM=null,i.NM=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}U_(t){this.yf=9,t.ua(this.M_,0)}z_(t,s,i,e){this.yf=9;const n=this.M_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}J_(){const t=this.yx,s=this.M_,i=this.w_,e=i.clearColor,n=s[0],r=s[1],h=s[2],o=s[3];e.ga(n,r,h,o)||(t.clearColor(n,r,h,o),e.$o(n,r,h,o)),t.clear(t.COLOR_BUFFER_BIT)}q_(t){this.yf=15,t.ua(this.M_,0)}X_(){const t=this.M_;this.w_.g_.set(t[0],t[1],t[2],t[3])}Y_(t,s){this.yf=10,this.S_=t,this.v_=1,this.M_[0]=s}Z_(){const t=this.yx,s=this.w_,i=s.renderer,e=i.ky,n=(t.useProgram(e.o2),e.uT(s.lT,!1),e.cT(s.fT,!1),s.g_),r=(e.Cx.Qx()&&e.Cx.c_(n.xl(),n.Tl()),e.Px.Qx()&&e.Px.c_(n._l(),n.Gl()),this.M_[0]);if(e.Ex.Qx()&&e.Ex.l_(r),e.Gx.Qx()){const h=s.m_;e.Gx.FT(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.S_/4,this.v_),t.useProgram(s.dT.o2)}K_(t){this.yf=11,this.b_=t}Q_(){const t=this.yx,s=this.w_,i=this.b_;if(s.dT=i,t.useProgram(i.o2),i.uT(s.lT,!1),i.cT(s.fT,!1),i.Gx.Qx()){const e=s.m_;i.Gx.FT(e[0],e[1],e[2],e[3])}}tG(){this.yf=12}sG(){const t=this.w_.dT,s=this.yx,i=this.M_,e=this.x_,n=this.T_;if(t.Ox.Qx()){const r=this.w_.renderer,h=this.b_;r.iG!==h&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,h?h.oM():null),r.iG=h,s.activeTexture(s.TEXTURE0))}t.Hx.Qx()&&t.Hx.c_(i[0],i[1]),t.Lx.Qx()&&t.Lx.c_(i[2],i[3]),t.Bx.Qx()&&t.Bx.c_(i[4],i[5]),t.zx.Qx()&&t.zx.l_(this.v_),t.Jx.Qx()&&t.Jx.l_(i[6]),t.qx.Qx()&&t.qx.l_(i[7]),t.Nx.Qx()&&t.Nx.c_(i[12],i[13]),t.Wx.Qx()&&t.Wx.c_(i[14],i[15]),t.Vx.Qx()&&t.Vx.c_(n[0],n[1]),t.jx.Qx()&&t.jx.c_(n[2],n[3]),t.$x.Qx()&&t.$x.c_(e[0],e[1]),t.Xx.Qx()&&t.Xx.c_(e[2],e[3]),t.Ux.Qx()&&t.Ux.l_(this.S_)}eG(){this.yf=13}nG(){const t=this.w_.dT,i=t.tT,e=this.__;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=e[t];n.a_()?n.f_(r.na(),r.ra(),r.oa()):n.l_(r)}}rG(t){this.yf=14,this.b_=t}hG(){const t=this.yx,s=this.b_,i=this.w_.BM;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}oG(t,s,i){this.yf=17;const e=this.M_,n=this.w_.renderer,r=(e[0]=t.um(),e[1]=t.xm(),e[2]=(s||n).um(),e[3]=(s||n).xm(),e[4]=t.UM()?1:0,e[5]="stretch"===i,this.__);Ai.Bh(r),r.push(t.WM()),r.push(s?s.WM():null)}aG(){const t=this.M_,s=this.__,i=this.yx,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(n,h),d=Math.max(n-h,0),p=Math.max(h-n,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}lG(t){this.yf=18,this.b_=t}uG(){this.b_.cG(),this.b_=null}fG(t){this.yf=19,this.b_=t}dG(){this.b_.pG(),this.b_=null}mG(t,s,i){this.yf=20;const e=this.M_;e[0]=t,e[1]=s,e[2]=i}gG(){const t=this.w_.dT,s=this.M_;t.Hx.Qx()&&t.Hx.c_(s[0],s[1]),t.Dx.Qx()&&t.Dx.l_(s[2])}yG(t,s,i,e,n,r,h){this.yf=16;const o=this.M_;t.ua(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}wG(){const t=this.w_.dT,s=this.M_;t.Nx.Qx()&&t.Nx.c_(s[0],s[1]),t.Hx.Qx()&&t.Hx.c_(s[4],s[5]),t.Ax.Qx()&&t.Ax.c_(s[6],s[7]),t.Rx.Qx()&&t.Rx.c_(s[8],s[9])}SG(t,s,i,e,n,r,h){this.yf=29;const o=this.M_;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}vG(){const t=this.w_.dT,s=this.M_;t.Hx.Qx()&&t.Hx.c_(s[0],s[1]),t.Ax.Qx()&&t.Ax.c_(s[2],s[3]),t.Dx.Qx()&&t.Dx.l_(s[4]),t.Rx.Qx()&&t.Rx.c_(s[5],s[6])}bG(t){this.yf=22,this.S_=t?1:0}MG(){const t=this.yx,s=0!==this.S_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}xG(t){this.yf=23,this.S_=t?1:0}TG(){const t=this.yx;0===this.S_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}_G(t){this.yf=24,this.S_=t?1:0}GG(){const t=this.yx,s=this.w_,i=s.renderer,e=0!==this.S_;s.p_=e,t.activeTexture(t.TEXTURE2),e?(s.NM&&t.bindFramebuffer(t.FRAMEBUFFER,s.NM),t.bindTexture(t.TEXTURE_2D,i.FM())):(t.bindTexture(t.TEXTURE_2D,null),s.NM&&t.bindFramebuffer(t.FRAMEBUFFER,s.BM)),t.activeTexture(t.TEXTURE0)}IG(){this.yf=25}CG(){const t=this.yx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}PG(){this.yf=26}EG(){const t=this.yx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}AG(){this.yf=27}FG(){const t=this.yx;t.disable(t.STENCIL_TEST)}DG(t,s,i,e,n){this.yf=28,this.S_=t?1:0;const r=this.M_;r[0]=s,r[1]=i,r[2]=e,r[3]=n}OG(){const t=this.yx,s=this.M_;1===this.S_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}kG(){switch(this.yf){case 1:return void this.I_();case 2:return void this.P_();case 3:return void this.A_();case 4:return void this.O_();case 5:return void this.L_();case 6:return void this.N_();case 7:return void this.V_();case 8:return void this.H_();case 9:return void this.J_();case 10:return void this.Z_();case 11:return void this.Q_();case 12:return void this.sG();case 13:return void this.nG();case 14:return void this.hG();case 15:return void this.X_();case 16:return void this.wG();case 17:return void this.aG();case 18:return void this.uG();case 19:return void this.dG();case 20:return void this.gG();case 21:return void this.F_();case 22:return void this.MG();case 23:return void this.TG();case 24:return void this.GG();case 25:return void this.CG();case 26:return void this.EG();case 27:return void this.FG();case 28:return void this.OG();case 29:return void this.vG()}}}}{let I=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Bs,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Oi={timeout:60},ki=new Fi.Ho(0,0,0,1),Li=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Ni=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),Vi=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.Kc();for(const i of Vi)(i.LG()||Fi.vn(i.BG(),s))&&i.NG()});let s=!1,i=!1;Fi.ey.xv=class{constructor(t,s){s=Object.assign({},Oi,s),this._v=t,this.WG="Arial",this.VG=16,this.jG=1,this.HG=0,this.UG=!1,this.zG=!1,this.JG="black",this.qG=!1,this.nm=null,this.$G=!0,this.XG=null,this.YG=new Set,this.ZG="left",this.KG="top",this.uf="",this.QG=null,this.tI=Fi.lr(Fi.tm),this.sI="word",this.iI="ltr",this.eI=!1,this.nI=!1,this.rI=!1,this.hI=-1,this.oI=0,this.aI=0,this.lI=0,this.Xm=0,this.Ym=0,this.uI=1,this.cI=null,this.fI=null,this.dI=null,this.pI=null,this.mI=-1,this.gI=-1,this.yI="",this.wI="",this.SI="",this.vI=1,this.bI=1,this.MI=t=>this.xI(t),this.kb=null,this.TI=new Fi.Rect,this._I=1,this.GI=new Fi.n0(()=>{this.II(),this.CI(8,8)},s.timeout),this.EI=null,this.AI=!1,Vi.add(this)}ur(){this.XG=null,this.YG.clear(),this.nm=null,this.QG=null,this.cI=null,this.fI=null,this.dI=null,this.pI=null,this.MI=null,this.GI.ur(),this.EI=null,this.II(),this.tI.tc(),this.tI=null,this._v=null,this.AI=!0,Vi.delete(this)}RI(){this.rI=!0}FI(){this.RI(),this.nI=!0}NG(){this.FI(),this.eI=!0}DI(t){if(this.qG!==(t=!!t)){this.qG=t;const s=this.qG?"alphabetic":"top";this.fI&&(this.fI.textBaseline=s),this.dI&&(this.dI.textBaseline=s),this.NG()}}LG(){return this.qG}om(t){this.nm!==t&&(this.nm=t,this.tI.om(t),this.nm&&this.nm.Hg()&&this.nm.Ug().then(()=>this.RI()),this.NG())}OI(t){this.$G!==(t=!!t)&&(this.$G=t,this.RI())}kI(t){this.WG!==(t=t||"serif")&&(this.WG=t,this.NG())}BG(){return this.WG}LI(t){this.VG!==(t=t<.1?.1:t)&&(this.VG=t,this.NG())}BI(){return this.VG}NI(t){this.jG!==t&&(this.jG=t,this.NG())}WI(t){this.HG!==t&&(this.HG=t,this.FI())}VI(){return this.HG}jI(t){this.UG!==(t=!!t)&&(this.UG=t,this.NG())}HI(){return this.UG}UI(t){this.zG!==(t=!!t)&&(this.zG=t,this.NG())}zI(){return this.zG}JI(t){t=Math.floor(t),this.hI!==t&&(this.hI=t,this.RI())}qI(){return this.hI}$I(t,s){let i=[];(this.UG||s.fg("b"))&&i.push("bold"),(this.zG||s.fg("i"))&&i.push("italic");const e=s.ug("size"),n=(e?parseFloat(e.param):this.VG)*this.jG;i.push(t?n+"pt":n*this.XI()+"pt");let r=this.WG,h=s.ug("font");return h&&h.param&&(r=h.param,this.XG)&&!this.YG.has(r)&&(this.XG(r),this.YG.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}m2(t){t instanceof Fi.Ho&&(t=t.Ta()),this.JG!==t&&(this.JG=t,this.RI())}YI(t,s,i){ki.Xo(t,s,i),this.m2(ki)}ZI(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.ZG!==t&&(this.ZG=t,this.FI())}KI(){return this.ZG}QI(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.KG!==t&&(this.KG=t,this.FI())}tC(){return this.KG}sC(t){if(!Ni.has(t))throw new Error("invalid word wrap mode");this.sI!==t&&(this.sI=t,this.NG())}iC(){return this.sI}eC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.iI!==t&&(this.iI=t,this.fI&&(this.fI.direction=this.iI),this.dI&&(this.dI.direction=this.iI),this.NG())}nC(){return this.iI}df(t){this.uf!==t&&(this.uf=t,this.NG())}rC(){return this.uf}XI(){return this._I*this.uI*self.devicePixelRatio}hC(r,h,o){if(void 0===o&&(o=1),!(r<=0||this.aI===r&&this.lI===h&&this.uI===o)){let t=this.aI,s=(this.aI=r,this.lI=h,this.uI=o,self.devicePixelRatio),i=(this.Xm=this.aI*this.uI*s,this.Ym=this.lI*this.uI*s,Math.max(this.Xm,this.Ym)),e=Math.min(this._v.Jb(),4096),n=1;e<i&&(n=e/i,this.Xm=Math.min(this.Xm*n,e),this.Ym=Math.min(this.Ym*n,e)),this._I=n,this.aI!==t?this.NG():this.FI()}}um(){return this.Xm}xm(){return this.Ym}oC(){return this.uI}aC(){return this.lC(),this.tI.qm()}uC(){return this.lC(),this.tI.$m()+this.tI.hm()*(this.HG+4)-this.HG}cC(){this.lC();let t=0;for(const s of this.tI.rm())for(const i of s.Pm())t+=i.Em();return t}jM(){return this.GI.l0(),this.fC(),this.kb}dC(t,s){this.lC();const i=this.XI(),e=this.tI.rm();for(const n of e){const r=n._m()*i;if(s>=n.og()-n.xm()*i+r&&s<n.og()+r)for(const h of n.Pm())if(t>=h.rg()&&t<h.rg()+h.um()*i)return h}return null}*pC(t){this.lC();const s=this.tI.rm();for(const i of s)for(const e of i.Pm()){const n=e.ug("tag");n&&Fi.vn(n.param,t)&&(yield e)}}mC(t,s){for(const i of this.pC(t)){if(0===s)return i;--s}return null}gC(t){let s=0;for(const i of this.pC(t))++s;return s}fC(){this.kb&&!this.rI&&!this.nI&&!this.eI||this.AI||this.Xm<=0||this.Ym<=0||(this.rI=!1,this.yC())}yC(){this.AI||(this.lC(),this.CI(Math.max(Fi.Br(Math.ceil(this.Xm)),128),Math.max(Fi.Br(Math.ceil(this.Ym)),64)),this.wC(),this.SC(),this.GI.l0())}CI(t,s){this.cI||(this.cI=Fi.Ao(16,16));let i=!1;this.mI===t&&this.gI===s||(this.mI=t,this.gI=s,this.cI.width=t,this.cI.height=s,i=!0),this.fI||(this.fI=this.cI.getContext("2d"),i=!0),i?(this.fI.textBaseline=this.qG?"alphabetic":"top",this.fI.direction=this.iI,this.fI.font=this.yI,this.fI.fillStyle=this.SI,this.fI.strokeStyle=this.SI,this.fI.globalAlpha=this.vI,this.fI.lineWidth=this.bI):this.fI.clearRect(0,0,t,s)}vC(){this.dI||(this.dI=Fi.Ao(16,16).getContext("2d"),this.pI=Fi.Ao(16,16).getContext("2d"),this.dI.textBaseline=this.qG?"alphabetic":"top",this.pI.textBaseline="top",this.dI.direction=this.iI,this.pI.direction=this.iI)}bC(t){this.wI!==t&&(this.wI=t,this.dI.font=t,this.pI.font=t)}MC(){if(!s){s=!0,this.vC();const t=this.dI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}lC(){this.xC(),this.TC()}xC(){this.eI&&(this.vC(),!this.qG||this.QG&&this.QG.toString()===this.uf||(this.QG=new Fi.Fn(this.uf,{Op:!0})),this.tI.tm(this.qG?this.QG.Jp():this.uf,this.MI,this.aI,this.sI,0),this.eI=!1)}TC(){this.nI&&(this._C(),this.nI=!1)}xI(t){let s=t.wm()?t.Lm().join(""):" ",i=(this.bC(this.$I(!0,t)),t.ug("size")),e=(i?parseFloat(i.param):this.VG)*this.jG,n=this.dI.measureText(s),r=0;if(this.qG&&this.MC()){const h=this.pI.measureText(s);r=n.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:n.width,height:4/3*e,fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,ym:r}}GC(t){this.yI!==t&&(this.yI=t,this.fI.font=t)}IC(t){this.SI!==t&&(this.SI=t,this.fI.fillStyle=t,this.fI.strokeStyle=t)}CC(t){this.vI!==t&&(this.vI=t,this.fI.globalAlpha=t)}PC(t){this.bI!==t&&(this.bI=t,this.fI.lineWidth=t)}_C(){let e=this.XI(),n=(4+this.HG)*e,r=0,h=this.tI.rm();if(0!==h.length){for(const s of h){s.ng(NaN),s.hg(NaN);for(const o of s.Pm())o.ng(NaN),o.hg(NaN)}let t=this.qG&&this.MC(),i=h[0].xm()*e;if("center"===this.KG){const a=h.reduce((t,s)=>t+s.xm()*e+n,0)-n;r=Math.max(this.Ym/2-a/2,0),t&&(i=h[0].Gm()*e)}else if("bottom"===this.KG){const l=h.reduce((t,s)=>t+s.xm()*e+n,0)-this.HG*e,u=t?h.at(-1)._m()*e:0;r=this.Ym-l-u-2}for(let t=0,s=h.length;t<s;++t){const c=h[t],f=c.xm()*e,d=r;if(this.qG){if(r+=0===t?i:f,0<t&&r>this.Ym-4*e)break}else if(0<t&&r>=this.Ym-f)break;0<=d&&this.EC(c,r,e),this.qG||(r+=f),r+=n}}}EC(t,s,i){let e=0;"center"===this.ZG?e=Math.floor((this.Xm-t.um()*i)/2):"right"===this.ZG&&(e=this.Xm-t.um()*i),t.ng(e),t.hg(s);for(const n of"ltr"===this.iI?t.Pm():t.ig())this.AC(n,e,s,i),e+=n.um()*i}AC(t,s,i,e){const n=t.ug("offsetx"),r=(s+=n?o(n.param,t.xm())*e:0,t.ug("offsety"));if(i+=r?o(r.param,t.xm())*e:0,t.vm()){const h=t.ug("iconoffsety");i+=h?o(h.param,t.xm())*e:.2*t.xm()*e}t.ng(s),t.hg(i)}wC(){this.fI.imageSmoothingEnabled=this.$G,this.fI.imageSmoothingQuality="high",this.oI=0;const t=this.XI(),s=this.tI.rm();for(const i of s)this.RC(i,t)}RC(t,s){const i=t.rg(),e=t.og();if(Number.isFinite(i)&&Number.isFinite(e))for(const n of"ltr"===this.iI?t.Pm():t.ig())this.FC(n,s,t.xm())}FC(h,o,a){const l=this.fI,u=h.rg(),c=h.og();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=h.um()*o,i=h.xm()*o,e=h.xm()/16,n=(4+this.HG)*o,r=h.wm()?h.Lm():null;if(-1!==this.hI){if(this.oI>=this.hI)return;h.wm()&&this.oI+r.length>this.hI&&(r=r.slice(0,this.hI-this.oI),s=this.xI(h).width*o),this.oI+=h.Em()}const f=h.ug("background"),d=h.fg("u"),p=h.fg("s");if((!h.wm()||!Fi.U1(r)||f||d||p)&&!h.fg("hide")){const m=h.ug("color"),g=h.ug("opacity"),y=(this.CC(g?parseFloat(g.param)/100:1),f&&(this.IC(f.param),l.fillRect(u,c-i,s,i+n)),h.ug("linethickness")),w=y?parseFloat(y.param):1,S=h.fg("stroke");if(S&&this.PC(.5*e*w*this.XI()),h.wm()){const v=r.join("");if(this.GC(this.$I(!1,h)),!S){this.PC(.5*e*w*this.XI());const b=h.ug("outlineback");b&&(this.IC(b.param),this.DC(!0,v,u,c,s))}if(this.IC(m?m.param:this.JG),this.DC(S,v,u,c,s),!S){this.PC(.5*e*w*this.XI());const M=h.ug("outline");M&&(this.IC(M.param),this.DC(!0,v,u,c,s))}}else if(h.vm()&&0<h.um()){const x=h.vg(this.nm);x&&l.drawImage(x,u,c-i,s,i)}if(this.IC(m?m.param:this.JG),d&&I(l,S,u,c+o*t,s,o*t*w),p){const T=c-i/4,_=o*e,G=T+_/2;l.fillRect(u,G-_*w/2,s,_*w)}}}}DC(t,s,i,e,n){"rtl"===this.iI&&(i+=n),t?"Gecko"===Fi.li.yi?this.fI.strokeText(s,i,e,n):this.fI.strokeText(s,i,e):"Gecko"===Fi.li.yi?this.fI.fillText(s,i,e,n):this.fI.fillText(s,i,e)}SC(){this._v.OC()||(this.kb||(this.kb=this._v.RM(this.cI.width,this.cI.height,{Rb:!0,Fb:"high"})),this._v.kC(this.cI,this.kb),this.TI.set(0,0,this.Xm/this.kb.um(),this.Ym/this.kb.xm()),this.EI&&this.EI())}LC(){return this.TI}II(){this.kb&&(this._v.OC()||this._v.kM(this.kb),this.kb=null)}static g2(){for(const t of Vi)t.II()}static BC(){return Vi.values()}}}{const ji=self.Bs;class Hi{constructor(t){this.yx=t.qb(),this.NC=t.$b(),this.WC=t.VC(),this.jC=null,this.a0=!1,this.HC=!1,this.UC=0,1===this.NC?this.jC=this.WC.createQueryEXT():this.jC=this.yx.createQuery()}ur(){this.zC(),this.yx=null,this.WC=null,this.HC=!1}zC(){this.jC&&(1===this.NC?this.WC.deleteQueryEXT(this.jC):this.yx.deleteQuery(this.jC),this.jC=null)}cG(){if(this.a0)throw new Error("query already active");1===this.NC?this.WC.beginQueryEXT(this.WC.TIME_ELAPSED_EXT,this.jC):this.yx.beginQuery(this.WC.TIME_ELAPSED_EXT,this.jC),this.a0=!0}pG(){if(!this.a0)throw new Error("query not active");1===this.NC?this.WC.endQueryEXT(this.WC.TIME_ELAPSED_EXT):this.yx.endQuery(this.WC.TIME_ELAPSED_EXT),this.a0=!1}JC(){if(this.jC&&!this.HC&&!this.a0){let t;t=1===this.NC?this.WC.getQueryObjectEXT(this.jC,this.WC.QUERY_RESULT_AVAILABLE_EXT):this.yx.getQueryParameter(this.jC,this.yx.QUERY_RESULT_AVAILABLE);const s=this.yx.getParameter(this.WC.GPU_DISJOINT_EXT);t&&!s&&(1===this.NC?this.UC=this.WC.getQueryObjectEXT(this.jC,this.WC.QUERY_RESULT_EXT):this.UC=this.yx.getQueryParameter(this.jC,this.yx.QUERY_RESULT),this.UC/=1e9,this.HC=!0),(t||s)&&this.zC()}}qC(){return this.HC}$C(){if(this.HC)return this.UC;throw new Error("no result available")}}ji.ey.XC=class{constructor(t){this._v=t,this.aw=t.uv(),this.a0=!1,this.YC=null,this.ZC=!1,this.KC=null,this.QC=[]}ur(){for(const t of this.QC)t instanceof Hi&&t.ur();ji.Bh(this.QC),this.YC=null,this.KC=null,this._v=null}cG(){if(this.a0)throw new Error("query already active");const t=this._v.tP();0<t.length?(this.ZC=!0,this.YC=t.at(-1),this.YC.sP(),this.YC.QC.push(this)):(this.ZC=!1,this.YC=null),this.a0=!0,t.push(this),this.iP()}pG(){if(!this.a0)throw new Error("query not active");const t=this._v.tP().pop();if(t!==this)throw new Error("can only end most nested query");this.a0=!1,this.sP(),this.YC&&(this.YC.iP(),this.YC=null)}iP(){this.KC=ji.lr(Hi,this._v),this.QC.push(this.KC),this.KC.cG()}sP(){this.KC.pG(),this.KC=null}JC(){for(const t of this.QC)t.JC()}eP(){return this.ZC}qC(){return this.QC.every(t=>t.qC())}$C(){return this.QC.reduce((t,s)=>t+s.$C(),0)}uv(){return this.aw}}}{const Ui=self.Bs;Ui.ey.nP=class{constructor(t,s=1e3){this._v=t,this.rP=s,this.hP=[],this._v.oP(this)}ur(){this.tc(),this._v.aP(this),this._v=null}tc(){for(const t of this.hP)t.ur();Ui.Bh(this.hP)}lP(){const t=new Ui.ey.XC(this._v);if(this.hP.push(t),this.hP.length>this.rP){const s=this.hP.shift();s.ur()}return t}uP(t){for(const s of this.hP){if(s.uv()>=t)return;if(s.eP())return;s.JC()}}cP(t,s){if(s<=t)return NaN;let i=0;for(const e of this.hP){if(e.uv()>=s)break;if(!(e.uv()<t)){if(!e.qC())return NaN;i+=e.$C()}}return i}fP(i){for(let t=0,s=this.hP.length;t<s;++t){const e=this.hP[t];if(!(e.uv()<i))return void(0<t&&this.hP.splice(0,t));e.ur()}}}}{let i=function(){n=-1;for(const t of e)t.dP()&&(t.resolve(),e.delete(t));0<e.size&&(n=self.requestAnimationFrame(i))},v=(i,self.Bs),t=self.bs,b=(t.Ps,t.Es),y=t._s,r={powerPreference:"default",pP:!0,alpha:!1,depth:!1,mP:!1,gP:2,failIfMajorPerformanceCaveat:!1},h=new Set(["default","low-power","high-performance"]),c=new v.Ql(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new v.Ql,x=new v.Rect,T=null,e=(v.isDebug&&(self.yP=function(){T?T.loseContext():console.warn("WEBGL_lose_context not supported")},self.wP=function(){T?T.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),n=-1;v.ey.SP=class extends v.ey._y{constructor(t,s){if(super(s),s=Object.assign({},r,s),!h.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,n=0;if(2<=s.gP&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.yx=e,this.vP=e.getContextAttributes(),this.bP=e.getParameter(e.VERSION),this.NC=n,this.MP=b.create(),this.xP=!1,this.TP=y.create(),this._P=!!s.depth,this.GP=!(!s.depth||!s.mP),this.IP=this._P,this.CP=!1,this.PP=null,this.EP=!0,this.AP=0,this.RP=0,this.vx=null,this.bx=null,this.FP=null,this.Mx=null,this.DP=new Float32Array(8e3*this.ov()),this.OP=new Uint16Array(12e3),this.kP=new Float32Array(16e3),this.LP=new Float32Array(32e3),this.BP=0,this.NP=0,this.WP=0,this.VP=0,this.jP=null,this.HP=null,this.UP=[],this.zP=0,this.JP=0,this.qP=null,this.$P=0,this.w_=v.lr(v.ey.d_,this),this.XP=v.lr(v.Ho,1,1,1,1),this.YP=null,this.iG=null,this.ZP=0,this.KP=0,this.QP=new v.Rect,this.tE=v.lr(v.Rect,0,0,-1,-1),this.sE=0,this.iE=-1,this.eE=0,this.nE=0,this.rE=0,this.hE="(unavailable)",this.oE="(unavailable)",this.aE=[],this.lE=!1,this.uE=null,this.cE=null,this.fE=null,this.dE=null,this.pE=null,this.mE=null,this.gE=0,this.yE=!!s.pP,this.WC=null,this.wE=new Set,this.SE=[],this.cw(this.OP)}yv(){return!0}async mw(){super.mw();const t=this.yx,s=this.ov(),i=(this.XP.$o(1,1,1,1),this.YP=null,this.iG=null,this.BP=0,this.WP=0,this.VP=8e3*s-4*s,v.Bh(this.UP),this.zP=0,this.JP=0,this.jP=null,this.qP=null,this.QP.set(0,0,1,1),this.$P=0,this.w_),e=(i.dT=null,i.BM=null,i.NM=null,b.set(i.m_,1,1,1,1),i.clearColor.$o(0,0,0,0),i.g_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.ZP=t.ONE,this.KP=t.ONE_MINUS_SRC_ALPHA,this.vE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this._P?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.IP=this._P,this.CP=!1,this.Mx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Mx),t.bufferData(t.ARRAY_BUFFER,this.LP.byteLength,t.DYNAMIC_DRAW),this.vx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vx),t.bufferData(t.ARRAY_BUFFER,this.DP.byteLength,t.DYNAMIC_DRAW),this.bx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bx),t.bufferData(t.ARRAY_BUFFER,this.kP.byteLength,t.DYNAMIC_DRAW),this.FP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.FP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.OP,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.iE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),n=(this.eE=e[0],this.nE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.rE=n&&r?Math.min(n.precision,r.precision):0,2048<this.nE&&(this.nE=2048),this.aE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.hE=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.oE=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.uE=t.getExtension("KHR_parallel_shader_compile"),v.isDebug&&(T=t.getExtension("WEBGL_lose_context")),this.yE&&(1===this.$b()?this.WC=t.getExtension("EXT_disjoint_timer_query"):this.WC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.cE=t.getExtension("EXT_texture_filter_anisotropic"),this.cE?this.gE=t.getParameter(this.cE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.gE=0,this.$b()<2&&this._P&&this.GP&&(this.fE=t.getExtension("WEBGL_depth_texture"),!this.fE))throw new Error("no depth texture support");this.$b()<2&&(this.dE=t.getExtension("EXT_frag_depth"),this.pE=t.getExtension("OES_standard_derivatives"),this.mE=t.getExtension("EXT_shader_texture_lod"));let o=v.ey.hx,a=o.OT(!1),l=o.LT(),u=a,c=o.JT(),f=o.UT(),d=o.WT(),p=o.OT(!0),m=!1;this._P&&(this.$b()<2?this.dE&&(l=o.BT(),c=o.qT(),d=o.VT(),m=!0):(u=o.kT(),l=o.NT(),c=o.$T(),f=o.zT(),d=o.jT(),p=o.kT(!0)));const g=o.HT(this.$b(),m,this.pE&&this.mE),y=2<=this.$b()?o.kT():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.XT(),a,"<fill>"],[o.YT(),a,"<lineargradient>"],[o.ZT(),a,"<penumbra>"],[o.QT(),a,"<hardellipse>"],[o.t_(),a,"<hardellipseoutline>"],[o.s_(),a,"<smoothellipse>"],[o.i_(),a,"<smoothellipseoutline>"],[o.KT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.bE({src:t[0],lx:t[1],name:t[2]})));this.Oy=S[0],this.HP=S[1],this.ky=S[2],this.Ny=S[3],this.Wy=S[4],this.Vy=S[5],this.jy=S[6],this.Hy=S[7],this.Uy=S[8],this.zy=S[9],this.Jy=S[10],this.Ly=S[11],this.By=S[12],this.Ww()}async bE(t){const s=await v.ey.hx.gx(this,t);return this.kw(s),s}ME(){this.jP=null}hC(t,s,i){if(this.Xm!==t||this.Ym!==s||i){this.lv();const e=this.yx,n=this.w_;this.Xm=t,this.Ym=s,this.xE(0,0,t,s),this.Aw(this.TP,t/s),this.TE(this.TP),this.HP&&(e.useProgram(this.HP.mT()),this.HP.aT(this.Cy),this.jP=this.HP,this.w_.dT=this.HP),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.YP=null,this.iG=null,this._P&&this.EP&&this._E(this.Xm,this.Ym),this.qP&&this.qP.OM(this.Xm,this.Ym),e.bindFramebuffer(e.FRAMEBUFFER,null),this.qP=null,n.BM=null,n.NM=null}}_E(t,s){const i=this.yx;this.PP&&this.AP===t&&this.RP===s||(this.GP?(this.PP&&i.deleteTexture(this.PP),this.PP=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.PP),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.$b()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.fE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.fE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.PP&&i.deleteRenderbuffer(this.PP),this.PP=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.PP),i.renderbufferStorage(i.RENDERBUFFER,2<=this.NC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.AP=t,this.RP=s)}GE(t,s){this._P&&(this.EP=!1,this._E(t,s))}IE(){this._P&&(this.EP=!0,this._E(this.Xm,this.Ym))}xE(t,s,i,e){const n=this.MP;if(n[0]!==t||n[1]!==s||n[2]!==i||n[3]!==e){const r=this.CE();r.k_(t,s,i,e),b.set(n,t,s,i,e),this.JP=0}}Gw(t){super.Gw(t),this.Aw(this.TP,this.Xm/this.Ym)}Mw(t){super.Mw(t),this.Aw(this.TP,this.Xm/this.Ym)}Tw(t){super.Tw(t),this.Aw(this.TP,this.Xm/this.Ym)}TE(t){if(!y.W(this.Cy,t)){const s=this.CE();s.B_(t),y.G(this.Cy,t),this.JP=0,this.xP=!0}}PE(){let t,s,i,e=this.qP;i=(null===e?(t=this.TP,s=this.um(),this):(t=e.HM(),s=e.um(),e)).xm(),this.TE(t),this.xE(0,0,s,i)}EE(t){if(!y.W(this.Py,t)){const s=this.CE();s.W_(t),y.G(this.Py,t),this.JP=0,this.xP=!0}}AE(){this.xP=!1}RE(){return this.xP}LM(){return this.w_}CE(){const t=this.UP;return this.zP===t.length&&t.push(new v.ey.y_(this.w_)),t[this.zP++]}lv(){0===this.zP||this.OC()||(this.FE(),this.DE(),this.zP=0,this.BP=0,this.NP=0,this.WP=0,this.JP=0)}FE(){const t=this.yx;0<this.WP&&(t.bindBuffer(t.ARRAY_BUFFER,this.Mx),t.bufferSubData(t.ARRAY_BUFFER,0,this.LP.subarray(0,this.WP))),0<this.BP&&(t.bindBuffer(t.ARRAY_BUFFER,this.vx),t.bufferSubData(t.ARRAY_BUFFER,0,this.DP.subarray(0,this.BP)),t.bindBuffer(t.ARRAY_BUFFER,this.bx),t.bufferSubData(t.ARRAY_BUFFER,0,this.kP.subarray(0,this.NP)))}DE(){const i=this.UP;for(let t=0,s=this.zP;t<s;++t)i[t].kG()}OE(){return this.XP.aa()}kE(t,s,i,e){const n=this.XP;if(!n.ga(t,s,i,e)){n.$o(t,s,i,e);const r=this.CE();r.E_(n),this.JP=0,this.$y=null}}LE(t){const s=this.XP;if(s.aa()!==t){s.ia(t);const i=this.CE();i.E_(s),this.JP=0,this.$y=null}}m2(t){const s=this.XP;if(!s.equals(t)){s.set(t);const i=this.CE();i.E_(s),this.JP=0,this.$y=null}}BE(){this.kE(1,1,1,1)}NE(){return this.XP}WE(t){if(t!==this.YP){const s=this.CE();s.C_(t),this.YP=t,this.JP=0}}Kb(){this.YP=null}d2(t){const s=this.dS(t);this.VE(s[0],s[1])}jE(t){const s=this.gS(t);this.VE(s.cS,s.fS)}VE(t,s){if(t!==this.ZP||s!==this.KP){const i=this.CE();i.D_(t,s),this.ZP=t,this.KP=s,this.JP=0,this.$y=null}}HE(){return this.ZP===this.yx.ONE&&this.KP===this.yx.ONE_MINUS_SRC_ALPHA}UE(){this.VE(this.yx.ONE,this.yx.ONE_MINUS_SRC_ALPHA)}zE(){this.VE(this.yx.SRC_ALPHA,this.yx.ONE_MINUS_SRC_ALPHA)}JE(){this.VE(this.yx.ONE,this.yx.ZERO)}Rect(t){this.qE(t.xl(),t.Tl(),t._l(),t.Gl())}qE(t,s,i,e){this.hv(t,s,i,s,i,e,t,e)}$E(){let t=this.BP;if(t>=this.VP&&(this.lv(),t=0),1===this.JP)this.UP[this.zP-1].v_+=6;else{const s=this.CE();s.G_(t,6),this.JP=1}}XE(t){t.Su(this.DP,this.BP,this.Zy+this.Ky),this.BP+=12}Ql(t){this.$E(),this.XE(t),c.ua(this.kP,this.NP),this.NP+=8}hv(t,s,i,e,n,r,h,o){this.$E();let a=this.DP,l=this.BP,u=this.Zy+this.Ky;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.BP=l,c.ua(this.kP,this.NP),this.NP+=8}AS(t,s){this.$E(),this.XE(t),s.Pl(this.kP,this.NP),this.NP+=8}YE(t,s){this.$E(),this.XE(t),s.ua(this.kP,this.NP),this.NP+=8}ZE(t,s,i,e,n,r,h,o,a,l,u,c,f){this.$E();let d=this.DP,p=this.BP,m=this.Zy+this.Ky;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.BP=p,f.Pl(this.kP,this.NP),this.NP+=8}GS(t,s,i,e,n,r,h,o,a,l,u,c,f){this.$E();let d=this.DP,p=this.BP,m=this.Zy+this.Ky;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.BP=p,f.ua(this.kP,this.NP),this.NP+=8}KE(e,n,r){const h=this.DP,o=this.kP;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.$E();let t=this.BP,s=this.NP;h[t++]=e[0+c],h[t++]=e[1+c],h[t++]=e[2+c],h[t++]=e[0+f],h[t++]=e[1+f],h[t++]=e[2+f],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],o[s++]=n[0+p],o[s++]=n[1+p],o[s++]=n[0+m],o[s++]=n[1+m],o[s++]=n[0+g],o[s++]=n[1+g],o[s++]=n[0+g],o[s++]=n[1+g],this.BP=t,this.NP=s}}QE(t,s){this.vS(0),y.G(w,this.Cy),y.G(S,this.Py),this.PE();const[i,e]=this.tA(this.qP),n=this.Ow(0,0,this.yw(e),0,0,0,e);if(this.EE(n),"crop"===t&&this.qP&&s){const r=this.Xm/2,h=this.Ym/2,o=s.um(),a=s.xm(),l=this.qP.um(),u=this.qP.xm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,h-p,-r+c,h-f-p),M.vu(x),x.set(0,d,c,f+d),x.Ct(o,a),this.AS(M,x)}else{const m=i/2,g=e/2;this.qE(-m,g,m,-g)}this.TE(w),this.EE(S)}sA(t){if(!this.QP.equals(t)){this.QP.G(t);const s=this.CE();s.q_(t),this.JP=0}}iA(){}eA(t,s,i,e){7996<=this.WP&&this.lv();let n=this.WP,r=this.Zy+this.Ky;if(2===this.JP&&this.$P===r)this.UP[this.zP-1].v_++;else{const o=this.CE();o.Y_(n,r),this.JP=2,this.$P=r}const h=this.LP;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.WP=n}Vw(t){if(this.jP!==t){const s=this.CE();s.K_(t),this.jP=t,this.JP=0,this.$y=null}}nA(){return this.jP}rA(){this.Vw(this.HP)}hA(t){const s=this.CE();s.R_(t),this.JP=0}oA(t,s,i=1){const e=this.CE();e.mG(t,s,i),this.JP=0}aA(t,s,i,e,n,r,h){if(this.jP!==this.Ly)throw new Error("must set tilemap fill mode first");const o=this.CE();o.yG(t,s,i,e,n,r,h),this.JP=0}lA(t,s,i,e,n,r,h){if(this.jP!==this.By)throw new Error("must set tile randomization mode first");const o=this.CE();o.SG(t,s,i,e,n,r,h),this.JP=0}uA(t,s,i,e,n,r,h,o,a,l,u){const c=this.jP;if(u%=10800,c.Kx&&!c.xT(s,i,e,n,r,h,o,a,l,u)){const f=this.CE(),d=(f.tG(),c.GT(s,i,e,n,r,h,o,a,l,u),f.M_),p=(d[0]=r,d[1]=h,s.ua(d,2),d[6]=a,d[7]=l,i.ua(d,12),f.x_),m=(n.ua(p,0),p[1]);p[1]=p[3],p[3]=m,e.ua(f.T_,0),f.S_=u,f.v_=o,c.Ox.Qx()?f.b_=t?t.jM():null:f.b_=null,this.JP=0}}cA(t){const s=this.jP;if(0!==t.length&&!s.ST(t)){const i=this.CE();i.eG(),s.bT(t),v.jh(i.__,t),this.JP=0}}fA(t,s,i,e){const n=this.CE();n.z_(t,s,i,e),this.JP=0}tc(t){const s=this.CE();s.U_(t),this.JP=0}dA(){}av(){super.av(),this.yx.flush()}pA(){if(this._P&&this.qP&&this.qP.qM()){const t=this.CE();t.bG(this.IP),this.JP=0}}mA(t){if(this.IP!==(t=!!t)&&this._P){this.IP=t;const s=this.CE();s.xG(t),this.JP=0}}gA(){return this.IP}FM(){return this.PP}DM(){return this.GP}yA(t){if(t=!!t,this.GP&&this.CP!==t){if(t&&this.gA())throw new Error("depth still enabled");this.CP=t;const s=this.CE();s._G(t),this.JP=0}}wA(t,s,i,e,n=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.tE.Ml(t,s,i,e)){this.tE.ml(t,s,i,e);const r=n||this.tA(this.SA())[1],h=(s=r-s-e,this.CE());h.DG(!0,t,s,i,e),this.JP=0}}vA(){if(-1!==this.tE._l()){this.tE.set(0,0,-1,-1);const t=this.CE();t.DG(!1,0,0,0,0),this.JP=0}}bA(){for(const t of this.wE)t.uP(this.aw)}OC(){return!this.yx||this.yx.isContextLost()||this.lE}g2(){super.gw(),v.ey.Ob.g2(),v.ey.yM.g2(),v.ey.xv.g2();for(const t of this.wE)t.tc();this.aE=[],this.WC=null,this.uE=null,this.cE=null,this.fE=null,this.dE=null,this.pE=null,this.mE=null,this.gE=0,this.hE="(unavailable)",this.oE="(unavailable)",this.jP=null,this.HP=null,this.PP=null;for(const s of this.qy.values())s.g2()}async w2(){this.lE=!0,await this.mw(),this.lE=!1;for(const t of this.qy.values())t.w2(this);this.hC(this.Xm,this.Ym,!0)}MA(t,s){if(this.OC())throw new Error("context lost");this.lv();const i=v.lr(v.ey.Ob,this);return i.zb(t,s),i}async xA(e,n){if(this.OC())throw new Error("context lost");if(n=Object.assign({},n),v.ji.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=n.Ib&&"clamp-to-edge"!==n.Ib||n.Cb&&"clamp-to-edge"!==n.Cb,i=v.Lr(t.width)&&v.Lr(t.height);return this.Xb()||i||!s?n.premultiplyAlpha=!1:v.ji.$i?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:v.Br(t.width),resizeHeight:v.Br(t.height)}),n.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),v.Lf(()=>this.MA(t,n))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await v.Eo(e);e=t}return v.Lf(()=>this.MA(e,n))}RM(t,s,i){this.lv();const e=v.lr(v.ey.Ob,this);return e.Qb(t,s,i),e}kC(t,s,i){this.lv(),s.nM(t,i)}kM(t){t&&(t.lM(),0<t.uM()||(this.lv(),t===this.YP&&(this.yx.bindTexture(this.yx.TEXTURE_2D,null),this.YP=null),t===this.iG&&(this.yx.activeTexture(this.yx.TEXTURE1),this.yx.bindTexture(this.yx.TEXTURE_2D,null),this.yx.activeTexture(this.yx.TEXTURE0),this.iG=null),t.rM()))}TA(t){let s=this.Xm,i=this.Ym,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.lv();const n=v.lr(v.ey.yM,this);return n.EM(s,i,Object.assign({mM:e},t)),this.qP=null,this.w_.BM=null,this.w_.NM=null,n}_A(t,s=!0){if(t!==this.qP){t&&t.$M()&&t.OM(this.Xm,this.Ym);const i=this.CE();i.j_(t),this.qP=t,this.JP=0,s&&this.PE()}}SA(){return this.qP}tA(t){return t?[t.um(),t.xm()]:[this.Xm,this.Ym]}GA(t,s="stretch"){if(this.NC<2||this.qP&&0<this.qP.XM())this.JE(),this.BE(),this.IA(t,s);else{const i=this.CE();i.oG(t,this.qP,s),this.JP=0}}IA(t,s="stretch"){const i=t.jM();if(!i)throw new Error("not a texture-backed render target");this.WE(i),this.QE(s,i)}CA(t){if(!(this.NC<2)){const s=this.CE();s.rG(t.WM()),this.JP=0}}PA(t){this._A(null),this.lv();const s=t.jM();s===this.YP&&(this.yx.bindTexture(this.yx.TEXTURE_2D,null),this.YP=null),s===this.iG&&(this.yx.activeTexture(this.yx.TEXTURE1),this.yx.bindTexture(this.yx.TEXTURE_2D,null),this.yx.activeTexture(this.yx.TEXTURE0),this.iG=null),t.rM()}async tx(t,s,i){this.lv();let e=this.qP,n,r,h,o=(h=t?(n=t.um(),r=t.xm(),t.WM()):(n=this.um(),r=this.xm(),null),0),a=0,l=n,u=r;if(i){o=v.gr(Math.floor(i.xl()),0,n-1),a=v.gr(Math.floor(i.Tl()),0,r-1);let t=i.width(),s=(t=0===t?n-o:v.gr(Math.floor(t),0,n-o),i.height());s=0===s?r-a:v.gr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.yx,f=(c.bindFramebuffer(c.FRAMEBUFFER,h),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.qP=null,this.w_.BM=null,this.w_.NM=null,this._A(e)}),d;if(!s&&2<=this.$b()){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.mx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}EA(){this.mA(!0);const t=this.CE();t.IG(),this.JP=0,this.sE=1}AA(){this.mA(!1);const t=this.CE();t.PG(),this.JP=0,this.sE=2}RA(){return 2===this.sE}FA(){this.mA(!0);const t=this.CE();t.AG(),this.JP=0,this.sE=0}DA(t){if(this.OA()){const s=this.CE();s.lG(t),this.JP=0}}kA(t){if(this.OA()){const s=this.CE();s.fG(t),this.JP=0}}mx(s){const t=new Promise(t=>e.add({resolve:t,dP:s}));return-1===n&&(n=self.requestAnimationFrame(i)),t}wv(){return this.Xm*this.Ym*(this.vP.alpha?4:3)}Sv(){let t=0;for(const s of v.ey.yM.ix())s.jM()||(t+=s.fM());return t}vv(){let t=0;for(const s of v.ey.Ob.dM())t+=s.fM();return t}LA(){return this.bP}$b(){return this.NC}BA(){return"webgl"+this.$b()}Xb(){return 2<=this.$b()}Jb(){return this.iE}NA(){return this.eE}WA(){return this.nE}VA(){return 0!==this.rE}jA(){return this.rE}HA(){return this.hE}UA(){return this.oE}zA(){if(2<=this.$b())return"webgl2";{const t=[];return this.dE&&t.push("EXT_frag_depth"),this.pE&&t.push("OES_standard_derivatives"),this.mE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}JA(){return this.aE}OA(){return!!this.WC}VC(){return this.WC}ux(){return this.uE}iM(){return this.cE}eM(){return this.gE}oP(t){this.wE.add(t)}aP(t){this.wE.delete(t)}tP(){return this.SE}qb(){return this.yx}vE(t){this.uS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}qA(){return this.Mv()}}}{const zi=self.Bs,Ji={$A:null,XA:null,YA:null,getTime:null,ZA:null};zi.ey.KA=class{constructor(t){t=Object.assign({},Ji,t),this.QA=t.$A,this.t3=t.XA,this.s3=t.YA,this.i3=t.getTime,this.e3=t.ZA,this.n3=null,this.r3=new Set}h3(t){this.r3.add(t)}o3(t){this.r3.delete(t)}g2(){this.n3=null;for(const t of this.r3)t.g2()}a3(t){return this.QA?this.QA(t):[t.um(),t.xm()]}SA(t){return this.t3(t)}l3(t,s){this.s3(t,s)}u3(){return this.i3()}s1(t){this.e3(t)}f3(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.n3||this.n3.um()===s&&this.n3.xm()===i||(t.kM(this.n3),this.n3=null),null===this.n3&&(this.n3=t.MA(null,{width:s,height:i,Pb:"nearest",Rb:!1})),this.n3}}}{const o=self.Bs,qi=self.bs,Tn=qi._s,$i=o.lr(o.Rect),Xi=o.lr(o.Rect),Yi=o.lr(o.Rect),Zi=o.lr(o.Rect),Ki=Tn.create(),Qi=Tn.create(),te={d3:null,m3:null,g3:null,y3:!1},se={w3:null,S3:!1,v3:!1,b3:!1,M3:!1,x3:!1,T3:!1};o.ey._3=class{constructor(t,s){s=Object.assign({},te,s),this.c1=t,this.G3=s.d3,this.I3=s.m3,this.C3=s.g3,this.P3=null,this.E3=[],this.A3=[],this.R3=[],this.F3=!1,this.l2=0,this.D3=!1,this.O3=!1,this.L3=!1,this.B3=!1,this.N3=!1,this.W3=!1,this.xP=!1,this.V3=!1,this.j3=!1,this.H3=!1,this.U3=!1,this.z3=!1,this.J3=0,this.q3=[null,null,null],this.X3=!!s.y3,this.Y3=0,this.Z3=0,this.K3=0,this.Q3=0,this.tR=null,this.sR=null,this.iR=o.lr(o.Rect),this.eR=o.lr(o.Rect),this.nR=o.lr(o.Rect),this.rR=o.lr(o.Rect),this.hR=o.lr(o.Rect),this.oR=1,this.aR=1,this.lR=0,this.uR=0,this.cR=null,this.fR=null,this.dR=0,this.pR=0,this.mR=!1,this.GM=Tn.create(),this.gR=Tn.create(),this.c1.h3(this)}ur(){this.c1.o3(this),o.Bh(this.R3),o.Bh(this.E3),o.Bh(this.A3),this.tR=null,this.sR=null,this.G3=null,this.I3=null,this.C3=null}g2(){this.F3=!0,o.Bh(this.R3),o.Bh(this.E3),o.Bh(this.A3)}yR(){return this.F3}wR(n,t){if(t=Object.assign({},se,t),o.Bh(this.R3),this.Y3=0,this.Z3=0,this.D3=!1,this.O3=!1,this.L3=!1,this.B3=!1,this.N3=!1,this.W3=!1,this.J3=0,this.z3=!!t.M3,this.U3=!!t.T3,this.F3=!1,o.jh(this.E3,n),0!==n.length){if(t.w3){if(t.w3.length!==n.length)throw new Error("incorrect indexMap length");o.jh(this.A3,t.w3)}else{o.Bh(this.A3);for(let t=0,s=n.length;t<s;++t)this.A3.push(t)}for(const s of n)this.Y3+=s.$v(),this.Z3+=s.Xv(),s.t2()&&(this.D3=!0),s.i2()&&(this.O3=!0),s.s2()&&(this.L3=!0),s.Yv()&&(this.B3=!0),s.h2()&&(this.N3=!0);this.W3=this.SR(n[0].Jv());const r=this.vR(n[0],t),h=this.bR(n.at(-1),t);if(1!==n.length||r||h){this.H3=!1;let e=0;r&&(this.J3=1,this.R3.push(o.lr(o.ey._3.xR.MR,this,-1,1)),e=1);for(let s=0,i=n.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||h||(t=0),this.J3=Math.max(this.J3,t),this.R3.push(o.lr(o.ey._3.xR.TR,this,e,t,s)),e=t}else this.J3=1,this.R3.push(o.lr(o.ey._3.xR._R,this,-1,1,s)),e=1;h&&this.R3.push(o.lr(o.ey._3.xR.GR,this,e,0))}else this.H3=!0}}vR(t,s){return!!(s.S3||t.Zv()||s.b3&&!t.Qv()||t.i2()&&!this.U3||0!==this.Y3||0!==this.Z3)||(t.Jv().yv()?t.s2()&&(s.x3||s.M3)||t.e2()&&s.M3:t.s2()&&!this.W3&&s.x3)}bR(t,s){return!!s.v3||(t.Jv().yv()?t.s2()||t.Yv():(t.s2()||t.Yv())&&this.IR())}SR(t){return t.Rw()&&this.L3&&!this.B3}CR(t,s,i){t.Rw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.cR=s,this.tR=i.PR||null,this.sR=i.contextObject||null,this.l2=i.ER||0,this.oR=i.devicePixelRatio||1,this.aR=i.AR||1,this.lR=i.RR||0,this.uR="number"==typeof i.time?i.time:this.c1.u3(),this.xP=!1,t.AE(),this.D3&&this.FR();let e=!1;if(this.DR()&&(this.OR(t,i),e=!0,this.fR=this.c1.f3(t,this.K3,this.Q3),$i.G(this.eR),$i.zl(),t.Rw()&&t._MaybeDoPendingClearRenderPass(this.cR),t.CopyTextureToTexture(this.cR.jM(),this.fR,$i.xl(),$i.Tl(),$i.width(),$i.height())),this.H3)this.kR(t,i);else if(e||this.OR(t,i),0!==this.nR.width()||0!==this.nR.height()){t.UE(),t.BE(),t.wS(0),t.vS(0),this.P3=i.LR||null,this.dR=i.BR||0,this.pR=i.NR||0,this.mR=!!i.WR,this.VR(t),this.q3[0]=s,this.q3[1]=1<=this.J3?this.jR():null,this.q3[2]=2===this.J3?this.jR():null;for(const n of this.R3){const r=this.HR(n.UR()),h=this.HR(n.zR());t.Rw()?n.JR(t,r,h):n.qR(t,r,h)}t.WE(null),this.q3[1]&&this.$R(this.q3[1]),this.q3[2]&&this.$R(this.q3[2]),this.q3.fill(null),this.YR(t),this.cR=null,this.fR=null,this.tR=null,this.sR=null,this.P3=null}}OR(t,s){const[i,e]=this.c1.a3(t);this.ZR(t,i,e),this.KR(s)}ZR(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.K3===s&&this.Q3===i||this.QR(t,s,i,0,0,this.GM,this.gR),this.K3=s,this.Q3=i}QR(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n,l=(t.Aw(r,s/i),t.Ow(o,a,t.yw(i),o,a,0,i));Tn.G(h,l)}KR(t){this.iR.G(t.tF),t.sF?this.eR.G(t.sF):this.eR.set(0,0,this.K3,this.Q3),this.nR.G(this.eR),this.nR.Ct(this.K3,this.Q3);const s=this.aR*this.oR;this.eR.kl(this.Y3*s,this.Z3*s),this.hR.G(this.eR),this.hR.Ct(this.K3,this.Q3),this.eR.Jl(0,0,this.K3,this.Q3),this.rR.G(this.eR),this.rR.Ct(this.K3,this.Q3)}VR(t){if(this.V3=t.gA(),this.j3=t.RA(),this.U3)t.mA(!1),this.O3&&t.yA(!0);else{if($i.G(this.eR),t.yv()){const s=this.aR*this.oR;$i.kl(Math.max(this.Y3,1)*s,Math.max(this.Z3,1)*s),$i.zl(),$i.gr(0,0,this.K3,this.Q3)}else $i.zl();t.wA($i.xl(),$i.Tl(),$i.width(),$i.height(),this.Q3)}}iF(t){t.BE(),this.U3||(this.j3&&t.FA(),t.mA(!1),this.O3&&t.yA(!0)),t.Rw()&&t.SetNormalizedCoordsProgramVariant(!0)}YR(t){t.yA(!1),this.j3&&t.AA(),t.mA(this.V3),this.U3||t.vA(),t.Rw()&&t.SetNormalizedCoordsProgramVariant(!1),this.xP=t.RE()}eF(){this.hR.gr(0,0,1,1)}HR(t){return t<0?null:this.q3[t]}jR(){return this.c1.SA(this)}nF(){return this.cR}$R(t){this.c1.l3(t,this)}rF(t){return this.E3[t]}hF(t){this.P3?this.P3(this,t,()=>this.G3(t,this)):this.G3(t,this),this.H3||this.iF(t)}oF(t){if(this.U3)return!0;if(0!==this.dR||0!==this.pR)return!1;const[s,i]=t.tA(t.SA());return s===this.K3&&i===this.Q3}aF(t,s){let i=this.GM,e=this.gR;if(s&&!this.oF(t)){i=Ki,e=Qi;const[n,r]=t.tA(t.SA());this.QR(t,n,r,this.dR,this.pR,i,e),this.U3||t.vA()}t.TE(i),t.EE(e)}FR(){this.c1.s1(this)}lF(t,s){return this.C3(this.A3[t],s)}uF(t,s){let i=this.hR,e=this.rR,n=this.nR;t.yv()&&(Xi.G(i),Xi.Nl(1),i=Xi,Yi.G(e),Yi.Nl(1),e=Yi,Zi.G(n),Zi.Nl(1),n=Zi),this.cF(t,s,e,n,i,1/this.K3,1/this.Q3)}fF(t,s){let e=this.rR,n=this.nR,r=1/this.K3,h=1/this.Q3;if(this.I3){let{dF:t,pF:s,mF:i}=this.I3(this.tR);t||($i.set(0,0,0,0),t=$i),s=s||this.K3,i=i||this.Q3,e=t,n=t,r=1/s,h=1/i}else t.yv()&&(Yi.G(e),Yi.Nl(1),e=Yi,Zi.G(n),Zi.Nl(1),n=Zi);let i=this.hR;t.yv()&&((i=Xi).G(this.hR),i.Nl(1)),this.cF(t,s,e,n,i,r,h),t.Rw()&&this.N3&&t.SetProgramParameter_IsSrcTexRotated(this.z3)}gF(t){return this.L3?t.Rw()?this.DR()?this.fR:this.cR.jM():this.cR:null}cF(t,s,i,e,n,r,h){t.uA(this.gF(t),n,i,e,this.iR,r,h,this.oR,this.aR,this.lR,this.uR),t.cA(this.lF(s,t))}kR(t,s){const i=this.E3[0],e=t.gA(),n=i.i2();n&&(t.mA(!1),t.yA(!0),this.hR.set(0,0,1,1),this.nR.set(0,0,1,1)),t.Vw(i),t.d2(this.l2),t._A(this.cR);let r=0,h=1;if(this.nR.set(0,0,1,1),i.e2()&&this.I3){const{dF:o,pF:a,mF:l}=this.I3(this.tR);o&&this.nR.G(o),r=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[u,c]=this.c1.a3(t);r=1/u,h=1/c}s.tF?this.iR.G(s.tF):this.iR.set(0,0,0,0),t.uA(this.gF(t),this.hR,this.nR,this.nR,this.iR,r,h,this.oR,this.aR,this.lR,this.uR),t.cA(this.lF(0,t)),t.Rw()&&this.N3&&t.SetProgramParameter_IsSrcTexRotated(this.z3),t.wS(0),this.hF(t),n&&(t.yA(!1),t.mA(e))}DR(){return this.W3}IR(){return!this.W3}yF(){return this.L3}wF(){return!!this.H3&&!this.DR()}SF(){return this.U3}vF(){return this.tR}bF(){return this.sR}MF(){return this.l2}xF(){return this.mR}RE(){return this.xP}TF(){return this.eR}_F(){return this.rR}GF(){return this.X3}async IF(t,s,i){}}}{const ie=self.Bs;ie.ey._3.xR=class{constructor(t,s,i,e=-1){this.CF=t,this.PF=s,this.EF=i,this.Xg=e}AF(){return this.CF}UR(){return this.PF}zR(){return this.EF}RF(){return this.Xg}mT(){return this.AF().rF(this.RF())}qR(t,s,i){}JR(t,s,i){}}}{const ee=self.Bs;ee.ey._3.xR.MR=class extends ee.ey._3.xR{constructor(t,s,i,e){super(t,s,i,e)}qR(t,s,i){const e=this.AF();t.UE(),t.Ww(),t._A(i,e.xF()),t.fA(0,0,0,0),e.hF(t),e.eF()}JR(t,s,i){const e=this.AF();t.UE(),t.Ww(),t._A(i,!1),t.fA(0,0,0,0),e.hF(t),e.eF()}}}{const ne=self.Bs,re=ne.lr(ne.Rect),he=ne.lr(ne.Ql);ne.ey._3.xR.GR=class extends ne.ey._3.xR{constructor(t,s,i,e){super(t,s,i,e)}qR(t,s,i){const e=this.AF();t.Ww(),t._A(i),e.aF(t,!0),t.d2(e.MF()),t.WE(s.jM()),he.vu(e.TF()),re.G(e._F()),re.Nl(1),t.AS(he,re),e.GF()&&t.CA(s)}JR(t,s,i){const e=this.AF();t.Ww(),t._A(i,!1),e.oF(t)?he.vu(e._F()):(t.SetNormalizedCoordsProgramVariant(!1),e.aF(t,!0),he.vu(e.TF())),t.SetBackTexture(null),t.d2(e.MF()),t.WE(s.jM()),e.SF()?t.QE():t.AS(he,e._F())}}}{const oe=self.Bs;oe.ey._3.xR._R=class extends oe.ey._3.xR{constructor(t,s,i,e){super(t,s,i,e)}qR(t,s,i){const e=this.AF();t._A(i,e.xF()),t.fA(0,0,0,0),t.JE(),t.Vw(this.mT()),e.fF(t,this.RF()),e.hF(t),e.eF()}JR(t,s,i){const e=this.AF();t._A(i,!1),t.fA(0,0,0,0),t.JE(),t.Vw(this.mT()),e.fF(t,this.RF()),e.hF(t),e.eF()}}}{const ae=self.Bs,le=ae.lr(ae.Rect),ue=ae.lr(ae.Ql);ae.ey._3.xR.TR=class extends ae.ey._3.xR{constructor(t,s,i,e){super(t,s,i,e)}qR(t,s,i){const e=this.AF(),n=(t._A(i),0===this.zR());n?t.d2(e.MF()):(t.fA(0,0,0,0),t.JE()),t.Vw(this.mT()),e.uF(t,this.RF()),t.WE(s.jM()),e.aF(t,n),ue.vu(e.TF()),le.G(e._F()),le.Nl(1),t.AS(ue,le),e.GF()&&t.CA(s)}JR(t,s,i){const e=this.AF(),n=(t._A(i,!1),0===this.zR());n?(t.d2(e.MF()),t.SetBackTexture(null),e.oF(t)?ue.vu(e._F()):(t.SetNormalizedCoordsProgramVariant(!1),e.aF(t,!0),ue.vu(e.TF()))):(t.fA(0,0,0,0),t.JE(),ue.vu(e._F())),t.Vw(this.mT()),e.uF(t,this.RF()),t.WE(s.jM()),e.SF()?t.QE():t.AS(ue,e._F())}}}{let u=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},c=(u,self.Bs),f=self.$s,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.FF=class{constructor(t){d=t,Object.defineProperties(this,{DF:{value:d.kF().OF(),writable:!1},LF:{value:d.NF().BF(),writable:!1},WF:{value:{},writable:!1},VF:{value:{},writable:!1},jF:{value:d.HF(),writable:!1},UF:{value:d.zF(),writable:!1},storage:{value:new self.JF(d),writable:!1},isInWorker:{value:d.qF(),writable:!1},$F:{value:d.XF(),writable:!1},YF:{value:d.ZF(),writable:!1},Pb:{value:d.KF(),writable:!1},QF:{value:d.tD(),writable:!1},sD:{value:new self.iD(t),writable:!1},eD:{value:new self.nD(t),writable:!1}}),d.rD().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.rD().addEventListener("keyup",t=>s.delete(t.key)),d.jf().addEventListener("window-blur",()=>s.clear()),d.qF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}hD(t){Object.defineProperties(this.WF,t)}oD(t){Object.defineProperties(this.VF,t)}addEventListener(t,s){d.rD().addEventListener(t,s)}removeEventListener(t,s){d.rD().removeEventListener(t,s)}aD(t,...s){f.Ie(t);const i=d.lD(),e=i.uD(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Zu())return e.cD();if(s.length<e.fD())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.fD()} expected)`);let n=e.dD(),r=n.pD(),h=i.mD();if(h){r=r.slice(0);const a=new Set(r);for(const l of h.pD())a.has(l)||(r.push(l),a.add(l));for(const u of i.gD())a.has(u)||(r.push(u),a.add(u))}const o=n.yD(r,e.wD(),e.SD(),e.cD(),...s);return o}vD(t){const s=d.MD().bD();if(!s)throw new Error("not in a function which returns a value");switch(s.xD()){case 1:"number"==typeof t&&s.TD(t);break;case 2:"string"==typeof t&&s.TD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.TD(t)}}signal(t){f.Ie(t),d.lD()._D(t)}GD(t){return f.Ie(t),d.lD().ID(t)}CD(){return[d.XF(),d.ZF()]}get isSuspended(){return d.PD()}get dt(){return d.ED()}get AD(){return d.RD()}get gameTime(){return d.FD()}get DD(){return d.OD()}get timeScale(){return d.kD()}set timeScale(t){f.xe(t),d.LD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.BD()}get framesPerSecond(){return d.BD()}get ND(){return d.WD()}get VD(){return d.jD()}get HD(){return d.UD()}get zD(){return d.JD()}set zD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.qD(t)}get $D(){return d.XD()}set $D(t){f.xe(t),d.YD(t)}get ZD(){return d.KD()}set ZD(t){d.QD(t)}random(){return d.tO()}get layout(){const t=d.sO();if(t)return t.iO();throw new Error("no layout is running - make sure a layout is loaded before accessing")}eO(t){let s=d.nO(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.rO(t))return i.iO();throw new Error("invalid layout")}hO(){return d.nO().oO().map(t=>t.iO())}aO(t){let s=d.nO(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.rO(t)))throw new Error("invalid layout");s.lO()||s.uO(i)}get keyboard(){const t=d.cO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get fO(){const t=d.cO().fO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get dO(){const t=d.cO().dO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get pO(){const t=d.cO().pO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}mO(t,s){f.Ie(t),f.Ie(s),d.gO(t,s)}yO(t){f.xe(t);const s=d.wO(t);return s?s.SO():null}vO(t,e){f.Ye(e);const n=d.bO();for(const s of t){const i=d.MO(s),r=i.xO();p.push([r.TO().RF(),r._O()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.SO(),s.SO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const h=m[t],o=n.GO(p[t][0]),a=p[t][1],l=o.IO();l[a]!==h&&((l[a]=h).xO().CO(o,!0),o.PO(h),i=!0)}i&&d.EO(),c.Bh(p),c.Bh(m)}}async AO(t,s){const i=new MessageChannel,e=i.port1,n=i.port2;return await d.RO("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return d.RO("runtime","alert",{message:t+(d.qF()?" [via Web Worker]":"")})}FO(t){return f.xe(t),d.DO(t)}OO(t){d.kO(t)}}}{let s=self.Bs,h=null;self.LO=class{constructor(t){h=t,Object.defineProperties(this,{BO:{value:h.NO("audio/webm; codecs=opus"),writable:!1}})}WO(t){const s=self.jO.VO(t);if(!s)throw new Error("invalid IImageInfo");s.HO(h.UO())}zO(t){return h.Mo(t)}JO(t){return h.xo(t)}qO(t){return h.To(t)}$O(t){return h._o(t)}XO(t){return h.YO(t)}ZO(t){return"flat"===h.KO()&&s.So(t)&&(t=t.toLowerCase()),h.QO(t)}get tk(){return h.sk()}async ik(t,s){if(this.BO)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await h.UO().ek(s),e=new Float32Array(i),n=t.createBuffer(1,e.length,48e3),r=n.getChannelData(0);return r.set(e),n}nk(...t){return h.rk(...t)}hk(t){return h.ak(t)}lk(t){return h.uk(t)}}}{let h=self.Bs,i=self.$s,o=null;self.ck=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.UO(),writable:!1}})}fk(t,s){const i=o.UO(),e=i.MO(t),n=i.MO(s);return o.dk(e,n)}pk(t,s){const i=o.UO(),e=i.MO(t);for(const n of s){const r=i.MO(n);if(o.dk(e,r))return n}return null}mk(t){const s=o.UO().MO(t),i=o.gk(s);return i?i.SO():null}yk(t,s){if(i.xe(t),i.xe(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.wk(t,s)}Sk(){return o.vk()}bk(t,s){let i=o.UO(),e;e=Array.isArray(t)?t.map(t=>i.Mk(t)):[i.Mk(t)];const n=h.Rect.bl(s),r=[];return o.xk(null,e,n,r),r.map(t=>t.SO())}}}{let s=self.Bs,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),n=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.iD=class{constructor(t){i=t,Object.defineProperties(this,{Tk:{value:s.li.vi,writable:!1},_k:{value:e.get(s.li.ci)||"unknown",writable:!1},Gk:{value:s.li.fi,writable:!1},Ik:{value:n.get(s.li.di)||"unknown",writable:!1},Ck:{value:s.li.mi,writable:!1},Pk:{value:r.get(s.li.yi)||"unknown",writable:!1}})}get exportType(){let t=i.Ek();return i.Ak()?t="nwjs":i.Rk()?t="windows-webview2":"cordova"===t?t="Android"===s.li.ci?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.Dk().Fk()}get Ok(){return i.Dk().kk()}get Lk(){return i.Dk().Bk()}get Nk(){return i.Dk().Wk()}get Vk(){return i.Dk().jk()}get Hk(){return i.Dk().Uk()}get devicePixelRatio(){return i.zk()}}}{const ce=self.$s;self.JF=class{constructor(t){this.Jk=t.qk()}getItem(t){return ce.Ie(t),this.Jk.getItem(t)}setItem(t,s){return ce.Ie(t),this.Jk.setItem(t,s)}removeItem(t){return ce.Ie(t),this.Jk.removeItem(t)}clear(){return this.Jk.clear()}keys(){return this.Jk.keys()}}}{const fe=self.Bs,de=fe.Ns();self.$k=class{#Xk;constructor(){const t=fe.Zk.Yk(de);this.#Xk=t,Object.defineProperties(this,{runtime:{value:t.UO().Kk(),writable:!1},Qk:{value:t.tL(),writable:!1},sL:{value:t.iL(),writable:!1},eL:{value:t.nL(),writable:!1},rL:{value:t.hL(),writable:!1},oL:{value:t.aL(),writable:!1},lL:{value:t.uL(),writable:!1},cL:{value:t.fL(),writable:!1},dL:{value:t.pL(),writable:!1}})}static mL(t){if(!t)return null;const s=fe.Zk.gL(t);return s?s.yL():null}wL(){return this.#Xk.vL().SL()}bL(){return this.#Xk.ML().SO()}}}{const pe=self.Bs,me=self.$s,ge=pe.Ns();self.xL=class{#Xk;constructor(){const t=pe.Zk.Yk(ge);this.#Xk=t,Object.defineProperties(this,{name:{value:t.Kc(),writable:!1},runtime:{value:t.UO().Kk(),writable:!1},TL:{value:t._L().yL(),writable:!1}}),t.UO().GL(this,t)}addEventListener(t,s){me.Ie(t),me.Ye(s),this.#Xk.rD().addEventListener(t,s)}removeEventListener(t,s){me.Ie(t),me.Ye(s),this.#Xk.rD().removeEventListener(t,s)}IL(){return[...this.instances()]}CL(){return pe.first(this.instances())}PL(){return[...this.EL()]}AL(){return pe.first(this.EL())}RL(t){const s=this.#Xk,i=s.UO().FL(t),e=s.DL(i);return e?e.SO():null}*instances(){for(const t of this.#Xk.OL())yield t.SO()}*EL(){for(const t of this.#Xk.LL().kL())yield t.SO()}BL(t){me.Ye(t);const s=this.#Xk;if(0<s.NL())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.WL(t)}Li(t,s,i,e,n){if(me.ye(s),me.ye(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#Xk,h=r.UO(),o=h.sO().TO(t);if(!o)throw new Error("invalid layer");const a=h.VL(r,o,s,i,e,n),l=(e&&o.jL(a),h.lD());return l.HL(!0),a.UL(),l.HL(!1),l.zL()||h.nO().JL()||h.qL(),a.SO()}}}{const ye=self.$s,l=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.$L=class{constructor(t){l.set(this,t);const s=[],i=t.XL(),e=i.YL().length;for(let t=0;t<e;++t)s.push(new self.ZL(i,t));Object.defineProperties(this,{name:{value:t.Kc(),writable:!1},index:{value:t.RF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ie(t),ye.Ye(s),l.get(this).rD().addEventListener(t,s)}removeEventListener(t,s){ye.Ie(t),ye.Ye(s),l.get(this).rD().removeEventListener(t,s)}get width(){return l.get(this).um()}set width(t){ye.xe(t),l.get(this).Sm(t)}get height(){return l.get(this).xm()}set height(t){ye.xe(t),l.get(this).fm(t)}KL(t,s){ye.xe(t),ye.xe(s);const i=l.get(this);i.Sm(t),i.fm(s)}getSize(){const t=l.get(this);return[t.um(),t.xm()]}set scale(t){ye.xe(t),l.get(this).QL(t)}get scale(){return l.get(this).tB()}set angle(t){ye.xe(t),l.get(this).sB(t)}get angle(){return l.get(this).iB()}set scrollX(t){ye.ye(t),l.get(this).eB(t)}get scrollX(){return l.get(this).nB()}set scrollY(t){ye.ye(t),l.get(this).rB(t)}get scrollY(){return l.get(this).hB()}scrollTo(t,s){ye.ye(t),ye.ye(s);const i=l.get(this);i.eB(t),i.rB(s)}oB(){const t=l.get(this);return[t.nB(),t.hB()]}aB(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.TO(t))?i.lB():null}uB(){return l.get(this).cB().map(t=>t.lB())}*fB(){for(const t of l.get(this).fB())yield t.lB()}dB(t,s,i){const e=l.get(this),n=self.pB,r=(ye.Ie(t),ye.hn(s,n),s?e.UO().mB(s):null),h=we.indexOf(i);if(h<0)throw new Error("invalid location");e.gB(t,r,h)}yB(t,s,i){const e=l.get(this),n=e.UO(),r=self.pB,h=(ye.rn(t,r),n.mB(t));if(!h)throw new Error("invalid layer");ye.hn(s,r);const o=s?n.mB(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.wB(h,o,a)}SB(t){const s=l.get(this),i=self.pB,e=(ye.rn(t,i),s.UO().mB(t));if(!e)throw new Error("invalid layer");const n=e.UO();s.vB(e),n.lD().zL()||n.qL()}bB(){const t=l.get(this),s=t.UO();t.MB(),s.lD().zL()||s.qL()}xB(t,s){ye.xe(t),ye.xe(s),l.get(this).TB(t,s)}_B(){return l.get(this).GB()}set Y(t){ye.Ie(t);const s=l.get(this);if("perspective"===t)s.IB();else{if("orthographic"!==t)throw new Error("invalid projection");s.CB()}}get Y(){return l.get(this).PB()?"orthographic":"perspective"}}}{const Se=self.Bs,f=self.$s,d=new WeakMap,ve=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),be=new Map([...ve.entries()].map(t=>[t[1],t[0]])),Me=Se.lr(Se.Ho);self.pB=class{constructor(t){d.set(this,t);const s=[],i=t.XL(),e=i.YL().length;for(let t=0;t<e;++t)s.push(new self.ZL(i,t));Object.defineProperties(this,{name:{value:t.Kc(),writable:!1},layout:{value:t.rO().iO(),writable:!1},effects:{value:s,writable:!1}}),t.UO().GL(this,t)}get EB(){const t=d.get(this).AB();return t?t.lB():null}*RB(){for(const t of d.get(this).RB())yield t.lB()}*DB(){for(const t of d.get(this).OB())yield t.lB()}*kB(){for(const t of d.get(this).OB())for(const s of t.LB())yield s.lB()}get index(){return d.get(this).RF()}get isVisible(){return d.get(this).BB()}set isVisible(t){d.get(this).NB(t)}get WB(){return d.get(this).VB()}get isInteractive(){return d.get(this).jB()}set isInteractive(t){d.get(this).HB(t)}get UB(){return d.get(this).zB()}set UB(t){d.get(this).JB(!!t)}get qB(){return d.get(this).$B()}get opacity(){return d.get(this).OE()}set opacity(t){t=Se.gr(+t,0,1),isNaN(t)||d.get(this).LE(t)}set scale(t){f.xe(t),d.get(this).XB(t)}get scale(){return d.get(this).YB()}set scaleRate(t){f.xe(t),d.get(this).ZB(t)}get scaleRate(){return d.get(this).KB()}set angle(t){f.xe(t),d.get(this).sB(t)}get angle(){return d.get(this).QB()}set parallaxX(t){f.xe(t),d.get(this).t5(t)}get parallaxX(){return d.get(this).s5()}set parallaxY(t){f.xe(t),d.get(this).i5(t)}get parallaxY(){return d.get(this).e5()}set n5(t){f.xe(t),d.get(this).F2(t)}get n5(){return d.get(this).R2()}set r5(t){d.get(this).h5(t)}get r5(){return d.get(this).o5()}set a5(t){d.get(this).l5(t)}get a5(){return d.get(this).u5()}set ER(t){f.Ie(t);const s=ve.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).d2(s)}get ER(){return be.get(d.get(this).c5())}set backgroundColor(t){if(f.je(t),t.length<3)throw new Error("expected 3 elements");Me.Xo(t[0],t[1],t[2]);const s=d.get(this),i=s.f5();i.fa(Me)||(i.ea(Me),s.UO().EO())}get backgroundColor(){const t=d.get(this).f5();return[t.na(),t.ra(),t.oa()]}set scrollX(t){f.ye(t);const s=d.get(this);s.d5(!0),s.eB(t)}get scrollX(){return d.get(this).nB()}set scrollY(t){f.ye(t);const s=d.get(this);s.d5(!0),s.rB(t)}get scrollY(){return d.get(this).hB()}scrollTo(t,s){f.ye(t),f.ye(s);const i=d.get(this);i.d5(!0),i.eB(t),i.rB(s)}oB(){const t=d.get(this);return[t.nB(),t.hB()]}p5(){d.get(this).d5(!1)}getViewport(){return d.get(this).m5().Il()}g5(t,s,i=0){f.ye(t),f.ye(s),f.ye(i);const e=d.get(this),n=e.UO();return e.y5(t-n.w5(),s-n.S5(),i)}v5(t,s,i=0){f.ye(t),f.ye(s),f.ye(i);const e=d.get(this),n=e.UO(),[r,h]=e.b5(t,s,i);return[r+n.w5(),h+n.S5()]}M5(t,s,i=0){return f.ye(t),f.ye(s),f.ye(i),d.get(this).x5(t,s,i)}T5(t,s,i=0){return f.ye(t),f.ye(s),f.ye(i),d.get(this)._5(t,s,i)}get G5(){return d.get(this).I5()}}}{let e=function(t){let s=_e.get(t);return s||(s=xe.lr(xe.Event.jf),_e.set(t,s)),s};e;const xe=self.Bs,Te=self.$s,_e=new WeakMap,Ge=xe.Ns();self.C5=class{#Xk;constructor(){const t=xe.Zk.Yk(Ge),s={runtime:{value:(this.#Xk=t).UO().Kk(),writable:!1},P5:{value:t.E5().SL(),writable:!1},TL:{value:t._L().yL(),writable:!1}};t.A5(s),t.R5(s),Object.defineProperties(this,s),t.UO().GL(this,t)}static F5(){return xe.Zk.D5()}O5(){const t=_e.get(this);t&&(t.ur(),_e.delete(this))}addEventListener(t,s,i){Te.Ie(t),Te.Ye(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Ie(t),Te.Ye(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}k5(){const t=this.#Xk,s=t.UO();s.L5(t),s.lD().zL()||s.nO().JL()||s.lD().B5()||s.qL()}N5(){const t=this.#Xk.W5();return t?t.map(t=>t.SO()):[]}*V5(){const t=this.#Xk;if(t.j5())for(const s of t.H5())yield s.SO()}get uid(){return this.#Xk.U5()}get z5(){return this.#Xk.J5()}set timeScale(t){Te.xe(t),this.#Xk.LD(t)}get timeScale(){return this.#Xk.q5()}X5(){this.#Xk.Y5()}get dt(){const t=this.#Xk;return t.UO().ED(t)}Z5(...t){Te.je(t);const s=new Set(t),i=this.#Xk.K5();return s.de(i)}Q5(t){Te.rn(t,Set),this.#Xk.t4(t)}s4(){return new Set(this.#Xk.K5())}signal(t){Te.Ie(t);const s=this.#Xk;s.UO().lD().i4(s,t)}GD(t){Te.Ie(t);const s=this.#Xk;return s.UO().lD().e4(s,t)}}}{const Ie=self.Bs,Ce=self.$s,Pe=Ie.Ns();self.n4=class extends self.C5{#Xk;#r4=!1;#h4=null;#o4=!1;#a4=null;#l4;#u4;constructor(t){super(),this.#Xk=Ie.Zk.Yk(Pe),this.#r4=!1,this.#h4=null,this.#o4=!1,this.#a4=null,this.#l4=t?.domComponentId,this.#u4=t?.wrapperComponentId}O5(){this.c4(!1),this.f4(!1),super.O5()}d4(){return Ie.Zk.m4()}g4(t){const s=this.#Xk;s.UO().y4(t,s)}w4(t){const s=this.#Xk;return s.UO().S4(t,s)}v4(t,s){if(Ce.Ie(t),Ce.Ye(s),!this.#l4)throw new Error("no DOM component id set");const i=this.#Xk.UO();i.b4(this.#l4,t,s)}M4(t){Ce.je(t);for(const[s,i]of t)this.v4(s,i)}x4(t,s){if(Ce.Ie(t),!this.#l4)throw new Error("no DOM component id set");const i=this.#Xk.UO();i.ff(this.#l4,t,s)}T4(t,s){if(Ce.Ie(t),!this.#l4)throw new Error("no DOM component id set");const i=this.#Xk.UO();return i.RO(this.#l4,t,s)}_4(t,s){const i=this.#Xk.UO();if(!i.qF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#l4,handler:t,data:s,responseId:null});this.x4(t,s)}c4(t){if(this.#r4!==(t=!!t)){this.#r4=t;const s=this.#Xk.UO();t?(this.#h4||(this.#h4=()=>this.G4()),s.jf().addEventListener("tick",this.#h4)):s.jf().removeEventListener("tick",this.#h4)}}I4(){return this.#r4}G4(){}f4(t){if(this.#o4!==(t=!!t)){this.#o4=t;const s=this.#Xk.UO();t?(this.#a4||(this.#a4=()=>this.C4()),s.jf().addEventListener("tick2",this.#a4)):s.jf().removeEventListener("tick2",this.#a4)}}P4(){return this.#o4}C4(){}E4(){return[]}A4(){return null}R4(t){}F4(){if(!this.#u4)throw new Error("no wrapper component id set");const t=this.#Xk.UO();return t.D4(this.#u4)}O4(t,s){if(Ce.Ie(t),Ce.Ye(s),!this.#u4)throw new Error("no wrapper component id set");const i=this.#Xk.UO();i.L4(this.#u4,t,s)}B4(t){Ce.je(t);for(const[s,i]of t)this.O4(s,i)}N4(t,s){if(!this.#u4)throw new Error("no wrapper component id set");this.runtime.eD.W4(this.#u4,t,s)}V4(t,s){if(this.#u4)return this.runtime.eD.j4(this.#u4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class n extends t{#H4;#U4;constructor(t){super(t);const s=Ee.Zk.Yk(De),i=s.xO(),e=(this.#H4=s,this.#U4=i,Fe.set(this,s),[]),n=i.z4();if(n){const h=i.E5().XL().YL().length;for(let t=0;t<h;++t)e.push(new self.ZL(n,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#U4.rO().iO()}get J4(){return this.#U4.TO().lB()}get x(){return this.#U4.I2()}set x(t){t=+t;const s=this.#U4;isNaN(t)||s.I2()===t||(s.C2(t),s.q4())}get y(){return this.#U4.E2()}set y(t){t=+t;const s=this.#U4;isNaN(t)||s.E2()===t||(s.A2(t),s.q4())}setPosition(t,s){t=+t,s=+s;const i=this.#U4;isNaN(t)||isNaN(s)||i.I2()===t&&i.E2()===s||(i.X4(t,s),i.q4())}Y4(){const t=this.#U4;return[t.I2(),t.E2()]}Z4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#U4;i.K4(t,s),i.q4()}}get n5(){return this.#U4.R2()}set n5(t){t=+t;const s=this.#H4,i=this.#U4;isNaN(t)||i.R2()===t||(i.F2(t),s.UO().EO())}get Q4(){return this.#U4.tN()}get width(){return this.#U4.um()}set width(t){t=+t;const s=this.#U4;isNaN(t)||s.um()===t||(s.Sm(t),s.q4())}get height(){return this.#U4.xm()}set height(t){t=+t;const s=this.#U4;isNaN(t)||s.xm()===t||(s.fm(t),s.q4())}KL(t,s){t=+t,s=+s;const i=this.#U4;isNaN(t)||isNaN(s)||i.um()===t&&i.xm()===s||(i.hC(t,s),i.q4())}getSize(){const t=this.#U4;return[t.um(),t.xm()]}get angle(){return this.#U4.iB()}set angle(t){t=Ee.yr(+t);const s=this.#U4;isNaN(t)||s.iB()===t||(s.sB(t),s.q4())}get sN(){return Ee.vr(this.angle)}set sN(t){this.angle=Ee.Sr(t)}xu(){return this.#U4.iN().Il()}eN(){return this.#U4.nN().yu()}rN(){return this.#U4.hN()}get isVisible(){return this.#U4.VB()}set isVisible(t){t=!!t;const s=this.#H4,i=this.#U4;i.VB()!==t&&(i.NB(t),s.UO().EO())}get opacity(){return this.#U4.OE()}set opacity(t){t=Ee.gr(+t,0,1);const s=this.#H4,i=this.#U4;isNaN(t)||i.OE()===t||(i.LE(t),s.UO().EO())}set oN(t){if(Ae.je(t),t.length<3)throw new Error("expected 3 elements");Le.Xo(t[0],t[1],t[2]);const s=this.#H4,i=this.#U4;i.aN().fa(Le)||(i.lN(Le),s.UO().EO())}get oN(){const t=this.#U4.aN();return[t.na(),t.ra(),t.oa()]}set ER(t){Ae.Ie(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#H4,e=this.#U4;e.d2(s),i.UO().EO()}get ER(){return ke.get(this.#U4.c5())}uN(){this.#U4.cN()}fN(){this.#U4.dN()}pN(t){Ae.rn(t,Re);const s=this.#H4,i=s.UO().mB(t);if(!i)throw new Error("invalid layer");s.xO().mN(i)}gN(t,s){Ae.rn(t,n),this.#U4.yN(Fe.get(t),s)}get zIndex(){return this.#U4._O()}get wN(){return this.#U4.SN()}set wN(t){this.#U4.vN(!!t)}Xl(t,s){return Ae.ye(t),Ae.ye(s),this.#U4.bN(+t,+s)}fk(t){Ae.rn(t,n);const s=this.#H4,i=Fe.get(t);return s.UO().NF().dk(s,i)}mk(){const t=this.#H4,s=t.UO().NF().gk(t);return s?s.SO():null}getParent(){const t=this.#H4.MN();return t?t.SO():null}xN(){const t=this.#H4.TN();return t?t.SO():null}*_N(){for(const t of this.#H4._N())yield t.SO()}GN(){return this.#H4.IN()}CN(t){const s=this.#H4.PN(t);return s?s.SO():null}*children(){for(const t of this.#H4.children())yield t.SO()}*EN(){for(const t of this.#H4.EN())yield t.SO()}AN(t,s){Ae.rn(t,n),Ae.Oe(s),s=s||{};const i=this.#H4,e=Fe.get(t);i.RN(e,s)}removeChild(t){Ae.rn(t,n);const s=this.#H4,i=Fe.get(t);s.FN(i)}DN(){const t=this.#H4;if(t.ON()){const s=t.MN();s.FN(t)}}kN(){const t=this.#U4;return{LN:t.BN(),NN:t.WN(),VN:t.jN(),HN:t.UN(),zN:t.JN(),qN:t.$N(),XN:t.YN(),ZN:t.KN(),QN:t.t6()}}s6(t,s){Ae.xe(t),Ae.xe(s),this.#U4.i6(t,s)}e6(){const t=this.#U4;t.n6(),t.q4()}r6(t,s,i){Ae.xe(t),Ae.xe(s),Ae.De(i);const e=this.#U4;e.h6(t,s,i)&&e.q4()}o6(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN,o=this.#U4;if(o.a6()){const a=o.l6(),l=a.gb(t,s);null!==l&&(i=l.I2(),e=l.E2(),n=l.R2(),r=l.D2(),h=l.L2())}return{x:i,y:e,n5:n,u:r,v:h}}u6(){const t=this.#U4;if(!t.a6())return[0,0];const s=t.l6();return[s.nb(),s.rb()]}}};0;const Ee=self.Bs,Ae=self.$s,Re=self.pB,Fe=new WeakMap,De=Ee.Ns(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Le=Ee.lr(Ee.Ho);self.c6=t(self.C5),self.f6=t(self.n4)}{const Be=self.$s;self.d6=class extends self.c6{#Xk;constructor(){super(),this.#Xk=self.C5.F5()}p6(){return this.#Xk.g6().m6()}focus(){this.#Xk.g6().y6()}blur(){this.#Xk.g6().w6()}S6(t,s){Be.Ie(t),this.#Xk.g6().v6(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=Ne.lr(Ne.Event.jf),Ve.set(t,s)),s};e;const Ne=self.Bs,We=self.$s,Ve=new WeakMap,je=Ne.Ns();self.b6=class{#Xk;constructor(){const t=Ne.Zk.Yk(je),s={runtime:{value:(this.#Xk=t).UO().Kk(),writable:!1},behavior:{value:t.x6().M6(),writable:!1},T6:{value:t.G6()._6(),writable:!1}};Object.defineProperties(this,s),t.UO().GL(this,t)}static F5(){return Ne.Zk.D5()}get I6(){return this.#Xk.C6().SO()}O5(){const t=Ve.get(this);t&&(t.ur(),Ve.delete(this))}addEventListener(t,s,i){We.Ie(t),We.Ye(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){We.Ie(t),We.Ye(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Bs,Ue=He.Ns();self.P6=class{constructor(){const t=He.Zk.Yk(Ue),s={runtime:{value:t.UO().Kk(),writable:!1},behavior:{value:t.x6().M6(),writable:!1},name:{value:t.Kc(),writable:!1}};Object.defineProperties(this,s)}}}{const ze=self.Bs,Je=ze.Ns();self.E6=class{#Xk;constructor(){const t=ze.Zk.Yk(Je),s={runtime:{value:(this.#Xk=t).UO().Kk(),writable:!1}};Object.defineProperties(this,s)}IL(){return this.#Xk.kL().map(t=>t.SO())}static mL(t){if(!t)return null;const s=ze.Zk.A6(t);return s?s.M6():null}}}{const qe=self.Bs,$e=self.$s,Xe=qe.lr(qe.Ho);self.ZL=class{#Xk;constructor(t,s){this.#Xk=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#Xk.YL();return t[this.index].Kc()}get isActive(){return this.#Xk.R6(this.index)}set isActive(t){t=!!t;const s=this.#Xk;s.R6(this.index)!==t&&(s.F6(this.index,t),s.D6(),s.UO().EO())}setParameter(t,s){$e.xe(t),t=Math.floor(+t);const i=this.#Xk,e=i.O6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof qe.Ho){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Xe.Xo(s[0],s[1],s[2]),s=Xe}else if("number"!=typeof s)throw new TypeError("expected number");const n=i.k6(this.index,t,s);n&&i.R6(this.index)&&i.UO().EO()}getParameter(t){$e.xe(t),t=Math.floor(+t);const s=this.#Xk,i=s.O6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof qe.Ho?[i.na(),i.ra(),i.oa()]:i}}}self.L6=class{#Xk;constructor(t){this.#Xk=t,Object.defineProperties(this,{name:{value:t.Kc(),writable:!1}})}get speed(){return this.#Xk.B6()}get isLooping(){return this.#Xk.N6()}get repeatCount(){return this.#Xk.W6()}get V6(){return this.#Xk.j6()}get H6(){return this.#Xk.U6()}get frameCount(){return this.#Xk.z6()}J6(){return this.#Xk.q6().map(t=>t.X6())}*frames(){for(const t of this.#Xk.q6())yield t.X6()}};self.jO=class{#Xk;constructor(t){this.#Xk=t}static VO(t){return t.#Xk}get width(){return this.#Xk.um()}get height(){return this.#Xk.xm()}getSize(){const t=this.#Xk;return[t.um(),t.xm()]}Y6(t){return t.Z6(this)}K6(){return this.#Xk.LC().Il()}};{const Ye=self.$s;self.Q6=class extends self.jO{#Xk;constructor(t){super(t.tW()),this.#Xk=t,Object.defineProperties(this,{duration:{value:t.sW(),writable:!1},iW:{value:t.eW(),writable:!1},nW:{value:t.rW(),writable:!1}})}hW(){const t=this.#Xk;return[t.eW(),t.rW()]}oW(){return this.#Xk.aW()}lW(t){return this.uW(t)[0]}cW(t){return this.uW(t)[1]}uW(t){let s=this.#Xk,i=null;if("number"==typeof t)i=s.fW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.dW(t)}return i?[i.I2(),i.E2()]:this.hW()}pW(){const t=this.#Xk.mW();return t?t.Nu():0}gW(t){return this.yW(t)[0]}wW(t){return this.yW(t)[1]}yW(t){Ye.xe(t),t=Math.floor(t);const s=this.#Xk.mW();if(!s||t<0||t>=s.Nu())return[0,0];const i=s.Bu(),e=i[2*t],n=i[2*t+1];return[e,n]}get tag(){return this.#Xk.SW()}}}{let s=function(t){const s=Ke.get(t);if(s.vW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.$s,Ke=new WeakMap;self.bW=class{constructor(t){Ke.set(this,t),t.UO().GL(this,t)}pause(){s(this).MW()}resume(){s(this).xW()}stop(){s(this).l0()}Z5(t){return s(this).TW(t)}set time(t){Ze.xe(t),s(this)._W(t)}get time(){return s(this).u3()}set totalTime(t){Ze.xe(t),s(this).GW(t)}get totalTime(){return s(this).IW()}set isLooping(t){s(this).PW(!!t)}get isLooping(){return s(this).EW()}set H6(t){s(this).AW(!!t)}get H6(){return s(this).RW()}set playbackRate(t){Ze.xe(t),s(this).FW(t)}get playbackRate(){return s(this).DW()}get progress(){const t=s(this);return t.u3()/t.IW()}get tags(){return s(this).OW()}get finished(){return s(this).kW()}get isPlaying(){return s(this).IsPlaying()}get LW(){return s(this).BW()}get NW(){return Ke.get(this).vW()}}}{let i=new WeakMap;self.WW=class extends self.bW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Kc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=n.get(t);if(s.vW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.$s),n=new WeakMap,r=new WeakMap,h=null;self.VW=class extends self.bW{constructor(t,s,i){super(t),h=h||i.jW,n.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.HW(t)}UW(t){e.Ie(t);const s=self.mc.Dc(h(t));i(this).zW(s)}get I6(){const t=i(this).JW();return t?t.SO():null}get qW(){return i(this).$W()}set qW(t){i(this).XW(!!t)}get value(){const t=i(this);if("value"!==t.YW())throw new Error("not a value tween");return t.KW("value").ZW()}}}self.QW=class extends self.$k{constructor(){super()}};{const Qe=self.Bs,tn=self.$s,sn=Qe.Ns();self.tV=class extends self.QW{#Xk;#l4;#sV=0;#iV=new Map;constructor(t){if(super(),this.#Xk=Qe.Zk.Yk(sn),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#l4=t.domComponentId,this.eV("elem-focused",t=>t.nV()),this.eV("elem-blurred",t=>{t&&t.rV()})}hV(t){const s=this.#sV++;return this.#iV.set(s,t),s}oV(t){this.#iV.delete(t)}eV(t,i){const s=this.#Xk.UO();s.b4(this.#l4,t,t=>{const s=this.#iV.get(t.elementId);i(s,t)})}aV(t){tn.je(t);for(const[s,i]of t)this.aV(s,i)}}}{const en=self.Bs,nn=(new WeakMap,en.Ns());self.lV=class extends self.xL{#Xk;constructor(){super(),this.#Xk=en.Zk.Yk(nn)}uV(){}cV(){return this.#Xk.tW().fV()}dV(t){}pV(t){}mV(){}gV(t){}}}{const rn=self.Bs,hn=(new WeakMap,rn.Ns());self.yV=class extends self.f6{#Xk;#wV=null;#SV=null;constructor(t){super(t),this.#Xk=rn.Zk.Yk(hn)}O5(){if(super.O5(),this.#wV){const t=this.#Xk.UO().jf();t.removeEventListener("renderercontextlost",this.#wV),t.removeEventListener("renderercontextrestored",this.#SV),this.#wV=null,this.#SV=null}}vV(){if(!this.#wV){this.#wV=()=>this.bV(),this.#SV=()=>this.MV();const t=this.#Xk.UO().jf();t.addEventListener("renderercontextlost",this.#wV),t.addEventListener("renderercontextrestored",this.#SV)}}bV(){}MV(){}xV(t){}}}{const on=self.Bs,an=on.lr(on.Rect),ln=new WeakMap,un=on.Ns();self.TV=class extends self.yV{#_V=-1;#GV=!0;#IV=!1;#CV=!1;#PV=-.2;#EV=on.lr(on.Rect,0,0,-1,-1);#AV=0;#RV=0;#FV=-1;#DV=-1;#OV=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=on.Zk.Yk(un),i=(ln.set(this,s),this.#_V=this.TL.hV(this),s.UO().Dk());this.#AV=i.kV(),this.#RV=i.LV(),this.c4(!0)}O5(){super.O5(),this.TL.oV(this.#_V),this.BV("destroy"),this.#_V=-1,ln.delete(this)}NV(){const t=ln.get(this).UO();if(t.qF())throw new Error("not valid in worker mode");return this.WV("get-element")}BV(t,s){(s=s||{}).elementId=this.#_V,this.x4(t,s)}WV(t,s){return(s=s||{}).elementId=this.#_V,this._4(t,s)}VV(t,s){return(s=s||{}).elementId=this.#_V,this.T4(t,s)}jV(t){t=t||{};const s=ln.get(this).xO();t.elementId=this.#_V,t.isVisible=s.VB(),t.htmlIndex=s.TO().HV(),t.htmlZIndex=s.UV(),Object.assign(t,this.zV()),this.#GV=!!t.isVisible,this._4("create",t),this.JV(!0)}qV(t){this.#GV!==(t=!!t)&&(this.#GV=t,this.BV("set-visible",{isVisible:t}))}G4(){this.JV(!1)}$V(){const t=ln.get(this).UO(),s=t.Dk().XV();return"Android"===on.li.ci&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}JV(u){const c=ln.get(this);if(!c.YV()){let t=c.xO(),s=t.TO(),i=t.iN(),[e,n]=s.b5(i.xl(),i.Tl()),[r,h]=s.b5(i._l(),i.Gl()),o=c.UO().Dk(),a=o.Bk(),l=o.Wk();if(t.VB()&&s.VB())if(!this.$V()&&(r<=0||h<=0||a<=e||l<=n))this.qV(!1);else{an.set(e,n,r,h);const f=o.kV(),d=o.LV(),p=s.HV(),m=t.UV();if(!u&&an.equals(this.#EV)&&this.#AV===f&&this.#RV===d&&this.#FV===p&&this.#DV===m)this.qV(!0);else{this.#EV.G(an),this.#AV=f,this.#RV=d,this.#FV=p,this.#DV=m,this.qV(!0);let t=null;this.#CV&&(t=s.ZV()+this.#PV),this.BV("update-position",{left:Math.round(this.#EV.xl()),top:Math.round(this.#EV.Tl()),width:Math.round(this.#EV.width()),height:Math.round(this.#EV.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.qV(!1)}}KV(){this.WV("focus",{focus:!0})}QV(){this.WV("focus",{focus:!1})}nV(){this.#IV=!0}rV(){this.#IV=!1}tj(){return this.#IV}sj(t,s){this.postToDOMElement("set-css-style",{prop:on.Wo(t),val:s})}ij(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}ej(t){this.postToDOMElement("remove-attribute",{name:t})}nj(){this.#OV||(this.#OV=!0,Promise.resolve().then(()=>{this.#OV=!1,this.BV("update-state",this.zV())}))}zV(){}rj(){return this.#_V}}}self.hj=class extends self.E6{constructor(){super()}};self.oj=class extends globalThis.P6{constructor(){super()}uV(){}};{const cn=self.Bs,fn=new WeakMap,dn=cn.Ns();self.aj=class extends self.b6{#r4=!1;#o4=!1;#lj=!1;constructor(){super(),fn.set(this,cn.Zk.Yk(dn))}O5(){super.O5(),this.c4(!1),this.f4(!1),this.uj(!1),fn.delete(this)}d4(){return cn.Zk.m4()}cj(){}g4(t){const s=fn.get(this);s.UO().y4(t,s.C6(),s.G6())}w4(t){const s=fn.get(this);return s.UO().S4(t,s.C6(),s.G6())}c4(t){if(this.#r4!==(t=!!t)){this.#r4=t;const s=fn.get(this).UO();t?s.fj(this):s.dj(this)}}I4(){return this.#r4}G4(){}f4(t){if(this.#o4!==(t=!!t)){this.#o4=t;const s=fn.get(this).UO();t?s.pj(this):s.mj(this)}}P4(){return this.#o4}C4(){}uj(t){if(this.#lj!==(t=!!t)){this.#lj=t;const s=fn.get(this).UO();t?s.gj(this):s.yj(this)}}wj(){return this.#lj}Sj(){}E4(){return[]}A4(){return null}R4(t){}}}{let e=self.$s,n=null;self.nD=class{constructor(t){n=t}OO(t){n.kO(t)}W4(t,s,i){e.Ie(t),e.Ie(s),e.He(i),n.vj(t,s,i)}j4(t,s,i){return e.Ie(t),e.Ie(s),e.He(i),n.bj(t,s,i)}Mj(t){return e.Ce(t),new self.xj(n,t)}set Tj(t){n._j(!!t)}get Tj(){return n.Gj()}Ij(t){n.Cj(!!t)}Pj(t){e.ye(t);const s=n.Ej(t);return s?s.SL():null}}}self.xj=class{#Aj;#Rj;#Fj;#Dj;#Oj;#kj;constructor(t,s){const i=(this.#Aj=t).lD(),e=t.mD(),n=(this.#Rj=e,this.#Fj=e.Lj(),t.MD()),r=(this.#Dj=n.Bj(),this.#Oj=n.Nj(e),i.Wj()),h=r.Nj();this.#kj=h,s&&h.Vj(s),t.jj(!1)}Hj(){const t=this.#Aj.lD(),s=this.#Fj,i=this.#kj;t.Uj(s),this.#Rj.zj(this.#Dj,this.#Oj),t.Jj(s),i.qj(i.RF()+1)}get $j(){return this.#kj.Xj()}release(){const t=this.#Aj,s=t.MD(),i=t.lD().Wj();t.jj(!0),i.Yj(),s.Yj()}};{let d=self.Bs,n=self.$s,p=null,r=null;self.Zj=class{constructor(t,s){r=t,p=s}Kj(){p.UE()}Qj(t){p.jE(t)}t8(){p.Jw()}s8(){p.Ww()}i8(){p.Qw()}setColor(t){p.kE(t[0],t[1],t[2],t[3])}e8(t,s,i,e){p.kE(t,s,i,e)}n8(){p.BE()}r8(t){p.LE(t)}h8(t){p.vS(t)}o8(){p.bS()}rect(t){p.qE(t.left,t.top,t.right,t.bottom)}a8(t,s,i,e){p.qE(t,s,i,e)}l8(t){p.Ql(d.Ql.wu(t))}u8(t,s,i,e,n,r,h,o){p.hv(t,s,i,e,n,r,h,o)}c8(t,s){p.AS(d.Ql.wu(t),d.Rect.Cl(s))}f8(t,s){p.YE(d.Ql.wu(t),d.Ql.wu(s))}d8(t,s,i,e,n,r,h,o,a,l,u,c,f){p.ZE(t,s,i,e,n,r,h,o,a,l,u,c,d.Rect.Cl(f))}p8(t,s,i,e,n,r,h,o,a,l,u,c,f){p.GS(t,s,i,e,n,r,h,o,a,l,u,c,d.Ql.wu(f))}m8(t,s,i){p.KE(t,s,i)}g8(t){p.rv(t)}line(t,s,i,e){p.Cm(t,s,i,e)}y8(t,s,i,e,n,r){p.IS(t,s,i,e,n,r)}w8(t,s,i,e){p.RS(t,s,i,e)}S8(t){p.kS(d.Rect.Cl(t))}v8(t){p.LS(d.Ql.wu(t))}b8(t){p.HS(t)}M8(){p.US()}x8(t){p.$S(t)}T8(){p.KS()}_8(t){n.hn(t,self.G8);const s=t?r.mB(t):null;p.WE(s)}I8(t,s){const i=self.jO.VO(t);if(i)return i.C8(p,{Ib:s?.Ib??"clamp-to-edge",Cb:s?.Cb??"clamp-to-edge",Pb:s?.Pb??"trilinear",Rb:s?.Rb??!0});throw new Error("invalid IImageInfo")}P8(t){const s=self.jO.VO(t);if(!s)throw new Error("invalid IImageInfo");s.II()}Z6(t){const s=self.jO.VO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.jM();return self.G8.E8(r,i)}A8(t,s,i){n.xe(t),n.xe(s);const e=p.RM(t,s,{Ib:i?.Ib??"clamp-to-edge",Cb:i?.Cb??"clamp-to-edge",Pb:i?.Pb??"trilinear",Rb:i?.Rb??!0});return self.G8.E8(r,e)}F8(t,s,i){n.rn(s,self.G8);const e=r.mB(s);p.kC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){n.rn(t,self.G8);const s=r.mB(t);p.kM(s)}D8(){const t=p.Mv();return new self.O8(r,t)}k8(){r.Dk().L8(p)}B8(t){n.rn(t,globalThis.pB);const s=r.mB(t);s.N8(p)}}}{const pn=new WeakMap,mn=new WeakMap;self.G8=class{constructor(t,s){pn.set(this,{runtime:t,W8:s}),mn.set(s,this),t.GL(this,s),Object.defineProperties(this,{width:{value:s.um(),writable:!1},height:{value:s.xm(),writable:!1}})}static E8(t,s){if(!s)return null;const i=mn.get(s);return i||new self.G8(t,s)}}}{let e=function(t){return yn.get(t).V8};e;const gn=self.$s,yn=new WeakMap;self.O8=class{constructor(t,s){yn.set(this,{runtime:t,V8:s}),t.GL(this,s)}release(){e(this).ur()}set j8(t){gn.Ie(t),e(this).kI(t)}get j8(){return e(this).BG()}set H8(t){gn.xe(t),e(this).LI(t)}get H8(){return e(this).BI()}set lineHeight(t){gn.xe(t),e(this).WI(t)}get lineHeight(){return e(this).VI()}set U8(t){e(this).jI(t)}get U8(){return e(this).HI()}set z8(t){e(this).UI(t)}get z8(){return e(this).zI()}setColor(t){gn.je(t),this.J8(t[0],t[1],t[2])}J8(t,s,i){e(this).YI(t,s,i)}q8(t){gn.Ie(t),e(this).m2(t)}set X8(t){e(this).ZI(t)}get X8(){return e(this).KI()}set verticalAlign(t){e(this).QI(t)}get verticalAlign(){return e(this).tC()}set Y8(t){e(this).sC(t)}get Y8(){return e(this).iC()}set Z8(t){e(this).eC(t)}get Z8(){return e(this).nC()}set text(t){gn.Ie(t),e(this).df(t)}get text(){return e(this).rC()}KL(t,s,i){gn.xe(t),gn.xe(s),gn.xe(i),e(this).hC(t,s,i)}Y6(){const{runtime:t,V8:s}=yn.get(this),i=s.jM();return self.G8.E8(t,i)}K6(){return e(this).LC().Il()}K8(t){gn.Ye(t),e(this).EI=t}Q8(){e(this).II()}get tH(){return e(this).aC()}get sH(){return e(this).uC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Sn.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Bs,wn=new Set(["local","remote"]),Sn=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.iH=class extends g.rr{constructor(t,s){super();const i=s.exportType,e=(this.lf=t,this.eH="folders",this.nH=new Map,this.rH="cordova"===i,this.hH=!!s.isiOSCordova,this.oH=!!s.isFileProtocol,this.aH=s.swClientId,this.lH=s.supportedAudioFormats||{},this.uH=new Map,this.cH=!1,this.fH=s.scriptFolder,this.dH="",this.pH="",this.mH="",this.gH=s.fileMap||new Map,this.yH=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.wH=e?"remote":"local",this.SH=new Map,this.vH=[],this.bH=[],this.MH=!1,this.xH=0,this.TH=0,this._H=0,this.GH=!1,this.IH=g.lr(g.Td,()=>this.CH(),50),this.PH=g.lr(g.md,Math.max(g.hardwareConcurrency,8)),this.EH=g.lr(g.md,20),this.AH=new self.LO(this)}ur(){for(const t of this.SH.values())t.ur();this.SH.clear(),g.Bh(this.bH),this.lf=null}UO(){return this.lf}RH(t){this.eH=t}KO(){return this.eH}FH(){return this.fH}DH(t){this.dH=t}sk(){return this.dH}OH(t){this.pH=t}kH(){return this.pH}LH(t){this.mH=t}BH(){return this.mH}NH(){return this.oH}To(t,s){return s=s||this.wH,g.So(t)?("flat"===this.eH&&(t=t.toLowerCase()),this.rH&&this.oH?this.WH(t):"playable-ad-single-file"===this.lf.Ek()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.PH:this.EH).uc(()=>g.To(t))):g.To(t)}_o(t){return g.So(t)?("flat"===this.eH&&(t=t.toLowerCase()),this.rH&&this.oH?this.VH(t):"playable-ad-single-file"===this.lf.Ek()?g.Io(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.wH?this.PH:this.EH).uc(()=>g._o(t))):g._o(t)}Mo(t){return g.So(t)?("flat"===this.eH&&(t=t.toLowerCase()),this.rH&&this.oH?this.jH(t):"playable-ad-single-file"===this.lf.Ek()?g.Co(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.wH?this.PH:this.EH).uc(()=>g.Mo(t))):g.Mo(t)}async xo(t){const s=await this.Mo(t);return JSON.parse(s)}HH(t,s){return"flat"===this.eH&&(t=t.toLowerCase()),this.lf.RO("runtime","cordova-fetch-local-file",{filename:t,as:s})}jH(t){return this.HH(t,"text")}async WH(t){const s=await this.HH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async UH(t){"flat"===this.eH&&(t=t.toLowerCase());let s=this.nH.get(t);if(!s){const i=await this.WH(t);s=URL.createObjectURL(i),this.nH.set(t,s)}return s}VH(t){return this.HH(t,"buffer")}QO(t){"flat"===this.eH&&(t=t.toLowerCase());let s=this.dH+t;return"Gecko"===g.li.yi&&"preview"===this.lf.Ek()?this.zH(s):s}YO(t){return g.wo(t)?Promise.resolve(t):this.rH&&this.oH?this.UH(t):"playable-ad-single-file"===this.lf.Ek()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.eH&&(t=t.toLowerCase()),Promise.resolve(t))}JH(s){if(g.wo(s)||"preview"!==this.lf.Ek()||!this.aH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.aH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}qH(t){return this.YO(t)}$H(t){if(t.XH&&!wn.has(t.XH))throw new Error("invalid load policy");let s=this.SH.get(t.url);return s||(s=g.lr(g.YH,this,{url:t.url,size:t.size||0,XH:t.XH||this.wH}),this.SH.set(s.ZH(),s),this.MH)||(this.xH+=s.nc(),this.bH.push(s.KH().then(()=>this.QH(s.nc())))),s}tU(t){this.SH.delete(t.ZH())}async sU(){try{await Promise.all(this.bH),this._H=1}catch(t){console.error("Error loading: ",t),this.GH=!0,this.CH()}}iU(){this.MH=!0}eU(){return this.GH}QH(t){this.TH+=t,this.IH.kd()}CH(){const t=g.lr(g.Event,"loadingprogress");this._H=g.gr(this.TH/this.xH,0,1),t.progress=this._H,this.lf.jf().dispatchEvent(t)}nU(){return this._H}rU(t){g.jh(this.vH,t),this.vH.length&&this.bH.push(this.hU())}async hU(){const t=[],s=[];for(const[i,e,n]of this.vH)this.xH+=n,t.push(this.oU(i,e,s).then(()=>this.QH(n)));await Promise.all(t),this.lf.qF()&&0<s.length&&await this.lf.RO("runtime","load-webfonts",{webfonts:s})}async oU(s,i,e){try{let t=await this.YO(i);"Gecko"===g.li.yi&&(s=`'${s}'`),("Gecko"===g.li.yi&&"preview"===this.lf.Ek()||"playable-ad-single-file"===this.lf.Ek())&&(t=this.zH(t));const n=new FontFace(s,`url('${t}')`);(this.lf.qF()?self:document).fonts.add(n),await n.load(),this.lf.qF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}NO(t){return!!this.lH[t]}aU(t,s){this.cH=!!s;for(const[i,e,n]of t)this.uH.set(i,{fileName:i,lU:e.map(t=>({type:t[0],uU:t[1],cU:i+t[1],fileSize:t[2]})),isMusic:n})}fU(t){"flat"===this.eH&&(t=t.toLowerCase());const s=this.uH.get(t);if(!s)return null;let i=null;for(const e of s.lU)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.NO(e.type))return e;return i}dU(t){const s=this.fU(t);return s?{url:this.QO(s.cU),type:s.type}:null}pU(){if(this.cH){const t=[];for(const s of this.uH.values())if(!s.isMusic){const i=this.fU(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.QO(i.cU),type:i.type,fileSize:i.fileSize})}return t}return[]}mU(t){return"preview"===this.lf.Ek()&&(t=new URL(t,location.href).toString()),this.gH.get(t)||null}zH(t){let s=this.yH.get(t);if(!s){const i=this.mU(t);if(!i)return t;s=URL.createObjectURL(i),this.yH.set(t,s)}return s}OF(){return this.AH}async rk(...t){const s=await Promise.all(t.map(t=>this.YO(t)));if(this.lf.qF())if(1===t.length){const i=t[0];await import((g.So(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.So(t)?"./":""}${t}";`).join("\n"),n=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(n)}else await Promise.all(s.map(t=>r(t)))}async ak(t){if(WebAssembly.compileStreaming){const s=await this.YO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g._o(t);return WebAssembly.compile(i)}}async uk(t){const s=await this.YO(t);return this.lf.RO("runtime","add-stylesheet",{url:s})}}}{const vn=self.Bs;vn.gU=class extends vn.rr{constructor(t,s){super(),this.yU=t,this.lf=t.UO(),this.wU=s.url||"",this.SU=s.size,this.vU=s.XH,this.bU=s.blob||null,this.MU=!!this.bU,this.Ng=null}ur(){this.Ng=null,this.yU=null,this.lf=null,this.bU=null}ZH(){return this.wU}nc(){return this.SU}KH(){return"local"===this.vU||this.bU?(this.MU=!0,Promise.resolve()):(this.Ng||(this.Ng=this.yU.To(this.wU,this.vU).then(t=>(this.MU=!0,this.Ng=null,this.bU=t)).catch(t=>{console.error("Error loading resource: ",t),this.Ng=null})),this.Ng)}xU(){return this.MU}TU(){return this.bU?Promise.resolve(this.bU):this.Ng||this.yU.To(this.wU,this.vU)}}}{const bn=self.Bs,lr=new bn.md,ur=new Set;bn.YH=class extends bn.gU{constructor(t,s){super(t,s),this._U=null,this.GU=null,this.d1=0,this.IU=-1,this.CU=-1,ur.add(this)}ur(){if(0!==this.d1)throw new Error("released image asset which still has texture references");this.yU.tU(this),this._U=null,ur.delete(this),super.ur()}static PU(){for(const t of ur)t._U=null,t.GU=null,t.d1=0}C8(t,s){return s=s||{},this.d1++,this.GU?Promise.resolve(this.GU):(this._U||(s.Eb=this.lf.Dk().EU(),this._U=this.AU(t,s)),this._U)}async AU(s,i){try{const e=await this.TU();return 0===this.d1?this._U=null:await lr.uc(async()=>{const t=await s.xA(e,i);return this._U=null,0===this.d1?(s.kM(t),null):(this.GU=t,this.IU=t.um(),this.CU=t.xm(),this.GU)})}catch(t){throw console.error("Failed to load texture: ",t),t}}II(){if(this.d1<=0)throw new Error("texture released too many times");if(this.d1--,0===this.d1&&this.GU){const t=this.GU.Jv();t.kM(this.GU),this.GU=null}}RU(){return this.d1}jM(){return this.GU}um(){return this.IU}xm(){return this.CU}async FU(){const t=await this.TU();return bn.ji.ImageBitmap?createImageBitmap(t):bn.Eo(t)}}}{let t=function(t,s){return t.xO().DU()-s.xO().DU()};t;const cr=self.Bs;cr.OU=class extends cr.rr{constructor(t,s,i){super(),this.kU=t,this.tl=s,this.sl=i,this.LU=[],this.BU=!0,this.NU=new Set,this.WU=!1}ur(){cr.Bh(this.LU),this.NU.clear(),this.kU=null}l0(){cr.Bh(this.LU),this.BU=!0,this.NU.clear(),this.WU=!1}VU(){this.BU=!1}sc(){if(this.LU.length){if(this.LU.length>this.NU.size)return!1;this.jU()}return!0}HU(t){this.NU.has(t)?(this.NU.delete(t),0===this.NU.size&&(this.WU=!1)):(this.LU.push(t),this.BU=1===this.LU.length)}b0(t){this.NU.add(t),this.WU=!0,50<=this.NU.size&&this.jU()}jU(){this.WU&&(this.LU.length===this.NU.size?this.l0():(cr.qh(this.LU,this.NU),this.NU.clear(),this.WU=!1))}UU(){this.BU||(this.LU.sort(t),this.BU=!0)}zU(t){this.jU(),this.UU(),this.LU.length&&t.push(this.LU)}}}{const fr=self.Bs;fr.JU=class extends fr.rr{constructor(t,s){super(),this.qU=t,this.$U=s,this.XU=fr.lr(fr.Ku)}ur(){this.XU.ur(),this.XU=null}YU(t,s,i){let e=this.XU.ei(t,s);return e||(i?(e=fr.lr(fr.OU,this,t,s),this.XU.Set(t,s,e),e):null)}ZU(t){return Math.floor(t/this.qU)}KU(t){return Math.floor(t/this.$U)}QU(e,n,r){if(n)for(let i=n.xl(),t=n._l();i<=t;++i)for(let t=n.Tl(),s=n.Gl();t<=s;++t)if(!r||!r.Xl(i,t)){const h=this.YU(i,t,!1);h&&(h.b0(e),h.sc())&&this.XU.ic(i,t)}if(r)for(let i=r.xl(),t=r._l();i<=t;++i)for(let t=r.Tl(),s=r.Gl();t<=s;++t)n&&n.Xl(i,t)||this.YU(i,t,!0).HU(e)}t7(t,s){let i=this.ZU(t.xl()),e=this.KU(t.Tl()),n=this.ZU(t._l()),r=this.KU(t.Gl());for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.YU(i,t,!1);h&&h.zU(s)}}s7(t){let s=t.xl(),i=t.Tl(),e=t._l(),n=t.Gl();for(;s<=e;++s)for(let t=i;t<=n;++t){const r=this.YU(s,t,!1);r&&r.VU()}}}}{let h=function(t,s){return t.xO().DU()-s.xO().DU()},t=function(t,s){return t.xO().R2()-s.xO().R2()};h,t;const S=self.Bs,dr=new S.Rect,pr=new S.Ql,mr=[],gr=(new S.Rect,new S.Rect,self.bs),_n=gr.Ps,Hn=gr.Es,Tn=gr._s,yr=Tn.create(),wr=_n.create(),Sr=Hn.create(),vr=_n.create(),br=_n.create(),Mr=_n.create(),xr=S.lr(S.Qa),Tr=(S.lr(S.Rect),[]),_r=[],Gr=[],Ir={name:"",sid:-1,i7:!1,isVisible:!0,isInteractive:!0,UB:!1,backgroundColor:[1,1,1,1],r5:!0,e7:[1,1],opacity:1,a5:!1,n7:!1,r7:!1,h7:!1,scaleRate:1,ER:0,n5:0,o7:[],a7:[],l7:[]};S.u7=class extends S.rr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.c7=t,this.lf=t.UO(),this.f7=s,this.pr=i.name,this.Xg=-1,this.d7=!!i.UB,this.p7=-1,this.m7=i.sid,this.g7=!!i.i7,this.y7=!!i.isVisible,this.w7=!!i.isInteractive,this.S7=S.lr(S.Ho),this.S7.ja(i.backgroundColor),this.v7=!!i.r5,this.b7=i.e7[0],this.M7=i.e7[1],this.u2=S.lr(S.Ho,1,1,1,i.opacity),this.x7=S.lr(S.Ho),this.T7=!!i.a5,this._7=!!i.n7,this.G7=!!i.r7,this.I7=!!i.h7,this.C7=i.scaleRate,this.l2=i.ER,this.P7=null,this.E7=1,this.c2=i.n5,this.A7=0,this.R7=0,this.F7=0,this.D7=!1,this.MP=S.lr(S.Rect),this.O7=S.lr(S.Rect),this.k7=S.lr(S.Rect),this.L7=!0,this.GM=Tn.create(),this.B7=!0,this.gR=Tn.create(),this.N7=!0,this.W7=S.lr(S.ey.ly),this.V7=!0,this.j7=[],this.H7=i.o7,this.U7=[],this.z7=[],this.J7=new Map,this.LU=[],this.q7=!1,this.X7=!1,this.Y7=!1;const n=this.lf.Dk();this.Z7=S.lr(S.K7,this,i.a7),this.CF=S.lr(S.ey._3,n.Q7(),{d3:(t,s)=>{const i=s.vF(),e=i.SA();t.m2(i.sz()),t.IA(e),t.CA(e),n.iz(e)},g3:t=>this.XL().ez(t)}),this.nz=!0,this.rz=!0,this.hz=null,this.oz=[],this.az=!1,this.lz=S.lr(S.Rect,0,0,-1,-1),this.uz=S.lr(S.Rect,0,0,-1,-1),this.cz=new self.pB(this),this.fz(),this.pz()&&(this.hz=S.lr(S.JU,this.lf.XF(),this.lf.ZF())),this.mz=i.l7.map(t=>S.u7.gz(this.c7,this,t))}yz(){for(const t of this.H7){const s=this.lf.wz(t[1]);this.c7.Sz(s),s.vz()||(s.bz(t),s.Mz(this.Xg)),this.U7.push(t),this.J7.set(t[2],t)}S.jh(this.j7,this.U7),this.H7=null}static gz(t,s,i){return S.lr(S.u7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],UB:i[19],backgroundColor:i[4].map(t=>t/255),r5:i[5],e7:[i[6],i[7]],opacity:i[8],a5:i[9],n7:i[17],r7:i[18],h7:i[10],scaleRate:i[11],ER:i[12],n5:i[16],o7:i[14],a7:i[15],l7:i[20]})}ur(){for(const t of this.mz)t.ur();S.Bh(this.mz);for(const s of this.LU)this.lf.L5(s);S.Bh(this.LU),this.Z7.ur(),this.Z7=null,this.CF.ur(),this.CF=null,this.cz=null,this.f7=null,this.c7=null,this.lf=null}xz(t){return this.J7.get(t)}Tz(n){let r=this.c7._z(),h=0,o=this.U7;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.lf.wz(t[1]),i=!0;if(!s.Gz()||r){const a=this.lf.Iz(t,this,!0);n.push(a),s.Cz()&&(i=!1,this.z7.push(a.U5()))}i&&(o[h]=o[e],++h)}S.Lh(o,h),this.lf.qL(),this.PO()}Pz(t,s){if(!t._L().iL())throw new Error("instance is not of world type");const i=t.xO();if(i.TO()!==this)throw new Error("instance added to wrong layer");this.LU.push(t),0!==i.R2()&&(this.Y7=!0),s&&this.pz()&&t.xO().q4(),this.PO(t)}Ez(t){this.LU.includes(t)||(this.LU.push(t),0!==t.xO().R2()&&(this.Y7=!0),this.PO(t))}Az(t,s){const i=t.xO();if(i.TO()!==this)throw new Error("instance added to wrong layer");this.LU.unshift(t),0!==i.R2()&&(this.Y7=!0),this.PO(t),s&&this.pz()&&t.xO().q4()}Rz(t,s){const i=this.LU.indexOf(t);i<0||(s&&this.pz()&&t.xO().Fz(),this.LU.splice(i,1),this.PO(t),this.Dz())}Oz(){this.Y7=!0}Dz(){0===this.LU.length&&(this.Y7=!1)}kz(t){if(t){const s=new Set;for(const i of this.LU){const e=i.xO().DU();0<=e&&s.add(e)}let t=-1;for(const n of this.LU){const r=n.xO();if(!(0<=r.DU())){for(++t;s.has(t);)++t;r.Lz(t)}}}this.LU.sort(h)}Bz(){}Nz(){for(const t of this.LU)t.E5().Cz()||this.lf.L5(t);this.lf.qL(),S.Bh(this.LU),this.Y7=!1,this.PO()}Wz(s,t,i,e,n,r){const h=this.lf.lD(),o=this.lf.Vz(),a=s.jz(),l=[];for(const u of this.U7){const c=u[0],f=c[0],d=c[1];if(t.Xl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.Uz(p))continue}let t=n;if(!t){const y=this.lf.bO();t=this.rO()===y?this:(t=y.zz(this.Kc()))||y.GO(this.RF())}const m=this.lf.Iz(u,t,!1,void 0,void 0,!1,r),g=(t.jL(m),m.xO());g.K4(i,e),g.q4(),h.HL(!0),m.UL(),h.HL(!1),l.push(m)}}return l}NL(){return this.LU.length}rO(){return this.c7}Kc(){return this.pr}Jz(t){this.Xg=t}RF(){return this.Xg}qz(t){this.p7=t}HV(){return this.p7}zB(){return this.d7}JB(t){this.d7!==(t=!!t)&&(this.d7=t,this.c7.$z(),this.lf.EO())}Xz(){let t=this.AB();return(t?t.OB():this.rO().Yz()).indexOf(this)}Zz(){return this.m7}UO(){return this.lf}Kz(){return this.g7}Qz(){for(const t of this.RB())if(t.Kz())return!0;return!1}zk(){return this.lf.zk()}XL(){return this.Z7}AF(){return this.t9(),this.CF}t9(){const t=this.s9();if(this.nz||t!==this.rz||this.CF.yR()){const s=this.XL().i9();this.CF.wR(s.map(t=>t.mT()),{w3:s.map(t=>t.RF()),S3:!t,T3:!0}),this.nz=!1,this.rz=t}}D6(){this.XL().D6(),this.nz=!0}pz(){return this.I7&&!this.G7}e9(){return this.hz}n9(){this.az=!1}VB(){for(const t of this.r9())if(!t.BB())return!1;return!0}BB(){return this.y7}NB(t){this.y7!==(t=!!t)&&(this.y7=t,this.lf.EO())}HB(t){this.w7=!!t}jB(){return this.w7}$B(){for(const t of this.r9())if(!t.jB())return!1;return!0}d5(t){if(this.D7!==(t=!!t)){if(this.D7=t){const s=this.rO();this.R7=s.nB(),this.F7=s.hB()}this.h9(),this.lf.EO()}}o9(){return this.D7}eB(t){const s=this.rO(),i=s.a9(),e=s.l9();this.R7!==(t=(t=e<t?e:t)<i?i:t)&&(this.R7=t,this.o9())&&(this.h9(),this.lf.EO())}rB(t){const s=this.rO(),i=s.u9(),e=s.c9();this.F7!==(t=(t=e<t?e:t)<i?i:t)&&(this.F7=t,this.o9())&&(this.h9(),this.lf.EO())}nB(){return this.o9()?this.R7:this.rO().nB()}hB(){return this.o9()?this.F7:this.rO().hB()}m5(){return this.f9(),this.MP}d9(){return this.f9(),this.O7}p9(){return this.f9(),this.k7}GB(){const t=this.rO();return[t.m9(),t.g9()]}yw(t){return this.lf.yw(t)}y9(c,e){const n=this.d9();if(0===c)e.G(n);else{let o=n.Al(),a=n.Rl(),t=this.w9(c),s=n.width()/t,i=n.height()/t,[l,u]=this.GB();if(.5!==l||.5!==u){let t=this.S9(),s=this.lf,i=this.yw()/t,e=(l-.5)*s.v9()/i,n=(u-.5)*s.b9()/i,r=this.iB(),h=(0!==r&&(xr.set(e,n),xr.rotate(r),e=xr.nl(),n=xr.hl()),S.Rr(t,0,c));o+=S.kt(e,0,h),a+=S.kt(n,0,h)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}OE(){return this.u2.aa()}LE(t){t=S.gr(t,0,1),this.u2.aa()!==t&&(this.u2.ia(t),this.fz(),this.lf.EO())}fz(){this.x7.G(this.u2),this.x7.ba()}sz(){return this.x7}s9(){return this.u2.ga(1,1,1,1)}KB(){return this.C7}ZB(t){this.C7!==t&&(this.C7=t,this.h9(),this.lf.EO())}s5(){return this.b7}e5(){return this.M7}M9(t,s){this.b7===t&&this.M7===s||(this.b7=t,this.M7=s,this.h9(),this.lf.EO())}t5(t){this.M9(t,this.e5())}i5(t){this.M9(this.s5(),t)}F2(t){this.c2!==t&&(this.c2=t,this.lf.EO())}R2(){return this.c2}sB(t){t=S.yr(t),this.A7!==t&&(this.A7=t,this.h9(),this.lf.EO())}iB(){return S.yr(this.c7.iB()+this.A7)}QB(){return this.A7}x9(){return 0<this.LU.length}IO(){return this.LU}T9(){return this._9()&&this.G7?(S.jh(Gr,this.IO()),Gr.sort((t,s)=>this.G9(t,s)),Gr):this.IO()}I9(t){S.Xn(t,this.T9());for(const s of this.mz)s.VB()&&0<s.OE()&&s.I9(t)}G9(t,s){const i=this.rO().C9(),e=i[0],n=i[1],r=i[2],h=t.xO(),o=s.xO(),a=h.I2()-e,l=h.E2()-n,u=h.R2()-r,c=o.I2()-e,f=o.E2()-n,d=o.R2()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}f5(){return this.S7}o5(){return this.v7}h5(t){this.v7!==(t=!!t)&&(this.v7=t,this.lf.EO())}u5(){return this.T7}l5(t){this.T7!==(t=!!t)&&(this.T7=t,this.lf.EO())}P9(){return!this.UO().E9()||!this._7}_9(){return!this.P9()}A9(){return this._9()&&this.rO().R9()}F9(){if(!this.A9())return!1;for(const t of this.mz)if(!t.F9())return!1;return!0}d2(t){this.l2!==t&&(this.l2=t,this.lf.EO())}c5(){return this.l2}D9(){return!this.f7}AB(){return this.f7}O9(t){this.f7=t}OB(){return this.mz}k9(){return 0<this.mz.length}L9(t,s=!0){s?this.mz.push(t):this.mz.unshift(t)}B9(t,s,i){let e=this.mz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.mz.splice(e,0,t)}N9(t){const s=this.mz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.mz.splice(s,1)}W9(){for(const t of this.mz)if(t.V9())return!0;return!1}*LB(){for(const t of this.mz)yield*t.LB();yield this}*RB(){let t=this.AB();for(;t;)yield t,t=t.AB()}*r9(){yield this,yield*this.RB()}j9(t){for(const s of this.RB())if(s===t)return!0;return!1}H9(t){return this===t||this.b7===t.b7&&this.M7===t.M7&&this.E7===t.E7&&this.C7===t.C7&&this.A7===t.A7&&this.nB()===t.nB()&&this.hB()===t.hB()}U9(){return{parallaxX:this.s5(),parallaxY:this.e5(),scale:this.YB(),scaleRate:this.KB(),angle:this.QB(),hasOwnScroll:this.o9(),scrollX:this.nB(),scrollY:this.hB()}}z9(t){this.M9(t.parallaxX,t.parallaxY),this.XB(t.scale),this.ZB(t.scaleRate),this.sB(t.angle),this.d5(t.hasOwnScroll),this.eB(t.scrollX),this.rB(t.scrollY),this.f9()}J9(t){if(0!==t.size){const s=S.qh(this.LU,t);0<s&&(this.Dz(),this.PO())}}PO(t){this.q7=!1,this.az=!1,t&&!t.E5()._L().nL()||(this.X7=!1)}q9(){if(!this.q7){if(this.LU.sort(t),this.pz())for(let t=0,s=this.LU.length;t<s;++t){const i=this.LU[t].xO();i.Lz(t),this.hz.s7(i.X9())}else for(let t=0,s=this.LU.length;t<s;++t)this.LU[t].xO().Lz(t);this.q7=!0}}Y9(){if(!this.X7){let t=this.c7.Z9(this.HV()),s=t.map(t=>[...t.LB()]).flat(),i=0;for(const e of s){for(const n of e.IO())n.E5()._L().nL()&&n.xO().K9(i++);e.Q9()}}}Q9(){this.X7=!0}tJ(){return{isVisible:this.VB(),opacity:this.OE(),isInteractive:this.jB()}}sJ(t,s,i){const e=t.xO(),n=s.xO();if(e.TO()!==this||n.TO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e._O(),h=n._O();return r!==h+(i?1:-1)&&(S.Hh(this.LU,r),r<h&&h--,i&&h++,h===this.LU.length?this.LU.push(t):this.LU.splice(h,0,t),this.PO(t),!0)}iJ(t,s){let i=[],e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const o=t[e],a=s[n];o.xO().DU()<a.xO().DU()?(i.push(o),++e):(i.push(a),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}eJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const n=s[t],r=s[t+1];i.push(this.iJ(n,r))}return e%2==1&&i.push(s[e-1]),i}nJ(t){for(;1<t.length;)t=this.eJ(t);return t[0]}rJ(){return this.q9(),S.Bh(mr),this.hz.t7(this.m5(),mr),mr.length?1===mr.length?mr[0]:this.nJ(mr):[]}V9(){return this.VB()&&0<this.OE()&&this.hJ()}hJ(){if(this.x9()||!this.o5())return!0;for(const t of this.mz)if(t.hJ())return!0;return!1}oJ(){return this.u5()||!this.s9()||0!==this.c5()||this.Z7.aJ()}lJ(){if(this.oJ())return!0;for(const t of this.mz)if(t.lJ())return!0;return!1}SA(){return this.P7}w9(t){if(this.c7.PB())return 1;{const s=this.uJ();return s/(s-t)}}cJ(t){const s=this.lf.I5();if(this.c7.PB())return s;{const i=this.uJ(),e=this.yw();return e/Math.abs(i-t)*s}}h9(){this.N7=!0,this.V7=!0,this.L7=!0}fJ(t){return this.N7&&(this.dJ(t,this.gR,0,0,null),this.N7=!1),this.gR}S9(t){return this.yw(t)/this.pJ()}uJ(){return this.A9()?this.rO().C9()[2]:this.S9()}mJ(){if(this.A9()){const t=this.rO().C9();return[t[0],t[1],t[2]]}return this.gJ()}gJ(t=0,s=0,n=0){let r=this.lf,i=this.rO(),e=r.yJ(),h=r.wJ(),o=(this.nB()-e)*this.b7+e,a=(this.hB()-h)*this.M7+h,l=(r.tD()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.PB()?this.yw(n):this.S9(n),[f,d]=this.GB();if(.5!==f||.5!==d){let t=this.yw(n)/c,s=(f-.5)*r.v9()/t,i=(d-.5)*r.b9()/t,e=this.iB();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.nl(),i=xr.hl()),l+=s,u+=i}return[l,u,c]}dJ(t,s,i,e,n){const r=this.lf,h=this.rO();if(this.A9()){_n.G(vr,h.C9()),_n.G(br,h.SJ()),_n.G(Mr,h.vJ());const o=r.yJ(),a=r.wJ(),l=br[0]-vr[0],u=br[1]-vr[1],c=br[2]-vr[2];vr[0]=(vr[0]-o)*this.b7+o,vr[1]=(vr[1]-a)*this.M7+a,vr[2]*=Math.max(this.b7,this.M7),br[0]=vr[0]+l,br[1]=vr[1]+u,br[2]=vr[2]+c}else{const[f,d,p]=this.gJ(i,e,n),m=(_n.set(vr,f,d,p),_n.set(br,f,d,p-100),this.iB());0===m?_n.set(Mr,0,1,0):_n.set(Mr,Math.sin(m),Math.cos(m),0)}t.Dw(s,vr,br,Mr,n||r.b9())}bJ(){this.B7=!0,this.V7=!0,this.L7=!0}MJ(t){return this.B7&&(this.xJ(t),this.B7=!1),this.GM}xJ(t){const s=this.lf.Dk(),[i,e]=this.GB();if(this.c7.PB())t.Fw(this.GM,s.TJ(),s._J());else if(.5===i&&.5===e)Tn.G(this.GM,s.GJ());else{const n=s.TJ(),r=s._J();t.Aw(this.GM,n/r,i,e)}}N8(t,s=!0,i=0,e=0,n=0){s&&t.TE(this.MJ(t));let r;r=0===i&&0===e&&0===n?this.fJ(t):(this.dJ(t,yr,i,e,n),yr),t.EE(r)}IJ(t){this.N8(t),t.wS(this.R2())}CJ(t){let s=null;if(t.yv()&&this.lf.PJ()){const i=this.lf.Dk().EJ(this);i&&(s=i.lP(),t.DA(s))}return s}AJ(t){if(t.Rw()&&this.lf.PJ()){const s=2*(this.RF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}wb(t,s,i){let e=this.lf.Dk(),n=this.oJ(),r=null,h=this.CJ(t);if(this.AJ(t),n){const o={Pb:this.lf.KF(),pM:!0,RJ:!!t.Rw()&&this.lf.FJ()};"low"===e.DJ()&&(o.width=e.TJ(),o.height=e._J()),r=this.lf.OJ(o),this.P7=r,t._A(r),this.o5()&&t.fA(0,0,0,0)}else this.P7=s,t._A(s);if(this.o5()||t.tc(this.S7),this.c7.kJ(t,this.P7,this.mz,n&&this.o5()),this.AJ(t),this.N8(t),t.wS(this.R2()),t.mA(this._9()),this.pJ()>Number.EPSILON){this.q9();const a=this.pz()&&0===this.R2()&&!this.Y7;this.A9()?this.LJ(t):a?this.BJ(t):this.NJ(t,this.T9())}t.wS(0),t.vS(0),n&&(t.mA(!1),this.WJ(t,r,s,i)),h&&t.kA(h),this.P7=null}NJ(i,e){let n=this.m5(),r=this.P7,h=this.rO().PB(),o=this.rO().VJ(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).xO();u.VB()&&u.jJ(n,o,h)&&this.HJ(l,u,i,r)}}}LJ(e){const n=this.P7,r=this.UJ(),h=Tr,o=_r,a=this.T9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.xO();if(u.VB()&&u.zJ(r)){(!l.JJ()||0<u.qJ())&&o.push(l);const c=l.xO().tN();h.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.xO();if(d.VB()&&d.zJ(r)){if(d.tN()!==c)break;(f.JJ()?(0<d.qJ()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].$J()){this.XJ(e,h);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.xO();m.YJ(!0),this.HJ(p,m,e,n),m.YJ(!1)}}else{this.HJ(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.xO(),w=y.TO();w.HJ(g,y,e,n)}}}s=t,S.Bh(h),S.Bh(o)}else++s}}XJ(i,e){const n=this.P7;i.EA();for(let t=0,s=e.length;t<s;++t){const r=e[t],h=r.xO();h.ZJ(!0),this.KJ(r,h,i)}i.AA();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.xO();this.HJ(o,a,i,n),a.ZJ(!1)}i.FA()}BJ(t){let s=this.hz,i=this.uz,e=this.lz,n=this.m5(),r;i.set(s.ZU(n.xl()),s.KU(n.Tl()),s.ZU(n._l()),s.KU(n.Gl())),this.az&&i.equals(e)?r=this.oz:(r=this.rJ(),this.az=!0,e.G(i)),this.NJ(t,r),r!==this.oz&&S.jh(this.oz,r)}HJ(t,s,i,e){s.aJ()?this.QJ(t,s,i,e):this.KJ(t,s,i)}KJ(t,s,i){const e=s.tq();i.sS()!==e&&e.f2(),t.wb(i)}QJ(t,s,i,e){this.sq(t,s,i,e,null)&&this.N8(i)}sq(t,s,i,e,n){const r=s.z4().AF();return r.CR(i,e,{PR:t,ER:s.c5(),devicePixelRatio:this.lf.iq(),time:t.eq(),AR:this.lf.nq()*this.pJ(),RR:this.iB(),tF:s.iN(),sF:r.wF()?null:this.rq(s),LR:n&&n.LR,BR:n&&n.BR,NR:n&&n.NR,WR:n&&n.WR}),i.wS(this.R2()),r.RE()}WJ(t,s,i,e){const n=this.Z7.i9(),r=this.lf;0===n.length?(t._A(i),t.Ww(),e&&0===this.l2&&this.s9()?t.GA(s):(t.d2(this.l2),t.m2(this.x7),t.IA(s)),t.CA(s),r.iz(s)):this.AF().CR(t,i,{PR:this,ER:this.c5(),devicePixelRatio:r.iq(),AR:r.nq()*this.pJ(),RR:this.iB(),tF:this.m5(),sF:null,y3:!0})}YB(){return this.E7}XB(t){this.E7!==t&&(this.E7=t,this.c7.hq(),this.h9(),this.lf.EO())}I5(){return this.pJ()*this.lf.I5()}ZV(){return this.pJ()*this.lf.ZV()}pJ(){return(this.E7*this.c7.tB()-1)*this.C7+1}f9(){if(this.L7){this.L7=!1;let t=this.lf.yJ(),s=this.lf.wJ(),i=(this.nB()-t)*this.b7+t,e=(this.hB()-s)*this.M7+s,n=this.pJ(),r=this.lf.v9()/n,h=this.lf.b9()/n,o=i-r/2,a=e-h/2;this.lf.tD()&&(o=Math.round(o),a=Math.round(a));const l=this.O7,u=(l.set(o,a,o+r,a+h),this.iB()),c=(0!==u&&(dr.G(l),dr.offset(-l.Al(),-l.Rl()),pr.bu(dr,u),pr.xu(dr),dr.offset(l.Al(),l.Rl()),l.G(dr)),this.c2);this.y9(c,this.MP),this.A9()?this.oq(c,this.k7):this.k7.G(this.MP)}}oq(t,s){let i=this.lf.Dk(),e=i.Bk(),n=i.Wk(),[r,h]=this.y5(0,0,t),[o,a]=this.y5(e,0,t),[l,u]=this.y5(e,n,t),[c,f]=this.y5(0,n,t),d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}y5(t,s,i=0){return this.aq(t,s,i,this.ZV())}x5(t,s,i=0){return this.aq(t,s,i,this.I5()*this.zk())}aq(t,s,i,e){const n=this.lf,r=n.Jv(),h=this.pJ(),o=n.v9()/h,a=n.b9()/h,l=Sr,u=(Hn.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.MJ(r)),c=this.fJ(r),f=wr,d=S.ey.oy(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}lq(t,s){const i=this.E7,e=this.C7,n=this.b7,r=this.M7,h=this.A7,o=(this.E7=1,this.C7=1,this.b7=1,this.M7=1,this.A7=0,this.h9(),this.y5(t,s));return this.E7=i,this.C7=e,this.b7=n,this.M7=r,this.A7=h,this.h9(),o}b5(t,s,i=0){return this.uq(t,s,i,this.ZV())}_5(t,s,i=0){return this.uq(t,s,i,this.I5()*this.zk())}uq(t,s,i,e){const n=this.lf,r=n.Jv(),h=this.pJ(),o=n.v9()/h,a=n.b9()/h,l=Sr,u=(Hn.set(l,0,0,o,a),this.MJ(r)),c=this.fJ(r),f=wr,d=S.ey.ny(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}cq(t,s){return t*=this.I5()*this.zk(),0!==s&&(t*=this.w9(s)),t}rq(t){const s=t.iN(),i=t.tN(),e=t.qJ(),l=i+e,u=s.xl(),c=s.Tl(),f=s._l(),d=s.Gl();if(this.A9()){if(this.fq(u,c,i)||this.fq(f,c,i)||this.fq(f,d,i)||this.fq(u,d,i))return null;if(0<e&&(this.fq(u,c,l)||this.fq(f,c,l)||this.fq(f,d,l)||this.fq(u,d,l)))return null}else if(l>=this.S9())return null;let[p,m]=this._5(u,c,i),[g,y]=this._5(f,d,i);if(0!==this.iB()||0<e||this.A9()){const[w,S]=this._5(f,c,i),[v,b]=this._5(u,d,i);if(0<e){let[t,s]=this._5(u,c,l),[i,e]=this._5(f,c,l),[n,r]=this._5(f,d,l),[h,o]=this._5(u,d,l),a=Math.min(p,g,w,v,t,i,n,h);g=Math.max(p,g,w,v,t,i,n,h),p=a,a=Math.min(m,y,S,b,s,e,r,o),y=Math.max(m,y,S,b,s,e,r,o),m=a}else{let t=Math.min(p,g,w,v);g=Math.max(p,g,w,v),p=t,t=Math.min(m,y,S,b),y=Math.max(m,y,S,b),m=t}}return dr.set(p,m,g,y),dr}UJ(){return this.V7&&(this.pq(),this.V7=!1),this.W7}pq(){const t=this.lf.Jv(),s=this.MJ(t),i=this.fJ(t);this.W7.vy(i,s)}fq(t,s,i){return this.UJ().My(t,s,i)}mq(){const t={d:this.Kz(),s:this.YB(),a:this.QB(),v:this.BB(),i:this.jB(),html:this.zB(),bc:this.S7.toJSON(),t:this.o5(),sx:this.R7,sy:this.F7,hosp:this.D7,px:this.s5(),py:this.e5(),c:this.u2.toJSON(),sr:this.KB(),fx:this.Z7.V2(),cg:this.z7};return t}gq(t){this.g7=!!t.d,this.E7=t.s,this.A7=t.a,this.y7=!!t.v,this.w7=!t.hasOwnProperty("i")||t.i,this.d7=!!t.html,this.S7.ja(t.bc),this.v7=!!t.t,t.hasOwnProperty("sx")&&(this.R7=t.sx),t.hasOwnProperty("sy")&&(this.F7=t.sy),t.hasOwnProperty("hosp")&&(this.D7=!!t.hosp),this.b7=t.px,this.M7=t.py,this.u2.ja(t.c),this.fz(),this.C7=t.sr,S.jh(this.z7,t.cg),S.jh(this.U7,this.j7);let i=new Set(this.z7),e=0;for(let t=0,s=this.U7.length;t<s;++t)i.has(this.U7[t][2])||(this.U7[e]=this.U7[t],++e);S.Lh(this.U7,e),this.Z7.j2(t.fx),this.nz=!0}yq(){this.kz(!1),this.PO(),this.h9(),this.bJ()}lB(){return this.cz}jL(t,s=!1){if(this.LU.includes(t))s&&this.LU.sort((t,s)=>{const i=t.xO().wq(),e=s.xO().wq();return i-e});else if(t.Sq()){const i=[...t.EN()];i.push(t),i.sort((t,s)=>{const i=t.xO().wq(),e=s.xO().wq();return i-e});for(const e of i)if(e.j5())for(const n of e.H5())if(!i.includes(n)){const r=[...n.EN()];r.push(n),r.sort((t,s)=>{const i=t.xO().wq(),e=s.xO().wq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const h of i)h._L().iL()&&this.Pz(h,!0)}else if(t._L().iL()&&this.Pz(t,!0),t.j5())for(const o of t.H5()){const a=[...o.EN()];if(a.push(o),a.sort((t,s)=>{const i=t.xO().wq(),e=s.xO().wq();return i-e}),a&&a.length)for(const l of a)l._L().iL()&&this.Pz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},b=function(t,s){I!==t&&(t.IJ(s),I=t)},M=(l,b,self.Bs),e=self.C3Debugger,n=(M.lr(M.Rect),M.lr(M.Rect),M.lr(M.Rect)),x=M.lr(M.Ho),t=self.bs,u=t.Ps,a=[],T=[],_=[],G=[],I=null;M.vq=class extends M.rr{constructor(t,s,i){super(),this.bq=t,this.lf=t.UO(),this.pr=i[0],this.Mq=i[1],this.xq=i[2],this.Xm=i[1],this.Ym=i[2],this.Tq=!!i[3],this._q=!!i[4],this.Gq=i[5],this.Iq=i[6],this.Cq=i[7],this.Pq=null,this.m7=i[8],this.Xg=s,this.R7=0,this.F7=0,this.E7=1,this.A7=0,this.Eq=new Set,this.Aq=new Set,this.Rq=new Set,this.Fq=[],this.Dq=[],this.Oq=new Map,this.kq=new Map,this.Lq=[],this.Bq=!1,this.Nq=u.create(),this.Wq=u.create(),this.Vq=u.create(),this.jq=[],this.Hq=[],this.Uq=new Map,this.zq=new Map,this.Jq=-1;const n=this.lf.Dk();this.Z7=M.lr(M.K7,this,i[11]),this.CF=M.lr(M.ey._3,n.Q7(),{d3:(t,s)=>{const i=s.vF(),e=i.SA();t.BE(),t.IA(e),t.CA(e),n.iz(e)},g3:t=>this.XL().ez(t)}),this.nz=!0,this.qq=!1,this.P7=null,this.$q={},this.Xq=new Map,this.Yq=!0,this.Zq=new self.$L(this),this.Kq=M.lr(M.Event.jf);for(const e of i[9])this.jq.push(M.u7.gz(this,null,e));this.Qq();for(const r of this.fB())r.yz();for(const h of i[10]){const o=this.lf.wz(h[1]);if(!o)throw new Error("missing nonworld object class");o.vz()||o.bz(h),this.Lq.push(h),this.Sz(o)}}ur(){for(const t of this.Hq)t.ur();M.Bh(this.Hq),this.Rq.clear(),this.Pq=null,this.bq=null,this.lf=null}UO(){return this.lf}Kc(){return this.pr}Zz(){return this.m7}RF(){return this.Xg}XL(){return this.Z7}AF(){return this.t9(),this.CF}t9(){const t="low"===this.lf.Dk().DJ();if(this.nz||this.qq!==t||this.CF.yR()){const s=this.XL().i9();this.CF.wR(s.map(t=>t.mT()),{w3:s.map(t=>t.RF()),v3:t,T3:!0}),this.nz=!1,this.qq=t}}D6(){this.XL().D6(),this.nz=!0}t$(){let i=this.Hq[0].pJ();for(let t=1,s=this.Hq.length;t<s;++t){const e=this.Hq[t];0===e.s5()&&0===e.e5()||(i=Math.min(i,e.pJ()))}return i}s$(){return.5*this.lf.v9()/this.t$()}i$(){return.5*this.lf.b9()/this.t$()}a9(){return this.e$()?-1/0:this.s$()}l9(){return this.e$()?1/0:this.um()-this.s$()}u9(){return this.e$()?-1/0:this.i$()}c9(){return this.e$()?1/0:this.xm()-this.i$()}eB(t){const s=this.a9(),i=this.l9();this.R7!==(t=(t=i<t?i:t)<s?s:t)&&(this.R7=t,this.n$(),this.lf.EO())}nB(){return this.R7}rB(t){const s=this.u9(),i=this.c9();this.F7!==(t=(t=i<t?i:t)<s?s:t)&&(this.F7=t,this.n$(),this.lf.EO())}hB(){return this.F7}e$(){return this.Tq}hq(){this.eB(this.nB()),this.rB(this.hB());for(const t of this.Hq)t.o9()&&(t.eB(t.nB()),t.rB(t.hB()))}TB(t,s){this.Gq===t&&this.Iq===s||(this.Gq=t,this.Iq=s,this.r$()&&(this.h$(),this.n$(),this.lf.EO()))}m9(){return this.PB()?.5:this.Gq}g9(){return this.PB()?.5:this.Iq}VJ(){const t=this.m9(),s=this.g9();return t<0||1<t||s<0||1<s}IB(){this._q&&(this._q=!1,this.h$(),this.n$(),this.lf.EO())}CB(){this._q||(this._q=!0,this.h$(),this.n$(),this.lf.EO())}PB(){return this._q}r$(){return!this.PB()}o$(t){this.Bq!==(t=!!t)&&(this.Bq=t,this.n$(),this.lf.EO())}R9(){return this.Bq}a$(t,s,i,e,n,r,h,o,a){l(this.Nq,t,s,i)&&l(this.Wq,e,n,r)&&l(this.Vq,h,o,a)||(u.set(this.Nq,t,s,i),u.set(this.Wq,e,n,r),u.set(this.Vq,h,o,a),this.l$())}l$(){this.n$(),this.lf.EO()}C9(){return this.Nq}SJ(){return this.Wq}vJ(){return this.Vq}tB(){return this.E7}QL(t){this.E7!==t&&(this.E7=t,this.n$(),this.hq(),this.lf.EO())}sB(t){t=M.yr(t),this.A7!==t&&(this.A7=t,this.n$(),this.lf.EO())}iB(){return this.A7}um(){return this.Xm}Sm(t){!isFinite(t)||t<1||(this.Xm=t)}xm(){return this.Ym}fm(t){!isFinite(t)||t<1||(this.Ym=t)}u$(){return this.Pq}Yz(){return this.jq}*fB(){for(const t of this.jq)yield*t.LB()}cB(){return this.Hq}c$(){return this.Hq.length}TO(t){return"number"==typeof t?this.GO(t):this.zz(t.toString())}GO(t){return t=M.gr(Math.floor(t),0,this.Hq.length-1),this.Hq[t]}zz(t){return this.Uq.get(t.toLowerCase())||null}f$(t){return!!this.zz(t)}d$(t){return this.zq.get(t)||null}h$(){for(const t of this.Hq)t.bJ()}n$(){for(const t of this.Hq)t.h9()}gB(t,s,i){if(this.f$(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.AB(),n=M.lr(M.u7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),i7:!0});this.p$(n,s,i),this.UO().EO(),this.$z()}wB(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.m$(t),this.p$(t,s,i),this.UO().EO(),this.$z())}vB(t){if(this.m$(t)){const s=this.lf.lD();s.HL(!0),t.ur(),s.HL(!1),this.UO().EO(),this.$z()}}MB(){const t=new Set;for(const s of this.fB())s.Kz()&&!s.Qz()&&t.add(s);if(0!==t.size){const i=this.lf.lD();i.HL(!0);for(const e of t)this.m$(e),e.ur();i.HL(!1),this.UO().EO(),this.$z()}}p$(s,i,e){if(2<=e)if(i){if(i===s||i.j9(s))throw new Error(`cannot move layer '${s.Kc()}' to sub-layer of itself`);i.L9(s,2===e),s.O9(i)}else 2===e?this.jq.push(s):this.jq.unshift(s),s.O9(null);else{const t=i.AB();if(t){if(i.j9(s))throw new Error(`cannot move layer '${s.Kc()}' to sub-layer of itself`);t.B9(s,i,0===e),s.O9(t)}else{let t=this.jq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.jq.splice(t,0,s),s.O9(null)}}}m$(t){const s=t.AB();if(s)return s.N9(t),!0;if(1<this.jq.length){const i=this.jq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.jq.splice(i,1),!0}return!1}Qq(){this.Hq=[...this.fB()],this.Uq.clear(),this.zq.clear();for(let t=0,s=this.Hq.length;t<s;++t){const i=this.Hq[t];i.Jz(t),this.Uq.set(i.Kc().toLowerCase(),i),this.zq.set(i.Zz(),i)}}g$(){let t=0;for(const s of this.jq){for(const i of s.LB())i.qz(t);s.zB()&&t++}}y$(){return this.jq.at(-1).HV()+1}async $z(){this.Qq(),this.g$(),this.Jq=this.y$()}w$(){return this.Jq}S$(){this.Jq=-1}Z9(t){const s=[];for(const i of this.jq){const e=i.HV();if(e===t)s.push(i);else if(t<e)break}return s}U9(){return{scrollX:this.nB(),scrollY:this.hB(),scale:this.tB(),angle:this.iB(),vpX:this.m9(),vpY:this.g9()}}z9(t){this.eB(t.scrollX),this.rB(t.scrollY),this.QL(t.scale),this.sB(t.angle),this.TB(t.vpX,t.vpY)}v$(){let t=this.jq.filter(t=>t.V9())[0];for(;t;){if(!t.o5())return x.ea(t.f5()),x.ia(1),x;if(t.oJ())return x.$o(0,0,0,0),x;t=t.OB().filter(t=>t.V9())[0]}return x.$o(0,0,0,0),x}_z(){return this.Yq}b$(){return[...this.Eq]}Sz(t){if(t.j5())for(const s of t.x$().M$())this.Eq.add(s);else this.Eq.add(t)}T$(){return[...this.Aq]}_$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Oo(this.Aq,t.Aq),t.Aq.clear());const i=[];for(const e of this.Eq)this.Aq.has(e)||(i.push(e.G$(s)),this.Aq.add(e));return Promise.all(i)}async I$(t){if(t.jz())throw new Error("cannot load textures for family");const s=this.lf.Jv();if(s&&!s.OC()&&!this.Aq.has(t)){this.Aq.add(t);const i=t.G$(s);this.C$(i),await i,t.P$(),this.lf.EO()}}C$(t){this.Rq.add(t),t.then(()=>this.Rq.delete(t)).catch(()=>this.Rq.delete(t))}E$(){return Promise.all([...this.Rq])}A$(t){if(t.jz()||0<t.NL())throw new Error("cannot unload textures");const s=this.lf.Jv();s&&this.Aq.has(t)&&(this.Aq.delete(t),t.R$(s))}F$(t,s){if(t!==this&&s)for(const i of this.Aq)i.Cz()||t.Eq.has(i)||(i.R$(),this.Aq.delete(i))}D$(){this.Aq.clear()}async O$(t){const s=this.lf,i=this.bq,e=s.lD(),n=(this.Cq&&(this.Pq=e.k$(this.Cq),this.Pq.L$()),i.B$(this),this.Xm=this.Mq,this.Ym=this.xq,this.R7=s.XF()/2,this.F7=s.ZF()/2,this.hq(),this.h$(),this.n$(),this.g$(),await this.lf.Dk().N$(this.y$(),!0),this.W$(t),this.lf.V$(!0),this.j$(),this.Yq||this.H$(),this.U$(this.Fq),this.U$(this.Dq),this.z$(),i.J$(),s.qL(),this.lf.V$(!1),this.lf.q$());if(await Promise.all(n),M.Bh(n),!s.$$()){for(const r of this.Fq)r.X$();for(const h of this.Dq)h.Y$(this.Oq,this.kq);for(const[o,a]of Object.entries(this.$q)){const l=this.lf.Ej(parseInt(o,10));l&&!l.jz()&&l.Gz()&&M.Bh(a)}for(const u of this.Fq)u.Z$();for(const c of this.Dq)c.Z$()}M.Bh(this.Fq),M.Bh(this.Dq),this.Oq.clear(),this.kq.clear(),await Promise.all([...this.Eq].map(t=>t.K$(this.lf.Jv()))),t&&(s.jf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.Q$(new M.Event("beforeprojectstart"))),await this.tX(new M.Event("beforeanylayoutstart")),s.jf().dispatchEvent(new M.Event("beforelayoutstart")),await this.Q$(new M.Event("beforelayoutstart")),s.$$()||await s.S4(M.nX.eX.iX.sX,null,null),s.jf().dispatchEvent(new M.Event("afterlayoutstart")),await this.Q$(new M.Event("afterlayoutstart")),await this.tX(new M.Event("afteranylayoutstart")),t&&(s.jf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.Q$(new M.Event("afterprojectstart"))),e.rX(i),await this.E$(),this.Yq=!1}W$(t){for(const s of this.lf.Vz())if(!s.jz()&&s.iL())for(const i of s.kL()){const e=i.xO(),n=e.TO(),r=M.gr(n.RF(),0,this.Hq.length-1),h=this.Hq[r];e.CO(h,!0),h.Ez(i)}if(!t)for(const o of this.Hq)o.kz(!1)}j$(){for(const t of this.Hq)t.Tz(this.Fq),t.Bz()}H$(){let s=!1;for(const[t,i]of Object.entries(this.$q)){const e=this.lf.Ej(parseInt(t,10));if(e&&!e.jz()&&e.Gz())for(const n of i){let t=null;if(!e.iL()||(t=n.hasOwnProperty("instJson")?this.d$(n.instJson.w.l):this.d$(n.w.l))){const r=this.lf.Iz(e,t,!1,0,0,!0);n.hasOwnProperty("instJson")?r.j2(n.instJson):r.j2(n),s=!0,this.Dq.push(r),n.hasOwnProperty("instJson")&&(this.Oq.set(r,n),this.kq.set(n.index,r))}}}for(const h of this.Hq)h.kz(!0),h.PO();s&&(this.lf.qL(),this.lf.hX())}U$(s){for(const i of s)if(i.j5()){const e=i.xO(),t=i.aX();for(const n of i.E5().x$().lX())if(n!==i.E5()){const r=n.kL();if(r.length>t)i.uX(r[t]);else{let t;t=e?this.lf.Iz(n,e.TO(),!0,e.I2(),e.E2(),!0):this.lf.Iz(n,null,!0,0,0,!0),this.lf.qL(),n.cX(),i.uX(t),s.push(t)}}}}z$(){for(const t of this.Lq){const s=this.lf.wz(t[1]);s.j5()||this.lf.Iz(t,null,!0)}}fX(){let i=[],e=this.Lq,n=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],h=this.lf.wz(r[1]);h.Cz()?h.j5()&&h.x$().dX()||i.push(this.lf.Iz(r,null,!0)):(e[n]=r,++n)}M.Lh(e,n),this.lf.qL(),this.U$(i)}Wz(t,s,i,e,n,r,h){if(i)return i.Wz(t,s,n,r,e,h);{const o=[];for(const a of this.Hq)o.push(a.Wz(t,s,n,r,e,h));return o.flat()}}async pX(){const t=this.bq;this.lf.$$()||(await this.tX(new M.Event("beforeanylayoutend")),await this.Q$(new M.Event("beforelayoutend")),await this.lf.S4(M.nX.eX.iX.mX,null,null),await this.Q$(new M.Event("afterlayoutend")),await this.tX(new M.Event("afteranylayoutend"))),t.gX(!0),this.lf.lD().yX(),this.Yq||this.wX();for(const s of this.Hq)s.Nz();for(const i of this.lf.Vz())if(!(i.Cz()||i.iL()||i._L().tL()||i.jz())){for(const e of i.kL())this.lf.L5(e);this.lf.qL()}t.gX(!1),t.sO()===this&&t.B$(null)}SX(t,s){const i=t.E5().Zz().toString(),e=(this.$q.hasOwnProperty(i)||(this.$q[i]=[]),this.$q[i]),n={index:s,instJson:t.V2(),sceneGraphJson:{children:[]}};e.push(n),this.Xq.set(t,n)}vX(t){const s=this.Xq.get(t);for(const i of t.bX()){const e=this.Xq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.xX.MX(i.xO())})}}wX(){this.Xq.clear();let t=0;for(const s of this.Hq){s.q9();for(const i of s.IO()){const e=i.E5();!e.Cz()&&e.Gz()&&(this.SX(i,t),t++)}}for(const n of this.Hq)for(const r of n.IO()){const h=r.E5();!h.Cz()&&h.Gz()&&this.vX(r)}this.Xq.clear()}TX(){this.$q={},this.Yq=!0}SA(){return this.P7}oJ(){const t=this.lf,s=t.Jv().yv();return"low"===t.Dk().DJ()||s&&t.FJ()||this.Z7.aJ()||s&&t.E9()}_X(t){const s=this.lf.Dk();if(this.oJ()){t._A(null),t.fA(0,0,0,0);const i={Pb:this.lf.KF(),pM:t.Rw()||this.lf.FJ()||this.Z7.aJ(),RJ:!!t.Rw()&&this.lf.FJ()};"low"===s.DJ()&&(i.width=s.TJ(),i.height=s._J()),this.P7=this.lf.OJ(i)}else this.P7=null}GX(t){this.lf.IX(t)&&(t.mA(!1),t._A(null),t.Ww(),t.GA(this.P7))}CX(t){this.oJ()&&(t.mA(!1),this.PX(t,this.P7))}EX(t){t._A(this.P7),t.tc(this.v$()),this.lf.E9()&&t.pA();const s=this.Z9(0);this.kJ(t,this.P7,s,!0),t.Rw()&&t.StartMeasuringRenderPassTime(0,1),this.CX(t),this.P7=null}AX(t,s){let i=null;this.lf.IX(t)&&(i=this.P7),t._A(i),t.fA(0,0,0,0),this.lf.E9()&&t.pA();const e=this.Z9(s);this.kJ(t,i,e,!0),this.GX(t),t.lv(),this.lf.Dk().RX(s)}kJ(t,e,s,n){const r=s.filter(t=>t.V9());for(let s=0,i=r.length;s<i;){const h=r[s];if(h.F9()&&!h.lJ()){a.push(h);for(let t=s+1;t<i;++t){const o=r[t];if(!o.F9()||o.lJ())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].W9()){this.FX(t,e,a),s+=a.length,M.Bh(a);continue}M.Bh(a)}h.wb(t,e,n&&0===s),++s}}PX(t,s){const i=this.Z7.i9(),e=this.lf;0===i.length?(t._A(null),t.Ww(),t.GA(s),t.CA(s),e.iz(s)):(n.set(0,0,e.v9(),e.b9()),this.AF().CR(t,null,{PR:this,ER:3,devicePixelRatio:this.lf.iq(),AR:this.lf.nq()*this.tB(),RR:this.iB(),tF:n,sF:null,y3:!0}))}FX(e,n,t){t[0].o5()||(x.ea(t[0].f5()),x.ia(1),e.tc(x)),this.lf.Dk(),e.mA(!0);const r=T,h=_,o=G;for(const a of t)a.q9(),a.I9(r);const s=t[0],i=s.CJ(e);s.AJ(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.xO(),c=u.TO();if(u.VB()&&u.zJ(c.UJ())){(!l.JJ()||0<u.qJ())&&o.push(l);const f=l.xO().tN();h.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.xO();if(p.VB()&&p.zJ(p.TO().UJ())){if(p.tN()!==f)break;(d.JJ()?(0<p.qJ()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].$J()){this.DX(e,n,h);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.xO(),y=g.TO();g.YJ(!0),b(y,e),y.HJ(m,g,e,n),g.YJ(!1)}}else{b(c,e),c.HJ(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.xO(),v=S.TO();b(v,e),v.HJ(w,S,e,n)}}}s=t,M.Bh(h),M.Bh(o)}else++s}i&&e.kA(i),M.Bh(r),I=null}DX(i,e,n){i.EA();for(let t=0,s=n.length;t<s;++t){const r=n[t],h=r.xO(),o=h.TO();h.ZJ(!0),b(o,i),o.KJ(r,h,i)}i.AA();for(let t=0,s=n.length;t<s;++t){const a=n[t],l=a.xO(),u=l.TO();b(u,i),u.HJ(a,l,i,e),l.ZJ(!1)}i.FA()}mq(){const t={sx:this.nB(),sy:this.hB(),s:this.tB(),a:this.iB(),w:this.um(),h:this.xm(),ortho:this.PB(),vpX:this.m9(),vpY:this.g9(),fv:this.Yq,persist:this.$q,fx:this.Z7.V2(),layers:{},dynamicLayers:[]};for(const s of this.Hq)if(s.Kz()){const i=s.AB();t.dynamicLayers.push({sid:s.Zz(),name:s.Kc(),parentSid:i?i.Zz():null,siblingIndex:s.Xz(),data:s.mq()})}else t.layers[s.Zz().toString()]=s.mq();return t}gq(t){this.R7=t.sx,this.F7=t.sy,this.E7=t.s,this.A7=t.a,this.Xm=t.w,this.Ym=t.h,this._q=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Gq=t.vpX),t.hasOwnProperty("vpY")&&(this.Iq=t.vpY),this.Yq=!!t.fv,this.$q=t.persist,this.Z7.j2(t.fx),this.nz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),n=this.d$(e);n&&n.gq(i)}if(t.hasOwnProperty("dynamicLayers")){this.MB(),this.lf.qL();const r=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.Qq(),!this.f$(l)&&!this.d$(a)){let t,s;if(null===u)t=null,s=this.jq;else{if(!(t=this.d$(u)))continue;s=t.OB()}const d=M.lr(M.u7,this,t,{name:l,sid:a,i7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({J4:d,siblingIndex:c}),d.gq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.J4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.$z(),this.h$(),this.n$()}iO(){return this.Zq}rD(){return this.Kq}OX(t){t.layout=this.iO();const s=this.lf,i=s.kX()&&!s.lD().zL();i&&e.StartMeasuringScriptTime(),this.Kq.dispatchEvent(t),i&&e.AddScriptTime()}Q$(t){return t.layout=this.iO(),this.Kq.Yf(t)}tX(t){return t.layout=this.iO(),this.lf.Q$(t)}LX(){this.BX(this.jq)}BX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Kc()),this.BX(e.OB(),s+1)}}}{const Cr=self.Bs;Cr.NX=class extends Cr.rr{#Aj;#WX=[];#VX=new Map;#jX=new Map;#HX=null;#UX=[];#zX=null;#JX=0;#qX=null;constructor(t){super(),this.#Aj=t}ur(){this.#Aj=null,this.#HX=null,this.#zX=null,this.#qX=null,Cr.Bh(this.#WX),this.#VX.clear(),this.#jX.clear(),Cr.Bh(this.#UX)}gx(t){const s=Cr.lr(Cr.vq,this,this.#WX.length,t);this.#WX.push(s),this.#VX.set(s.Kc().toLowerCase(),s),this.#jX.set(s.Zz(),s)}UO(){return this.#Aj}$X(t){this.#zX=t}XX(){if(this.#zX)return this.#zX;if(this.#WX.length)return this.#WX[0];throw new Error("no first layout")}YX(t){return this.#VX.get(t.toLowerCase())||null}ZX(t){return this.#jX.get(t)||null}KX(t){return t=Cr.gr(Math.floor(t),0,this.#WX.length-1),this.#WX[t]}rO(t){return"number"==typeof t?this.KX(t):this.YX(t.toString())}oO(){return this.#WX}B$(t){this.#HX=t}sO(){return this.#HX}QX(t){if(this.#UX.includes(t))throw new Error("layout already running");this.#UX.push(t)}tY(t){const s=this.#UX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#UX.splice(s,1)}*sY(){this.#HX&&(yield this.#HX),this.#UX.length&&(yield*this.#UX)}iY(t){return this.#HX===t||this.#UX.includes(t)}gX(t){if(t)this.#JX++;else{if(this.#JX<=0)throw new Error("already unset");this.#JX--}}JL(){return 0<this.#JX}uO(t){this.#qX=t}J$(){this.#qX=null}lO(){return!!this.#qX}eY(){return this.#qX}nY(){const t=this.sO();t&&t.h$()}rY(){const t=this.sO();t&&t.n$()}}}{const Pr=self.Bs,Er=new RegExp("<(.+?)>","g");Pr.hY=class extends Pr.rr{constructor(t){super(),this.lf=t,this.aY=Pr.lr(Pr.lY),this.uY=null,this.cY=[],this.fY=new Map,this.dY=new Map,this.pY=new Map,this.mY=[],this.gY=[],this.yY=[],this.wY=!1,this.SY=!1,this.vY=!1,this.bY=()=>this.MY(),this.xY=()=>this.TY(),this._Y=()=>this.GY(),this.IY=()=>this.CY(),this.PY=t=>this.EY(t.I6),this.AY=t=>this.RY(),this.FY=t=>this.DY(),this.OY=t=>this.kY(),this.LY=[],this.BY=0}ur(){this.NY(),this.bY=null,this.xY=null,this._Y=null,this.IY=null,this.PY=null,this.FY=null;for(const t of this.cY)t.MW(),t.ur();Pr.Bh(this.cY),this.cY=null,this.aY.ur(),this.aY=null,Pr.Bh(this.mY),this.mY=null,Pr.Bh(this.gY),this.gY=null,Pr.Bh(this.yY),this.yY=null,this.fY.clear(),this.fY=null,this.dY.clear(),this.dY=null,this.pY.clear(),this.pY=null,Pr.Bh(this.LY),this.LY=null,this.lf=null}WY(){const t=this.lf.jf();t.addEventListener("pretick",this.bY),t.addEventListener("tick2",this.xY),t.addEventListener("beforelayoutchange",this._Y),t.addEventListener("layoutchange",this.IY),t.addEventListener("instancedestroy",this.PY),t.addEventListener("beforeload",this.AY),t.addEventListener("afterload",this.FY),t.addEventListener("afterlayoutstart",this.OY)}NY(){const t=this.lf.jf();t.removeEventListener("pretick",this.bY),t.removeEventListener("tick2",this.xY),t.removeEventListener("beforelayoutchange",this._Y),t.removeEventListener("layoutchange",this.IY),t.removeEventListener("instancedestroy",this.PY),t.removeEventListener("beforeload",this.AY),t.removeEventListener("afterload",this.FY),t.removeEventListener("afterlayoutstart",this.OY)}gx(t){this.aY.uc(t);const s=Pr.jY.VY(t,this);this.uc(s),this.HY(s),this.pY.set(s.Kc(),0)}UY(t){const s=this.zY(),i=t.J5(),e=s.ei(i),n=Pr.jY.UY(i+":"+this.pY.get(i),e,this);return this.JY(i),this.uc(n),n}JY(t){this.pY.set(t,this.pY.get(t)+1)}qY(){for(const t of this.cY)if(!t.$Y()){const s=t.J5();this.JY(s)}}XY(){for(const t of this.pY.keys())this.pY.set(t,0)}uc(t){this.cY.push(t),this.fY.set(t.Kc().toLowerCase(),t)}b0(t){t.YY(),t.$Y()||(Pr.Uh(this.cY,t),Pr.Uh(this.mY,t),Pr.Uh(this.gY,t),Pr.Uh(this.yY,t),this.fY.delete(t.Kc().toLowerCase()),this.ZY(t),t.vW())||t.ur()}y4(t){this.lf.y4(t,this.uY,null)}UO(){return this.lf}zY(){return this.aY}KY(t){this.uY=t}QY(){return this.uY}*tZ(){for(const t of this.cY)yield t}*sZ(){for(const t of this.gY)yield t}iZ(t,s){this.dY.has(t)||this.dY.set(t,new Set),this.dY.get(t).add(s)}HY(t){for(const s of t.eZ())this.iZ(s,t)}ZY(t){for(const[s,i]of this.dY.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.dY.delete(s)}nZ(t){if(this.dY.has(t))return this.dY.get(t)}rZ(t,s){if(s)for(const i of this.cY){const e=s.every(t=>i.hZ(t.I6,t.trackId));if(e&&i.Kc().includes(t.Kc()))return i}}oZ(t){return this.fY.get(t.toLowerCase())||null}aZ(t){for(const s of this.mY)if(s.Kc()===t)return s;for(const i of this.gY)if(i.Kc()===t)return i;return null}*lZ(i){if(Er.test(i)){Er.lastIndex=0;let t,s=new Set;do{if(t=Er.exec(i)){const e=t[1].split(",");for(const n of e)s.add(n)}}while(t);for(const r of s.values()){const h=this.oZ(r);h&&(yield h)}s.clear()}else{const t=this.oZ(i);t&&(yield t)}}*uZ(t){for(const s of this.cY)s.TW(t)&&(yield s)}cZ(t){this.mY.includes(t)||this.mY.push(t),this.fZ()}dZ(t){Pr.Uh(this.gY,t),this.pZ()}mZ(t){this.gY.includes(t)?(t.gZ(!0),t.yZ(!1),t.wZ(!1)):(t.gZ(!1),t.yZ(!0),t.wZ(!1),this.mY.includes(t)||this.mY.push(t)),this.fZ()}SZ(t){t.gZ(!1),t.yZ(!1),t.vZ(),Pr.Uh(this.mY,t),this.pZ()}bZ(t){t.gZ(!1),t.yZ(!1),this.gY.includes(t)&&(t.wZ(!0),this.yY.push(t),Pr.Uh(this.gY,t)),this.mY.includes(t)&&t.wZ(!0)}MZ(t){t.gZ(!1),t.yZ(!1),t.wZ(!1),t.FW(1),Pr.Uh(this.gY,t)}xZ(t){this.bZ(t),t.vZ()}MY(){if(!this.UO().$$()&&this.wY&&!this.SY){for(this.vY=!0;this.mY.length;){const t=this.mY.pop();(t.TZ()?(t._Z(),this.yY):(t.GZ(),this.gY)).push(t),0!==t.IZ()&&(this.BY=1)}const s=this.lf.CZ(),i=this.lf.PZ(),e=this.lf.kD();for(let t=this.gY.length-1;0<=t;t--){const n=this.gY[t];n&&n.EZ(s,e,i)}this.vY=!1,0!==this.BY&&this.UO().EO()}}TY(){if(!this.UO().$$()&&this.wY&&!this.SY){let i;for(let t=0,s=this.yY.length;t<s;t++){const e=this.yY[t];i=i||new Set,e.YY(),this.AZ(e),i.add(e)}if(i){Pr.qh(this.yY,i);for(let t=this.BY=0,s=this.gY.length;t<s;t++)if(0!==this.gY[t].IZ()){this.BY=1;break}}this.pZ()}}AZ(t){t.vW()||t.RZ()&&t.FZ()&&t.DZ()&&t.OZ()}fZ(){this.wY||(this.wY=!0)}pZ(){this.yY.length||this.gY.length||this.mY.length||this.vY||(this.wY=!1)}GY(){for(this.SY=!0;this.mY.length;)this.SZ(this.mY.pop());const t=new Set;for(const s of this.gY){const i=s.GY();i&&(s.YY(),t.add(s))}Pr.qh(this.gY,t),t.clear();for(const e of this.yY){const n=e.GY();n&&(e.YY(),t.add(e))}Pr.qh(this.yY,t),this.pZ();for(const r of this.cY)r.kZ()}CY(){this.SY=!1}EY(t){const s=t.E5(),i=this.nZ(s);if(i)if(this.lf.$$())this.LY.push(t);else for(const e of i)e.$Y()||(e.vW()?this.b0(e):e.RZ()||(this.AZ(e),this.b0(e)))}RY(){for(const t of this.mY.map(t=>t))this.AZ(t),this.b0(t);for(const s of this.gY.map(t=>t))this.AZ(s),this.b0(s)}DY(){for(const t of this.LY)this.EY(t);Pr.Bh(this.LY);for(const s of this.cY)s.DY()}kY(){const t=this.lf.nO(),s=t.sO();if(s)for(const i of this.cY){const e=i.LZ();e&&s.Kc()===e&&this.mZ(i)}}mq(){return{timelinesJson:this.BZ(),scheduledTimelinesJson:this.NZ(),playingTimelinesJson:this.WZ(),markedForRemovalTimelinesJson:this.VZ(),hasRuntimeListeners:this.wY,changingLayout:this.SY,isTickingTimelines:this.vY}}gq(t){t&&(this.XY(),this.jZ(t.timelinesJson),this.HZ(t.scheduledTimelinesJson),this.UZ(t.playingTimelinesJson),this.zZ(t.markedForRemovalTimelinesJson),this.wY=!t.hasRuntimeListeners,this.SY=!!t.changingLayout,this.vY=!!t.isTickingTimelines,this.qY(),this.fZ(),this.pZ())}BZ(){return this.cY.map(t=>t.mq())}jZ(t){for(const s of t){let t=this.oZ(s.name);if(t)t.gq(s);else{const i=this.JZ(s);if(!i)continue;const e=this.oZ(i);(t=this.UY(e)).gq(s)}t.qZ()||this.b0(t)}}JZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}NZ(){return this.$Z(this.mY)}HZ(t){this.XZ(t,this.mY)}WZ(){return this.$Z(this.gY)}UZ(t){this.XZ(t,this.gY)}VZ(){return this.$Z(this.yY)}zZ(t){this.XZ(t,this.yY)}YZ(t,s){if(s)for(const i of s)if(i===t.Kc())return!0;return!1}$Z(t){return t.map(t=>t.Kc())}XZ(t,s){const i=new Set;for(const e of s)this.YZ(e,t)||i.add(e);if(Pr.qh(s,i),t)for(const n of t){const r=this.oZ(n);if(r){const h=s.find((s=>t=>t.Kc()===s)(n));h||s.push(r)}}}}}{const Ar=self.Bs,Rr=[0,0],Fr=[0,0],Dr=[0,0],Or=[0,0,0,0,0],kr=new Array(4),Lr=[{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0}],Br={x:0,y:0,t:0,Et:0};Ar.ZZ=class{constructor(t,s){this.KZ=!1,this.QZ=t,this.tK=[];let i=null;if(i=s?this.QZ.sK(s):Ar.first(this.QZ.iK())){const e=i.KW("offsetX"),n=i.KW("offsetY");if(e&&n){this.eK=e,this.nK=n;const r=e.rK(),h=n.rK();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const o=r[t],a=(o.hK(),o.oK()),l=h[t],u=(l.hK(),l.oK());a&&"cubic-bezier"===a.aK()&&u&&"cubic-bezier"===u.aK()?this.tK.push(Ar.lr(Ar.lK,a,u,o,l,this.tK.length)):(a&&"line"===a.aK()&&u&&u.aK(),this.tK.push(Ar.lr(Ar.uK,o,l,this.tK.length)))}this.KZ=!0}}}ur(){for(const t of this.tK)t.ur();Ar.Bh(this.tK),this.tK=null,this.QZ=null,this.eK=null,this.nK=null}cK(){return this.KZ}fK(){return this.tK}dK(t){const s="relative"===this.eK.pK()?t.I2():0,i="relative"===this.nK.pK()?t.E2():0;for(const e of this.tK)e.dK(s,i)}ny(s,i,t){let e=NaN,n=this.tK.length;for(let t=0;t<n;t++){const r=this.tK[t];if("cubic-bezier"===r.wT()){const h=r.ny(s,i);(isNaN(e)||h[3]<e)&&(e=h[3],Dr[0]=h[2],Dr[1]=r.RF())}}return Dr}mK(s,i,t){const e=t.tRange;Ar.ge(e[0])||(e[0]=0),Ar.ge(e[1])||(e[1]=1);let n=NaN,r=this.tK.length;for(let t=0;t<r;t++){const h=this.tK[t];if("cubic-bezier"===h.wT()){const o=h.gK(s,i,e);(isNaN(n)||o[3]<n)&&(n=o[3],Dr[0]=o[2],Dr[1]=h.RF())}}return Dr}yK(t,s){return this.tK[s].yK(t)}wK(t,s){return this.tK[s].wK(t)}},Ar.lK=class{constructor(t,s,i,e,n){this.Xg=n;const r=t.SK("cubic-bezier"),h=i.SK("cubic-bezier"),o=s.SK("cubic-bezier"),a=e.SK("cubic-bezier");this.vK=t.bK(),this.MK=s.bK(),this.xK=t.bK()+r.TK(),this._K=s.bK()+o.TK(),this.GK=i.bK()+h.IK(),this.CK=e.bK()+a.IK(),this.PK=i.bK(),this.EK=e.bK(),this.AK=0,this.RK=0,this.FK=0,this.DK=0,this.kK=0,this.LK=0,this.BK=0,this.NK=0,this.WK=0,this.VK=0,this.jK=0,this.HK=0,this.UK=0,this.zK=0,this.JK=0,this.qK=0,this.$K=0,this.XK=0,this.YK=0,this.ZK=0,this.KK=NaN,this.KZ=!1,this.QK=100,this.tQ=new Array(this.QK+1),this.tQ[0]=0,this.sQ=0,this.iQ=[],this.eQ=[];for(let t=0;t<100;t++)this.eQ.push({x:0,y:0,t:0,Et:0});this.nQ()}ur(){Ar.Bh(this.tQ),this.tQ=null,Ar.Bh(this.iQ),this.iQ=null,Ar.Bh(this.eQ),this.eQ=null}wT(){return"cubic-bezier"}RF(){return this.Xg}rQ(){return Math.floor(this.sQ/25)}hQ(){return 1/this.rQ()}dK(t,s){this.oQ=t,this.aQ=s,this.tQ=new Array(this.QK+1),this.tQ[0]=0,this.nQ(),this.AK=this.vK+this.oQ,this.RK=this.MK+this.aQ,this.FK=this.xK+this.oQ,this.DK=this._K+this.aQ,this.kK=this.GK+this.oQ,this.LK=this.CK+this.aQ,this.BK=this.PK+this.oQ,this.NK=this.EK+this.aQ,this.WK=3*(this.FK-this.AK),this.VK=3*(this.DK-this.RK),this.jK=3*(this.kK-this.FK),this.HK=3*(this.LK-this.DK),this.UK=3*(this.BK-this.kK),this.zK=3*(this.NK-this.LK),this.JK=3*(this.FK-this.AK),this.qK=3*(this.AK+this.kK-2*this.FK),this.$K=this.BK-this.AK+3*(this.FK-this.kK),this.XK=3*(this.DK-this.RK),this.YK=3*(this.RK+this.LK-2*this.DK),this.ZK=this.NK-this.RK+3*(this.DK-this.LK)}Map(t){if(!this.KZ)return NaN;const s=this.lQ(t);return Fr[0]=this.uQ(s),Fr[1]=this.cQ(s),Fr}ny(t,s){const i=this.fQ(100),e=this.dQ(t,s,i),n=this.pQ(t,s,i,e);return Or[0]=n.x,Or[1]=n.y,Or[2]=n.t,Or[3]=n.Et,Or}gK(t,s,i){const e=this.fQ(100),n=this.mQ(t,s,e,i),r=this.pQ(t,s,e,n);return Or[0]=r.x,Or[1]=r.y,Or[2]=r.t,Or[3]=r.Et,Or}yK(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.WK+e*this.jK+n*this.UK,h=i*this.VK+e*this.HK+n*this.zK,o=Math.hypot(r,h);return Rr[0]=r/o,Rr[1]=h/o,Rr}wK(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.WK+e*this.jK+n*this.UK,h=i*this.VK+e*this.HK+n*this.zK;return Math.atan2(h,r)}lQ(n){if(this.KZ){let t=n*this.tQ[this.QK],s=0,i=this.QK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.tQ[e]<t?s=e+1:i=e;this.tQ[e]>t&&e--;const r=this.tQ[e];return r===t?e/this.QK:(e+(t-r)/(this.tQ[e+1]-r))/this.QK}}uQ(t){return this.KZ?self.mc.Rc("cubicbezier")(t,this.vK+this.oQ,this.xK+this.oQ,this.GK+this.oQ,this.PK+this.oQ):NaN}cQ(t){return this.KZ?self.mc.Rc("cubicbezier")(t,this.MK+this.aQ,this._K+this.aQ,this.CK+this.aQ,this.EK+this.aQ):NaN}fQ(s){if(!(this.iQ.length>=(s=s||100))){this.iQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,n=i**3,r=this.JK*i,h=this.qK*e,o=this.$K*n,a=this.XK*i,l=this.YK*e,u=this.ZK*n,c=this.AK+r+h+o,f=this.RK+a+l+u;this.eQ[t].x=c,this.eQ[t].y=f,this.eQ[t].t=i,this.eQ[t].Et=0,this.iQ[t]=this.eQ[t]}}return this.iQ}dQ(s,i,e,t=0,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.KK))for(let t=0;t<100;t++){const h=e[t],o=h.x-s,a=h.y-i;h.Et=o*o+a*a,h.Et<n&&(n=h.Et,r=t)}else{for(let t=this.KK;t<this.KK+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Et=u*u+c*c,l.Et<n&&(n=l.Et,r=t)}for(let t=this.KK;t>this.KK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Et=d*d+p*p,f.Et<n&&(n=f.Et,r=t)}}return this.KK=r}mQ(s,i,e,n,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.KK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Et=a*a+l*l,o.t>=n[0]&&o.t<=n[1]&&o.Et<r&&(r=o.Et,h=t)}else{for(let t=this.KK;t<this.KK+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Et=c*c+f*f,u.t>=n[0]&&u.t<=n[1]&&u.Et<r&&(r=u.Et,h=t)}for(let t=this.KK;t>this.KK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Et=p*p+m*m,d.t>=n[0]&&d.t<=n[1]&&d.Et<r&&(r=d.Et,h=t)}}return this.KK=h}pQ(h,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,n=a[i].t,r=(n-e)/4;if(r<.001)break;kr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.JK*f,g=this.qK*d,y=this.$K*p,w=this.XK*f,S=this.YK*d,v=this.ZK*p,b=this.AK+m+g+y,M=this.RK+w+S+v,x=b-h,T=M-o,_=x*x+T*T;if(_<c){c=_,l=t,Br.x=b,Br.y=M,Br.t=f,Br.Et=_,u=Br;break t}const G=Lr[t-1];G.x=b,G.y=M,G.t=f,G.Et=_,kr[t]=G}kr[3]=a[i],a=kr}while(t++<20);return u}nQ(){this.KZ=!0;let s=this.uQ(0),i=this.cQ(0),e=0;for(let t=1;t<=this.QK;t++){const n=this.uQ(.01*t),r=this.cQ(.01*t),h=s-n,o=i-r;e+=Math.hypot(h,o),this.tQ[t]=e,s=n,i=r}this.sQ=e}},Ar.uK=class{constructor(t,s,i){this.Xg=i,this.gQ=t.bK(),this.yQ=s.bK(),this.oQ=0,this.aQ=0}ur(){}wT(){return"line"}RF(){return this.Xg}dK(t,s){this.oQ=t,this.aQ=s}I2(){return this.gQ+this.oQ}E2(){return this.yQ+this.aQ}}}{const v=self.Bs;v.jY=class extends v.rr{constructor(t,s,i){super(),this.lf=i.UO(),this.wQ=i,this.SQ=s,this.pr=t,this.vQ=[],this.bQ=0,this.MQ=null,this.xQ=0,this.TQ(),this._Q=null,this.GQ=null,this.IQ=0,this.CQ=0,this.PQ=1,this.EQ=0,this.AQ=1,this.RQ=!1,this.FQ=!1,this.DQ=!1,this.OQ=!0,this.kQ=!1,this.LQ=!1,this.BQ=-1,this.NQ=!1,this.WQ=!1,this.VQ=!1,this.jQ=!1,this.HQ=NaN,this.UQ=[""],this.zQ="",this.JQ=!1,this.BY=0,this.qQ=0,this.$Q=null}static VY(t,s){const i=s.zY(),e=i.XQ(),n=i.ei(t[e]),r=v.lr(v.jY,t[e],n,s);return r.YQ(!0),r}static UY(t,s,i){return v.lr(v.jY,t,s,i)}ur(){if(!this.vW()){const t=this.lf.jf();this.wQ.SZ(this),this.wQ.xZ(this);for(const s of this.vQ)s.ur();v.Bh(this.vQ),this.vQ=null,this.lf=null,this.wQ=null,this.SQ=null,this.kQ=!0,this._Q=null,this.GQ=null,this.ZQ(t)}}ZQ(t){const s=v.lr(v.Event,"timelinestatereleased");s.KQ=this,t.dispatchEvent(s)}wT(){return 0}TQ(){for(const t of this.SQ.ttt().QQ())this.bQ=this.vQ.push(v.stt.gx(this,t))}itt(){return this.wQ}UO(){return this.lf}iK(){return this.vQ}ett(e,n,r,h){if(this.qQ){let i;for(let s=0;s<this.vQ.length;s++){let t=this.vQ[s];if(e===t.JW()){const o=t.KW(r);o&&n.constructor===o.ntt().constructor&&o.pK()===h.pK()&&(i=i||[]).push(o)}}return i}}qZ(){return!!this.vQ.length}sK(t){for(const s of this.vQ)if(v.vn(s.YW(),t))return s;return null}htt(t){for(const s of this.vQ)if(!s.ott()&&v.vn(s.Kc(),t))return s;return null}Vj(t){this.pr=t}Kc(){return this.pr}att(){return this.SQ}J5(){return this.SQ.Kc()}IW(){return this.SQ.IW()}GW(t){this.SQ.GW(t)}ltt(){return this.SQ.ltt()}utt(t){this.SQ.utt(t)}ctt(){return this.SQ.ctt()}ftt(t){this.SQ.ftt(t)}pK(){return this.SQ.pK()}dtt(t){this.SQ.pK(t)}zW(t){for(const s of this.iK())s.zW(t)}EW(){return this.SQ.EW()}PW(t){return this.SQ.PW(t)}RW(){return this.SQ.RW()}AW(t){return this.SQ.AW(t)}W6(){return this.SQ.W6()}ptt(t){return this.SQ.ptt(t)}FW(t){return this.PQ=t}DW(){return this.PQ}LZ(){return this.SQ.LZ()}mtt(){return this.SQ.mtt()}gtt(){return this.SQ.gtt()}ytt(){return this.EQ}wtt(){return!this.IsPlaying()||0<this.PQ}kW(){return this._Q||(this._Q=new Promise(t=>{this.GQ=t})),this._Q}vZ(){this._Q&&(this.GQ(),this._Q=null,this.GQ=null)}Stt(t){this.UQ=v.jY.vtt(t),this.JQ=!0}OW(){return this.UQ}btt(){return this.JQ&&(this.zQ=this.UQ.join(" ")),this.JQ=!1,this.zQ}TW(t){if(!this.UQ)return!1;if(!this.UQ.length)return!1;const s=v.jY.vtt(t);return!!s&&!!s.length&&s.every(v.jY.Mtt,this)}xtt(){v.nX.Timeline&&this.constructor===v.jY&&(v.nX.Timeline.iX.PushTriggerTimeline(this),this.wQ.y4(v.nX.Timeline.iX.OnTimelineStarted),this.wQ.y4(v.nX.Timeline.iX.OnTimelineStartedByName),this.wQ.y4(v.nX.Timeline.iX.OnTimelineStartedByTags),this.wQ.y4(v.nX.Timeline.iX.OnAnyTimelineStarted),v.nX.Timeline.iX.PopTriggerTimeline())}Ttt(){this.BQ=this.lf._tt()}OZ(){this.VQ||(this.VQ=!0,v.nX.Timeline&&this.constructor===v.jY&&(v.nX.Timeline.iX.PushTriggerTimeline(this),this.wQ.y4(v.nX.Timeline.iX.OnTimelineFinished),this.wQ.y4(v.nX.Timeline.iX.OnTimelineFinishedByName),this.wQ.y4(v.nX.Timeline.iX.OnTimelineFinishedByTags),this.wQ.y4(v.nX.Timeline.iX.OnAnyTimelineFinished),v.nX.Timeline.iX.PopTriggerTimeline()))}gZ(t){this.RQ=t}Gtt(){return this.BQ===this.lf._tt()}IsPlaying(t=!1){return!!this.Gtt()||!(!this.Itt()||t)||this.RQ}Ctt(){return this.IsPlaying(!0)}BW(){return this.Ptt()}Ptt(){return!(this.vW()||this.Itt()||this.Ctt()||this.FZ())}yZ(t){this.FQ=t}Itt(){return this.FQ}Ett(t){this.OQ=t;const s=this.u3();(s<=0||s>=this.IW())&&(this.OQ=!0)}FZ(){return this.OQ}vW(){return this.kQ}wZ(t){this.LQ=t}TZ(){return this.LQ}Att(t){this.NQ=t}Rtt(){return this.NQ}YQ(t){this.WQ=!!t}$Y(){return this.WQ}DZ(){return this.DQ}u3(){return this.IQ}_W(t){const s=this.u3();this.Ftt(t),this.Ett(!1),this.FZ()||this.Att(!0),!this.Ctt()&&!this.Itt()&&this.DQ||(this.Ctt()||this.Itt()||this.DQ?this.Ctt()?this.MW():this.Itt()&&(this.wQ.SZ(this),this.Dtt()):this.Dtt()),this.Ott(),this.ktt(this.u3(),!1,!0,!0,s),this.Ltt(),this.BY&&this.UO().EO(),this.Btt()}Ftt(t){(t=v.ge(t)?t:this.IW())<0?this.IQ=0:t>=this.IW()?this.IQ=this.IW():this.IQ=t}Ntt(t){(t=v.ge(t)?t:this.IW())<0?this.IQ=0:t>=this.IW()?this.IQ=this.IW():this.IQ=t;for(const s of this.vQ)s.Wtt()}Btt(){v.nX.Timeline&&this.constructor===v.jY&&(v.nX.Timeline.iX.PushTriggerTimeline(this),this.wQ.y4(v.nX.Timeline.iX.OnTimeSet),this.wQ.y4(v.nX.Timeline.iX.OnTimeSetByName),this.wQ.y4(v.nX.Timeline.iX.OnTimeSetByTags),v.nX.Timeline.iX.PopTriggerTimeline())}Vtt(){if(!this.EW())if(this.RW()&&1===this.EQ){if(this.wtt()){if(this.u3()>=this.IW())return!1}else if(this.u3()<=0)return!1}else if(!this.EW()&&!this.RW())if(this.wtt()){if(this.u3()>=this.IW())return!1}else if(this.u3()<=0)return!1;return!0}xW(){this.vW()||this.Vtt()&&this.Play(!0)}Play(t=!1){return!this.vW()&&!this.Itt()&&(this.Ctt()&&this.Gtt()?this.jtt():!this.Ctt()&&!!(this.FZ()||t||this.Rtt())&&this.Htt())}jtt(){return this.Att(!1),this.wQ.dZ(this),this.wQ.mZ(this),this.kW(),!0}Htt(){return this.Att(!1),this.wQ.mZ(this),this.kW(),!0}MW(t=!1){this.vW()||(this.Ett(t),this.wQ.bZ(this),this.FZ()&&this.vZ())}l0(t=!0,s=!1){if(!this.vW()){if(!this.Ctt()&&this.Itt())return this.wQ.SZ(this);if(!this.FZ()){this.MW(!0),this.wtt()?this.Ftt(0):this.Ftt(this.IW());const i=this.u3();this.Ott(),s?this.Utt(i):this.ktt(i,!1,!1,!0),t&&this.Btt(),this.Ltt(),this.BY&&t&&this.UO().EO()}}}ztt(){this.l0(!1,!0)}Utt(t){this.ktt(t,!1,!1,!0,NaN,!1,!0)}GY(){if(!this.vW()){if(!this.UO().$$()&&this.Jtt())return!1;this.wQ.MZ(this),this.UO().$$()||this.ztt()}return!0}Dtt(){this.GZ(!0)}_Z(){this.GZ(!1,!0),this.gZ(!1),this.yZ(!1)}GZ(t=!1,s=!1){if(!this.TZ()||s){if(t){this.VQ=!1,this.DQ=!0,this.jQ=!0,this.Ott();for(const i of this.vQ)i.GZ()}else if(this.gZ(!0),this.yZ(!1),this.xtt(),this.FZ()){this.BQ=-1,0!==this.EQ&&(this.PQ=Math.abs(this.PQ)),this.EQ=0,this.AQ=1,this.OQ=!1,this.VQ=!1,this.DQ=!0,this.jQ=!0,this.wtt()?this.Ftt(0):this.Ftt(this.IW()),this.Ott();for(const e of this.vQ)e.GZ()}else{this.jQ=!0,this.VQ=!1,this.Ott();for(const n of this.vQ)n.qtt()}this.Ltt()}}IZ(){return this.BY}Ott(){this.qQ=0;for(const t of this.vQ)t.eP()&&(this.qQ=1)}Ltt(){this.BY=0;for(const t of this.vQ)t.$tt(),0===this.BY&&1===t.IZ()&&(this.BY=1),this.MQ||1!==t.Xtt()||(this.MQ||(this.MQ=[]),this.xQ=this.MQ.push(t))}EZ(t,s,i){if(this.gtt()){if(0===t&&0===this.HQ)return;this.HQ=t,t=i}else{if(0===i&&0===this.HQ)return;t=this.HQ=i,s=1}const e=this.IQ+this.CQ,n=t*s*this.PQ,r=e+n,h=this.SQ.Ytt;r<0?(this.IQ=0,this.CQ=-r):h<=r?(this.IQ=h,this.CQ=this.IQ-r):(this.IQ=r,this.CQ=0);let o=!1,a=!1,l=this.EW(),u=this.RW();l||u?l&&!u?0<this.PQ?this.IQ>=h&&(this.Ntt(0),a=!0):this.IQ<=0&&(this.Ntt(h),a=!0):!l&&u?0<this.PQ?this.IQ>=h&&(this.Ftt(h),this.FW(-1*this.DW()),a=!0,1===this.EQ?this.AQ<this.W6()?(this.AQ++,this.EQ=0):o=!0:0===this.EQ&&(this.EQ=1)):this.IQ<=0&&(this.Ftt(0),this.FW(-1*this.DW()),a=!0,1===this.EQ?this.AQ<this.W6()?(this.AQ++,this.EQ=0):o=!0:0===this.EQ&&(this.EQ=1)):l&&u&&(0<this.PQ?this.IQ>=h&&(this.Ftt(h),this.FW(-1*this.DW()),a=!0,this.EQ++,v.wrap(this.EQ,0,2)):this.IQ<=0&&(this.Ftt(0),this.FW(-1*this.DW()),a=!0,this.EQ++,v.wrap(this.EQ,0,2))):0<this.PQ?this.IQ>=h&&(this.AQ<this.W6()?(this.AQ++,this.Ntt(0),a=!0):(this.Ftt(h),o=!0)):this.IQ<=0&&(this.AQ<this.W6()?(this.AQ++,this.Ntt(h),a=!0):(this.Ftt(0),o=!0));let c,f=this.bQ;if(o){for(c=0;c<f;c++)this.vQ[c].Ztt();this.MW(!0),this.Ttt()}else{const d=this.xQ;for(c=0;c<d;c++)this.MQ[c].Ktt();if(1===this.qQ)for(c=0;c<f;c++){const p=this.vQ[c],m=p.Qtt(),g=this.IQ-m,y=e-m;g<0&&0<y?(this.IQ=m<0?0:h<=m?h:m,p.jc(m,!0,!1,a,this.jQ,!1)):p.jc(this.IQ,!0,!1,a,this.jQ,!1)}else for(c=0;c<f;c++)this.vQ[c].jc(this.IQ,!0,!1,a,this.jQ,!1);for(c=0;c<d;c++)this.MQ[c].tst();this.jQ&&(this.jQ=!1)}}ktt(s,i=!1,e=!1,n=!1,r=NaN,t=!1,h=!1){for(const o of this.vQ)o.Ktt();for(const a of this.vQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.u3(),u=l-a.Qtt(),c=r-a.Qtt();u<0&&0<c&&(t=a.Qtt(),this.Ftt(t))}a.jc(t,i,e,n,this.jQ,h)}for(const f of this.vQ)f.tst();this.jQ&&t&&(this.jQ=!1)}sst(){const t=this.SQ.ttt().ist(),s=v.stt.gx(this,t);return this.bQ=this.vQ.push(s),s}YY(){if(!this.vW())for(const t of this.vQ)t.est()}kZ(){for(const t of this.vQ)t.kZ()}nst(){for(const t of this.vQ)t.rst()}hst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.vQ[i];return e?(e.ost(s),void this.wQ.iZ(s.E5(),this)):void 0}for(const n of this.vQ)if(n.ott())if(t){if(n.YW()===t){n.ost(s),this.wQ.iZ(s.E5(),this);break}}else if(!n.ast()){n.ost(s),this.wQ.iZ(s.E5(),this);break}}}hZ(t,s){for(const i of this.vQ)if(i.ott())if(s){if(s===i.YW()&&t===i.JW())return!0}else if(t===i.JW())return!0;return!1}RZ(){return this.vQ.some(t=>!t.ott()||t.lst())}Jtt(){return this.vQ.some(t=>{if(t.ott()){if(!t.lst())return!1;const s=t.E5();return!!s&&s.Cz()}return!1})}KW(t){for(const s of this.iK())for(const i of s.ust())if(i.cst()===t)return i}fst(t){for(const s of this.vQ)if(t===s.JW())return s;return null}dst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.iK())for(const n of e.pst()){const r=s.every(t=>n.mst(t));if(r)return n}}eZ(){const t=[];for(const s of this.iK())t.push(s.E5());return t.filter(t=>t)}DY(){for(const t of this.iK())t.DY()}mq(){return{tracksJson:this.gst(),name:this.pr,playheadTime:this.u3(),playbackRate:this.PQ,pingPongState:this.EQ,currentRepeatCount:this.AQ,isPlaying:this.RQ,isScheduled:this.FQ,initialStateSet:this.DQ,finishedTriggers:this.VQ,complete:this.OQ,released:this.kQ,markedForRemoval:this.LQ,completedTick:this.BQ,implicitPause:this.NQ,isTemplate:this.WQ,tags:this.UQ.join(" "),stringTags:this.zQ,tagsChanged:this.JQ,firstTick:this.jQ}}gq(t){t&&(this.yst(t.tracksJson),this.pr=t.name,this.IQ=t.playheadTime,this.PQ=t.playbackRate,this.EQ=t.pingPongState,this.AQ=t.currentRepeatCount,this.RQ=!!t.isPlaying,this.FQ=!!t.isScheduled,this.DQ=!!t.initialStateSet,this.VQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.OQ=!!t.complete,this.kQ=!!t.released,this.LQ=!!t.markedForRemoval,this.BQ=t.completedTick,this.NQ=!!t.implicitPause,this.WQ=!!t.isTemplate,this.UQ=t.tags.split(" "),this.zQ=t.stringTags,this.JQ=!!t.tagsChanged,this.jQ=!!t.firstTick)}gst(){return this.vQ.map(t=>t.mq())}yst(t){this.nst(),t.forEach((t,s)=>{const i=this.vQ[s];i.gq(t)}),this.vQ.filter(t=>t.lst())}static Mtt(t){const s=this.OW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static vtt(t){if(v.Ve(t))return t.slice(0);if(v.Ge(t))return t.split(" ");throw new Error("invalid tags")}wst(){return this.$Q||(this.$Q=v.lr(self.WW,this)),this.$Q}}}{const Nr=self.Bs;Nr.stt=class extends Nr.rr{constructor(t,s){super(),this.QZ=t,this.Sst=s,this.vst=s.ttt(),this.bst=NaN,this.Mst=NaN,this.xst=null,this.Tst=null,this._st=!1,this.ZC=0<s.Qtt(),this.Gst=!1,this.Ist=!1,this.Cst=NaN,this.Pst=null,this.Est=this.Sst.Rst().Ast(),this.Fst=[],this.Dst(),this.Ost=0,this.BY=0,this.kst=0}static gx(t,s){return Nr.lr(Nr.stt,t,s)}ur(){this.Est=null;for(const t of this.Fst)t.ur();Nr.Bh(this.Fst),this.Fst=null,this.QZ=null,this.xst=null,this.Tst=null,this.Sst=null,this.Pst=null}Dst(){for(const t of this.Sst.Bst().Lst())this.Fst.push(Nr.Nst.gx(this,t))}est(){for(const t of this.Fst)t.est()}kZ(){for(const t of this.Fst)t.kZ();this.xst=null,this.Tst=null}Wst(){return this.QZ}UO(){return this.QZ.UO()}pst(){return this.Est||(this.Est=this.Sst.Rst().Ast()),this.Est}ust(){return this.Fst}KW(s){for(let t=0;t<this.Fst.length;t++){const i=this.Fst[t];if(i.cst()===s)return i}}Vst(){this.xst||this.JW()}jst(){return!!this.xst&&!this.xst.YV()}lst(){if(!this.ott())return!1;const t=this.Hst(),s=this.UO().wO(t);return!!s&&!s.YV()}E5(){if(this.ott()){const t=this.Ust();if(-1!==t)return this.UO().wz(t)}}zst(){return this.QZ.iK().indexOf(this)}rst(){this.xst=null,this.bst=NaN,this.Tst=null,this.Mst=NaN,this._st=!0}ast(){return!!this.xst}JW(){if(!this._st){if(!this.xst||!this.jst()){const t=this.Hst();this.xst=this.UO().wO(t)}return this.xst}}ost(t){if(this._st=!1,this.xst!==t){this.kZ(),this.xst=t,this.Mst=t.E5().RF(),this.bst=t.U5(),this.Tst=t.xO();for(const s of this.Jst()){const i=s.qst,e=s.$st,n=i.Xst();switch(n){case"instance-variable":{e.Yst();const r=t.E5(),h=r.Zst(s.name),o=r.Kst(h),a=r.Qst(h);o===s.name&&a===s.type&&e.tit(h);break}case"behavior":{const l=s.T6,u=this.E5(),c=t.E5(),f=e.G6(c);if(l&&f){const d=l.Kc();u.sit(d),c.sit(d),e.Yst(),e.iit(f.Zz())}break}}}}}*Jst(){for(const t of this.Fst){const s=t.ntt(),i=this.E5(),e={qst:t,$st:s};switch(t.Xst()){case"world-instance":e.property=t.cst();break;case"instance-variable":{const n=s.Yst();e.name=i.Kst(n),e.type=i.Qst(n);break}case"effect":{const r=i.XL(),h=s.eit(r);e.nit=h;break}case"behavior":{const o=s.G6(i);e.T6=o;break}case"plugin":e.TL=i._L()}yield e}}xO(){if(!this.Tst||!this.jst()){const t=this.JW();t&&(this.Tst=t.xO())}return this.Tst}rit(){return this.Sst}Hst(){return isNaN(this.bst)?this.Sst.Hst():this.bst}hit(t){this.Sst.hit(t)}ctt(){return this.Sst.ctt()}ftt(t){this.Sst.ftt(t)}pK(){return this.Sst.pK()}YW(){return this.Sst.YW()}Qtt(){return this.Sst.Qtt()}oit(){return this.Sst.oit()}ait(t){this.Sst.ait(t)}dtt(t){this.Sst.dtt(t)}zW(t){for(const s of this.pst())s.zW(t);for(const i of this.ust())i.zW(t)}lit(){return this.Sst.lit()}uit(t){this.Sst.uit(t)}Ust(){return isNaN(this.Mst)?this.Sst.Ust():this.Mst}cit(t){this.Sst.cit(t)}dit(t){this.Sst.dit(t)}pit(){const t=this.JW();if(t){const s=t.g6();if(s.mit())return t.g6().pit()}return this.Sst.pit()}git(t){this.Sst.git(t)}yit(){const t=this.JW();if(t){const s=t.g6();if(s.mit())return t.g6().yit()}return this.Sst.yit()}wT(){return this.Sst.wT()}Kc(){return this.Sst.Kc()}ott(){return 0===this.wT()}wit(){return 1===this.wT()}Sit(){return 2===this.wT()}vit(){return this.Ost}IZ(){return this.BY}Xtt(){return this.kst}eP(){return this.ZC}Wtt(){for(const t of this.Fst)t.Wtt()}GZ(){if(this.Vst(),this.jst()||!this.ott()){const t=this.Wst(),s=t.wtt(),i=s?0:this.oit();for(const n of this.Fst)n.GZ(i),0===this.Ost&&1===n.vit()&&(this.Ost=1),0===this.BY&&1===n.IZ()&&(this.BY=1);this.kst=0;const e=this.Fst.some(t=>t.Xtt());e&&(this.kst=1),this.Pst=this.bit(i),this.Gst=!1,this.Ist=!1,this.jc(i),this.Mit(this.bit(i))}}qtt(){if(this.Vst(),this.jst()||!this.ott()){this.QZ.wtt();const t=this.QZ.u3()-this.Qtt();this.Pst=this.bit(t);for(const s of this.Fst)s.qtt(t)}}Ztt(){if(!this.Wst().FZ()&&(this.Vst(),this.jst()||!this.ott())&&!this.ZC){const t=this.QZ.u3(),s=this.Qtt()+this.oit();s<=t?this.jc(this.oit(),!0,!1,!0,!1,!1,!0):t<=0&&this.jc(0,!0,!1,!0,!1,!1,!0)}}$tt(){for(let t=0,s=this.Fst.length;t<s;t++){const i=this.Fst[t];i.$tt(),0===this.Ost&&1===i.vit()&&(this.Ost=1),0===this.BY&&1===i.IZ()&&(this.BY=1)}}Ktt(){const s=this.Fst.length;for(let t=0;t<s;t++)this.Fst[t].Ktt()}jc(i,t=!1,e=!1,n=!1,s=!1,r=!1,h=!1){this.xst||this.JW();const o=this.xst&&!this.xst.YV(),a=0===this.Sst.yf;if((o||!a)&&!(r&&a&&this.E5().Cz()||(i-=this.Qtt())<0)){this.xit(i,t),this.Tit(i,t,s);for(let t=0,s=this.Fst.length;t<s;t++)this.Fst[t].jc(i,e,n,h);this._it(i,t),0!==this.Ost&&(this.Tst||(this.Tst=this.xst.xO()),this.Tst)&&this.Tst.q4()}}tst(){const s=this.Fst.length;for(let t=0;t<s;t++)this.Fst[t].tst()}xit(t,s){if(s&&this.ZC&&!this.Gst){const i=this.Wst();if(i.wtt()){if(t<0)return}else if(t>this.oit())return;for(const e of this.Fst)e.GZ();this.Gst=!0}}_it(t,s){if(s&&this.ZC&&!this.Ist){const i=this.Wst();if(i.wtt()){if(t>=this.oit()){for(const e of this.Fst)e.jc(this.oit(),!1,!0);this.Ist=!0}}else if(t<=0){for(const n of this.Fst)n.jc(0,!1,!0);this.Ist=!0}}}Tit(t,s,i){if(!i&&s&&Nr.nX.Timeline){const e=this.Wst(),n=this.Pst.hK(),r=this.Pst.u3(),h=n?n.u3():e.IW();if(t<=r||h<=t)if(this.Pst=this.vst.Git(t,this.Sst),e.wtt())n&&this.Mit(this.Pst);else{const o=this.Pst.hK();o&&this.Mit(o)}}}bit(t){const s=this.vst.Iit(t,this.Sst);return s||this.vst.Git(t,this.Sst)}Mit(t){if(Nr.nX.Timeline){const s=this.Wst(),i=s.itt();Nr.nX.Timeline.iX.PushTriggerTimeline(s),Nr.nX.Timeline.iX.PushTriggerKeyframe(t),i.y4(Nr.nX.Timeline.iX.OnAnyKeyframeReached),i.y4(Nr.nX.Timeline.iX.Mit),Nr.nX.Timeline.iX.PopTriggerTimeline(s),Nr.nX.Timeline.iX.PopTriggerKeyframe(t)}}Cit(){const t=this.Sst.Rst(),s=t.Pit();return s}Eit(){const t=this.Sst.Bst(),s=t.Ait(),i=Nr.Nst.gx(this,s);return this.Fst.push(i),i}Rit(t){const s=this.Sst.Rst();s.Fit(t)}Dit(t){for(const s of this.Fst)s.Dit(t)}Oit(){for(const t of this.Fst)t.Oit()}kit(){if(this.Vst(),this.jst()||!this.ott())for(const t of this.Fst)t.kit()}Lit(){if(this.Vst(),this.jst()||!this.ott()){let t=!1;for(const s of this.Fst){const i=s.Lit();!t&&i&&(t=!0)}if(t){const e=this.Cit();e._W(this.Wst().u3()),e.zW("noease"),e.uit(!0),e.Stt("")}}}DY(){isNaN(this.Cst)||this.Bit(this.Cst),this.Cst=NaN}mq(){const t=this.JW(),s=t?t.U5():this.Hst();return{propertyTracksJson:this.Nit(),lastKeyframeDataItemJson:this.Wit(),initialStateOfNestedSet:this.Gst,endStateOfNestedSet:this.Ist,instanceUid:s,cleared:this._st}}gq(t){if(t){this.Vit(t.propertyTracksJson),this.jit(t.lastKeyframeDataItemJson),this.Cst=t.instanceUid,this.Gst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Gst=t.initialStateOfNestedSet),this.Ist=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Ist=t.endStateOfNestedSet),this._st=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Fst)0===this.Ost&&1===s.vit()&&(this.Ost=1),0===this.BY&&1===s.IZ()&&(this.BY=1);this.kst=0,this.Fst.some(t=>t.Xtt())&&(this.kst=1)}}Wit(){const t=this.Sst.Rst();return t.Hit(this.Pst)}Nit(){return this.Fst.map(t=>t.mq())}Vit(t){t.forEach((t,s)=>{const i=this.Fst[s];i.gq(t)})}Bit(t){if(Nr.ge(t)){const s=this.UO().wO(t);if(s){const i=this.Wst();i.hst(this.Sst.YW(),s,this.zst())}}}jit(t){const s=this.Sst.Rst();this.Pst=s.Uit(t)}}}{const Wr=self.Bs;Wr.Nst=class extends Wr.rr{constructor(t,s){super(),this.zit=t,this.Jit=s,this.qit=s.Bst(),this.Ost=0,this.BY=0,this.kst=0,this.$it=this.ntt(),this.Xit=this.Jit.Zit().Yit(),this.Kit=null,this.Qit=null}static gx(t,s){return Wr.lr(Wr.Nst,t,s)}ur(){this.zit=null,this.$it&&(this.$it.ur(),this.$it=null),this.Xit=null,this.Jit=null,this.qit=null}vit(){return this.Ost}IZ(){return this.BY}Xtt(){return this.kst}tet(){return!!this.Qit}iet(t){this.Qit=t}eet(){return this.Qit}net(){return this.zit}ret(){return this.Jit}Bst(){return this.qit}Wst(){return this.zit.Wst()}UO(){return this.zit.UO()}JW(){return this.zit.JW()}ntt(){if(!this.$it){let t=this.Jit.Xst(),s;switch(t){case"behavior":s=new Wr.Nst.het(this);break;case"effect":s=new Wr.Nst.oet(this),this.BY=1;break;case"instance-variable":s=new Wr.Nst.aet(this);break;case"plugin":s=new Wr.Nst.let(this),this.BY=1;break;case"world-instance":s=new Wr.Nst.uet(this),this.BY=1,this.Ost=1;break;case"value":s=new Wr.Nst.cet(this);break;case"audio":s=new Wr.Nst.fet(this)}this.$it=s}return this.$it}Xst(){return this.Jit.Xst()}det(t){this.Jit.det(t)}pet(){return this.Jit.met()}yet(t){this.Jit.wet(t)}ZW(){return this.ntt().vet()}cst(){return this.Jit.bet()}Met(t){this.Jit.xet(t)}Tet(){return this.Jit.wT()}_et(t){this.Jit.Get(t)}Iet(){return this.Bst().Cet(this.Jit).wT()}Pet(){return this.Jit.Pet()}Eet(t){this.Jit.Eet(t)}Aet(){return this.Jit.Aet()}Ret(t){this.Jit.Ret(t)}lit(){return this.Jit.lit()}uit(t){this.Jit.uit(t)}ctt(){return this.Jit.ctt()}ftt(t){this.Jit.ftt(t)}pK(){return this.Jit.pK()}dtt(t){this.Jit.dtt(t)}zW(t){for(const s of this.Fet())s.zW(t)}Det(){return this.Jit.Det()}Fet(){return this.Xit||(this.Xit=this.Jit.Zit().Yit()),this.Xit}rK(){return this.Jit.Zit().rK()}Oet(t){return this.qit.Oet(t,this.Jit)}ket(t){return this.qit.ket(t,this.Jit)}Let(t){let s=this.qit.Oet(t,this.Jit),i;return i=s?this.qit.Bet(t,this.Jit):(s=this.qit.ket(t,this.Jit),this.qit.Net(t,this.Jit)),{start:s,end:i}}*Wet(){for(const t of this.Fet())yield t.bK()}*Vet(){for(const t of this.Fet())yield t.u3()}est(){this.ntt().est()}kZ(){this.ntt().kZ()}jet(){return this.ntt().jet()}Wtt(){this.ntt().Wtt()}GZ(t){this.ntt().GZ(),this.Kit=this.Het(t),this.$tt()}qtt(t){this.ntt().qtt(),this.Kit=this.Het(t)}$tt(){const t=this.net();if(this.kst=0,t.ott()){const s=this.Wst(),i=t.JW(),e=this.ntt(),n=this.cst(),r=e.Uet();if(r){const h=s.ett(i,e,n,this);h&&h.length&&(this.kst=1)}else this.kst=0}}Het(t){const s=this.Wst(),i=this.qit.Oet(t,this.Jit);return i||(s.wtt()?this.qit.ket(t,this.Jit):this.qit.Net(t,this.Jit))}Ktt(){this.$it.Ktt()}jc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.qit.ket(t,this.Jit);else{if(this.Kit){const o=this.Wst(),a=this.Kit.hK(),l=this.Kit.u3(),u=a?a.u3():o.IW();(t<=l||u<=t)&&(this.Kit=this.qit.ket(t,this.Jit),h=!0)}else this.Kit=this.qit.ket(t,this.Jit),h=!0;n=this.Kit}n&&(r=n.hK()),this.$it.jc(t,n,r,s,i,e,h)}zet(t){if(this.Kit){const e=this.Wst(),n=this.Kit.hK(),r=this.Kit.u3(),h=n?n.u3():e.IW();(t<=r||h<=t)&&(this.Kit=this.qit.ket(t,this.Jit))}else this.Kit=this.qit.ket(t,this.Jit);const s=this.Kit,i=s.hK();return this.$it.zet(t,s,i)}Jet(t,s,i){return this.$it.zet(t,s,i)}tst(){this.$it.tst()}static qet(t,s){const i=s.ret(),e=s.qit;return e.ket(t,i)}static $et(t,s){const i=s.ret(),e=s.qit;return e.Net(t,i)}Xet(){const t=this.Jit.Zit(),s=t.Yet();return this.Kit=null,s}Dit(t){this.Kit=null;const s=this.Jit.Zit();s.Zet(t)}Oit(){this.ntt().Oit()}kit(){const t=this.ntt().kit();if(t){const s=this.qit.Cet(this.Jit),i=this.ntt().jet();s.Ket(i)}}Lit(){const t=this.ntt().Lit();return t&&this.Qet(),this.ntt().tnt(),t}Qet(){const t=this.Wst().u3(),s=this.ntt(),i=Wr.Nst.qet(t,this),e=this.Xet();e.Get(i.wT()),e._W(t),e.zW(i.snt()),e.uit(!0),e.int(s.ent()),e.Ket(s.jet())}mq(){return{sourceAdapterJson:this.ntt().mq()}}gq(t){t&&this.ntt().gq(t.sourceAdapterJson)}}}{const Vr=self.Bs,jr=Vr.Nst;jr.uet=class{constructor(t){this.nnt=t,this.rnt=null,this.hnt()}ur(){this.rnt&&(this.rnt.ur(),this.rnt=null),this.nnt=null}Uet(){return this.rnt.Uet()}KW(){return this.nnt}est(){this.rnt&&this.rnt.est()}kZ(){this.rnt&&this.rnt.kZ()}hnt(){return this.rnt||(this.rnt=this.ont()),this.rnt}Yst(){}RF(){return this.Yst()}ant(){}Wtt(){this.hnt().Wtt()}GZ(){this.hnt().GZ()}qtt(){this.hnt().qtt()}Ktt(){this.rnt.lnt()}jc(t,s,i,e,n,r,h){let o=this.nnt.Iet(),a;switch(o){case"numeric":a=jr.unt.jc(t,s,i,this.nnt);break;case"angle":a=jr.cnt.jc(t,s,i,this.nnt);break;case"boolean":a=jr.fnt.jc(t,s,i,this.nnt);break;case"color":a=jr.dnt.jc(t,s,i,this.nnt);break;case"text":a=jr.pnt.jc(t,s,i,this.nnt)}this.rnt.mnt(t,a,s,i,e,n,r,h)}zet(t,s,i){switch(this.nnt.Iet()){case"numeric":return jr.unt.jc(t,s,i,this.nnt);case"angle":return jr.cnt.jc(t,s,i,this.nnt);case"boolean":return jr.fnt.jc(t,s,i,this.nnt);case"color":return jr.dnt.jc(t,s,i,this.nnt);case"text":return jr.pnt.jc(t,s,i,this.nnt)}}tst(){this.rnt.gnt()}Oit(){this.hnt().ynt()}tnt(){this.hnt().tnt()}jet(){return this.hnt().jet()}kit(){return this.hnt().kit()}Lit(){return this.hnt().Lit()}ent(){const t=this.nnt,s=t.net(),i=s.Wst().u3(),e=jr.qet(i,t),n=e.hK(),r=t.Iet();switch(r){case"numeric":return jr.unt.jc(i,e,n,t);case"angle":return jr.cnt.jc(i,e,n,t);case"boolean":return jr.fnt.jc(i,e,n,t);case"color":return jr.dnt.jc(i,e,n,t);case"text":return jr.pnt.jc(i,e,n,t)}}ont(){const t=this.nnt,s=t.Det()?t.Iet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jr.Snt.wnt(this);case"numeric":case"number":case"angle":return new("combo"===this.nnt.Tet()?jr.Snt.wnt:jr.Snt.vnt)(this);case"color":case"offsetColor":return new jr.Snt.bnt(this);default:return new jr.Snt.vnt(this)}}mq(){return{propertyAdapterJson:this.hnt().mq()}}gq(t){t&&this.hnt().gq(t.propertyAdapterJson)}}}{const Hr=self.Bs;class Ur extends Hr.Nst.uet{constructor(t){super(t),this.Mnt=NaN}Yst(){return this.nnt.ret().met()[0]}RF(){return this.Mnt||super.RF()}ant(){return this.nnt.net().JW()}tit(t){const s=this.nnt.ret().met()[0];s!==t&&(this.Mnt=t)}jc(t,s,i,e,n,r,h){this.hnt().xnt(s.vet())&&super.jc(t,s,i,e,n,r,h)}zet(t,s,i){if(this.hnt().xnt(s.vet()))return super.zet(t,s,i)}mq(){return Object.assign(super.mq(),{index:this.Mnt})}gq(t){t&&(super.gq(t),this.Mnt=t.index)}}Hr.Nst.aet=Ur}{const zr=self.Bs;class Jr extends zr.Nst.uet{constructor(t){super(t),this.m7=NaN}Yst(){const t=this.nnt.ret();return t.met()[1]}ant(){const t=this.nnt.ret(),s=this.nnt.net(),i=this.m7||t.met()[0],e=s.JW(),n=e.Tnt(i),r=e._nt()[n];return r.g6()}G6(t){const s=this.nnt.ret(),i=s.met()[2];return t.Gnt(i)}iit(t){const s=this.nnt.ret();s.met()[0]!==t&&(this.m7=t)}jc(t,s,i,e,n,r,h){const o=this.nnt.net(),a=o.JW();this.G6(a.E5())&&super.jc(t,s,i,e,n,r,h)}zet(t,s,i){const e=this.nnt.net(),n=e.JW();if(this.G6(n.E5()))return super.zet(t,s,i)}mq(){return Object.assign(super.mq(),{sid:this.m7})}gq(t){t&&(super.gq(t),this.m7=t.sid)}}zr.Nst.het=Jr}{const qr=self.Bs;class $r extends qr.Nst.uet{constructor(t){super(t)}Yst(){return this.nnt.ret().met()[1]}ant(){const t=this.nnt,s=t.net(),i=s.xO(),e=i.z4(),n=e.XL(),r=this.eit(n),h=r.RF();return e.R6(h)?e.Int(h):null}eit(t){const s=this.nnt,i=s.ret().met()[0];return t.Cnt(i)}jc(t,s,i,e,n,r,h){this.Pnt()&&super.jc(t,s,i,e,n,r,h)}zet(t,s,i){if(this.Pnt())return super.zet(t,s,i)}Pnt(){const t=this.nnt,s=t.net(),i=s.xO(),e=i.z4(),n=e.XL(),r=this.eit(n);if(r){const h=r.RF();return e.R6(h)}}}qr.Nst.oet=$r}{const Xr=self.Bs;class Yr extends Xr.Nst.uet{constructor(t){super(t)}Yst(){return this.nnt.ret().met()[0]}ant(){return this.nnt.net().JW().g6()}jc(t,s,i,e,n,r,h){const o=this.nnt.net(),a=o.E5()._L(),l=o.JW().E5()._L();a===l&&super.jc(t,s,i,e,n,r,h)}zet(t,s,i){const e=this.nnt.net(),n=e.E5()._L(),r=e.JW().E5()._L();if(n===r)return super.zet(t,s,i)}Ent(){const t=this.nnt.net(),s=t.E5()._L();if(Xr.nX.Ant&&s instanceof Xr.nX.Ant&&("initial-frame"===this.nnt.cst()||"initial-animation"===this.nnt.cst()))switch(this.nnt.pK()){case"relative":case"absolute":return null}}}Xr.Nst.let=Yr}{const Zr=self.Bs;class Kr extends Zr.Nst.uet{constructor(t){super(t),this.Rnt=0,this.Fnt=!1}Uet(){return!1}GZ(){let t=this.nnt.Bst(),s=this.nnt.ret();s=t.Cet(s),this.Rnt=s.bK()}qtt(){}vet(){return this.Fnt||this.nnt.jc(0),this.Rnt}jc(t,s,i,e,n,r,h){this.Rnt=Zr.Nst.unt.jc(t,s,i,this.nnt),this.Fnt=!0}Oit(){}tnt(){}jet(){return this.Rnt}kit(){return!1}Lit(){return!1}mq(){return{value:this.Rnt,init:this.Fnt}}gq(t){t&&(this.Rnt=t.value,this.Fnt=!t.hasOwnProperty("init")||t.init)}}Zr.Nst.cet=Kr}{const Qr=self.Bs;class th extends Qr.Nst.uet{constructor(t){super(t),this.Dnt=!1,this.Ont=null,this.knt=null,this.Lnt=null,this.QZ=this.nnt.Wst(),this.zit=this.nnt.net(),this.Bnt=this.nnt.pet(),this.Nnt=this.Bnt[0],this.Wnt=this.Bnt[1],this.Bnt[3]?this.Vnt=this.Bnt[3]:this.Vnt=Math.random().toString(36).slice(2),this.jnt=NaN,this.Hnt=NaN,this.Unt=NaN,this.znt=null,this.Jnt()}ur(){super.ur(),this.Ont=null,this.knt=null,this.Lnt=null,this.QZ=null,this.zit=null,this.Bnt=null,this.Nnt=null,this.znt=null}Jnt(){if(self.Bs.nX.Audio){const t=this.nnt.UO(),s=t.qnt(self.Bs.nX.Audio);s&&(this.Ont=s.ML().g6()),this.knt=self.Bs.nX.Audio.$nt,this.Lnt=self.Bs.nX.Audio.Xnt}}Ynt(){if(!this.znt){const t=this.nnt.net(),s=t.KW("audioSource");s&&(this.znt=s.ntt())}}Znt(){const t=this.nnt.net(),s=t.KW("volume");return(s?s.ntt():this).Hnt}est(){super.est(),this.Dnt=!1,this.Ont&&(this.Lnt&&(this.jnt=this.Lnt.Knt.call(this.Ont,this.Vnt),this.Hnt=this.Lnt.Qnt.call(this.Ont,this.Vnt)),this.knt)&&this.knt.MW.call(this.Ont,this.Vnt)}trt(){return this.Vnt}srt(){return this.Unt}irt(t){this.Unt=t}GZ(){super.GZ(),this.jnt=NaN,this.Dnt=!1}qtt(){super.qtt();const t=this.nnt.Wst(),s=t.u3();switch(this.jnt=s-this.Wnt,this.nnt.cst()){case"audioSource":break;case"volume":this.Hnt=this.nnt.zet(s)}this.Dnt=!1}jc(t,s,i,e,n,r,h){if(this.Ont)switch(this.nnt.cst()){case"audioSource":{if(!this.QZ.wtt())return;if(e)return void(this.knt&&this.knt.MW.call(this.Ont,this.Vnt));if(t<this.Wnt)return void(this.Dnt=!1);const o=this.Lnt.ert.call(this.Ont,this.Vnt),a=this.QZ.DW();if(a!==o&&this.knt.FW.call(this.Ont,this.Vnt,a),this.Dnt)return;if(!this.nnt.Wst().IsPlaying())return;if(this.Dnt=!0,isNaN(this.jnt)){const l=self.performance.now(),u=t-this.Wnt,c=this.Ont.nrt();if("suspended"===c)return void(this.Dnt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.knt){let t=this.srt();isNaN(t)?(this.irt(0),t=0):this.irt(t),this.knt.rrt.call(this.Ont,this.Nnt,t,this.Vnt,p)}}else{const m=this.jnt,g=(this.jnt=NaN,this.Znt()),y=(this.Hnt=NaN,this.Ont.nrt());if("suspended"===y)return void(this.Dnt=!1);this.knt&&(this.irt(g),this.knt.rrt.call(this.Ont,this.Nnt,g,this.Vnt,m))}break}case"volume":this.Ynt(),super.jc(t,s,i,e,n,r,h)}}zet(t,s,i){if(this.Ont)switch(this.nnt.cst()){case"audioSource":return;case"volume":return this.Ynt(),super.zet(t,s,i)}}hrt(t,s){return this.znt?this.znt.srt():0}ort(t,s,i,e){this.znt&&this.znt.irt(this.hrt()+s),this.knt&&this.znt&&this.knt.irt.call(this.Ont,this.znt.trt(),this.znt.srt())}art(t,s,i){this.znt&&this.znt.irt(s),this.knt&&this.znt&&this.knt.irt.call(this.Ont,this.znt.trt(),this.znt.srt())}lrt(){return!0}mq(){return{audioPlaybackStarted:this.Dnt,audioTag:this.Vnt,pauseTime:this.jnt,pauseVolume:this.Hnt,volume:this.Unt}}gq(t){t&&(this.Dnt=t.audioPlaybackStarted,this.Vnt=t.audioTag,this.jnt=t.pauseTime,this.Hnt=t.pauseVolume,this.Unt=t.volume,this.Jnt())}}Qr.Nst.fet=th}{const sh=self.Bs;sh.Nst.Snt=class{constructor(t){this.$it=t,this.nnt=t.KW(),this.Tst=this.nnt.net().xO(),this.urt=this.nnt.cst(),this.crt=!1,this.frt=null,this.drt=null}ur(){this.$it=null,this.nnt=null,this.Tst=null,this.frt=null,this.drt=null}Uet(){return!1}est(){}kZ(){this.Tst=null,this.frt=null,this.drt=null}ntt(){return this.$it}KW(){return this.nnt}xO(){return this.Tst||(this.Tst=this.nnt.net().xO()),this.Tst}prt(t){this.crt=!!t}mrt(){return this.crt}Wtt(){}GZ(){}qtt(){}ynt(){this.frt=this.jet()}tnt(){this.frt=null}jet(){}kit(){}Lit(){}xnt(t){const s=typeof this.grt(),i=typeof t;return s==i}lnt(){}mnt(t,s,i,e,n,r,h,o){}gnt(){}yrt(){const t=this.wrt(()=>{const t=this.nnt.ret(),s=this.nnt.Bst();return s.Cet(t)},()=>{const t=this.nnt.ret(),s=this.nnt.Bst();return s.Srt(t)});return t.vrt()}brt(){const t=this.nnt.Wst(),e=t.u3()-this.nnt.net().Qtt(),s=this.wrt(()=>{const t=this.nnt.ret(),s=this.nnt.Bst();return s.ket(e,t)},()=>{const t=this.nnt.ret(),s=this.nnt.Bst(),i=s.Net(e,t);return i||s.Srt(t)});return s.vrt()}wrt(t,s){const i=this.nnt.Wst();return(i.wtt()?t:s)()}Mrt(t,s){const i=this.nnt.pK();return("relative"===i?t:s)()}xrt(t,s){return(this.mrt()?(this.prt(!1),t):s)()}Trt(t){}_rt(){return this.$it.RF()}Grt(){return this.drt||(this.drt=this.$it.ant()),this.drt}Irt(t,s,i,e,n,r){const h=this.nnt.Xst();switch(h){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}mq(){return{firstAbsoluteUpdate:this.crt,saveState:this.frt}}gq(t){t&&(this.crt=t.firstAbsoluteUpdate,this.frt=t.saveState)}Crt(t,s=!1){const i=[];for(const e of t){const n=e.net().Qtt();for(const r of e.Fet())(s&&0===r.u3()||!s)&&i.push({time:n+r.u3(),value:r.vrt()})}return i.sort((t,s)=>t.time-s.time)}Prt(t,s,i){return this.Ert(s,i)}Ert(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const ih=self.Bs,eh=new Map,nh=[0,0,0];class rh extends ih.Nst.Snt{constructor(t){super(t)}Wtt(){}GZ(){}qtt(){}jet(){const t=this.nnt.Xst(),s=this.Grt(),i=this._rt();switch(t){case"behavior":return this.Art(s.Rrt(i));case"effect":return this.Art(s[i]);case"plugin":return this.Art(s.Rrt(i));case"world-instance":return this.Art(this.grt())}}kit(){const t=this.yrt();return!this.Frt(t,this.grt())}Lit(){return!ih.Se(this.frt)&&!this.Frt(this.frt,this.grt())}Frt(t,s){return t=this.Drt(t),s=this.Drt(s),t.fa(s)}yrt(){const t=super.yrt();return this.Drt(t)}brt(){const t=super.brt();return this.Drt(t)}Trt(t){}Art(t){return(ih.sn(t,ih.Ho)?t.toArray():t).slice(0,3)}Drt(t){return ih.sn(t,ih.Ho)?t:new ih.Ho(t[0],t[1],t[2],1)}xnt(t){return!0}Uet(){return!0}lnt(){const t=this.nnt.Wst(),s=this.nnt.JW(),i=this.nnt.ntt(),e=t.ett(s,i,this.urt,this.nnt);if(e&&1<e.length){eh.has(s)||eh.set(s,new Map);const n=eh.get(s),r=this.nnt.Xst(),h=(n.has(r)||n.set(r,new Map),n.get(r));h.has(this.urt)||h.set(this.urt,{Ort:!1,color:new ih.Ho(0,0,0,1)})}}krt(t,s,i){const e=eh.get(t).get(s).get(i);return e.Ort=!0,e.color}mnt(t,s,i,e,n,r,h,o){const a=this.nnt.Wst(),l=this.nnt.net(),u=this.nnt.JW(),c=this.nnt.ntt(),f=this.nnt.Xst(),d=this.urt,p=a.ett(u,c,d,this.nnt);if(p&&1<p.length){const m=this.Crt(p,!0),g=this.Prt(a,a.u3(),m);if(g){const y=l.Qtt(),w=g.time-y;if(0==w)this.krt(u,f,this.urt).Yo(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],v=s[1],b=s[2],M=this.nnt.jc(w,!1,!0),x=ih.Ho.qa(S,M[0]),T=ih.Ho.qa(v,M[1]),_=ih.Ho.qa(b,M[2]);this.krt(u,f,this.urt).Yo(x,T,_)}}}else this.Lrt(s[0],s[1],s[2])}gnt(){const t=this.nnt.JW();if(eh.has(t)){const s=eh.get(t),i=this.nnt.Xst();if(s.has(i)){const e=s.get(i);if(e.has(this.urt)){const n=e.get(this.urt),r=n.Ort,h=n.color;r&&this.Lrt(h.na(),h.ra(),h.oa()),0===e.size&&s.delete(i),0===s.size&&eh.delete(t)}}}}grt(){const t=this.nnt.Xst(),s=this.Grt(),i=this._rt();switch(t){case"behavior":return this.Drt(s.Rrt(i));case"effect":return s[i].clone();case"plugin":return this.Drt(s.Rrt(i));case"world-instance":return this.xO().aN().clone()}}Lrt(t,s,i){const e=this.nnt.Xst(),n=this.Grt(),r=this._rt();switch(e){case"behavior":nh[0]=t,nh[1]=s,nh[2]=i,n.Brt(r,nh);break;case"effect":n[r].Xo(t,s,i);break;case"plugin":nh[0]=t,nh[1]=s,nh[2]=i,n.Brt(r,nh);break;case"world-instance":this.xO().Nrt(t,s,i)}}mq(){}gq(t){}}ih.Nst.Snt.bnt=rh}{const hh=self.Bs,oh=hh.Nst;class ah extends hh.Nst.Snt{constructor(t){super(t)}Wtt(){}GZ(){}qtt(){}jet(){return this.grt()}kit(){const t=this.yrt();return t!==this.jet()}Lit(){return!hh.Se(this.frt)&&this.frt!==this.jet()}Uet(){return!1}mnt(t,s,i,e,n,r,h,o){const a=this.nnt,l=a.net(),u=a.Xst(),c=a.Wst(),f=l.JW(),d=a.ntt(),p=this.urt,m=c.ett(f,d,p,a);if(m&&1<m.length){const y=this.Crt(m),w=t+l.Qtt(),S=this.Prt(c,w,y);S&&(s=S.value)}const g=a.Iet();switch(g){case"numeric":if(oh.unt.Wrt(this._rt(),this.Grt(),s,u))break;return;case"angle":if(oh.cnt.Wrt(this._rt(),this.Grt(),s,u))break;return;case"boolean":if(oh.fnt.Wrt(this._rt(),this.Grt(),s,u))break;return;case"color":if(oh.dnt.Wrt(this._rt(),this.Grt(),s,u))break;return;case"text":if(!oh.pnt.Wrt(this._rt(),this.Grt(),s,u))return}this.Lrt(s)}grt(){const t=this.nnt.Xst(),s=this.Grt(),i=this._rt();switch(t){case"behavior":return s.Rrt(i);case"effect":return s[i];case"instance-variable":return s.Vrt(i);case"plugin":return s.Rrt(i)}}Lrt(t){const s=this.nnt.Xst(),i=this.Grt(),e=this._rt();switch(s){case"behavior":i.Brt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.jrt(e,t);break;case"plugin":i.Brt(e,t)}}}hh.Nst.Snt.wnt=ah}{const lh=self.Bs,uh=(lh.Nst.Snt,new Map),ch=(t,s,i,e,n,r=!1,h=null,o=null)=>{uh.set(t,{Hrt:s,Urt:i,zrt:e,round:n,Jrt:r,init:h,reset:o})};ch("offsetX",(t,s,i,e)=>{"relative"===e.nnt.pK()?t.qrt(s,i.Wst().mtt()):t.qrt(s)},(t,s)=>t.C2(s),t=>t.I2(),!0),ch("offsetY",(t,s,i,e)=>{"relative"===e.nnt.pK()?t.$rt(s,i.Wst().mtt()):t.$rt(s)},(t,s)=>t.A2(s),t=>t.E2(),!0),ch("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.nnt.pK(),l=1===i.Xrt.wT();if((n||l)&&s.ON()&&s.jN()){if(isNaN(i.Yrt)){let e=[],t=s.MN();for(;t;)e.push(t),t=t.MN();e.reverse();let a=(t,s)=>s.Wst().fst(t.JW()),n=(t,s)=>{const i=a(t,s);if(i)return i.pit();const e=t.JW().g6();return e.mit()?e.pit():t.Krt().Zrt()},r=(t,s,i,e=0)=>{const n=a(t,s);if(!n)return e;const r=n.KW(i);if(!r)return e;const h=r.ret().Zit();if(!h)return e;const o=h.Srt();return o?o.vet():e},h;if(l){let t=e[e.length-1];h=t.um()}else{let s=e[0],t=s.Krt().Zrt(),i=s.Krt().Qrt();h=t*i,h=(h+=r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Krt().Qrt();h=(h=(h*=u)+r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX")}}i.Yrt=0===h?Number.EPSILON:h}e||s.zm(t/i.Yrt,!0)}else s.zm(t)}},(t,s)=>t.Sm(s),t=>t.um(),!0),ch("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.nnt.pK(),a=1===i.Xrt.wT();if((n||a)&&s.ON()&&s.UN()){if(isNaN(i.Yrt)){let e=[],t=s.MN();for(;t;)e.push(t),t=t.MN();e.reverse();let n=(t,s)=>{e=t;const i=s.Wst().fst(e.JW());var e;if(i)return i.yit();const n=t.JW().g6();return n.mit()?n.yit():t.Krt().tht()},r=(t,s,i,e=0)=>{const n=s.Wst().fst(t.JW());if(!n)return e;const r=n.KW(i);if(!r)return e;const h=r.ret().Zit();if(!h)return e;const o=h.Srt();return o?o.vet():e},h;if(a){let t=e[e.length-1];h=t.xm()}else{let s=e[0],t=s.Krt().tht(),i=s.Krt().sht();h=t*i,h=(h+=r(s,o,"offsetHeight"))+n(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Krt().sht();h=(h=(h*=l)+r(s,o))+n(s,o)*r(s,o,"offsetScaleY")}}i.Yrt=0===h?Number.EPSILON:h}e||s.iht(t/i.Yrt,!0)}else s.iht(t)}},(t,s)=>t.fm(s),t=>t.xm(),!0),ch("offsetAngle",(t,s,i,e,n)=>{t.eht(s)},(t,s)=>t.sB(s),t=>t.iB(),!1,!0),ch("offsetOpacity",(t,s,i,e,n)=>{const r=e.nht||1,h=(s/=r,t.OE()),o=h+s;if(0===e.rht)1<o?e.rht+=o-1:o<0&&(e.rht+=o),t.hht(s);else{const a=t.OE()+s;0<s&&0<e.rht?1<a&&(e.rht+=a-1):0<s&&e.rht<0?(e.rht+=s,0<e.rht&&(t.hht(e.rht),e.rht=0)):s<0&&0<e.rht?(e.rht+=s,e.rht<0&&(t.hht(e.rht),e.rht=0)):s<0&&e.rht<0&&a<0&&(e.rht+=a)}},(t,s)=>{t.LE(s)},t=>t.OE(),!1,!0,(r,n,h)=>{switch(r.rht=0,r.nnt.pK()){case"relative":{r.nnt.Bst();let t=r.nnt.ret(),s=t.Zit(),i=s.Yit(),e=r.xO().OE(),n=e;for(const o of i){const a=o.u3(),l=r.nnt.zet(a);n=e+l,n=lh.gr(n,0,1)}r.oht=e-n,r.oht=Math.round(100*(r.oht+Number.EPSILON))/100,n=e;for(let t=i.length-1;0<=t;t--){const u=i[t].u3(),c=r.nnt.zet(u);n-=c,n=lh.gr(n,0,1)}r.aht=n,r.aht=Math.round(100*(r.aht+Number.EPSILON))/100;break}}const t="relative"===r.nnt.pK(),s=1===r.Xrt.wT();if((t||s)&&n.ON()&&n.YN()){let s=[],t=n.MN();for(;t;)s.push(t),t=t.MN();s.reverse();let i=(t,s,i)=>{const e=s.Wst().fst(t.JW());if(!e)return 0;const n=e.KW(i);if(!n)return 0;const r=n.ret().Zit();if(!r)return 0;const h=r.Srt();return h?h.vet():0},e=s[0].Krt().lht();e+=i(s[0],h,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],h,"offsetOpacity");r.nht=0===e?1:e}},i=>{switch(i.nnt.pK()){case"relative":{i.rht=0;let t=i.xO(),s=t.OE();s=Math.round(100*(s+Number.EPSILON))/100,i.nnt.Wst().wtt()?(t.LE(s+i.oht),i.h_=0):(t.LE(s-i.aht),i.h_=i.ntt().ent());break}}}),ch("offsetOriginX",(t,s)=>t.uht(s),(t,s)=>t.cht(s),t=>t.eW(),!1),ch("offsetOriginY",(t,s)=>t.fht(s),(t,s)=>t.dht(s),t=>t.rW(),!1),ch("offsetZElevation",(t,s)=>t.pht(s),(t,s)=>t.F2(s),t=>t.R2(),!0),ch("offsetScaleX",(t,s,i,e)=>{if(0!==s){const n=t.um()<0?-1:1;if("relative"===e.nnt.pK()&&t.ON()&&t.jN()){const r=i.pit()*n*s;isNaN(e.Yrt)&&uh.get("offsetWidth").Hrt(t,1,i,e,!0),t.zm(r/e.Yrt,!0)}else t.zm(i.pit()*n*s)}},(t,s,i)=>{t.Sm(i.pit()*s)},(e,n)=>{const r=e.um()<0?-1:1;if(e.jN()){let t=e.MN(),s=n.Wst().fst(t.JW()),i=NaN;if(s)i=t.um()/s.pit();else{const h=t.JW().g6();i=h.mit()?t.um()/h.pit():1}return e.um()*r/(n.pit()*i)}return e.um()*r/n.pit()},!1),ch("offsetScaleY",(t,s,i,e)=>{if(0!==s){const n=t.xm()<0?-1:1;if("relative"===e.nnt.pK()&&t.ON()&&t.UN()){const r=i.yit()*n*s;isNaN(e.Yrt)&&uh.get("offsetHeight").Hrt(t,1,i,e,!0),t.iht(r/e.Yrt,!0)}else t.iht(i.yit()*n*s)}},(t,s,i)=>{t.fm(i.yit()*s)},(e,n)=>{const r=e.xm()<0?-1:1;if(e.UN()){let t=e.MN(),s=n.Wst().fst(t.JW()),i=NaN;if(s)i=t.xm()/s.yit();else{const h=t.JW().g6();i=h.mit()?t.xm()/h.yit():1}return e.xm()*r/(n.yit()*i)}return e.xm()*r/n.yit()},!1);class fh extends lh.Nst.Snt{constructor(t){super(t),this.h_=0,this.rht=0,this.oht=0,this.aht=0,this.nht=NaN,this.Yrt=NaN,this.mht=void 0,this.ght=void 0,this.yht=null,this.wht=null,this.Sht=null,this.vht=null,this.bht=null,this.Mht=null,this.xht=null,this.Tht=null,this._ht=!1,this.Ght=!1,lh.sn(this.nnt.Wst(),lh.Iht)?this.Xrt=new lh.Nst.Snt.Cht(this):this.Xrt=new lh.Nst.Snt.Pht(this);const s=this.nnt.cst();switch(this.nnt.Xst()){case"world-instance":{const i=uh.get(s);this.yht=i.zrt,this.wht=i.Hrt,this.Sht=i.Urt,this._ht=i.round,this.Ght=i.Jrt,this.bht=i.init,this.vht=i.reset;break}case"audio":this.Mht=t.hrt,this.xht=t.ort,this.Tht=t.art,this._ht=!!t.lrt(),this.Ght=!1}}ur(){this.Xrt=null,this.yht=null,this.wht=null,this.Sht=null,this.vht=null,this.bht=null,this.Mht=null,this.xht=null,this.Tht=null,super.ur()}Uet(){return this.Xrt.Uet()}Eht(){return this.h_}Aht(t){this.h_=t}Wtt(){this.vht&&this.vht(this)}GZ(){const t=this.Xrt.GZ();if("number"==typeof t&&(this.h_=t),this.bht){const s=this.xO(),i=this.nnt.net();this.bht(this,s,i)}}qtt(){const t=this.Xrt.qtt();"number"==typeof t&&(this.h_=t)}jet(){return this.grt()}kit(){const t=this.yrt();return t!==this.jet()}Lit(){return!lh.Se(this.frt)&&this.frt!==this.jet()}lnt(){this.Xrt.lnt()}mnt(t,s,i,e,n,r,h,o){return this.Xrt.mnt(t,s,i,e,n,r,h,o)}gnt(){this.Xrt.gnt()}grt(){const t=this.Grt(),s=this._rt(),i=this.xO(),e=this.nnt.net(),n=this.nnt.Xst();switch(n){case"behavior":return t.Rrt(s);case"effect":return t[s];case"instance-variable":return t.Vrt(s);case"plugin":return t.Rrt(s);case"world-instance":return this.yht(i,e);case"audio":return this.Mht.call(this.ntt(),i,e)}}Lrt(t,s,i){const e=this.Grt(),n=this._rt(),r=this.xO(),h=this.nnt.net(),o=this.nnt.Xst();switch(o){case"behavior":e.Rht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.Fht(n,t);break;case"plugin":e.Rht(n,t,this.ntt().Ent());break;case"world-instance":this.wht(r,t,h,this);break;case"audio":this.xht.call(this.ntt(),r,t,h,this)}}Dht(t,s,i){let e=this.nnt.ctt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.nnt.Wst(),u=l.u3(),c=this.nnt.Oet(u);if(!c)return}const n=this.Grt(),r=this._rt(),h=this.xO(),o=this.nnt.net(),a=this.nnt.Xst();switch(a){case"behavior":n.Brt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.jrt(r,t);break;case"plugin":n.Brt(r,t,this.ntt().Ent());break;case"world-instance":this.Sht(h,t,o);break;case"audio":this.Tht.call(this.ntt(),h,t,o)}}}Oht(t,s,i,e,n,r,h,o){this.Xrt.Oht(t,s,i,e,n,r,h,o)}kht(t,s,i,e,n){let r=(t="angle"===this.nnt.Tet()?lh.vr(t):t).toString(),h=r.split(".")[1]||"",o=h.length,a=this.grt(),l;switch(l=0===o?this._ht?Math.round(a):this.Ght?"angle"===this.nnt.Tet()?lh.Sr(Math.round(lh.vr(a))):Number(lh.toFixed(a,2)):a:this._ht?Number(lh.toFixed(a,o)):(this.Ght,a),this.Lrt(l-a,s,i),this.nnt.cst()){case"offsetWidth":case"offsetScaleX":{const u=this.xO(),c=u.um(),f=Number(lh.toFixed(c,2));u.zm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.xO(),p=d.xm(),m=Number(lh.toFixed(p,2));d.iht(m-p);break}}}mq(){return Object.assign(super.mq(),{v:this.h_,a:this.rht,fod:this.oht,bod:this.aht,of:this.nht,sf:this.Yrt,armorf:this.mht,armandf:this.ght})}gq(t){t&&(super.gq(t),this.h_=t.v,this.rht=t.a,this.oht=lh.ge(t.fod)?t.fod:0,this.aht=lh.ge(t.bod)?t.bod:0,this.nht=lh.ge(t.of)?t.of:NaN,this.Yrt=lh.ge(t.sf)?t.sf:NaN,this.mht=lh.ge(t.armorf)?t.armorf:void 0,this.ght=lh.ge(t.armandf)?t.armandf:void 0)}}lh.Nst.Snt.vnt=fh}{const dh=self.Bs;class ph{constructor(t){this.Lht=!1,this.Rnt=0,this.Bht=!1,this.Nht=!1,this.Fst=t;for(let t=0,s=this.Fst.length;t<s;t++)this.Fst[t].iet(this)}ust(){return this.Fst}Wht(){this.Lht=!0}Vht(){return this.Lht}int(t){this.Rnt=t}vet(){return this.Rnt}jht(t){this.Bht=t}Hht(){return this.Bht}Ztt(t){this.Nht=t}Uht(){return this.Nht}l0(){this.Lht=!1,this.Rnt=0,this.Bht=!1,this.Nht=!1}}class mh{constructor(t){this.zht=t}ur(){this.zht=null}wT(){return 0}GZ(){const t=this.zht;return this.zht.KW(),t.Mrt(()=>t.wrt(()=>0,()=>t.ntt().ent()),()=>{})}qtt(){}Uet(){this.zht;const t=this.zht.KW();switch(t.pK()){case"relative":return!1;case"absolute":return!0}}lnt(){this.zht;const t=this.zht.KW(),s=t.cst();switch(t.pK()){case"relative":break;case"absolute":if(t.tet()){const i=t.eet();i.l0()}else{const e=t.Wst(),n=t.JW(),r=t.ntt(),h=e.ett(n,r,s,t);h&&1<h.length&&new ph(h)}}}mnt(t,s,i,e,n,r,h,o){const a=this.zht,l=this.zht.KW();switch(l.pK()){case"relative":{const u=a.Eht();a.Lrt(s-u,i,e),r&&this.Oht(t,i,e,n,u,s),a.Aht(s);break}case"absolute":{const c=l.Wst(),f=l.net();if(l.JW(),l.ntt(),l.tet()){const d=l.eet(),p=d.ust(),m=a.Crt(p,!0),g=a.Prt(c,c.u3(),m);if(g){const y=f.Qtt(),w=g.time-y;if(0==w)d.Ztt(h),d.jht(o),d.Wht(),d.int(d.vet()+s);else{if(w<0)return;const S=l.zet(w);d.Ztt(h),d.jht(o),d.Wht(),d.int(d.vet()+(s-S))}}}else a.Dht(s,o,h);break}}}gnt(){const t=this.zht,s=this.zht.KW();switch(s.pK()){case"relative":break;case"absolute":if(s.tet()){const i=s.eet();i.Vht()&&t.Dht(i.vet(),i.Hht(),i.Uht())}}}Oht(t,s,i,e,n,r){const h=this.zht;e||(s&&t===s.u3()?h.kht(s.bK(),s,i):i&&t===i.u3()?h.kht(i.bK(),s,i):r-n==0&&h.kht(s.bK(),s,i))}}dh.Nst.Snt.Pht=mh}{const gh=self.Bs;class yh{constructor(t){this.zht=t}ur(){this.zht=null}wT(){return 1}GZ(){const t=this.zht;return t.prt(!0),this.Trt(t.yrt())}qtt(){const t=this.zht;if(t.yrt()!==t.brt())return t.prt(!0),this.Trt(t.brt())}Uet(){return!1}lnt(){}mnt(t,s,i,e,n,r,h,o){const a=this.zht,l=a.Eht();switch(a.KW().pK()){case"relative":a.Lrt(s-l,i,e),r&&this.Oht(t,i,e,n,l,s,!1,h);break;case"absolute":a.mrt()?(a.prt(!1),a.Lrt(l,i,e)):0===t&&0===a.KW().Wst().IW()?a.Dht(s,!0,!1):(a.Lrt(s-l,i,e),r&&this.Oht(t,i,e,n,l,s,this.Jht(),h))}a.Aht(s)}gnt(){}Trt(t){const s=this.zht;return t-s.jet()}Jht(){let t=this.zht,s=t.xO().JW(),i=t.KW().UO(),e=i.itt(),n=0;for(const r of e.sZ())0===r.wT()?r.hZ(s)&&n++:1===r.wT()&&r.JW()===s&&n++;return n<=1}Oht(t,s,i,e,n,r,h,o){const a=this.zht;e?s&&t===s.u3()?a.kht(s.bK(),s,i,h,o):i&&t===i.u3()?a.kht(i.bK(),s,i,h,o):i||a.kht(s.bK(),s,i,h,o):s&&t===s.u3()?a.kht(s.bK(),s,i,h,o):i&&t===i.u3()?a.kht(i.bK(),s,i,h,o):r-n==0&&a.kht(s.bK(),s,i,h,o)}}gh.Nst.Snt.Cht=yh}{const wh=self.Bs,Sh=self.mc;wh.Nst.unt=class{constructor(){}static Wrt(t,s,i,e){let n;switch(e){case"behavior":n=s.Rrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Vrt(t);break;case"plugin":n=s.Rrt(t)}return n!==i}static jc(r,h,o,a){if(!o){let t=a.ret(),s=a.Bst();return(t=s.Srt(t)).bK()}let l=a.ctt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Tet()?"discrete":l))return h.bK();if("continuous"===l||"step"===l){const u=a.Wst().ltt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=h.bK(),f=o.bK(),d=h.SK("cubic-bezier"),p=o.SK("cubic-bezier"),m=d&&d.qht()&&p&&p.$ht();if(!m&&c===f)return c;let t=h.u3(),s=o.u3(),i=("step"===l&&0!==u&&(r=wh.gr(r,t,s)),wh.normalize(r,t,s)),e=h.snt(),n;if(m){const y=s-t;n=Sh.Rc(e)(y*i,0,1,y),n=Sh.Rc("cubicbezier")(n,c,c+d.TK(),f+p.IK(),f)}else n=Sh.Rc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Tet()?Math.floor(n):n}}}}{const vh=self.Bs;vh.Nst.cnt=class{constructor(){}static Wrt(t,s,i,e){let n;switch(e){case"behavior":n=s.Rrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Vrt(t);break;case"plugin":n=s.Rrt(t)}return n!==i}static jc(t,s,i,e){if(!i){let t=e.ret(),s=e.Bst();return(t=s.Srt(t)).bK()}let n=e.ctt();if("default"===n&&(n="continuous"),"discrete"===(n="combo"===e.Tet()?"discrete":n))return s.bK();if("continuous"===n||"step"===n){const r=e.Wst().ltt();if("step"===n&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const h=s.u3(),o=i.u3(),a=s.bK(),l=i.bK(),u=("step"===n&&0!==r&&(t=vh.gr(t,h,o)),s.SK("angle"));if(!u){if(a===l)return a;const f=vh.normalize(t,h,o),d=self.mc.Rc(s.snt());return vh.Cr(a,l,d(f,0,1,1))}{const p=u.Xht();if(a===l&&0===p)return a;const m=vh.normalize(t,h,o),g=self.mc.Rc(s.snt()),y=g(m,0,1,1);switch(u.Yht()){case"closest":return vh.Cr(a,l,y,p);case"clockwise":return vh.Pr(a,l,y,p);case"anti-clockwise":return vh.Er(a,l,y,p)}}}}}}{const bh=self.Bs;bh.Nst.fnt=class{constructor(){}static Wrt(t,s,i,e){let n;switch(e){case"behavior":n=s.Rrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Vrt(t);break;case"plugin":n=s.Rrt(t)}return!!n!=!!i}static jc(t,s,i,e){if(i)return s.bK()?1:0;{let t=e.ret(),s=e.Bst();return(t=s.Srt(t)).bK()?1:0}}}}{const Mh=self.Bs,xh=[0,0,0],Th=[0,0,0],_h=[0,0,0];Mh.Nst.dnt=class{constructor(){}static Wrt(t,s,i,e){let n;switch(e){case"behavior":n=s.Rrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Vrt(t);break;case"plugin":n=s.Rrt(t)}return Array.isArray(i)?(xh[0]=i[0],xh[1]=i[1],xh[2]=i[2]):(_h.Ea(i),xh[0]=Math.floor(255*_h.na()),xh[1]=Math.floor(255*_h.ra()),xh[2]=Math.floor(255*_h.oa())),Array.isArray(n)?(Th[0]=n[0],Th[1]=n[1],Th[2]=n[2]):(_h.Ea(n),Th[0]=Math.floor(255*_h.na()),Th[1]=Math.floor(255*_h.ra()),Th[2]=Math.floor(255*_h.oa())),xh[0]!==Th[0]||xh[1]!==Th[1]||xh[2]!==Th[2]}static jc(t,s,i,e){if(!i){let t=e.ret(),s=e.Bst(),i=(t=s.Srt(t)).bK();return xh[0]=i[0],xh[1]=i[1],xh[2]=i[2],xh}let n=e.ctt();if("discrete"===(n="default"===n?"continuous":n)){const r=s.bK();return xh[0]=r[0],xh[1]=r[1],xh[2]=r[2],xh}if("continuous"===n||"step"===n){const h=e.Wst().ltt();if("step"===n&&0!==h){const M=1/h;t=Math.floor(t*M)/M}const o=s.u3(),a=i.u3(),l=s.bK(),u=i.bK(),c=("step"===n&&0!==h&&(t=Mh.gr(t,o,a)),Mh.normalize(t,o,a)),f=s.snt(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.mc.Rc(f),v=a-o,b=v*c;return xh[0]=d===g?d:S(b,d,g-d,v),xh[1]=p===y?p:S(b,p,y-p,v),xh[2]=m===w?m:S(b,m,w-m,v),xh}}}}{const Gh=self.Bs;Gh.Nst.pnt=class{constructor(){}static Wrt(t,s,i,e){let n;switch(e){case"behavior":n=s.Rrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Vrt(t);break;case"plugin":n=s.Rrt(t)}return n!==i}static jc(t,s,i,e){if(i)return s.bK();{let t=e.ret(),s=e.Bst();return(t=s.Srt(t)).bK()}}}}{const Ih=self.Bs;Ih.lY=class{constructor(){this.Zht=new Map}ur(){for(const t of this.Zht.values())t.ur();this.Zht.clear(),this.Zht=null}uc(t){const s=new Ih.Kht(t),i=s.Kc();this.Zht.set(i,s)}ei(t){return this.Zht.get(t)}XQ(){return 0}static Qht(t,s,i,e){if(s)for(const n of s)Ih.lY.tot("create",n,t,i,e)}static sot(t,s,i,e){if(s)for(const n of s)Ih.lY.tot("create-including-disabled",n,t,i,e)}static iot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].gq(t)}):t.forEach(t=>{Ih.lY.tot("load",t,i,s,e)})}static tot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const h=e.prop,o=s[h],a=e.map.get(o);switch(t){case"load":r=new a(null,n);break;case"create":case"create-including-disabled":r=new a(s,n)}}switch(t){case"load":r.gq(s),i.push(r);break;case"create":if("function"==typeof r.lit&&!r.lit())return r.ur();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Ch=self.Bs;Ch.Kht=class{constructor(t){this.pr="",this.Ytt=NaN,this.eot=0,this.not="default",this.rot="default",this.hot=!1,this.oot=!1,this.aot=1,this.vst=null,this.lot="",this.uot=!1,this.cot=!0,t&&(this.pr=t[0],this.Ytt=t[1],this.eot=t[2],this.not=t[3],this.rot=t[4],this.hot=!!t[6],this.oot=!!t[7],this.aot=t[8],this.lot=t[9],this.uot=!!t[10],this.cot=!!t[11],this.vst=new Ch.dot(t[5],this))}ur(){this.vst.ur(),this.vst=null}ttt(){return this.vst||(this.vst=new Ch.dot(null,this)),this.vst}Kc(){return this.pr}Vj(t){this.pr=t}IW(){return this.Ytt}GW(t){this.Ytt=t}ltt(){return this.eot}utt(t){this.eot=t}ctt(){return this.not}ftt(t){this.not=t}pK(){return this.rot}dtt(t){this.rot=t}EW(){return this.hot}PW(t){this.hot=t}RW(){return this.oot}AW(t){this.oot=t}W6(){return this.aot}ptt(t){this.aot=t}LZ(){return this.lot}mtt(){return this.uot}gtt(){return this.cot}mq(){return{trackDataJson:this.vst.mq(),name:this.pr,totalTime:this.Ytt,step:this.eot,interpolationMode:this.not,resultMode:this.rot,loop:this.hot,pingPong:this.oot,repeatCount:this.aot,startOnLayout:this.lot,transformWithSceneGraph:!!this.uot,useSystemTimescale:this.cot}}gq(t){t&&(this.ttt().gq(t.trackDataJson),this.pr=t.name,this.Ytt=t.totalTime,this.eot=t.step,this.not=t.interpolationMode,this.rot=t.resultMode,this.hot=t.loop,this.oot=t.pingPong,this.aot=t.repeatCount,this.lot=t.startOnLayout,this.uot=!!t.transformWithSceneGraph,this.cot=!!t.useSystemTimescale)}}}{const Ph=self.Bs;class Eh{constructor(t,s){this.vst=s,this.pot=null,this.mot=null,this.bst=NaN,this.Mst=NaN,this.not="default",this.rot="default",this.Lu=!1,this.got=null,this.qit=null,this.cf="",this.yot=null,this.wot=0,this.Sot=this.vst.att().IW(),this.yf=0,this.pr="",t&&(t[0]&&(this.pot=t[0],this.bst=t[0][2],this.Mst=t[0][1]),this.not=t[1],this.rot=t[2],this.Lu=!!t[3],t[6]&&(this.cf=t[6]),t[7]&&(this.yot=t[7],this.wot=t[7][0],this.Sot=t[7][1]),t[8]&&(this.mot=t[8]),t[8]&&(this.mot=t[8]),t[9]&&(this.yf=t[9]),t[10]&&(this.pr=t[10]),this.got=new Ph.vot(t[4],this),this.qit=new Ph.bot(t[5],this))}ur(){this.pot=null,this.vst=null,this.got&&(this.got.ur(),this.got=null),this.qit&&(this.qit.ur(),this.qit=null),this.yot=null}ttt(){return this.vst}Rst(){return this.got||(this.got=new Ph.vot(null,this)),this.got}Bst(){return this.qit||(this.qit=new Ph.bot(null,this)),this.qit}Mot(){return this.pot}Ust(){return this.Mst}cit(t){this.Mst=t}Hst(){return this.bst}hit(t){this.bst=t}ctt(){return this.not}ftt(t){this.not=t}pK(){return this.rot}dtt(t){this.rot=t}lit(){return this.Lu}uit(t){this.Lu=!!t}YW(){return this.cf}Qtt(){return this.wot}oit(){return this.Sot}ait(t){this.Sot=t}pit(){return this.mot[0]}dit(t){this.mot||(this.mot=[]),this.mot[0]=t}yit(){return this.mot||(this.mot=[]),this.mot[1]}git(t){this.mot||(this.mot=[]),this.mot[1]=t}wT(){return this.yf}Kc(){return this.pr}mq(){return{keyframeDataJson:this.got.mq(),propertyTrackDataJson:this.qit.mq(),instanceData:this.pot,additionalInstanceData:this.mot,instanceUid:this.bst,objectClassIndex:this.Mst,interpolationMode:this.not,resultMode:this.rot,enabled:this.Lu,id:this.cf,nestedData:this.yot,type:this.yf,name:this.pr}}gq(t){t&&(this.pot=t.instanceData,this.bst=t.instanceUid,this.Mst=t.objectClassIndex,this.not=t.interpolationMode,this.rot=t.resultMode,this.Lu=t.enabled,this.cf=t.id,this.yf=t.type||0,this.pr=t.name||"",this.Sot=this.vst.att().IW(),t.nestedData&&(this.yot=t.nestedData,this.wot=this.yot[0],this.Sot=this.yot[1]),t.additionalInstanceData&&(this.mot=t.additionalInstanceData),this.Rst().gq(t.keyframeDataJson),this.Bst().gq(t.propertyTrackDataJson))}}Ph.dot=class{constructor(t,s){this.SQ=s,this.xot=[],Ph.lY.Qht(this.xot,t,Eh,this)}ur(){this.SQ=null;for(const t of this.xot)t.ur();Ph.Bh(this.xot),this.xot=null}att(){return this.SQ}ist(){const t=new Eh(null,this);return this.xot.push(t),t}Tot(t){return t.Rst().Ast()[0]}_ot(t){const s=t.Rst().Ast();return s.at(-1)}Iit(s,t){const i=t.Rst().Ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.u3()===s)return n}}Got(s,t){const i=t.Rst().Ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.u3()>s)return n}}Iot(s,t){const i=t.Rst().Ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.u3()>=s)return n}}Git(s,t){const i=t.Rst().Ast();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.u3()<=s)return e}}*QQ(){for(const t of this.xot)yield t}mq(){return{trackDataItemsJson:this.xot.map(t=>t.mq())}}gq(t){t&&Ph.lY.iot(this.xot,t.trackDataItemsJson,Eh,this)}}}{const Ah=self.Bs;class Rh{constructor(t,s){this.qit=s,this.Cot="",this.Pot=null,this.urt=null,this.yf=null,this.Eot=NaN,this.Aot=NaN,this.not="default",this.rot="default",this.Lu=!1,this.Rot=null,this.Fot=!0,t&&(this.Cot=t[0][0],this.Pot=t[0].slice(1),this.urt=t[1],this.yf=t[2],this.Eot=t[3],this.Aot=t[4],this.not=t[5],this.rot=t[6],this.Lu=!!t[7],this.Rot=new Ah.Dot(t[8],this),this.Fot=t[9])}ur(){this.Rot.ur(),this.Rot=null,this.qit=null,this.Pot=null}Bst(){return this.qit}Zit(){return this.Rot||(this.Rot=new Ah.Dot(null,this)),this.Rot}Xst(){return this.Cot}det(t){this.Cot=t}met(){return this.Pot}wet(t){this.Pot=t}bet(){return this.urt}xet(t){this.urt=t}wT(){return this.yf}Get(t){this.yf=t}Pet(){return this.Eot}Eet(t){this.Eot=t}Aet(){return this.Aot}Ret(t){this.Aot=t}ctt(){return this.not}ftt(t){this.not=t}pK(){return this.rot}dtt(t){this.rot=t}lit(){return this.Lu}uit(t){this.Lu=!!t}Det(){return!!this.Fot}mq(){return{propertyKeyframeDataJson:this.Rot.mq(),sourceAdapterId:this.Cot,sourceAdapterArguments:this.Pot,property:this.urt,type:this.yf,min:this.Eot,max:this.Aot,interpolationMode:this.not,resultMode:this.rot,enabled:this.Lu,canHavePropertyKeyframes:this.Fot}}gq(t){t&&(this.Cot=t.sourceAdapterId,this.Pot=t.sourceAdapterArguments,this.urt=t.property,this.yf=t.type,this.Eot=t.min,this.Aot=t.max,this.not=t.interpolationMode,this.rot=t.resultMode,this.Lu=t.enabled,this.Fot=t.canHavePropertyKeyframes,this.Zit().gq(t.propertyKeyframeDataJson))}}Ah.bot=class{constructor(t,s){this.Sst=s,this.Oot=[],Ah.lY.Qht(this.Oot,t,Rh,this)}ur(){this.Sst=null;for(const t of this.Oot)t.ur();Ah.Bh(this.Oot),this.Oot=null}rit(){return this.Sst}Ait(){const t=new Rh(null,this);return this.Oot.push(t),t}Cet(t){const s=t.Zit();return s.Yit()[0]}Srt(t){const s=t.Zit(),i=s.Yit();return i.at(-1)}Oet(s,t){const i=t.Zit(),e=i.Yit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.u3()===s)return r}}Bet(s,t){const i=t.Zit(),e=i.Yit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.u3()>s)return r}}Net(s,t){const i=t.Zit(),e=i.Yit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.u3()>=s)return r}}ket(s,t){const i=t.Zit(),e=i.Yit();for(let t=e.length-1;0<=t;t--){const n=e[t];if(n.u3()<=s)return n}}*Lst(){for(const t of this.Oot)yield t}mq(){return{propertyTrackDataItemsJson:this.Oot.map(t=>t.mq())}}gq(t){t&&Ah.lY.iot(this.Oot,t.propertyTrackDataItemsJson,Rh,this)}}}{const Fh=self.Bs;class Dh{constructor(t,s){if(this.got=s,this.uR=-1,this.kot="noease",this.Lot=!1,this.UQ=null,this.Bot=null,t){this.uR=t[0],this.kot=t[1],this.Lot=!!t[2];const i=t[3];this.UQ=i?i.split(" "):[],this.Bot=new Set(this.UQ.map(t=>t.toLowerCase())),this.Not=null}}ur(){this.got=null,Fh.Bh(this.UQ),this.UQ=null,this.Bot.clear(),this.Bot=null,this.Not=null}Rst(){return this.got}hK(){return this.Not}Wot(t){this.Not=t}u3(){return this.uR}_W(t){this.uR=t,this.got.Vot()}snt(){return this.kot}zW(t){this.kot=t}lit(){return this.Lot}uit(t){this.Lot=!!t}OW(){return this.UQ}Stt(t){this.UQ=t?t.split(" "):[],this.Bot=new Set(this.UQ.map(t=>t.toLowerCase()))}jot(){return this.Bot}mst(t){return this.Bot.has(t.toLowerCase())}mq(){return{time:this.uR,ease:this.kot,enable:this.Lot,tags:this.UQ}}gq(t){t&&(this.uR=t.time,this.kot=t.ease,this.Lot=t.enable,this.UQ=t.tags,this.Bot=new Set(this.UQ.map(t=>t.toLowerCase())))}}Fh.vot=class{constructor(t,s){this.Sst=s,this.Est=[],Fh.lY.Qht(this.Est,t,Dh,this),this.Vot()}ur(){this.Sst=null;for(const t of this.Est)t.ur();Fh.Bh(this.Est),this.Est=null}Vot(){this.Est.sort((t,s)=>t.u3()-s.u3());for(let t=0;t<this.Est.length;t++){const s=this.Est[t];s.Wot(this.Est[t+1])}}rit(){return this.Sst}Hot(){return this.Est.length}Ast(){return this.Est}Pit(){const t=new Dh(null,this);return this.Est.push(t),this.Vot(),t}Fit(t){for(const s of this.Est)if(t(s)){const i=this.Est.indexOf(s);-1!==i&&(s.ur(),this.Est.splice(i,1))}this.Uot(),this.Vot()}Uot(){this.Est.sort((t,s)=>t.u3()-s.u3())}Hit(t){return this.Est.indexOf(t)}Uit(t){return this.Est[t]}*zot(){for(const t of this.Est)yield t}*Jot(){for(let t=this.Est.length-1;0<=t;t--)yield this.Est[t]}mq(){return{keyframeDataItemsJson:this.Est.map(t=>t.mq())}}gq(t){t&&(Fh.lY.iot(this.Est,t.keyframeDataItemsJson,Dh,this),this.Vot())}}}{const Oh=self.Bs;class kh{constructor(t,s){this.Rot=s,this.Rnt=null,this.qot=null,this.yf="",this.uR=NaN,this.kot="noease",this.Lot=!1,this.$ot=null,this.Xot=void 0,this.Yot="line",t&&(this.Rnt=t[0][0],this.qot=t[0][1],this.yf=t[0][2],this.uR=t[1],this.kot=t[2],this.Lot=!!t[3],this.Yot=t[5],this.$ot=null,t[4]&&(this.$ot=new Oh.Zot(t[4],this)),this.Not=null,this.Kot=null)}ur(){this.Rot=null,this.$ot&&(this.$ot.ur(),this.$ot=null),this.Not=null,this.Kot=null}Qot(){return this.$ot}Wot(t){this.Not=t}hK(){return this.Not}tat(t){this.Kot=t}oK(){return this.Kot}vet(){return this.Rnt}int(t){"color"===this.yf&&Oh.ge(t)?(this.Rnt[0]=Oh.Jr(t),this.Rnt[1]=Oh.qr(t),this.Rnt[2]=Oh.$r(t)):this.Rnt=t}vrt(){return this.qot}Ket(t){"color"===this.yf&&Oh.ge(t)?(this.qot[0]=Oh.Jr(t),this.qot[1]=Oh.qr(t),this.qot[2]=Oh.$r(t)):this.qot=t}bK(){const t=this.Rot.ret().pK();return"relative"===t?this.vet():"absolute"===t?this.vrt():void 0}wT(){return this.yf}Get(t){this.yf=t}u3(){return this.uR}_W(t){this.uR=t,this.Rot.sat()}snt(){return this.kot}zW(t){this.kot=t}lit(){return this.Lot}uit(t){this.Lot=!!t}aK(){return this.Yot}SK(s){if(this.$ot){if(!this.Xot&&null!==this.Xot){const i=this.$ot.iat();if(i){const e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.YW()===s)return this.Xot=n,this.Xot}}this.Xot=null}return this.Xot}}mq(){const t=this.$ot;return{addonDataJson:t&&t.mq(),value:this.Rnt,aValue:this.qot,type:this.yf,time:this.uR,ease:this.kot,enable:this.Lot}}gq(t){t&&(t.addonDataJson&&this.$ot._SetFromJson(t.addonDataJson),this.Rnt=t.value,this.qot=t.aValue,this.yf=t.type,this.uR=t.time,this.kot=t.ease,this.Lot=t.enable)}}Oh.Dot=class{constructor(t,s){this.Jit=s,this.Xit=[],this.eat=[],Oh.lY.Qht(this.Xit,t,kh,this),Oh.lY.sot(this.eat,t,kh,this),this.sat()}ur(){this.Jit=null;for(const t of this.Xit)t.ur();Oh.Bh(this.Xit),this.Xit=null;for(const s of this.eat)s.ur();Oh.Bh(this.eat),this.eat=null}sat(){let s=this.Xit;s.sort((t,s)=>t.u3()-s.u3());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Wot(s[t+1]),0<=t-1&&i.tat(s[t-1])}(s=this.eat).sort((t,s)=>t.u3()-s.u3());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Wot(s[t+1]),0<=t-1&&e.tat(s[t-1])}}Yet(){const t=new kh(null,this);return this.Xit.push(t),this.sat(),t}Zet(t){for(const s of this.Xit)if(t(s)){const i=this.Xit.indexOf(s);-1!==i&&(s.ur(),this.Xit.splice(i,1))}this.nat(),this.sat()}nat(){this.Xit.sort((t,s)=>t.u3()-s.u3())}ret(){return this.Jit}rat(){return this.Xit.length}Srt(){return this.Xit[this.Xit.length-1]}Yit(){return this.Xit}rK(){return this.eat}*hat(){for(const t of this.Xit)yield t}*oat(){for(let t=this.Xit.length-1;0<=t;t--)yield this.Xit[t]}mq(){const t=this.Xit,s=this.eat;return{propertyKeyframeDataItemsJson:t.map(t=>t.mq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.mq())}}gq(t){t&&(Oh.lY.iot(this.Xit,t.propertyKeyframeDataItemsJson,kh,this),Oh.lY.iot(this.eat,t.propertyKeyframeDataItemsIncludingDisabledJson,kh,this),this.sat())}}}{const Lh=self.Bs;class Bh{constructor(t,s){this.$ot=s,this.cf=t[0],this.aat=t[1]}ur(){this.$ot=null,this.aat=null}Qot(){return this.$ot}YW(){return this.cf}mq(){return{id:this.cf,data:this.aat}}gq(t){t&&(this.cf=t.id,this.aat=t.data)}}class Nh extends Bh{constructor(t,s){super(t,s),this.lat=this.aat[0],this.uat=!!this.aat[1],this.cat=this.aat[2],this.fat=!!this.aat[3]}ur(){super.ur()}TK(){return this.lat}qht(){return this.uat}IK(){return this.cat}$ht(){return this.fat}mq(){return Object.assign(super.mq(),{startAnchor:this.lat,startEnable:!!this.uat,endAnchor:this.cat,endEnable:!!this.fat})}gq(t){t&&(super.gq(t),this.lat=t.startAnchor,this.uat=!!t.startEnable,this.cat=t.endAnchor,this.fat=!!t.endEnable)}}class Wh extends Bh{constructor(t,s){super(t,s),this.dat=this.aat[0],this.pat=this.aat[1]}ur(){super.ur()}Yht(){return this.dat}Xht(){return this.pat}mq(){return Object.assign(super.mq(),{direction:this.dat,revolutions:this.pat})}gq(t){t&&(super.gq(t),this.dat=t.direction,this.pat=t.revolutions)}}Lh.Zot=class{constructor(t,s){this.mat=s,this.gat=[],Lh.lY.Qht(this.gat,t,{prop:0,map:new Map([["cubic-bezier",Nh],["angle",Wh]])},this)}ur(){this.mat=null;for(const t of this.gat)t.ur();Lh.Bh(this.gat),this.gat=null}yat(){return this.mat}iat(){return this.gat}*wat(){for(const t of this.gat)yield t}mq(){return{addonDataItemsJson:this.gat.map(t=>t.mq())}}gq(t){t&&Lh.lY.iot(this.gat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Nh],["angle",Wh]])},this)}}}{let m=self.Bs,i=0;m.Iht=class extends m.jY{constructor(t,s){super("tween-"+i++,t,s),this.cf="",this.Sat=!1,this.vat="start-value",this.xst=null,this.bat=null,this.Mat=null,this.zit=null,this.xat=null}ZQ(t){const s=m.lr(m.Event,"tweenstatereleased");s.Tat=this,t.dispatchEvent(s)}wT(){return 1}TQ(){for(const t of this.SQ.ttt().QQ())this.vQ.push(m._at.gx(this,t));this.zit=this.vQ[0]}sst(){const t=this.SQ.ttt().ist(),s=m._at.gx(this,t);return this.vQ.push(s),this.Gat(),s}Gat(){this.zit=this.vQ[0]}KW(t){return this.zit.ust()[0]}_et(t){this.Iat=t}JW(){const t=this.iK();if(t&&t.length){const s=t[0];if(this.zit=s){const i=s.JW();return s.jst()?i:void 0}}}Cat(t){this.Mat||(this.Mat=[]),this.Mat.push(t)}Pat(t){this.bat||(this.bat=[]),this.bat.push(t)}Eat(t){if(this.Mat){const s=this.Mat.indexOf(t);-1!==s&&this.Mat.splice(s,1)}}Aat(t){if(this.bat){const s=this.bat.indexOf(t);-1!==s&&this.bat.splice(s,1)}}Rat(t,s){for(const i of this.vQ)for(const e of i.Fst)if(e.cst()===s){const n=e.Bst(),r=e.ret(),h=n.Cet(r);h.int(t),h.Ket(t)}}Fat(t){for(const s of this.vQ)for(const i of s.Fst)if(i.cst()===t)return i}Dat(t){for(const s of t){const i=this.Fat(s);this.Rat(i.jet(),s)}if(this.wtt()){const e=this.IW()-this.u3();this.GW(e);for(const n of this.vQ)n.ait(e);this.Ftt(0)}else{const r=this.u3();this.GW(r);for(const h of this.vQ)h.ait(r);this.Ftt(r)}this.Dtt()}Oat(t,s){const i=this.Fat(s),e=i.Bst(),n=i.ret(),r=e.Srt(n);r._W(this.IW()),r.int(t),r.Ket(t)}kat(t){this.cf=t}YW(){return this.cf}Lat(t){this.vat=t}Bat(){return this.vat}XW(t){this.Sat=t}$W(){return this.Sat}xtt(){if(this.Mat)for(const t of this.Mat)t(this);if(!this.FZ())for(const s of this.vQ)s.Lit()}Ttt(){this.BQ=this.lf._tt()}OZ(){if(!this.VQ&&(this.VQ=!0,this.bat))for(const t of this.bat)t(this)}_W(t){this.Nat(),super._W(t)}Ntt(t){(t=m.ge(t)?t:this.IW())<0?this.IQ=0:t>=this.IW()?this.IQ=this.IW():this.IQ=t,this.zit.Wtt()}GZ(t){if(!this.DZ()&&"current-state"===this.Bat())for(const s of this.vQ)s.kit();super.GZ(t)}MW(t=!1){if(super.MW(t),!this.FZ())for(const s of this.vQ)s.Oit()}l0(t=!0,s=!1){this.Nat(),super.l0(t,s)}Nat(){for(const t of this.vQ){const s=t=>{const s=t.u3(),i=this.IW();return 0!==s&&s!==i};t.Rit(s),t.Dit(s)}}GY(){if(!this.vW()){const t=this.JW();if(t&&t.E5().Cz())return!1;this.wQ.MZ(this),this.ztt()}return!0}EZ(n,t,s){if(this.xst||(this.xst=this.JW()),!this.xst||this.xst.YV())this.MW(!0),this.Ttt();else{const i=this.xst.kD();if(0!==(n=-1!==i?s*i:n)||0!==this.HQ){this.HQ=n;const r=this.IQ+this.CQ,h=n*this.PQ,o=r+h,a=this.SQ.Ytt;o<0?(this.IQ=0,this.CQ=-o):a<=o?(this.IQ=a,this.CQ=this.IQ-o):(this.IQ=o,this.CQ=0);let t=!1,s=!1,i=this.EW(),e=this.RW();i||e?i&&!e?0<this.PQ?this.IQ>=a&&(this.Ntt(0),this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),s=!0):this.IQ<=0&&(this.Ntt(a),this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),s=!0):!i&&e?0<this.PQ?this.IQ>=a&&(this.Ftt(a),this.FW(-1*this.DW()),s=!0,1===this.EQ?this.AQ<this.W6()?(this.AQ++,this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat),this.EQ=0):(this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat),t=!0):0===this.EQ&&(this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat),this.EQ=1)):this.IQ<=0&&(this.Ftt(0),this.FW(-1*this.DW()),s=!0,1===this.EQ?this.AQ<this.W6()?(this.AQ++,this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat),this.EQ=0):(t=!0,this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat)):0===this.EQ&&(this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat),this.EQ=1)):i&&e&&(0<this.PQ?this.IQ>=a&&(this.Ftt(a),this.FW(-1*this.DW()),s=!0,0===this.EQ&&(this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat)),1===this.EQ&&(this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat)),this.EQ++,this.EQ=m.wrap(this.EQ,0,2)):this.IQ<=0&&(this.Ftt(0),this.FW(-1*this.DW()),s=!0,0===this.EQ&&(this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat)),1===this.EQ&&(this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),this.Wat(m.Hat.jat.iX.zat),this.Wat(m.Hat.jat.iX.Jat)),this.EQ++,this.EQ=m.wrap(this.EQ,0,2))):0<this.PQ?this.IQ>=a&&(this.AQ<this.W6()?(this.AQ++,this.Ntt(0),this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),s=!0):(this.Ftt(a),t=!0)):this.IQ<=0&&(this.AQ<this.W6()?(this.AQ++,this.Ntt(a),this.Wat(m.Hat.jat.iX.Vat),this.Wat(m.Hat.jat.iX.Uat),s=!0):(this.Ftt(0),t=!0)),t?(this.zit.Ztt(),this.MW(!0),this.Ttt()):(this.zit.jc(this.IQ,!0,!1,s,this.jQ,!1),this.jQ&&(this.jQ=!1))}}}Wat(t){const s=this.JW(),i=s.qat(m.Hat.jat);i.$at(this),this.lf.y4(t,s,i.G6()),i.Xat()}mq(){const t=super.mq(),s=this.att();return Object.assign(t,{tweenDataItemJson:s.mq(),id:this.cf,destroyInstanceOnComplete:this.Sat,initialValueMode:this.vat})}gq(t){if(t){const s=this.att();s.gq(t.tweenDataItemJson),super.gq(t),this.cf=t.id,this.Sat=t.destroyInstanceOnComplete,this.vat=t.initialValueMode,this.Gat()}}static IsPlaying(t){return t.IsPlaying()}static BW(t){return t.BW()}static Yat(t){return!!t.RW()&&0===t.ytt()}static Zat(t){return!!t.RW()&&1===t.ytt()}static Kat(t){const s=t.runtime.itt(),i=new m.Kht;if(t.json){i.gq(t.json.tweenDataItemJson);const e=new m.Iht(i,s);return e.gq(t.json),e}{const n=new m.Iht(i,s),r=(m.Ve(t.Qat)||(t.Qat=[t.Qat]),n.kat(t.id),n.Stt(t.tags),n.Lat(t.initialValueMode),n.XW(t.tlt),n.PW(t.loop),n.AW(t.pingPong),n.GW(t.time),n.utt(0),n.ftt("default"),n.dtt(t.Qat[0].resultMode),n.ptt(t.repeatCount),n.sst()),h=(r.hit(t.I6.U5()),r.ftt("default"),r.dtt(t.Qat[0].resultMode),r.uit(!0),r.cit(t.I6.E5().RF()),t.I6.g6()),o=h.mit()?h.pit():t.I6.xO().um(),a=h.mit()?h.yit():t.I6.xO().xm(),l=(r.dit(o),r.git(a),r.Cit()),u=(l._W(0),l.zW("noease"),l.uit(!0),l.Stt(""),r.Cit());u._W(t.time),u.zW("noease"),u.uit(!0),u.Stt("");for(const c of t.Qat){const f=r.Eit(),d=(f.det(c.slt),f.yet(c.ilt),f.Met(c.property),f._et(c.type),f.Eet(NaN),f.Ret(NaN),f.ftt("default"),f.dtt(c.resultMode),f.uit(!0),f.Xet()),p=(d.Get(c.valueType),d._W(0),d.zW(c.ease),d.uit(!0),d.int(c.elt),d.Ket(c.elt),f.Xet());p.Get(c.valueType),p._W(t.time),p.zW(c.ease),p.uit(!0),p.int(c.nlt),p.Ket(c.nlt),f.ntt()}return n}}static hit(t,s){if(!isNaN(s))for(const i of t.iK())i.hit(s)}rlt(t,s){return this.xat||(this.xat=m.lr(self.VW,this,t,s)),this.xat}}}{const Vh=self.Bs;Vh._at=class extends Vh.stt{constructor(t,s){super(t,s),this.hlt=null,this.olt=null}static gx(t,s){return Vh.lr(Vh._at,t,s)}llt(){1===this.Fst.length?this.hlt=this.Fst[0]:(this.hlt=this.Fst[0],this.olt=this.Fst[1])}Dst(){for(const t of this.Sst.Bst().Lst())this.Fst.push(Vh.ult.gx(this,t));this.llt()}Eit(){const t=this.Sst.Bst(),s=t.Ait(),i=Vh.ult.gx(this,s);return this.Fst.push(i),this.llt(),i}GZ(){if(this.Vst(),this.jst()||!this.ott()){const t=this.Wst(),s=t.wtt(),i=s?0:this.oit();for(const n of this.Fst)n.GZ(i),0===this.Ost&&1===n.vit()&&(this.Ost=1),0===this.BY&&1===n.IZ()&&(this.BY=1);this.kst=0;const e=this.Fst.some(t=>t.Xtt());e&&(this.kst=1),this.Pst=this.bit(i),this.Gst=!1,this.Ist=!1,this.jc(i)}}Ktt(){}jc(t,s=0,i=!1,e=!1,n,r=!1,h=!1){if(this.xst||this.JW(),this.xst){const o=!this.xst.YV();return o&&(!r||!this.E5().Cz())&&((this.olt?(this.hlt.jc(t,i,e,h),this.olt):this.hlt).jc(t,i,e,h),void(0!==this.hlt.vit()&&(this.Tst||(this.Tst=this.xst.xO()),this.Tst)&&this.Tst.q4()))}}tst(){}gq(t){super.gq(t),this.llt()}}}{const jh=self.Bs;jh.ult=class extends jh.Nst{constructor(t,s){super(t,s),this.clt=!1}static gx(t,s){return jh.lr(jh.ult,t,s)}jc(t,s=!1,i=!1,e=!1){let n,r;if(this.clt)n=this.Xit[0],r=this.Xit[1];else{if(s)n=this.qit.ket(t,this.Jit);else{if(this.Kit){const h=this.Wst(),o=this.Kit.hK(),a=this.Kit.u3(),l=o?o.u3():h.IW();(t<=a||l<=t)&&(this.Kit=this.qit.ket(t,this.Jit))}else this.Kit=this.qit.ket(t,this.Jit);n=this.Kit}r=n.hK()}this.$it.jc(t,n,r,s,i,e)}Xet(){const t=this.Jit.Zit(),s=t.Yet();return this.Kit=null,this.clt=this.Fet().length<=2,s}Dit(t){this.Kit=null;const s=this.Jit.Zit();s.Zet(t),this.clt=this.Fet().length<=2}mq(){return{sourceAdapterJson:this.ntt().mq(),basic:this.clt}}gq(t){t&&(this.ntt().gq(t.sourceAdapterJson),this.clt=t.basic)}}}{const Hh=self.Bs,Uh=self.mc;Hh.Hc=class extends Hh.rr{constructor(t,s=!0){super(),this.pr=t[0],this.flt=t[2],this.dlt=[];for(const i of t[1]){const e=Hh.plt.gx(this,i);this.dlt.push(e)}for(let t=0;t<this.dlt.length;t++){const n=this.dlt[t],r=this.dlt[t+1],h=this.dlt[t-1];n.Wot(r),n.tat(h)}this.mlt=new Map,this.glt=new Map,this.ylt(),s&&Uh.zc(this.pr,(t,s,i,e)=>this.jc(t,s,i,e),null,{transition:this})}static gx(t){return Hh.lr(Hh.Hc,t)}ur(){for(const t of this.dlt)t.ur();Hh.Bh(this.dlt),this.dlt=null,this.mlt.clear(),this.mlt=null,this.glt.clear(),this.glt=null}Uc(t){this.flt=!!t}wlt(t){const s=this.glt.get(t);if(s)return s;for(const i of this.dlt)if(i.Slt()===t)return this.glt.set(t,i),i}vlt(s){for(let t=this.dlt.length-1;0<=t;t--){const i=this.dlt[t],e=i.Slt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const n=t.oK();if(!n)break;if(n.Slt()!==t.Slt())break;t=n}return t}}}}jc(t,s,i,e){let n=t/e;if(this.flt){const w=this.wlt(0),S=this.wlt(1),v=s+(s+i)*w.blt(),b=(s+i)*S.blt(),M=b-v;return 0===e?v+M:Uh.qc(t,v,M,e)}0===e&&(n=1);let r=this.vlt(n),h=r.hK();if(!h){const x=r.oK(),T=r;r=x,h=T}const o=h.Slt()-r.Slt(),a=Hh.mr(n,r.Slt(),h.Slt(),0,o);if(r.Mlt()||0==o){const _=s+(s+i)*r.blt(),G=(s+i)*h.blt(),I=G-_;return 0==o?1===a?_+I:_:Uh.qc(a,_,I,o)}let l=r.Slt(),u=r.blt(),c=r.Slt()+r.xlt(),f=r.blt()+r.Tlt(),d=h.Slt()+h._lt(),p=h.blt()+h.Glt(),m=h.Slt(),g=h.blt(),y=Uh.Rc("spline")(a,l,u,c,f,d,p,m,g,this.mlt.get(r));return(1-(y+=r.blt()))*s+y*(s+i)}ylt(){this.mlt.clear();for(let t=0;t<this.dlt.length-1;t++){const s=this.dlt[t];if(s.qht()){const i=s,e=this.dlt[t+1];if(e.$ht()){const n=i.Slt(),r=i.Slt()+i.xlt(),h=e.Slt()+e._lt(),o=e.Slt();this.mlt.set(i,Uh.$c(n,r,h,o))}}}}}}{const zh=self.Bs;zh.plt=class extends zh.rr{constructor(t,s){super(),this.Ilt=t,this.Clt=s[0],this.Plt=s[1],this.Elt=s[2],this.Alt=s[3],this.Rlt=s[4],this.Flt=s[5],this.uat=s[6],this.fat=s[7],this.Dlt=s[8],this.Not=null,this.Kot=null}ur(){this.Ilt=null}static gx(t,s){return zh.lr(zh.plt,t,s)}Wot(t){this.Not=t}hK(){return this.Not}tat(t){this.Kot=t}oK(){return this.Kot}Slt(){return this.Clt}blt(){return this.Plt}xlt(){return this.Elt}Tlt(){return this.Alt}_lt(){return this.Rlt}Glt(){return this.Flt}qht(){return this.uat}$ht(){return this.fat}Mlt(){return"linear"===this.Dlt}Olt(){return"cubic"===this.Dlt}}}{const Jh=self.Bs;Jh.klt=class extends Jh.rr{constructor(t){super(),this.lf=t,this.Llt=[]}ur(){for(const t of this.Llt)t.ur();Jh.Bh(this.Llt),this.Llt=null}gx(t){this.Llt.push(Jh.Hc.gx(t))}}}{const qh=self.Bs;qh.Blt=class extends qh.rr{constructor(t){super(),this.lf=t,this.Nlt=null,this.Wlt=null,this.PY=t=>this.EY(t.I6)}ur(){if(this.NY(),this.Nlt){for(const t of this.Nlt.values())t.clear();this.Nlt.clear()}this.Nlt=null,this.lf=null}gx(t){if(this.Nlt||(this.Nlt=new Map),t){const s=t[0][16],i=s[0],e=t[1],n=(this.Nlt.has(e)||this.Nlt.set(e,new Map),this.Nlt.get(e));n.set(i,t)}}WY(){const t=this.lf.jf();t&&t.addEventListener("instancedestroy",this.PY)}NY(){const t=this.lf.jf();t&&t.removeEventListener("instancedestroy",this.PY)}Vlt(){return!!this.Nlt&&0!==this.Nlt.size}jlt(t,s){let i;if(i=t instanceof qh.Hlt?t.RF():t,this.Nlt.has(i)){const e=this.Nlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Ult(t,s){this.Wlt||(this.Wlt=new WeakMap),this.Wlt.has(t)||this.Wlt.set(t,s)}zlt(t){if(!this.Wlt)return"";const s=this.Wlt.get(t);return s||""}EY(t){this.Wlt&&this.Wlt.has(t)&&this.Wlt.delete(t)}}}{const $h=self.Bs;$h.Jlt=class{constructor(t){this.lf=t,this.qlt=new $h.$lt}ur(){this.qlt.ur(),this.qlt=null,this.lf=null}UO(){return this.lf}gx(t){this.qlt.uc(t)}Xlt(t){return this.qlt.ei(t)}Ylt(){return this.qlt.Ylt()}}}{const b=self.Bs;b.Zlt=class{constructor(t,s,i,e,n,r,h){this.lf=n.UO(),this.Klt=n,this.Qlt=t,this.tut=i,this.sut=e,this.Yg=s,this.uY=r,this.iut=h??r.JW().U5(),this.eut(),this.nut=this.hut?.rut()??-1,this.out=[],this.aut=null,this.lut=NaN,this.uut=null,this.cut=null,this.fut=null,this.dut="",this.mut=null,this.gut="",this.yut="",this.wut=0,this.Sut=!1,this.kQ=!1}ur(){this.kQ||(b.Bh(this.out),this.out=null,this.lf=null,this.Klt=null,this.sut=null,this.uY=null,this.aut=null,this.lut=NaN,this.uut&&this.uut.clear(),this.uut=null,this.cut=null,this.fut=null,this.dut="",this.mut=null,this.gut="",this.yut="",this.kQ=!0)}cr(){return this.kQ}vut(){return this.Klt}UO(){return this.lf}Kc(){return this.Qlt}but(){return this.sut}SW(){return this.Yg}QY(){return this.uY||(this.uY=this.lf.wO(this.iut).g6()),this.uY}Mut(){return this.xut(this.nut)}Tut(){const t=this.Mut();return t?t.SW():""}_ut(){const t=this.Mut();return t?t.OW():[]}Gut(t){const s=this._ut();if(!s)return!1;if(!s.length)return!1;const i=b.Zlt.vtt(t);return!(!i||!i.length)&&i.every(b.Zlt.Mtt,s)}Iut(t,s){const i=this._ut();if(!i)return!1;if(!i.length)return!1;const e=b.Zlt.vtt(t);return!(!e||!e.length)&&e.every(t=>b.Zlt.Cut.call(i,t,s))}static Mtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static vtt(t){return t.trim().split(" ")}static Cut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>b.compare(t.trim(),i,s.trim()))}Put(t){const s=this.Mut();if(s){if(b.ge(t)){const i=s.Eut(),e=i?i[t]:void 0;if(b.ge(e))return this.xut(e)}if("string"==typeof t)for(const n of s.Eut()){const r=this.xut(n);if(r.TW(t))return this.xut(r.rut())}}}Aut(t){const s=this.Put(t);return s?s.SW():""}Rut(t){const s=this.Put(t);return s?s.OW():""}Fut(t){const s=this.Mut();if(!s)return-1;const i=s.Eut();if(!i)return-1;const e=this.Put(t);return e?i.indexOf(e.rut()):-1}Dut(){const t=this.Mut();if(!t)return 0;const s=t.Eut();return s?s.length:0}xut(t){return this.sut.xut(t)}l0(){const t=this.Out();t.kut(!0)}kut(t){if(this.Lut()){for(const[s,i]of this.Lut().entries())i.kut(!1);this.Lut().clear()}if(this.uut=null,this.aut=null,this.But=null,this.cut=null,this.dut="",this.mut=null,this.gut="",this.yut="",this.out=[],t){this.Klt.Nut(this);const e=this.hut.rut();e!==this.nut&&this.Wut(e)}else this.nut=this.hut.rut()}Vut(){const t=this.sut.xut(this.nut);return t?t.Hut().jut():0}Uut(t){const s=this.zut(t);return s?s.Kc():""}Jut(t){let s;return b.ge(t)&&(s=this.zut(t)),"string"==typeof t&&(s=this.qut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.vet():""}$ut(t){let s;if(b.ge(t)&&(s=this.zut(t)),s="string"==typeof t?this.qut(t):s){const i=s.Xut();b.ge(i)&&(this.out.push(this.nut),this.Wut(i))}}Yut(t){const s=this.sut.Zut(t);if(s){const i=this.sut.xut(s.rut());i&&(this.out.push(this.nut),this.Wut(i.rut()))}}Kut(){const t=this.out.pop();b.ge(t)?this.Wut(t):this.Qut()&&(this.Klt.Nut(this.Qut(),!0,!1,!1),this.Qut().Wut(this.tct()),this.Out().sct(this.Qut()))}ict(t){const s=this.Mut();if(s){s.rut();const i=this.Put(t);i&&(this.out.push(this.nut),this.Wut(i.rut()))}}ect(s){if(b.ge(s)){const t=this.sut.xut(this.nut),i=t.Hut().nct();return!!i[s]}if("string"==typeof s){const e=this.sut.xut(this.nut),n=e.Hut().nct();for(let t=0;t<n.length;t++)if(n[t].Kc()===s)return!0}return!1}rct(){this.Sut=!0}hct(){return 0<this.wut}oct(){this.wut++}lct(){this.wut--,0===this.wut&&this.Sut&&this.Klt.uct(this)}Wut(t){const i=this.nut,s=this.QY().JW();if(this.oct(),this.Klt.cct(this),this.lf.y4(b.nX.Flowchart.iX.OnBeforeAnyNodeChange,s),this.lf.y4(b.nX.Flowchart.iX.OnBeforeTaggedNodeChange,s),this.lf.y4(b.nX.Flowchart.iX.OnBeforeAnyNodeChangeInFlowchart,s),this.lf.y4(b.nX.Flowchart.iX.OnBeforeTaggedNodeChangeInFlowchart,s),this.nut=t,this.lf.y4(b.nX.Flowchart.iX.OnAnyNodeChange,s),this.lf.y4(b.nX.Flowchart.iX.OnTaggedNodeChange,s),this.lf.y4(b.nX.Flowchart.iX.OnAnyNodeChangeInFlowchart,s),this.lf.y4(b.nX.Flowchart.iX.OnTaggedNodeChangeInFlowchart,s),this.Klt.fct(),this.lct(),!this.cr()){const e=this.xut(this.nut);if("reference"===e.wT()){const n=e.dct();if(this.pct(e)){this.out.pop();const r=this.mct(e),h=(this.Klt.Nut(r,!0,!0,!1),r.gct(this,i),this.Out());h.sct(r)}else{const o=e.yct();if(n){this.out.pop();let s=e.wct();if(s){let t=this.Klt.Sct(s);for(;t;)s=b.Z1(s),t=this.Klt.Sct(s)}else{s=n+"-ref";let t=this.Klt.Sct(s);for(;t;)s=b.Z1(s),t=this.Klt.Sct(s)}const a=this.Klt.vct(n,o,s,this.uY,!0),l=(a.gct(this,i),this.bct(e,a),this.Out());a.Mct(l),l.sct(a)}}}}}zut(t){const s=this.sut.xut(this.nut);if(!s)return null;const i=s.Hut().nct();if(!i)return null;const e=i[t];return e||null}qut(t){const s=this.sut.xut(this.nut);if(!s)return null;const i=s.Hut().xct(t);return i||null}eut(s){if("number"==typeof s){let t=this.xut(s);t=t||this.sut.Tct(),this.hut=t}else{let t=this.sut.Zut(this.tut);t=t||this.sut.Tct(),this.hut=t}}mq(){return this.Sut?null:{flowchartName:this.Qlt,flowchartTag:this.Yg,startNodeTag:this.tut,currentNodeId:this.nut,previousNodeIds:this.out,pluginUID:this.uY.JW().U5(),reference:{previousFlowchartTag:this.Qut()?this.Qut().SW():"",previousStartNodeId:b.ge(this.tct())?this.tct():NaN,referencesJson:this._ct(),currentReferenceFlowchartTag:this.Gct()?this.Gct().SW():"",rootFlowchartTag:this.Out()?this.Out().SW():""}}}_ct(){if(!this.Ict())return null;const t=[];for(const[s,i]of this.Lut().entries())t.push({flowchartElementId:s.rut(),flowchartStateTag:i.SW()});return t.length?t:null}gq(t){if(t){if(this.Qlt=t.flowchartName,this.Yg=t.flowchartTag,this.tut=t.startNodeTag,this.nut=t.currentNodeId,this.out=t.previousNodeIds,this.iut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.dut=s.previousFlowchartTag,this.lut=s.previousStartNodeId,this.mut=s.referencesJson,this.gut=s.currentReferenceFlowchartTag,this.yut=s.rootFlowchartTag}this.eut()}}Qut(){return"string"==typeof this.dut&&this.dut&&(this.aut=this.Klt.Sct(this.dut),this.dut=""),this.aut}tct(){return this.lut}gct(t,s){this.aut=t,this.lut=s}Gct(){return"string"==typeof this.gut&&this.gut&&(this.cut=this.Klt.Sct(this.gut),this.gut=""),this.cut}sct(t){this.cut=t,this.cut===this&&(this.cut=null)}Out(){return"string"==typeof this.yut&&this.yut&&(this.fut=this.Klt.Sct(this.yut),this.yut=""),this.fut||this}Mct(t){this.fut=t}Ict(){return this.Cct(),!!this.uut}pct(t){return this.Cct(),this.uut&&this.uut.has(t)}Cct(){if(this.mut){this.uut&&this.uut.clear(),this.uut||(this.uut=new Map);for(const t of this.mut){const s=this.Klt.Sct(t.flowchartStateTag),i=s.xut(t.flowchartElementId);this.uut.set(i,s)}this.mut=null}}Lut(){return this.Cct(),this.uut}mct(t){return this.Cct(),this.uut.get(t)}bct(t,s){this.uut||(this.uut=new Map),this.uut.set(t,s)}}}{const Xh=self.Bs;Xh.Pct=class{constructor(t){this.lf=t,this.Ect=new Map,this.Act=null,this.Rct=[],this.Fct=()=>this.DY(),this.Dct=null}ur(){Xh.Bh(this.Rct),this.Rct=null,this.Ect.clear(),this.Ect=null,this.Act=null,this.lf=null,this.Dct=null}UO(){return this.lf}vct(t,s,i,e,n,r){const h=this.lf.vut().Xlt(t);if(h){if(!this.Ect.has(i)){const o=new Xh.Zlt(t,i,s,h,this,e,r);return this.Ect.set(i,o),n&&this.Nut(o,!0),o}{const a=this.Ect.get(i);a&&this.uct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}uct(t){if(t.rct(),!t.hct()){const s=t.SW();this.Ect.delete(s),t.ur(),this.Act===t&&(this.Act=null)}}Oct(t){t.l0()}Sct(t){return this.Ect.get(t)}cct(t){this.Rct.push(t)}fct(){this.Rct.pop()}Nut(t,s=!1,i=!1,e=!0){if(e){const n=t.Gct();t=n||t}t!==this.Act&&(this.kct(),this.Lct(t,s,i))}Bct(t){return"string"==typeof t?this.Sct(t):this.Rct.length?this.Rct[this.Rct.length-1]:this.Act}kct(){if(this.Act&&!this.Act.cr()){const t=this.Act.QY().JW();this.Act.oct(),this.cct(this.Act),this.lf.y4(Xh.nX.Flowchart.iX.OnBeforeFlowchartChange,t),this.fct(),this.Act.lct()}}Lct(t,s=!1,i=!1){if(this.Act=t,this.Act&&!this.Act.cr()){const e=this.Act.QY().JW();this.Act.oct(),this.cct(this.Act),this.lf.y4(Xh.nX.Flowchart.iX.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Act.eut(i),s&&(this.lf.y4(Xh.nX.Flowchart.iX.OnAnyNodeChange,e),this.lf.y4(Xh.nX.Flowchart.iX.OnTaggedNodeChange,e)),this.fct(),this.Act.lct()}}mq(){return{flowchartJsonObjects:[...this.Ect.values()].map(t=>t.mq()),currentFlowchartTag:this.Act?this.Act.SW():null}}gq(t){if(t){this.Dct=t;const s=new Map;for(const i of this.Dct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Ect.has(e)){const n=this.Ect.get(e);n.gq(i),s.set(e,n)}else{const r=this.vct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.gq(i),s.set(i.flowchartTag,r)}}for(const[h,o]of this.Ect.entries())s.has(h)||o.ur();this.Ect.clear(),this.Ect=s,this.lf.$$()?this.lf.jf().addEventListener("afterload",this.Fct):this.DY()}}DY(){this.lf.jf().removeEventListener("afterload",this.Fct);const t=this.Ect.get(this.Dct.currentFlowchartTag);t&&this.Nut(t,!0),this.Dct=null}}}{const Yh=self.Bs;Yh.$lt=class{constructor(){this.Nct=new Map}ur(){for(const t of this.Nct.values())t.ur();this.Nct.clear(),this.Nct=null}uc(t){const s=new Yh.Wct(t),i=s.Kc();this.Nct.set(i,s)}ei(t){return this.Nct.get(t)}Ylt(){return!!this.Nct.size}static Vct(t,s,i,e){if(s)for(const n of s){const r=new i(n,e);t.push(r)}}}}{const Zh=self.Bs;Zh.Wct=class{constructor(t){this.pr=t[0],this.jct=new Zh.Hct(t[1],this)}ur(){this.jct.ur(),this.jct=null}Uct(){return this.jct}xut(t){return this.jct.xut(t)}Zut(t){return this.jct.Zut(t)}Tct(){return this.jct.Tct()}Kc(){return this.pr}}}{const Kh=self.Bs;class Qh{constructor(t,s){this.jct=s,this.yf=t[7],this.zct=t[0],this.Yg=t[1],this.Yg?this.UQ=this.Yg.trim().split(" ").map(t=>t.trim()):this.UQ=[],this.Jct=t[2],this.qct=null,this.$ct=null,"dictionary"===this.yf&&(this.qct=t[3],this.$ct=t[4]),this.Xct=t[6],this.Yct=null,this.Zct=null,this.Kct=null,"reference"===this.yf&&(this.Yct=t[8],this.Zct=t[9],this.Kct=t[10]),this.Qct=new Kh.tft(t[5],this)}ur(){this.jct=null}Uct(){return this.jct}Hut(){return this.Qct}rut(){return this.zct}SW(){return this.Yg}OW(){return this.UQ}TW(t){if(!this.UQ)return!1;if(!this.UQ.length)return!1;const s=Kh.Zlt.vtt(t);return!(!s||!s.length)&&s.every(Kh.Zlt.Mtt,this.UQ)}ift(){return this.Xct}Eut(){return this.Jct}eft(){return this.qct}nft(){return this.$ct}wT(){return this.yf}dct(){return this.Yct}yct(){return this.Zct}wct(){return this.Kct}}Kh.Hct=class{constructor(t,s){this.sut=s,this.rft=[],this.hft=new Map,this.oft=new Map,this.aft=null,Kh.$lt.Vct(this.rft,t,Qh,this);for(const i of this.rft){const e=i.rut(),n=i.SW(),r=i.OW(),h=i.ift();if(this.hft.set(e,i),n)for(const a of r)this.oft.has(a)||this.oft.set(a,new Set),this.oft.get(a).add(i);h&&(this.aft=i);const o=i.Hut();for(const l of o.lft()){const u=l.rut();this.hft.set(u,l)}}}ur(){this.sut=null;for(const t of this.rft)t.ur();Kh.Bh(this.rft),this.rft=null}but(){return this.sut}xut(t){return this.hft.get(t)}Zut(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.oft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Tct(){return this.aft}*uft(){for(const t of this.rft)yield t}}}{const to=self.Bs;class so{constructor(t,s){this.Qct=s,this.zct=t[0],this.pr=t[1],this.Rnt=t[2],this.cft=t[3]}ur(){this.Qct=null}Hut(){return this.Qct}rut(){return this.zct}Kc(){return this.pr}vet(){return this.Rnt}Xut(){return this.cft}}to.tft=class{constructor(t,s){this.fft=s,this.dft=[],this.pft=new Map,to.$lt.Vct(this.dft,t,so,this);for(const i of this.dft)this.pft.set(i.Kc(),i)}ur(){this.fft=null;for(const t of this.dft)t.ur();to.Bh(this.dft),this.dft=null}mft(){return this.fft}jut(){return this.dft.length}nct(){return this.dft}xct(t){return this.pft.get(t)}*lft(){for(const t of this.dft)yield t}}}{const io=self.Bs;io.gft=class extends io.rr{constructor(t){super(),this.yft=t,this.wft=[],this.wft.push(io.lr(io.Sft,this)),this.Xg=0,this.vft=this.wft[0]}ur(){for(const t of this.wft)t.ur();io.Bh(this.wft),this.vft=null,this.yft=null}E5(){return this.yft}LL(){return this.vft}bft(){return this.wft[this.Xg-1]}tc(){this.LL().tc()}Mft(){const t=this.wft,s=++this.Xg;if(s===t.length){const i=io.lr(io.Sft,this);t.push(i),this.vft=i}else{const e=t[s];e.l0(),this.vft=e}}xft(){const t=this.wft,s=++this.Xg,i=(s===t.length&&t.push(io.lr(io.Sft,this)),t[s]);i.C0(t[s-1]),this.vft=i}Yj(){this.vft=this.wft[--this.Xg]}Tft(i){const e=this.wft;for(let t=0,s=e.length;t<s;++t)e[t].Tft(i)}}}{const eo=self.Bs;eo.Sft=class extends eo.rr{constructor(t){super(),this.wft=t,this.yft=this.wft.E5(),this._ft=this.yft.UO().MD(),this.Gft=!0,this.LU=[],this.Ift=[]}ur(){this.Cft(),this.wft=null,this.yft=null,this._ft=null}Cft(){eo.Bh(this.LU),eo.Bh(this.Ift)}E5(){return this.yft}Pft(){return this.Gft}Eft(){return this.Gft?!!this.yft.NL():!!this.LU.length}kL(){return this.Gft?this.yft.kL():this.LU}Aft(){return!!this.Ift.length}Rft(){return this.Ift}Fft(){const t=this.kL();return t.length?t:this.Ift}l0(){this.Gft=!0,eo.Bh(this.Ift)}tc(){this.Gft=!0}C0(t){t.Pft()?this.l0():(this.Gft=!1,eo.jh(this.LU,t.LU),eo.Bh(this.Ift))}Dft(t){this.LU.push(t)}Oft(t){this.Ift.push(t)}kft(t){this.Gft=!!t}Lft(){return this.LU}Bft(){return this.Ift}Nft(t){this.Gft=!1,eo.Bh(this.LU),this.LU.push(t)}Wft(t){this.Gft=!1,eo.jh(this.LU,t)}Vft(t){this.Gft=!1,eo.Bh(this.LU);for(const s of t)this.LU.push(s)}jft(t,s){for(const i of s)t.has(i)||this.Ift.push(i)}Hft(t){for(const s of t)this.LU.push(s);eo.qh(this.Ift,t)}Uft(){eo.Bh(this.Ift)}zft(t){if(t)if(this._ft.Bj().mD().Jft()){this.Pft()&&(eo.Bh(this.LU),eo.jh(this.Ift,t.E5().kL()),this.Gft=!1);const s=this.Ift.indexOf(t);-1!==s&&(this.LU.push(this.Ift[s]),this.Ift.splice(s,1))}else this.Nft(t)}Tft(t){eo.qh(this.LU,t),eo.qh(this.Ift,t)}}}{const no=self.Bs;no.qft=class extends no.rr{constructor(t){super(),this.$ft=t,this.lf=this.$ft.UO(),this.wft=[],this.wft.push(no.lr(no.Xft,this,null)),this.Xg=0,this.Yft=[]}ur(){for(const t of this.wft)t.ur();no.Bh(this.wft),no.Bh(this.Yft),this.$ft=null,this.lf=null}lD(){return this.$ft}UO(){return this.lf}Bj(){return this.wft[this.Xg]}Zft(){return this.wft}Kft(){return this.Xg}Nj(t){const s=this.wft,i=++this.Xg;if(i===s.length){const e=no.lr(no.Xft,this,t);return s.push(e),e}{const n=s[i];return n.l0(t),n}}Yj(){--this.Xg}Qft(t){this.Yft.push(t)}t0t(){this.Yft.pop()}bD(){const t=this.Yft;return 0===t.length?null:t.at(-1)}}}{const ro=self.Bs;ro.Xft=class extends ro.rr{constructor(t,s){super(),this.wft=t,this.lf=this.wft.UO(),this.s0t=s,this.i0t=0,this.e0t=0,this.n0t=!1,this.r0t=!1,this.h0t=null,this.o0t=0,this.a0t=0,this.l0t=null}ur(){this.l0(null),this.wft=null,this.lf=null}l0(t){this.s0t=t,this.i0t=0,this.e0t=0,this.n0t=!1,this.r0t=!1,this.l0t=null}u0t(t,s){this.s0t=t,this.i0t=0,this.e0t=s}c0t(){this.i0t=0,this.e0t=0}mD(){return this.s0t}f0t(t){this.s0t=t}d0t(){return this.i0t}p0t(t){this.i0t=t}m0t(){return this.e0t}g0t(t){this.e0t=t}y0t(t){this.n0t=!!t}w0t(){return this.n0t}S0t(t){this.r0t=!!t}v0t(){return this.r0t}b0t(t){this.h0t=t}M0t(){return this.h0t}x0t(t,s){this.o0t=t,this.a0t=s}xD(){return this.o0t}TD(t){this.a0t=t}T0t(){return this.a0t}_0t(){const t=this.s0t;return!!t.G0t()||this.i0t<t.I0t()-1&&!!t.Lj().length}C0t(t){this.l0t=t}P0t(){return this.l0t}}}{const ho=self.Bs;ho.E0t=class extends ho.rr{constructor(t){super(),this.$ft=t,this.lf=this.$ft.UO(),this.wft=[],this.Xg=-1,this.vft=null,this.A0t=[]}ur(){ho.Bh(this.wft),this.$ft=null,this.lf=null}R0t(t){this.A0t=t;const s=this.A0t.slice(0);this.wft.push(s),this.Xg=0,this.vft=s}lD(){return this.$ft}UO(){return this.lf}F0t(){return this.vft}Nj(){const t=++this.Xg,s=this.wft;t===s.length?s.push(this.A0t.slice(0)):ho.jh(s[t],this.A0t),this.vft=s[t]}Yj(){this.vft=this.wft[--this.Xg]}}}{const oo=self.Bs;oo.D0t=class extends oo.rr{constructor(t){super(),this.$ft=t,this.lf=this.$ft.UO(),this.wft=[],this.Xg=-1}ur(){oo.Bh(this.wft),this.$ft=null,this.lf=null}lD(){return this.$ft}UO(){return this.lf}O0t(){return 0<=this.Xg}F0t(){return this.wft[this.Xg]}Nj(){if(++this.Xg,this.Xg===this.wft.length){const t=oo.lr(oo.k0t,this);return this.wft.push(t),t}{const s=this.wft[this.Xg];return s.l0(),s}}Yj(){--this.Xg}L0t(s){const i=this.wft;for(let t=this.Xg;0<=t;--t){const e=i[t];if(e.Kc()===s)return e}return null}B0t(){return this.wft.slice(0,this.Xg+1)}}}{const ao=self.Bs;ao.k0t=class extends ao.rr{constructor(t){super(),this.N0t=t,this.pr="",this.Xg=0,this.W0t=!1,this.V0t=NaN}l0(){this.pr="",this.Xg=0,this.W0t=!1,this.V0t=NaN}Vj(t){this.pr=t}Kc(){return this.pr}qj(t){this.Xg=t}RF(){return this.Xg}MW(){this.W0t=!0}Xj(){return this.W0t}j0t(t){this.V0t=t}H0t(){return this.V0t}}}{const lo=self.Bs;lo.U0t=class extends lo.rr{constructor(){super(),this.wft=[],this.Xg=-1}ur(){lo.Bh(this.wft)}F0t(){return this.wft[this.Xg]}Nj(){if(++this.Xg,this.Xg!==this.wft.length)return this.wft[this.Xg];{const t=[];return this.wft.push(t),t}}Yj(){--this.Xg}}}{let t=function(t,s){return t.RF()-s.RF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const uo=self.Bs;uo.z0t=class extends uo.rr{constructor(t){super(),this.lf=t,this.J0t=[],this.q0t=new Map,this.$0t=[],this.X0t=new Map,this.Y0t=new Map,this.Z0t=new Map,this.K0t=new Map,this.Q0t=new Map,this.tdt=new Map,this.sdt=0,this.idt=[],this.edt=[],this.ndt=[],this.rdt=new Map,this.hdt=new Map,this._ft=uo.lr(uo.qft,this),this.odt=uo.lr(uo.E0t,this),this.N0t=uo.lr(uo.D0t,this),this.adt=[],this.ldt=[],this.udt=[],this.cdt=0,this.fdt=0,this.ddt=0,this.pdt=[],this.mdt=[],this.gdt=[],this.ydt=new Map,this.wdt=new Map,self.c3_callFunction=(t,s)=>this.Sdt(t,s)}ur(){this.yX(),this._ft.ur(),this._ft=null,this.odt.ur(),this.odt=null,uo.Bh(this.ldt),uo.Bh(this.udt),this.lf=null,uo.Bh(this.J0t),this.q0t.clear()}gx(t){const s=uo.lr(uo.vdt,this,t);this.J0t.push(s),this.q0t.set(s.Kc().toLowerCase(),s)}bdt(t){this.adt.push(t)}Mdt(){for(const t of this.hdt.values())t.xdt();for(const s of this.rdt.values())s.Mdt();for(const i of this.hdt.values())i.Mdt();for(const e of this.J0t)e.Mdt();for(const n of this.J0t)n.L$();for(const r of this.adt)r.Mdt(!1);uo.Bh(this.adt),this.odt.R0t(this.ndt)}UO(){return this.lf}k$(t){return this.q0t.get(t.toLowerCase())||null}Tdt(t){this.$0t.push(t),this.X0t.set(t._dt(),t)}Gdt(t){this.Y0t.set(t.Zz(),t)}Idt(t){this.Z0t.set(t.Zz(),t)}Cdt(t){this.K0t.set(t.Zz(),t)}Pdt(t){switch(t.Edt()){case 0:this.rdt.set(t.Adt().toLowerCase(),t);break;case 1:this.hdt.set(t.Adt().toLowerCase(),t)}}Rdt(t){this.tdt.set(t.Zz(),t),(t.Cz()?this.idt:this.edt).push(t)}Fdt(i){2<=i.length&&i.sort(t);let e=this.Q0t.get(i.length);e||(e=[],this.Q0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const n=e[t];if(r(i,n))return n}return e.push(i),i}Ddt(t){return this.ndt.push(t.Odt()),this.sdt++}MD(){return this._ft}kdt(){return this.MD().Bj()}mD(){return this.kdt().mD()}Ldt(){const t=this.kdt(),s=t.mD();return s.Bdt(t.d0t())}Ndt(){const t=this.kdt(),s=t.mD();return s.Wdt(t.m0t())}Vdt(){return this.odt}Wj(){return this.N0t}jdt(t){const s=[];for(t=t.Hdt();t;)uo.Xn(s,t.Udt()),t=t.Hdt();return s}zdt(t){const s={};for(const i of this.jdt(t))s[i.Jdt()]=i.qdt();return Object.create(Object.prototype,s)}$dt(t){return this.tdt.get(t)||null}Xdt(t){return this.Y0t.get(t)||null}Ydt(t){return this.Z0t.get(t)||null}Zdt(t){return this.K0t.get(t)||null}uD(t){return this.rdt.get(t.toLowerCase())||null}Kdt(t,s){let i=this.hdt.get((t.Kc()+"."+s).toLowerCase());if(i)return i;if(!t.jz())for(const e of t.Qdt())if(i=this.hdt.get((e.Kc()+"."+s).toLowerCase()))return i;return null}t1t(){return this.idt}s1t(){return this.edt}i1t(t){for(const s of this.idt)s.e1t();if(t)for(const i of this.edt)i.cM()&&i.e1t()}n1t(t){return this.X0t.get(t.toLowerCase())||null}r1t(t){const s=this.Y0t.get(t);return s&&s.h1t()?s:null}o1t(){return this.$0t}a1t(){for(const t of this.$0t)t.l1t()}u1t(){for(const t of this.J0t)t.c1t()}f1t(t){this.u1t(),this.cdt++;for(const s of t.sY()){const i=s.u$();i&&(this.lf.d1t(s),i.kG(),this.lf.p1t())}this.cdt--}async m1t(t){this.u1t(),this.cdt++;for(const s of this.g1t(t))await this.lf.y1t(s);this.cdt--}*g1t(t){for(const s of t.sY()){const i=s.u$();i&&(this.lf.d1t(s),yield*i.w1t(),this.lf.p1t())}}S1t(t,s,i,e){let n=!1;if(!t.sO())return this.v1t(s,i,e);this.fdt++;for(const r of t.sY()){const h=r.u$();if(h){this.lf.d1t(r);for(const a of h.b1t()){const l=a.S1t(s,i,e);n=n||l}const o=h.S1t(s,i,e);n=n||o,this.lf.p1t()}}return this.fdt--,n}*M1t(t,s,i,e){let n=!1;if(!t.sO())return this.v1t(s,i,e);this.fdt++;for(const r of t.sY()){const h=r.u$();if(h){this.lf.d1t(r);for(const a of h.b1t()){const l=yield*a.M1t(s,i,e);n=n||l}const o=yield*h.M1t(s,i,e);n=n||o,this.lf.p1t()}}return this.fdt--,n}v1t(t,s,i){return this.ldt.push([t,s,i]),!1}x1t(t,s,i){let e=null,n=new Promise(t=>e=t);return this.udt.push([t,s,i,e]),n}*T1t(){if(this.lf._1t())throw new Error("should not be in breakpoint");const t=this.lf.nO();for(;this.udt.length;){const[s,i,e,n]=this.udt.shift(),r=yield*this.M1t(t,s,i,e);n(r)}}async G1t(){for(const t of this.T1t())await this.lf.y1t(t)}I1t(t,i,e,n){let r=!1,s=t.sO(),h=s.u$();if(h){this.fdt++,this.lf.d1t(s);const o=h.b1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].I1t(i,e,n);r=r||l}const a=h.I1t(i,e,n);return r=r||a,this.lf.p1t(),this.fdt--,r}}*C1t(t,i,e,n){let r=!1,s=t.sO(),h=s.u$();if(h){this.fdt++,this.lf.d1t(s);const o=h.b1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].C1t(i,e,n);r=r||l}const a=yield*h.C1t(i,e,n);return r=r||a,this.lf.p1t(),this.fdt--,r}}P1t(){return this.fdt}E1t(){return 0<this.P1t()}A1t(){return++this.fdt}R1t(){--this.fdt}F1t(){return 0<this.cdt}zL(){return this.F1t()||this.E1t()}rX(t){for(const[s,i,e]of this.ldt)this.S1t(t,s,i,e);uo.Bh(this.ldt)}HL(t){t?this.ddt++:this.ddt--}B5(){return 0<this.ddt}D1t(i){for(let t=0,s=i.length;t<s;++t)i[t].O1t().tc()}k1t(i){for(let t=0,s=i.length;t<s;++t)i[t].O1t().Mft()}Uj(i){for(let t=0,s=i.length;t<s;++t)i[t].O1t().xft()}Jj(i){for(let t=0,s=i.length;t<s;++t)i[t].O1t().Yj()}gD(s){const i=new Set,e=this._ft.Zft(),n=this._ft.Kft();for(let t=0;t<=n;++t){const r=e[t].P0t();if(r)for(const h of r)s&&s.has(h)||i.add(h)}return i}L1t(t){const s=new Set([...t]),i=this.gD(s);if(0<i.size){for(const e of i)e.O1t().Mft();return[...i]}return null}B1t(){const t=uo.lr(uo.N1t,this);return this.pdt.push(t),t}W1t(){return this.pdt}V1t(){if(this.pdt.length){let i=this.kdt(),e=!1;this.cdt++;for(let t=0,s=this.pdt.length;t<s;++t){const n=this.pdt[t];n.j1t()&&n.H1t(i),n.U1t()&&(e=!0)}e&&(this.z1t(),i.l0(null)),this.cdt--}}async J1t(){if(this.pdt.length){let i=this.kdt(),e=!1;this.cdt++;for(let t=0,s=this.pdt.length;t<s;++t){const n=this.pdt[t];n.j1t()&&await n.q1t(i),n.U1t()&&(e=!0)}e&&(this.z1t(),i.l0(null)),this.cdt--}}z1t(){const t=uo.Jh(this.pdt,t=>t.U1t());for(const s of t)s.ur()}yX(){for(const t of this.pdt)t.ur();uo.Bh(this.pdt)}$1t(t){for(const s of this.pdt)s.Tft(t);for(const i of t){const e=this.wdt.get(i);if(this.wdt.delete(i),e)for(const{resolve:n}of e.X1t.values())n(!0)}}Y1t(t){this.mdt.push({promise:t,Z1t:this.P1t()})}K1t(){uo.Bh(this.mdt)}Q1t(){const s=this.P1t();this.mdt=this.mdt.filter(t=>t.Z1t<=s)}tpt(){const t=Promise.all(this.mdt.map(t=>t.promise));return this.mdt=[],t}_D(t){const s=t.toLowerCase();this.gdt.push(s),this.lf.y4(uo.nX.eX.iX.spt,null),this.gdt.pop();for(const e of this.lf.lD().W1t())e.ipt()&&e.ept()===s&&e.npt();const i=this.ydt.get(s);i&&(i.resolve(),this.ydt.delete(s))}ID(t){const i=t.toLowerCase(),s=this.ydt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.ydt.set(i,{promise:t,resolve:s}),t}}rpt(){if(0===this.gdt.length)throw new Error("not in a signal");return this.gdt.at(-1)}hpt(t){let s=this.wdt.get(t);return s||(s={opt:[],X1t:new Map},this.wdt.set(t,s)),s}i4(t,s){const i=this.hpt(t),e=s.toLowerCase();i.opt.push(e),this.lf.y4(t._L().lpt().iX.apt,t),i.opt.pop();for(const r of this.lf.lD().W1t())r.upt()&&r.ept()===e&&r.cpt(t);const n=i.X1t.get(e);n&&(n.resolve(!1),i.X1t.delete(e)),0===i.opt.length&&0===i.X1t.size&&this.wdt.delete(t)}e4(t,s){const i=this.hpt(t),e=s.toLowerCase(),n=i.X1t.get(e);if(n)return n.promise;{let s=null,t=new Promise(t=>s=t);return i.X1t.set(e,{promise:t,resolve:s}),t}}fpt(t){const s=this.hpt(t);if(s&&0!==s.opt.length)return s.opt.at(-1);throw new Error("not in a signal")}mq(){return{groups:this.dpt(),cnds:this.ppt(),acts:this.mpt(),vars:this.gpt(),waits:this.ypt()}}gq(t){this.wpt(t.groups),this.Spt(t.cnds),this.vpt(t.acts),this.bpt(t.vars),this.Mpt(t.waits)}dpt(){const t={};for(const s of this.o1t())t[s.Zz().toString()]=s.xpt();return t}wpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.r1t(e);n&&n.Tpt(i)}}ppt(){const t={};for(const[s,i]of this.Z0t){const e=i.mq();e&&(t[s.toString()]=e)}return t}Spt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.Z0t)r.gq(s.get(n)||null)}mpt(){const t={};for(const[s,i]of this.K0t){const e=i.mq();e&&(t[s.toString()]=e)}return t}vpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.K0t)r.gq(s.get(n)||null)}gpt(){const t={};for(const[s,i]of this.tdt)i._pt()||!i.Cz()&&!i.cM()||(t[s.toString()]=i.vet());return t}bpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.$dt(e);n&&n.int(i)}}ypt(){return this.pdt.filter(t=>!t.Gpt()).map(t=>t.mq())}Mpt(t){this.yX();for(const s of t){const i=uo.N1t.Ipt(this,s);i&&this.pdt.push(i)}}Cpt(){return[...this.lf.nO().sY()].map(t=>t.u$()).filter(t=>t).map(t=>t.Ppt())}Ept(t){for(;t;){const s=t.Hdt();if(s instanceof uo.Apt)return s;t=s}return null}Sdt(t,s){Array.isArray(s)||(s=[]);const i=this.uD(t.toLowerCase());if(!i)return null;if(!i.Zu())return i.cD();const e=i.Rpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Odt()),s.length<e.length;);const n=i.dD();return n.yD(n.pD(),!1,i.SD(),i.cD(),...s)}}}{const co=self.Bs;co.vdt=class extends co.rr{constructor(t,s){super(),this.$ft=t,this.lf=t.UO(),this.pr=s[0],this.Fpt=[],this.Dpt=new Map,this.Opt=new Map,this.kpt=new Map,this.Lpt=!1,this.Bpt=[],this.Npt=[],this.Wpt=new Set;for(const i of s[1])this.Vpt(i,null,this.Fpt);this.jpt=this.lf.kX()?{type:"sheet",name:this.pr,Hpt:0,children:[]}:null}ur(){this.$ft=null,this.lf=null}Vpt(t,s,i){switch(t[0]){case 0:case 3:this.Upt(t,s,i);break;case 1:this.zpt(t,s,i);break;case 2:this.Jpt(t,s,i);break;case 4:this.qpt(t,s);break;case 5:this.$pt(t,s,i);break;case 6:this.Xpt(t,s);break;default:throw new Error("invalid event type")}}Upt(t,s,i){const e=co.Ypt.gx(this,s,t);if(e.Jft()){i.push(e);const n=e.Zpt();for(let t=0,s=n.length;t<s;++t)n[t].Kpt()&&this.Qpt(e,t)}else e.Kpt()?this.Qpt(e,0):i.push(e)}qpt(t,s){const i=co.Apt.tmt(this,s,t);this.$ft.Pdt(i)}Xpt(t,s){const i=co.Apt.smt(this,s,t);this.$ft.Pdt(i)}zpt(t,s,i){const e=co.imt.gx(this,s,t);i.push(e)}Jpt(t,s,i){const e=co.emt.gx(this,s,t);i.push(e)}$pt(t,s,i){const e=co.nmt.gx(this,s,t);i.push(e)}Qpt(n,r){n.Jft()||this.$ft.bdt(n);const h=n.Bdt(r),o=h.rmt(),a=h.E5();if(h.hmt()){let t=this.Opt.get(a),s=(t||(t=new Map,this.Opt.set(a,t)),h.omt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([n,r])}else{let t=this.Dpt.get(a),s=(t||(t={amt:new Map,lmt:new Map},this.Dpt.set(a,t)),h.G6()),i,e=(s?(i=t.lmt.get(s))||(i=new Map,t.lmt.set(s,i)):i=t.amt,i.get(o));e||(e=[],i.set(o,e)),e.push([n,r])}}Mdt(){const i=this.Fpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof co.Ypt&&i[t+1].umt();i[t].Mdt(e)}}cmt(t){this.Bpt.push(t)}L$(){co.Bh(this.Npt),this.fmt(this),this.Wpt.clear()}fmt(t){const s=t.Npt,i=t.Wpt;for(const e of this.Bpt){const n=e.dmt();e.pmt()&&t!==n&&!i.has(n)&&(i.add(n),n.fmt(t),s.push(n))}}b1t(){return this.Npt}lD(){return this.$ft}UO(){return this.lf}Kc(){return this.pr}mmt(t,s){this.kpt.set(s,t)}gmt(t){return this.kpt.get(t)||null}c1t(){this.Lpt=!1}kG(){if(!this.Lpt){const t=this.lf,s=t.ymt(),i=s?performance.now():0,e=(this.Lpt=!0,this.lD()),n=e.kdt();for(const r of this.Fpt)r.kG(n),e.D1t(r.Lj()),e.K1t(),t.qL();n.l0(null),s&&(this.jpt.Hpt+=performance.now()-i)}}*w1t(){if(!this.Lpt){this.Lpt=!0;const t=this.lf,s=this.lD(),i=s.kdt();for(const e of this.Fpt)yield*e.w1t(i),s.D1t(e.Lj()),s.K1t(),t.qL();i.l0(null)}}S1t(e,n,r){if(!n)return this.wmt(e,n,null,null);{let t=n.E5(),s=!1,i=this.wmt(e,n,t,r);s=s||i;for(const h of t.Qdt())i=this.wmt(e,n,h,r),s=s||i}}wmt(t,s,i,e){const n=this.Dpt.get(i);if(!n)return!1;const r=e?n.lmt.get(e):n.amt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const u=this.Smt(s,a,l);o=o||u}return o}*M1t(e,n,r){if(!n)return yield*this.vmt(e,n,null,null);{let t=n.E5(),s=!1,i=yield*this.vmt(e,n,t,r);s=s||i;for(const h of t.Qdt())i=yield*this.vmt(e,n,h,r),s=s||i}}*vmt(t,s,i,e){const n=this.Dpt.get(i);if(!n)return!1;const r=e?n.lmt.get(e):n.amt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.bmt()?this.Smt(s,a,l):yield*this.Mmt(s,a,l),o=o||t}return o}I1t(t,s,i){const e=s.E5(),n=this.Opt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=this.Smt(null,a[0],a[1]);o=o||l}return o}*C1t(t,s,i){const e=s.E5(),n=this.Opt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let n=0,t=h.length;n<t;++n){let t=h[n],s=t[0],i=t[1],e;e=s.bmt()?this.Smt(null,s,i):yield*this.Mmt(null,s,i),o=o||e}return o}Smt(t,s,i){let e=this.lf,n=this.$ft,r=n.mD(),h=n.MD(),o=n.P1t(),a=!1;r&&n.k1t(r.pD()),n.k1t(s.pD());const l=1<o,u=(l&&n.Vdt().Nj(),h.Nj(s));if(t){const f=s.Zpt()[i].E5(),d=f.LL();d.Nft(t),t.j5()&&t.xmt()}let c=!0;if(s.MN()){const p=s.Tmt();for(let t=0,s=p.length;t<s;++t)if(!p[t]._mt(u)){c=!1;break}}return c&&(s.Jft()?s.Gmt(u,i):s.kG(u),a=u.w0t()),h.Yj(),l&&n.Vdt().Yj(),n.Jj(s.pD()),r&&n.Jj(r.pD()),r||1!==o||(n.K1t(),n.B5())||e.qL(),a}*Mmt(t,s,i){let e=this.lf,n=this.$ft,r=n.mD(),h=n.MD(),o=n.P1t(),a=!1;r&&n.k1t(r.pD()),n.k1t(s.pD());const l=1<o,u=(l&&n.Vdt().Nj(),h.Nj(s));if(t){const f=s.Zpt()[i].E5(),d=f.LL();d.Nft(t),t.j5()&&t.xmt()}let c=!0;if(s.MN()){const p=s.Tmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Imt(u))){c=!1;break}}return c&&(s.Jft()?yield*s.Cmt(u,i):yield*s.w1t(u),a=u.w0t()),h.Yj(),l&&n.Vdt().Yj(),n.Jj(s.pD()),r&&n.Jj(r.pD()),r||1!==o||(n.K1t(),n.B5())||e.qL(),a}Ppt(){return this.jpt}}}{let u=function(t,s){return!0};u;const fo=self.Bs,po=[];function*N(t,s){return!0}fo.Ypt=class extends fo.rr{constructor(t,s,i){super(),this.Pq=t,this.lf=t.UO(),this.Pmt=s,this.Emt=null,this._ft=this.lf.lD().MD(),this.Amt=[],this.Rmt=[],this.Fmt=!1,this.Dmt=!1,this.Omt=!1,this.kmt=!1,this.Lmt=!!i[2],this.Bmt=!1,this.Nmt=null,this.Wmt=[],this.knt=[],this.Vmt=[],this.jmt=u,this.Hmt=N,this.Umt=!1,this.zmt=!1,this.Jmt="",this.qmt=!1,this.$mt=null,this.jpt=null,this.m7=i[4],this.Xmt=i[5],this.Pq.mmt(this,this.Xmt),this.Ymt=this.lf.kX()?{Zmt:i[3][0],Kmt:i[3][1],Qmt:!1,tgt:!1,sgt:!1,igt:!1}:null,this.lD().Gdt(this),3===i[0]&&this.egt(i[1]);let e=0;for(const n of i[6]){const r=fo.ngt.gx(this,n,e++);this.Wmt.push(r),this.rgt(r.E5())}e=0;for(const h of i[7]){const o=fo.hgt.gx(this,h,e++);this.knt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Pq.Vpt(l,this,this.Vmt)}this.Wmt.length&&(this.Bmt=null===this.Wmt[0].E5()&&this.Wmt[0].rmt()===fo.nX.eX.iX.ogt),0===this.Wmt.length&&(this.Wmt=po),0===this.knt.length&&(this.knt=po),0===this.Vmt.length&&(this.Vmt=po)}static gx(t,s,i){return fo.lr(fo.Ypt,t,s,i)}egt(t){this.Umt=!0,this.zmt=!!t[0],this.qmt=this.zmt,this.Jmt=t[1].toLowerCase(),this.$mt=[],this.lD().Tdt(this),this.lf.kX()&&(this.jpt={type:"group",name:t[1],Hpt:0,children:[]})}agt(t){this.$mt.push(t)}lgt(t,s){for(const i of t.x$().lX())s.includes(i)||s.push(i)}ugt(t,s){if(t)if(s.includes(t)||s.push(t),t.jz())for(const i of t.cgt())i.j5()&&this.lgt(i,s);else t.j5()&&this.lgt(t,s)}rgt(t){this.ugt(t,this.Amt)}fgt(t){this.ugt(t,this.Rmt)}dgt(){this.Amt=this.lf.Vz()}Mdt(t){this.kmt=!!t,this.pgt(),this.mgt();for(const s of this.Wmt)s.Mdt();if(0<this.knt.length){let t=!1;for(const e of this.knt)e.Mdt(),e.ggt()&&(t=!0);t?(this.jmt=this.ygt,this.Hmt=this.wgt):(this.jmt=this.Sgt,this.Hmt=this.vgt)}const i=this.Vmt;for(let t=0,s=i.length;t<s;++t){const n=t<s-1&&i[t+1]instanceof fo.Ypt&&i[t+1].umt();i[t].Mdt(n)}this.Ymt&&this.bgt(),this.jpt&&this.Mgt().Ppt().children.push(this.jpt)}Ppt(){return this.jpt}Mgt(){let t=this.MN();for(;t;){if(t.h1t())return t;t=t.MN()}return this.Pq}bgt(){const t=this.Ymt;t.Qmt=this.Wmt.every(t=>t.bmt()),t.tgt=this.knt.every(t=>t.bmt()),t.sgt=this.Vmt.every(t=>t.bmt()),t.igt=t.Qmt&&t.tgt&&t.sgt}xgt(){let t=this;for(;t.bgt(),t=t.MN(););}pgt(){if(this.h1t()){let t=this.MN();for(this.Omt=!0;t;){if(!t.h1t()){this.Omt=!1;break}t=t.MN()}}}Tgt(){const t=this.lf.Vz();if(this.Amt===t)this.Rmt=t;else{this.Rmt=fo.Yh(this.Amt);let t=this.MN();for(;t;){for(const i of t.Amt)this.fgt(i);t=t.MN()}const s=this.lD();this.Amt=s.Fdt(this.Amt),this.Rmt=s.Fdt(this.Rmt)}}mgt(){if(this._gt()){this.Nmt=[];let t=this.MN();for(;t;)this.Nmt.push(t),t=t.MN();this.Nmt.reverse()}}Ggt(){this.Dmt=!0,this.Pmt&&this.Pmt.Ggt()}G0t(){return this.Dmt}Lj(){return this.Amt}pD(){return this.Fmt||(this.Fmt=!0,this.Tgt()),this.Rmt}Igt(t){return this.Amt.includes(t)}Tmt(){return this.Nmt}u$(){return this.Pq}lD(){return this.Pq.lD()}UO(){return this.lf}MN(){return this.Pmt}Cgt(t){this.Emt=t}Hdt(){return this.Emt||this.Pmt}Pgt(){return this.Xmt}Egt(){return this.Ymt&&this.Ymt.Kmt}Agt(){return this.Egt()&&this.Ymt.Zmt}Rgt(t){this.Ymt.Zmt=!!t,this.xgt()}h1t(){return this.Umt}Fgt(){return this.Omt}umt(){return this.Bmt}Dgt(){return this.kmt}_dt(){return this.Jmt}xpt(){return this.qmt}l1t(){this.Tpt(this.zmt)}Tpt(t){if(t=!!t,!this.Umt)throw new Error("not a group");if(this.qmt!==t){this.qmt=t;for(const s of this.$mt)s.Ogt();if(this.$mt.length){const i=this.lf.bO(),e=i.u$();e&&e.L$()}}}Zz(){return this.m7}Jft(){return this.Lmt}Kpt(){return this.Wmt.length&&this.Wmt[0].Kpt()}kgt(){return this.Emt&&this.Emt instanceof fo.Apt}_gt(){return this.kgt()||this.Wmt.some(t=>t.Kpt())}Zpt(){return this.Wmt}I0t(){return this.Wmt.length}Bdt(t){if((t=Math.floor(t))<0||t>=this.Wmt.length)throw new RangeError("invalid condition index");return this.Wmt[t]}Lgt(t){return this.Bdt(t)}Bgt(t){let s=t.RF();if(0!==s){--s;const i=t.Ngt()?t.Wgt():t.E5();for(;0<=s;--s){const e=this.Wmt[s];if(i===e.E5()||e.Ngt()&&e.Wgt()===i)return!1}}return!0}Vgt(){return this.knt}jgt(){return this.knt.length}Wdt(t){if((t=Math.floor(t))<0||t>=this.knt.length)throw new RangeError("invalid action index");return this.knt[t]}Hgt(s){s=Math.floor(s);const t=this.knt.find(t=>t.Ugt()===s);if(t)return t;throw new RangeError("invalid action debug index")}zgt(t){return 0<=(t=Math.floor(t))&&t<this.knt.length}Jgt(){return this.Vmt}Udt(){return this.Vmt.filter(t=>t instanceof fo.imt)}_mt(i){i.f0t(this);let e=this.Wmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.p0t(t),r.N6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.kG())n=!0;else if(!this.Lmt)return!1}return!this.Lmt||n}Gmt(t,s){t.f0t(this),t.p0t(s),this.Wmt[s].kG()&&(this.jmt(t,0)&&this.qgt(t),t.y0t(!0))}*Imt(i){i.f0t(this);let e=this.Wmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.p0t(t),r.N6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.bmt()?r.kG():yield*r.w1t())n=!0;else if(!this.Lmt)return!1}return!this.Lmt||n}*Cmt(t,s){t.f0t(this),t.p0t(s);let i=this.Wmt[s];if(i.bmt()?i.kG():yield*i.w1t())(this.$gt()?this.jmt(t,0):yield*this.Hmt(t,0))&&(this.Xgt()?this.qgt():yield*this.Ygt()),t.y0t(!0)}kG(t){t.f0t(this),this.Bmt||t.S0t(!1),this.Lmt?this.Zgt(t):this.Kgt(t)}*w1t(t){(this.Agt()||this.lf.Qgt())&&(yield this),t.f0t(this),this.Bmt||t.S0t(!1),this.Lmt?yield*this.tyt(t):yield*this.syt(t)}Zgt(i){let e=this.Wmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.Kpt()){i.p0t(t);const h=r.kG();n=n||h}}i.y0t(n),n&&(this.jmt(i,0)&&this.qgt(i),this.kmt)&&i.S0t(!0)}*tyt(i){let e=this.Wmt,n=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.Kpt()){i.p0t(s);let t;t=r.bmt()?r.kG():yield*r.w1t(),n=n||t}}if(i.y0t(n),n)(this.$gt()?this.jmt(i,0):yield*this.Hmt(i,0))&&(this.Xgt()?this.qgt():yield*this.Ygt()),this.kmt&&i.S0t(!0)}Kgt(i){const e=this.Wmt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=(i.p0t(t),n.kG());if(!r)return void i.y0t(!1)}i.y0t(!0),this.jmt(i,0)&&this.qgt(i),i.w0t()&&this.kmt&&i.S0t(!0)}*syt(i){const e=this.Wmt;for(let t=0,s=e.length;t<s;++t){const n=e[t];i.p0t(t);if(!(n.bmt()?n.kG():yield*n.w1t()))return void i.y0t(!1)}i.y0t(!0);(this.$gt()?this.jmt(i,0):yield*this.Hmt(i,0))&&(this.Xgt()?this.qgt():yield*this.Ygt()),i.w0t()&&this.kmt&&i.S0t(!0)}Sgt(i,e){const n=this.knt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.g0t(t),r.kG()}return!0}*vgt(i,e){const n=this.knt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.g0t(t),r.bmt()?r.kG():yield*r.w1t()}return!0}ygt(i,e){const n=this.lD(),r=this.knt;for(let t=e,s=r.length;t<s;++t){const h=r[t],o=(i.g0t(t),h.kG());if(h.iyt()&&!0===o)return!1;h.eyt()&&o instanceof Promise&&n.Y1t(o)}return!0}*wgt(i,e){const n=this.lD(),r=this.knt;for(let s=e,t=r.length;s<t;++s){const h=r[s];i.g0t(s);let t;if(t=h.bmt()?h.kG():yield*h.w1t(),h.iyt()&&!0===t)return!1;h.eyt()&&t instanceof Promise&&n.Y1t(t)}return!0}nyt(t){this.jmt(t,t.m0t())&&this.qgt()}*ryt(t){(yield*this.Hmt(t,t.m0t()))&&(yield*this.Ygt())}qgt(){if(this.Vmt.length){const t=this.h1t()&&this.lf.ymt(),s=t?performance.now():0,i=this._ft,e=i.Nj(this);this.Dmt?this.hyt(e):this.oyt(e),i.Yj(),t&&(this.jpt.Hpt+=performance.now()-s)}}hyt(e){const n=this.Umt,r=this.Omt,h=this.lD(),o=this.Vmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.Lj(),u=!r||!n&&t<i;u&&h.Uj(l),a.kG(e),u?h.Jj(l):h.D1t(l)}}oyt(i){const e=this.Vmt;for(let t=0,s=e.length;t<s;++t)e[t].kG(i)}*Ygt(){if(this.Vmt.length){const t=this._ft,s=t.Nj(this);this.Dmt?yield*this.ayt(s):yield*this.lyt(s),t.Yj()}}*ayt(e){const n=this.Umt,r=this.Omt,h=this.lD(),o=this.Vmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.Lj(),u=!r||!n&&t<i;u&&h.Uj(l),yield*a.w1t(e),u?h.Jj(l):h.D1t(l)}}*lyt(i){const e=this.Vmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].w1t(i)}zj(i,e){e.c0t();const n=this.Wmt;if(!this.Jft())for(let t=i.d0t()+1,s=n.length;t<s;++t){const r=n[t],h=(e.p0t(t),r.kG());if(!h)return!1}return this.jmt(e,0)&&this.qgt(e),!0}*uyt(i,e){e.c0t();const n=this.Wmt;if(!this.Jft())for(let t=i.d0t()+1,s=n.length;t<s;++t){const r=n[t];e.p0t(t);if(!(r.bmt()?r.kG():yield*r.w1t()))return!1}return(this.$gt()?this.jmt(e,0):yield*this.Hmt(e,0))&&(this.Xgt()?this.qgt():yield*this.Ygt()),!0}bmt(){return!this.Agt()&&!this.lf.Qgt()&&this.Ymt.igt}$gt(){return!this.lf.Qgt()&&this.Ymt.tgt}Xgt(){return!this.lf.Qgt()&&this.Ymt.sgt}cyt(i){if(this.MN()){const e=this.Tmt();for(let t=0,s=e.length;t<s;++t)if(!e[t]._mt(i))return!1}return!0}*fyt(i){if(this.MN()){const e=this.Tmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Imt(i)))return!1}return!0}dyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ei(0));t.Vdt().Nj(),this.Emt.pyt(e)}else this.Emt.myt(s);else i&&t.Vdt().Nj()}gyt(t,s,i,e){let n,r,h=0<t.length,o=null,a=this.lf,l=this._ft,u=a.lD(),c=this.Emt,f=c.eyt(),d=u.A1t(),p=1<d;if(this.dyt(u,s,p),h&&(i?u.Uj(t):u.k1t(t)),null!==e){if(e.yyt){const g=i?e.yyt.LL():e.yyt.O1t().bft(),y=e.wyt.LL();y.Wft(g.kL()),y.Uft(),i||e.wyt.Syt()}else if(e.vyt){const w=e.vyt.LL();w.Wft(e.byt),w.Uft()}e.Myt&&(o=u.L1t(t))}const m=l.Nj(this);return i&&m.C0t(t),this.cyt(m)&&(m.f0t(this),f&&([r,n]=c.xyt()),this.Kgt(m),f)&&c.Tyt(r),l.Yj(),p&&u.Vdt().Yj(),null!==o&&u.Jj(o),h&&u.Jj(t),u.R1t(),f||u.Q1t(),n}*_yt(t,s,i,e){let n,r,h=((this.Agt()||this.lf.Qgt())&&(yield this),0<t.length),o=null,a=this.lf,l=this._ft,u=a.lD(),c=this.Emt,f=c.eyt(),d=u.A1t(),p=1<d;if(this.dyt(u,s,p),h&&(i?u.Uj(t):u.k1t(t)),null!==e){if(e.yyt){const g=i?e.yyt.LL():e.yyt.O1t().bft(),y=e.wyt.LL();y.Wft(g.kL()),y.Uft(),i||e.wyt.Syt()}else if(e.vyt){const w=e.vyt.LL();w.Wft(e.byt),w.Uft()}e.Myt&&(o=u.L1t(t))}const m=l.Nj(this);return i&&m.C0t(t),(yield*this.fyt(m))&&(m.f0t(this),f&&([r,n]=c.xyt()),yield*this.syt(m),f)&&c.Tyt(r),l.Yj(),p&&u.Vdt().Yj(),null!==o&&u.Jj(o),h&&u.Jj(t),u.R1t(),f||u.Q1t(),n}Gyt(t,s){const i=this.pD(),e=0<i.length,n=this.lf,r=this._ft,h=n.lD(),o=h.A1t(),a=1<o,l=(a&&h.Vdt().Nj(),this.Emt.pyt(t),e&&(s?h.Uj(i):h.k1t(i)),r.Nj(this));this.cyt(l)&&(l.f0t(this),this.Kgt(l)),r.Yj(),a&&h.Vdt().Yj(),e&&h.Jj(i),h.R1t(),h.Q1t()}*Iyt(t,s){(this.Agt()||this.lf.Qgt())&&(yield this);const i=this.pD(),e=0<i.length,n=this.lf,r=this._ft,h=n.lD(),o=h.A1t(),a=1<o,l=(a&&h.Vdt().Nj(),this.Emt.pyt(t),e&&(s?h.Uj(i):h.k1t(i)),r.Nj(this));(yield*this.fyt(l))&&(l.f0t(this),yield*this.syt(l)),r.Yj(),a&&h.Vdt().Yj(),e&&h.Jj(i),h.R1t(),h.Q1t()}yD(t,s,i,e,...n){let r,h,o=0<t.length,a=this.lf,l=this._ft,u=a.lD(),c=this.Emt,f=c.eyt(),d=u.A1t(),p=1<d,m=(p&&u.Vdt().Nj(),0<n.length&&this.Emt.pyt(n),o&&(s?u.Uj(t):u.k1t(t)),l.Nj(this));return m.x0t(i,e),l.Qft(m),a.jj(!1),this.cyt(m)&&(m.f0t(this),f&&([h,r]=c.xyt()),this.Kgt(m),f)&&c.Tyt(h),a.jj(!0),l.Yj(),l.t0t(),p&&u.Vdt().Yj(),o&&u.Jj(t),u.R1t(),f||u.Q1t(),r||m.T0t()}}}{let e=self.Bs,t=[],s=!1;e.nmt=class extends e.rr{constructor(t,s,i){super();const e=t.UO(),n=t.lD(),r=(this.Pq=t,this.$ft=n,this.lf=t.UO(),this.Pmt=s,e.Cyt(i[1]));this.Pyt=r,this.Xmt=i[2],this.Pq.mmt(this,this.Xmt),this.Ymt=e.kX()?{Zmt:i[3][0],Kmt:i[3][1]}:null}static gx(t,s,i){return e.lr(e.nmt,t,s,i)}Mdt(){const t=this.Pyt,s=this.lf.lD().zdt(this);this.Pyt=t.bind(null,this.lf.Kk(),s)}MN(){return this.Pmt}Hdt(){return this.Pmt}u$(){return this.Pq}Pgt(){return this.Xmt}Egt(){return this.Ymt&&this.Ymt.Kmt}Agt(){return this.Egt()&&this.Ymt.Zmt}Rgt(t){this.Ymt.Zmt=!!t}umt(){return!1}Lj(){return t}pD(){return this.Pmt?this.Pmt.pD():t}kG(t){t.f0t(this),this.$ft.Y1t(this.Eyt())}async Eyt(){try{await this.Pyt()}catch(t){console.error(`Unhandled exception running script %c${this.u$().Kc()}, event ${this.Pgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*w1t(t){t.f0t(this),(this.Agt()||this.lf.Qgt())&&(yield this),this.kG(t)}bmt(){return!this.Agt()&&!this.lf.Qgt()}static Ayt(){return s}static Ryt(){s=!0}}}{const mo=self.Bs;mo.Apt=class extends mo.rr{constructor(t,s,i){super(),this.Pq=t,this.lf=t.UO(),this.Pmt=s,this.Fyt=0,this.Dyt="",this.Oyt=0,this.kyt=[],this.Lyt=!0,this.Byt="",this.yft=null,this.Nyt=!1,this.Wyt=[],this.Vyt=!1,this.jyt=!1,this.Hyt=0,this.Uyt=-1,this.zyt=new Map,this.Jyt=mo.Ypt.gx(t,s,i),this.Jyt.Cgt(this)}qyt(t){this.Fyt=0,this.Dyt=t[0],this.Oyt=t[1],this.kyt=t[2].map(t=>mo.imt.gx(this.Pq,this,t)),this.Lyt=t[3],this.jyt=t[4],this.Vyt=t[5]}$yt(t){this.Fyt=1,this.Byt=t[1],this.yft=this.lf.wz(t[2]),this.Jyt.rgt(this.yft),this.Dyt=this.yft.Kc()+"."+this.Byt,this.Oyt=t[3],this.kyt=t[4].map(t=>mo.imt.gx(this.Pq,this,t)),this.Lyt=t[5],this.jyt=t[6],this.Vyt=t[7],this.yft.Xyt(this)}static tmt(t,s,i){const e=mo.lr(mo.Apt,t,s,i),n=i[1];return e.qyt(n),e}static smt(t,s,i){const e=mo.lr(mo.Apt,t,s,i),n=i[1];return e.$yt(n),e}xdt(){if(this.yft&&this.yft.jz())for(const t of this.yft.cgt())if(t.Yyt(this.Byt)){this.Nyt=!0;break}}Mdt(){for(const t of this.kyt)t.Mdt();this.Jyt.Mdt(!1)}Edt(){return this.Fyt}Udt(){return this.kyt}Rpt(){return this.kyt}fD(){return this.kyt.length}Zyt(t){this.Wyt.push(t)}Kyt(){return this.Wyt}myt(i){const e=this.kyt;for(let t=0,s=e.length;t<s;++t)e[t].int(i[t].ei(0))}pyt(i){const e=this.kyt;for(let t=0,s=e.length;t<s;++t)e[t].int(i[t])}Qyt(){return this.kyt.map(t=>t.vet())}MN(){return this.Pmt}Hdt(){return this.Pmt}Adt(){return this.Dyt}twt(){return this.Byt}swt(){return this.Nyt}SD(){return this.Oyt}E5(){return this.yft}Zu(){return this.Lyt}cD(){switch(this.Oyt){case 0:return null;case 2:return"";default:return 0}}dD(){return this.Jyt}wD(){return this.Vyt}eyt(){return this.jyt}xyt(){const t=this.Hyt++;this.Uyt=t;let s,i=new Promise(t=>s=t);return this.zyt.set(t,{resolve:s,iwt:0}),[t,i]}Tyt(t){const s=this.zyt.get(t);0===s.iwt&&(s.resolve(),this.zyt.delete(t)),this.Uyt=-1}ewt(){const t=this.zyt.get(this.Uyt);return t.iwt++,this.Uyt}nwt(t){this.Uyt=t;const s=this.zyt.get(t);s.iwt--}rwt(t,s){const i=new Map,e=[];for(const n of this.yft.LL().kL()){const r=n.E5();if(r.Yyt(this.Byt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&this.Jyt.gyt(t,s,this.Vyt,{vyt:this.yft,byt:e}),0<i.size)for(const[o,a]of i){const l=o.hwt(this.Byt).dD(),u=[...new Set([...t,...l.Lj()])];l.gyt(u,s,this.Vyt,{vyt:o,byt:a})}}*owt(t,s){const i=new Map,e=[];for(const n of this.yft.LL().kL()){const r=n.E5();if(r.Yyt(this.Byt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&(yield*this.Jyt._yt(t,s,this.Vyt,{vyt:this.yft,byt:e})),0<i.size)for(const[o,a]of i){const l=o.hwt(this.Byt).dD(),u=[...new Set([...t,...l.Lj()])];yield*l._yt(u,s,this.Vyt,{vyt:o,byt:a})}}}}{const go=self.Bs,yo=[];go.imt=class extends go.rr{constructor(t,s,i){super();const e=t.lD();this.Pq=t,this.$ft=e,this.lf=t.UO(),this.Pmt=s,this.odt=e.Vdt(),this.pr=i[1],this.yf=i[2],this.awt=i[3],this.Lb=!!i[4],this.lwt=!!i[5],this.uwt=s instanceof go.Apt,this.m7=i[6],this.cwt=this.lf.Jdt(i[8]),this.fwt=t=>this.int(t),this.dwt=()=>this.vet(),this.pwt=!this.Pmt||this.Lb||this.lwt,this.Rnt=this.awt,this.mwt=-1,this.gwt()&&(this.Rnt=this.Rnt?1:0),!this.ywt()||this.cM()||this._pt()||(this.mwt=e.Ddt(this)),e.Rdt(this)}static gx(t,s,i){return go.lr(go.imt,t,s,i)}Mdt(){if(this.ywt()&&!this.cM()&&!this._pt()&&!this.wwt()){const t=this.$ft.Ept(this);t&&t.Zyt(this)}}Kc(){return this.pr}Jdt(){return this.cwt}MN(){return this.Pmt}Hdt(){return this.MN()}Cz(){return!this.MN()}ywt(){return!this.Cz()}wwt(){return this.uwt}cM(){return this.Lb}_pt(){return this.lwt}me(){return 0===this.yf}Ge(){return 1===this.yf}gwt(){return 2===this.yf}umt(){return!1}Zz(){return this.m7}Odt(){return this.awt}Lj(){return yo}kG(t){!this.ywt()||this.cM()||this._pt()||this.int(this.Odt())}bmt(){return!0}*w1t(t){this.kG(t)}int(t){this.me()?"number"!=typeof t&&(t=parseFloat(t)):this.Ge()?"string"!=typeof t&&(t=t.toString()):this.gwt()&&(t=t?1:0),this.pwt?this.Rnt=t:this.odt.F0t()[this.mwt]=t}vet(){return this.pwt?this.Rnt:this.odt.F0t()[this.mwt]}Swt(){let t=this.vet();return this.gwt()?!!t:t}e1t(){this.Rnt=this.awt}qdt(){return{configurable:!1,enumerable:!0,get:this.dwt,set:this.fwt}}}}{const wo=self.Bs,So=[];wo.emt=class extends wo.rr{constructor(t,s,i){super();const e=t.lD();this.Pq=t,this.$ft=e,this.lf=t.UO(),this.Pmt=s,this.vwt=null,this.bwt=i[1],this.a0=!0}static gx(t,s,i){return wo.lr(wo.emt,t,s,i)}Mdt(){this.vwt=this.$ft.k$(this.bwt),this.Pq.cmt(this);let t=this.MN();for(;t;)t instanceof wo.Ypt&&t.h1t()&&t.agt(this),t=t.MN();this.Ogt(),this.lf.kX()&&this.Pq.Ppt().children.push(this.vwt.Ppt())}MN(){return this.Pmt}Lj(){return So}dmt(){return this.vwt}kG(t){const s=!!this.MN(),i=this.lf.Vz();s&&this.$ft.k1t(i),this.vwt.kG(),s&&this.$ft.Jj(i)}*w1t(t){const s=!!this.MN(),i=this.lf.Vz();s&&this.$ft.k1t(i),yield*this.vwt.w1t(),s&&this.$ft.Jj(i)}bmt(){return!1}pmt(){return this.a0}Ogt(){let t=this.MN();for(;t;){if(t instanceof wo.Ypt&&t.h1t()&&!t.xpt())return void(this.a0=!1);t=t.MN()}this.a0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Bs;vo.Mwt=class extends vo.rr{constructor(t){super(),this.Y2=t,this.lf=t.UO()}Mdt(){}static xwt(t,s){const i=s[0],e=[_o,xo,To,Go,bo,Mo];return vo.lr(e[i],t,s)}};class bo extends vo.Mwt{constructor(t,s){super(t),this.Twt=this.lf._wt(),this.Pyt=this.lf.Cyt(s[1]),this.Pyt!==vo.nX.eX.Xnt.random&&this.Pyt!==vo.nX.eX.Xnt.Gwt||this.Y2.Iwt()}Cwt(){return this.Twt.Pwt(this.Pyt,this.Twt)}}class Mo extends vo.Mwt{constructor(t,s){super(t),this.Ewt=null,this.Dyt=s[1],this.Y2.Iwt()}Mdt(){const t=this.lf.lD(),s=(this.Ewt=t.uD(this.Dyt),this.Dyt=null,this.Y2.dD()),i=this.Ewt.dD();this.Awt=[...new Set([...s.pD(),...i.pD()])],this.Awt=t.Fdt(this.Awt)}Cwt(){const t=this.Ewt;if(t.Zu()){const s=t.dD();return vo.Ypt.prototype.yD.bind(s,this.Awt,t.wD(),t.SD(),t.cD())}{const i=t.cD();return()=>i}}}class xo extends vo.Mwt{constructor(t,s){super(t),this.yft=this.lf.wz(s[1]),this.Pyt=this.lf.Cyt(s[2]),this.Rwt=!!s[3],this._ft=this.lf.lD().MD(),this.Y2.Fwt(this.yft)}Cwt(){return this.yft._L().Pwt(this.Pyt,this.yft.ML().g6())}Dwt(...t){const s=this.yft,i=s.LL().Fft(),e=i.length;if(0===e)return this.Rwt?"":0;const n=a(this.Y2.Owt(),e);return this._ft.Bj().b0t(s),this.Pyt.apply(i[n].g6(),t)}kwt(t,...s){const i=this.yft,e=i.kL(),n=e.length;if(0===n)return this.Rwt?"":0;const r=a(t,n);return this._ft.Bj().b0t(i),this.Pyt.apply(e[r].g6(),s)}}class To extends vo.Mwt{constructor(t,s){super(t),this.yft=this.lf.wz(s[1]),this.Lwt=s[3],this.Rwt=!!s[2],this.Y2.Fwt(this.yft)}Bwt(){const t=this.yft.LL().Fft(),s=t.length;if(0===s)return this.Rwt?"":0;const i=a(this.Y2.Owt(),s);return t[i].Nwt(this.Lwt)}Wwt(){const t=this.yft,s=t.LL().Fft(),i=s.length;if(0===i)return this.Rwt?"":0;const e=a(this.Y2.Owt(),i),n=s[e],r=n.E5().Vwt(t.jwt());return n.Nwt(this.Lwt+r)}Hwt(t){const s=this.yft,i=s.kL(),e=i.length;if(0===e)return this.Rwt?"":0;let n=a(t,e),r=i[n],h=0;return s.jz()&&(h=r.E5().Vwt(s.jwt())),r.Nwt(this.Lwt+h)}}class _o extends vo.Mwt{constructor(t,s){super(t),this.yft=this.lf.wz(s[1]),this.Uwt=this.yft.Gnt(s[2]),this.zwt=this.yft.sit(s[2]),this.Pyt=this.lf.Cyt(s[3]),this.Rwt=!!s[4],this._ft=this.lf.lD().MD(),this.Y2.Fwt(this.yft)}Jwt(...t){const s=this.yft,i=s.LL().Fft(),e=i.length;if(0===e)return this.Rwt?"":0;let n=a(this.Y2.Owt(),e),r=(this._ft.Bj().b0t(s),i[n]),h=0;return s.jz()&&(h=r.E5().qwt(s.jwt())),this.Pyt.apply(r._nt()[this.zwt+h].g6(),t)}$wt(t,...s){const i=this.yft,e=i.kL(),n=e.length;if(0===n)return this.Rwt?"":0;let r=a(t,n),h=(this._ft.Bj().b0t(i),e[r]),o=0;return i.jz()&&(o=h.E5().qwt(i.jwt())),this.Pyt.apply(h._nt()[this.zwt+o].g6(),s)}}class Go extends vo.Mwt{constructor(t,s){super(t),this.Xwt=null,this.Ywt=s[1]}Mdt(){this.Xwt=this.lf.lD().$dt(this.Ywt)}Zwt(){return this.Xwt}}}{let r=function(t){const s=self.Kwt[t];if(s)return s;throw new Error("invalid expression number")};r;const Io=self.Bs;Io.Qwt=class extends Io.rr{constructor(t,s,i){super(),this.Y2=t,this.Xg=i,this.yf=s,this.ei=null,this.tSt=!1,this.lwt=!1}static gx(t,s,i){const e=s[0],n=[Co,Po,ko,Ao,Fo,Eo,Do,Co,Ao,Ao,Lo,Bo,ko,Wo,Po,Oo,Ro,No,Vo,jo,Ho,Uo];return Io.lr(n[e],t,e,i,s)}Mdt(){}Iwt(){this.tSt=!0}Fwt(t){this.tSt||!t||t._L().tL()||(this.tSt=!0)}sSt(){return this.tSt}RF(){return this.Xg}UO(){return this.Y2.UO()}dD(){return this.Y2.dD()}_pt(){return this.lwt}iSt(){return 4===this.yf}};class Co extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.eSt=0;const n=e[1];this.nSt=n[0],this.rSt=[],this.hSt=null;for(let t=1,s=n.length;t<s;++t)this.rSt.push(Io.Mwt.xwt(this,n[t]));this.rSt.length?this.ei=this.oSt:(this.ei=r(this.nSt),this.lwt=!0)}aSt(t){if(t<0||t>=this.rSt.length)throw new RangeError("invalid numbered node");return this.rSt[t]}Mdt(){for(const s of this.rSt)s.Mdt();const t=r(this.nSt);this.rSt.length?this.hSt=t(this):this.hSt=t}Owt(){return this.eSt}oSt(t){return this.eSt=t,this.hSt()}}class Po extends Co{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.lSt,14===s&&(this.dD().dgt(),this.Y2 instanceof Io.hgt)&&this.dD().Ggt()}lSt(t){this.eSt=t;const s=this.hSt();return"string"==typeof s?s:""}uSt(){return r(this.nSt)()}}class Eo extends Co{constructor(t,s,i,e){super(t,s,i,e),2<=t.cSt()?this.ei=this.lB:this.ei=this.TO,this.lwt=!1}TO(t){this.eSt=t;const s=this.hSt(),i=this.UO().bO();return i.TO(s)}lB(t){const s=this.TO(t);return s?s.lB():null}}class Ao extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.fSt=e[1],this.ei=this.dSt,this.lwt=!0}dSt(){return this.fSt}}class Ro extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.pSt=e[1],this.ei=this.mSt,this.lwt=!0}mSt(){return this.pSt}}class Fo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.yft=this.UO().wz(e[1]),2<=t.cSt()?this.ei=this.SL:this.ei=this.E5;const n=this.dD();n.rgt(this.yft),this.Y2 instanceof Io.hgt?n.Ggt():n.MN()&&n.MN().Ggt(),this.lwt=!0}E5(){return this.yft}SL(){return this.yft?this.yft.SL():null}}class Do extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.c7=this.UO().nO().YX(e[1]),2<=t.cSt()?this.ei=this.iO:this.ei=this.rO,this.lwt=!0}rO(){return this.c7}iO(){return this.c7?this.c7.iO():null}}class Oo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.QZ=this.UO().itt().oZ(e[1]),2<=t.cSt()?this.ei=this.wst:this.ei=this.Wst,this.lwt=!0}Wst(){return this.QZ}wst(){return this.QZ?this.QZ.wst():null}}class ko extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.gSt=e[1],this.ei=this.ySt,this.lwt=!0}ySt(){return this.gSt}}class Lo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.wSt=e[1];const n=this.Y2.E5();this.Y2 instanceof Io.ngt&&this.Y2.cM()||!n||!n.jz()?(this.ei=this.SSt,this.lwt=!0):(this.ei=this.vSt,this.Iwt())}SSt(){return this.wSt}vSt(t){t=t||0;let s=this.Y2.E5(),i=s.LL(),e=i.kL(),n=null;if(e.length)n=e[t%e.length].E5();else if(i.Aft()){const r=i.Rft();n=r[t%r.length].E5()}else{if(!(0<s.NL()))return 0;{const h=s.kL();n=h[t%h.length].E5()}}return this.wSt+n.Vwt(s.jwt())}}class Bo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.Ywt=e[1],this.Xwt=null,2<=t.cSt()?this.ei=this.bSt:this.ei=this.MSt,this.lwt=!0}Mdt(){this.Xwt=this.UO().lD().$dt(this.Ywt)}MSt(){return this.Xwt}bSt(){return null}}class No extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.xSt=e[1],this.Ewt=null,2<=t.cSt()?this.ei=this.TSt:this.ei=this._St,this.lwt=!0}Mdt(){this.Ewt=this.UO().lD().uD(this.xSt),this.xSt=null}_St(){return this.Ewt}TSt(){return null}}class Wo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.GSt=[],this.ISt=[],this.lwt=!0;for(let t=1,s=e.length;t<s;++t){const n=Io.Qwt.gx(this.Y2,e[t],0);this.GSt.push(n),this.ISt.push(0),n._pt()||(this.lwt=!1)}this.ei=this.CSt}Mdt(){for(const t of this.GSt)t.Mdt()}CSt(){const i=this.GSt,e=this.ISt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0);return e}}class Vo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.PSt=e[1],this.ei=this.snt,this.lwt=!0}snt(){return this.PSt}}class jo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.ESt=e[1],this.ei=this.ASt,this.lwt=!0}ASt(){return this.ESt}}class Ho extends Co{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.J5,this.lwt=!1}J5(){return this.hSt()}}class Uo extends Io.Qwt{constructor(t,s,i,e){super(t,s,i),this.sut=this.UO().vut().Xlt(e[1]),this.ei=this.RSt,this.lwt=!0}RSt(){return this.sut.Kc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};e;const zo=self.Bs,Jo=[],qo=function(){};zo.ngt=class extends zo.rr{constructor(t,i,s){if(super(),this.Jyt=t,this.lf=t.UO(),this.Xg=s,this.Pyt=this.lf.Cyt(i[1]),this.FSt=0<i[3],this.DSt=2===i[3],this.OSt=!!i[4],this.kSt=!!i[5],this.Lb=!!i[6],this.m7=i[7],this.LSt=this.Jyt.Jft(),this.yft=null,this.Uwt=null,this.zwt=-1,this.Twt=null,this.kG=qo,this.w1t=qo,this.Zs=[],this.BSt=[],this.NSt=!1,this.WSt=null,this.VSt=null,this.Ymt=this.lf.kX()?{Zmt:i[8][0],jSt:i[8][1]}:null,-1===i[0]?this.Twt=this.lf._wt():(this.yft=this.lf.wz(i[0]),i[2]&&(this.Uwt=this.yft.Gnt(i[2]),this.zwt=this.yft.sit(i[2])),this.Jyt.MN()&&this.Jyt.MN().Ggt()),10===i.length){let s=i[9];for(let t of s)this.Zs.push(zo.Qwt.gx(this,t,this.Zs.length)),this.BSt.push(0)}0===this.Zs.length&&(this.Zs=Jo,this.BSt=Jo),this.Jyt.lD().Idt(this)}static gx(t,s,i){return zo.lr(zo.ngt,t,s,i)}Mdt(){for(const t of this.Zs)t.Mdt(),t.sSt()&&(this.NSt=!0);this.DSt?(this.kG=this.HSt,this.w1t=this.USt):this.Twt?(this.zSt(),this.w1t=this.JSt):this.yft._L().tL()?(this.qSt(),this.w1t=this.$St):this.Lb?(this.kG=this.XSt,this.w1t=this.YSt):(this.kG=this.ZSt,this.w1t=this.KSt)}zSt(){const t=this.Twt,s=this.Twt;this.QSt(t,s,this.tvt)}qSt(){const t=this.yft._L(),s=this.yft.ML().g6();this.QSt(t,s,this.svt)}QSt(t,s,i){const e=this.Pyt,n=this.kSt,r=this.Zs;if(0===r.length){const h=t.Pwt(e,s);n?this.kG=function(){return zo.xor(h(),n)}:this.kG=h}else if(1===r.length){const o=r[0];if(!n&&o._pt())this.kG=t.ivt(e,s,o.ei(0));else{const a=t.Pwt(e,s);this.kG=function(){return zo.xor(a(o.ei(0)),n)}}}else if(2===r.length){const l=r[0],u=r[1];if(!n&&l._pt()&&u._pt())this.kG=t.evt(e,s,l.ei(0),u.ei(0));else{const c=t.Pwt(e,s);this.kG=function(){return zo.xor(c(l.ei(0),u.ei(0)),n)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!n&&f._pt()&&d._pt()&&p._pt())this.kG=t.nvt(e,s,f.ei(0),d.ei(0),p.ei(0));else{const m=t.Pwt(e,s);this.kG=function(){return zo.xor(m(f.ei(0),d.ei(0),p.ei(0)),n)}}}else this.kG=i}Zz(){return this.m7}rmt(){return this.Pyt}E5(){return this.yft}G6(){return this.Uwt}rvt(){return this.Uwt?this.Uwt.x6():this.yft?this.yft._L():null}cSt(){const t=this.rvt();return t?t.hvt():1}dD(){return this.Jyt}UO(){return this.lf}RF(){return this.Xg}Ugt(){return this.RF()}Kpt(){return this.FSt}hmt(){return this.DSt}ovt(){return this.kSt}N6(){return this.OSt}cM(){return this.Lb}avt(){return this.Ymt.Zmt}lvt(){return!!this.Twt}Ngt(){return this.lvt()||this.yft._L().tL()}Wgt(){for(const t of this.Zs)if(t.iSt())return t.E5();return null}uvt(t){this.Ymt.Zmt=!!t,this.Jyt.xgt()}cvt(){return this.Ymt.jSt}bmt(){return!this.avt()&&!this.lf.Qgt()&&!this.cvt()}fvt(){return this.WSt||(this.WSt=new Map),this.WSt}dvt(){return this.VSt||(this.VSt=new Map),this.VSt}tvt(){const t=this.BSt;return e(this.Zs,t),zo.xor(this.Pyt.apply(this.Twt,t),this.kSt)}*JSt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const s=this.BSt;e(this.Zs,s);let t=this.Pyt.apply(this.Twt,s);return zo.Vo(t)&&(t=yield*t),zo.xor(t,this.kSt)}return this.kG()}svt(){const t=this.BSt,s=(e(this.Zs,t),this.yft.ML().g6());return zo.xor(this.Pyt.apply(s,t),this.kSt)}*$St(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){let t=this.BSt,s=(e(this.Zs,t),this.yft.ML().g6()),i=this.Pyt.apply(s,t);return zo.Vo(i)&&(i=yield*i),zo.xor(i,this.kSt)}return this.kG()}HSt(){return!0}*USt(){return(this.avt()||this.lf.Qgt())&&(yield this),!0}pvt(){if(this.Uwt){if(2<=this.Uwt.x6().hvt())throw new Error("not yet implemented");return this.Uwt}return 2<=this.yft._L().hvt()?this.yft.SL():this.yft}XSt(){const t=this.BSt,s=(e(this.Zs,t),this.Pyt.apply(this.pvt(),t));return this.yft.Syt(),s}*YSt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const s=this.BSt;e(this.Zs,s);let t=this.Pyt.apply(this.pvt(),s);return zo.Vo(t)&&(t=yield*t),this.yft.Syt(),t}return this.kG()}ZSt(){const i=this.Zs,e=this.BSt,t=this.yft.LL();for(let t=0,s=i.length;t<s;++t){const n=i[t];n.sSt()||(e[t]=n.ei(0))}return t.Pft()?this.mvt(t):this.gvt(t)}*KSt(){return(this.avt()||this.lf.Qgt())&&(yield this),this.ZSt()}yvt(i){const e=this.Zs,n=this.BSt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.sSt()&&(n[t]=r.ei(i))}}mvt(i){const t=this.yft,e=t.jz(),n=t.jwt(),r=this.zwt,h=0<=r,o=t.kL(),a=this.NSt,l=this.BSt,u=this.Pyt,c=this.kSt,f=this.LSt&&!this.FSt;i.Cft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.yvt(s);let t;if(h){const p=e?d.E5().qwt(n):0;t=u.apply(d._nt()[r+p].g6(),l)}else t=u.apply(d.g6(),l);zo.xor(t,c)?i.Dft(d):f&&i.Oft(d)}return t.wvt(!0),i.kft(!1),t.Syt(),i.Eft()}gvt(t){let s=this.yft,i=s.jz(),e=s.jwt(),n=s.j5(),r=this.zwt,h=0<=r,o=this.NSt,a=this.BSt,l=this.Pyt,u=this.kSt,c=this.LSt&&!this.FSt,f=t.Lft(),d=t.Bft(),p=c&&!this.Jyt.Bgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.yvt(s);let t;if(h){const v=i?S.E5().qwt(e):0;t=l.apply(S._nt()[r+v].g6(),a)}else t=l.apply(S.g6(),a);zo.xor(t,u)?(y=!0,p?(f.push(S),n&&S.Svt()):(m[g]=S,n&&S.vvt(g),++g)):p?(m[g]=S,n&&S.bvt(g),++g):c&&(d.push(S),n)&&S.Mvt()}zo.Lh(m,g),n&&s.xvt(p,g);const w=y;return p&&!y&&(y=this.Tvt(f)),s.wvt(w||c),c?y:t.Eft()}Tvt(i){const t=this.yft,e=t.jz(),n=t.jwt(),r=this.NSt,h=this.zwt,o=0<=h,a=this.BSt,l=this.Pyt,u=this.kSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.yvt(s);let t;if(o){const f=e?c.E5().qwt(n):0;t=l.apply(c._nt()[h+f].g6(),a)}else t=l.apply(c.g6(),a);if(zo.xor(t,u))return!0}return!1}_vt(t,s){return this.Zs[t].ei(s)}omt(){const t=this.Zs;if(t.length)return t[0].uSt();throw new Error("no parameters")}mq(){if(!this.WSt||!this.WSt.size)return null;const s={};for(const[i,e]of this.WSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].U5(),t[1].U5(),t[2]])),s[i]=t}return{ex:s}}gq(t){if(this.WSt&&(this.WSt.clear(),this.WSt=null),t){const s=this.lf,i=t.ex;if(i){const e=this.fvt();e.clear();for(const[n,r]of Object.entries(i)){let t=r;"collmemory"===n&&(t=zo.lr(zo.Ku,r.map(t=>[s.wO(t[0]),s.wO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(n,t)}}}}}}{let n=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};n;const $o=self.Bs,Xo=[],Yo=function(){},Zo=function*(){};$o.hgt=class extends $o.rr{constructor(t,s,i){super();const e=(this.Jyt=t).UO(),n=(this.lf=e,this.Xg=i,this.m7=4<=s.length?s[3]:-1,this.Gvt=5<=s.length?255&s[4]:0,this.Ivt=5<=s.length?s[4]>>8:0,this.Pyt=null,this.yft=null,this.Uwt=null,this.zwt=-1,this.Twt=null,this.Cvt="",this.Pvt=null,this.Evt=null,this.kG=Yo,this.w1t=Yo,this.Zs=[],this.BSt=[],this.NSt=!1,this.WSt=null,this.VSt=null,-3===s[0]),r=n?s[2]:s[5];if(this.Ymt=e.kX()||n?{Zmt:r[0],jSt:r[1],index:r[2]}:null,-1===s[0])this.Twt=e._wt(),this.Pyt=e.Cyt(s[1]);else if(-2===s[0])this.Cvt=s[1];else if(n){const h=e.Cyt(s[1]);this.Pyt=h,this.kG=this.Avt,this.w1t=this.Rvt,this.Ivt|=8}else this.yft=e.wz(s[0]),4&this.Ivt?(this.Cvt=s[1],this.Pvt=e.wz(s[2])):(s[2]&&(this.Uwt=this.yft.Gnt(s[2]),this.zwt=this.yft.sit(s[2])),this.Pyt=e.Cyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Zs.push($o.Qwt.gx(this,a,this.Zs.length)),this.BSt.push(0)}0===this.Zs.length&&(this.Zs=Xo,this.BSt=Xo),this.Fvt()&&(this.Jyt.dgt(),this.Jyt.Ggt()),this.Jyt.lD().Cdt(this)}static gx(t,s,i){return $o.lr($o.hgt,t,s,i)}Mdt(){for(const t of this.Zs)t.Mdt(),t.sSt()&&(this.NSt=!0);if(this.Twt)this.zSt(),this.w1t=this.JSt;else if(this.Cvt)4&this.Ivt?this.Dvt():this.Ovt(),this.Cvt="",this.Pvt=null;else if(this.kG===this.Avt){const s=this.Pyt,i=this.lf.lD().zdt(this.Jyt);this.Pyt=s.bind(null,this.lf.Kk(),i)}else this.Uwt?this.eyt()?(this.kG=this.kvt,this.w1t=this.Lvt):(this.kG=this.Bvt,this.w1t=this.Nvt):this.yft._L().tL()?(this.qSt(),this.w1t=this.$St):this.cM()?(this.kG=this.Wvt,this.w1t=this.Vvt):this.eyt()?(this.kG=this.jvt,this.w1t=this.Hvt):this.Uvt()?(this.kG=this.zvt,this.w1t=this.Jvt):this.Zs.length?this.Zs.every(t=>t.sSt())?(this.kG=this.qvt,this.w1t=this.$vt):this.NSt?(this.kG=this.Xvt,this.w1t=this.Yvt):this.Zs.every(t=>t._pt())?(n(this.Zs,this.BSt),this.kG=this.Zvt,this.w1t=this.Kvt):(this.kG=this.Qvt,this.w1t=this.t2t):(this.kG=this.Zvt,this.w1t=this.Kvt)}zSt(){const t=this.Twt,s=this.Twt;this.QSt(t,s,this.tvt)}qSt(){const t=this.yft._L(),s=this.yft.ML().g6();this.QSt(t,s,this.svt)}Ovt(){const t=this.Jyt.lD(),i=t.uD(this.Cvt);if(i.Zu()){const e=0!=(2&this.Ivt);this.Evt=i.dD();let s=[...new Set([...this.Jyt.pD(),...this.Evt.pD()])];s=t.Fdt(s);const n=!i.wD()&&this.s2t()?{Myt:!0}:null;if(this.kG=$o.Ypt.prototype.gyt.bind(this.Evt,s,this.Zs,e,n),this.lf.kX()){const r=this;this.w1t=function*(){(r.avt()||r.lf.Qgt())&&(yield r);const t=yield*r.Evt._yt(s,r.Zs,e,n);return t}}else this.w1t=Zo}else this.kG=Yo,this.w1t=Zo}Dvt(){const r=this.Jyt.lD(),h=r.Kdt(this.Pvt,this.Cvt);if(h.Zu()){const o=0!=(2&this.Ivt);this.Evt=h.dD();let s=[...new Set([...this.Jyt.pD(),...this.Evt.pD(),this.yft,h.E5()])],t=(s=r.Fdt(s),!this.yft.jz()&&!h.E5().jz()),i=!this.yft.jz()&&h.E5().jz(),e=this.yft.jz(),n=null;if(!h.wD()&&this.s2t()&&((n=n||{}).Myt=!0),!i&&o||((n=n||{}).yyt=this.yft,n.wyt=h.E5()),t||i||e&&!h.swt()?this.kG=$o.Ypt.prototype.gyt.bind(this.Evt,s,this.Zs,o,n):e&&(this.kG=$o.Apt.prototype.rwt.bind(h,s,this.Zs)),this.lf.kX()){const a=this;t||i||e&&!h.swt()?this.w1t=function*(){(a.avt()||a.lf.Qgt())&&(yield a);const t=yield*a.Evt._yt(s,a.Zs,o,n);return t}:e&&(this.w1t=function*(){(a.avt()||a.lf.Qgt())&&(yield a);const t=yield*h.owt(s,a.Zs);return t})}else this.w1t=Zo}else this.kG=Yo,this.w1t=Zo}QSt(t,s,i){const e=this.Pyt,n=this.Zs;if(0===n.length)this.kG=t.Pwt(e,s);else if(1===n.length){const r=n[0];if(r._pt())this.kG=t.ivt(e,s,r.ei(0));else{const h=t.Pwt(e,s);this.kG=function(){return h(r.ei(0))}}}else if(2===n.length){const o=n[0],a=n[1];if(o._pt()&&a._pt())this.kG=t.evt(e,s,o.ei(0),a.ei(0));else{const l=t.Pwt(e,s);this.kG=function(){return l(o.ei(0),a.ei(0))}}}else if(3===n.length){const u=n[0],c=n[1],f=n[2];if(u._pt()&&c._pt()&&f._pt())this.kG=t.nvt(e,s,u.ei(0),c.ei(0),f.ei(0));else{const d=t.Pwt(e,s);this.kG=function(){return d(u.ei(0),c.ei(0),f.ei(0))}}}else this.kG=i}Zz(){return this.m7}eyt(){return 0!=(8&this.Ivt)}iyt(){return 0!=(16&this.Ivt)}Uvt(){return 1===this.Gvt}cM(){return 2===this.Gvt}Fvt(){return 0!=(1&this.Ivt)}ggt(){return this.eyt()||this.iyt()}E5(){return this.yft}rvt(){return this.Uwt?this.Uwt.x6():this.yft?this.yft._L():null}cSt(){const t=this.rvt();return t?t.hvt():1}dD(){return this.Jyt}s2t(){let t=this.Jyt;do{if(t instanceof $o.Apt&&t.wD())return!0}while(t=t.Hdt());return!1}UO(){return this.lf}RF(){return this.Xg}Ugt(){return this.Ymt.index}avt(){return this.Ymt.Zmt}uvt(t){this.Ymt.Zmt=!!t,this.Jyt.xgt()}cvt(){return this.Ymt.jSt}bmt(){return!this.avt()&&!this.lf.Qgt()&&!this.cvt()}fvt(){return this.WSt||(this.WSt=new Map),this.WSt}dvt(){return this.VSt||(this.VSt=new Map),this.VSt}tvt(){const t=this.BSt;return n(this.Zs,t),this.Pyt.apply(this.Twt,t)}*JSt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const t=this.BSt,s=(n(this.Zs,t),yield*this.Pyt.apply(this.Twt,t));return s}return this.kG()}svt(){const t=this.BSt;return n(this.Zs,t),this.Pyt.apply(this.yft.ML().g6(),t)}*$St(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const t=this.BSt,s=(n(this.Zs,t),yield*this.Pyt.apply(this.yft.ML().g6(),t));return s}return this.kG()}Zvt(){const i=this.BSt,e=this.yft.LL().kL();for(let t=0,s=e.length;t<s;++t)this.Pyt.apply(e[t].g6(),i)}*Kvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const i=this.BSt,e=this.yft.LL().kL();for(let t=0,s=e.length;t<s;++t)yield*this.Pyt.apply(e[t].g6(),i)}else this.Zvt()}Qvt(){const i=this.BSt,e=(n(this.Zs,i),this.yft.LL().kL());for(let t=0,s=e.length;t<s;++t)this.Pyt.apply(e[t].g6(),i)}*t2t(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const i=this.BSt,e=(n(this.Zs,i),this.yft.LL().kL());for(let t=0,s=e.length;t<s;++t)yield*this.Pyt.apply(e[t].g6(),i)}else this.Qvt()}qvt(){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);s.apply(h.g6(),n)}}*$vt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);yield*s.apply(h.g6(),n)}}else this.qvt()}Xvt(){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.sSt()||(n[t]=i.ei(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.sSt()&&(n[t]=o.ei(i))}s.apply(h.g6(),n)}}*Yvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.sSt()||(n[t]=i.ei(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.sSt()&&(n[t]=o.ei(i))}yield*s.apply(h.g6(),n)}}else this.Xvt()}zvt(){const e=this.Zs,n=this.BSt,s=this.Pyt,t=this.yft,i=t.i2t(),r=t.LL().kL();i.e2t(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);s.apply(h.g6(),n)}i.n2t(s)}*Jvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const e=this.Zs,n=this.BSt,s=this.Pyt,t=this.yft,i=t.i2t(),r=t.LL().kL();i.e2t(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);yield*s.apply(h.g6(),n)}i.n2t(s)}else this.zvt()}Wvt(){const t=this.BSt;return n(this.Zs,t),this.Pyt.apply(this.Uwt||this.yft,t)}*Vvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const s=this.BSt;n(this.Zs,s);let t=this.Pyt.apply(this.Uwt||this.yft,s);return $o.Vo(t)?yield*t:t}return this.Wvt()}Bvt(){const t=this.yft,s=t.jz(),e=t.jwt(),n=this.Zs,r=this.NSt,h=this.BSt,o=this.Pyt,a=this.zwt,l=t.LL().kL();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.sSt()||(h[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.sSt()&&(h[t]=f.ei(i))}const c=s?u.E5().qwt(e):0;o.apply(u._nt()[a+c].g6(),h)}}*Nvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const t=this.yft,s=t.jz(),e=t.jwt(),n=this.Zs,r=this.NSt,h=this.BSt,o=this.Pyt,a=this.zwt,l=t.LL().kL();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.sSt()||(h[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.sSt()&&(h[t]=f.ei(i))}const c=s?u.E5().qwt(e):0;yield*o.apply(u._nt()[a+c].g6(),h)}}else this.Bvt()}jvt(){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);h.push(s.apply(o.g6(),n))}return Promise.all(h)}*Hvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const e=this.Zs,n=this.BSt,s=this.Pyt,r=this.yft.LL().kL(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].ei(i);h.push(yield*s.apply(o.g6(),n))}return Promise.all(h)}return this.jvt()}kvt(){const t=this.yft,s=t.jz(),e=t.jwt(),n=this.Zs,r=this.BSt,h=this.Pyt,o=this.zwt,a=t.LL().kL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].ei(i);const c=s?u.E5().qwt(e):0;l.push(h.apply(u._nt()[o+c].g6(),r))}return Promise.all(l)}*Lvt(){if((this.avt()||this.lf.Qgt())&&(yield this),this.cvt()){const t=this.yft,s=t.jz(),e=t.jwt(),n=this.Zs,r=this.BSt,h=this.Pyt,o=this.zwt,a=t.LL().kL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].ei(i);const c=s?u.E5().qwt(e):0;l.push(yield*h.apply(u._nt()[o+c].g6(),r))}return Promise.all(l)}return this.kvt()}async Avt(){try{await this.Pyt()}catch(t){console.error(`Unhandled exception running script %c${this.Jyt.u$().Kc()}, event ${this.Jyt.Pgt()}, action ${this.Ugt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.nmt.Ayt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.nmt.Ryt())}}*Rvt(){return(this.avt()||this.lf.Qgt())&&(yield this),this.Avt()}mq(){return this.WSt&&this.WSt.size?{ex:$o.Bo(this.WSt)}:null}gq(t){if(this.WSt&&(this.WSt.clear(),this.WSt=null),t){const s=t.ex;s&&(this.WSt=$o.No(s))}}}}{let d=function(t){return t instanceof h?w.mB(t):t.JW()},u=function(t){return d(t).xO()},n=function(t){return w.mB(t)},C=function(t,s,i,e){const n=s.U5(),r=i.U5();n<r?t.Set(s,i,e):t.Set(i,s,e)},P=function(t,s,i){const e=s.U5(),n=i.U5();e<n?t.ic(s,i):t.ic(i,s)},E=function(t,s){t.ec(s)},A=function(t,s,i){const e=s.U5(),n=i.U5();return e<n?t.ei(s,i):t.ei(i,s)},e=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.xO(),h=w.NF(),o=w.Ldt(),a=o.dD().Jft(),l=o.E5(),u=o.ovt(),c=s.LL(),f=l!==s;G=s,_=f&&!u;let d,p=0,m=0,g=I=!1;c.Pft()?(S.G(r.iN()),S.offset(i,e),h.r2t(r.TO(),s,S,v),d=v):!a||w.h2t()&&!c.Bft().length&&c.Lft().length?d=c.Lft():(d=c.Bft(),I=!0),n&&(p=r.I2(),m=r.E2(),r.K4(i,e),r.q4());for(const y of d)if(h.dk(t,y)){if(g=!0,u)break;f&&D.add(y)}return n&&(r.X4(p,m),r.q4()),R.Bh(v),g},i=function(t){const s=w.mD().Jft(),i=G.LL(),e=i.Lft(),n=i.Bft();i.Pft()?(i.Vft(D),s&&(R.Bh(n),i.jft(D,G.kL()))):s?I?i.Hft(D):(i.jft(D,e),i.Vft(D)):i.Vft(D),G.Syt()},b=function(t,s){_&&(s&&i(),D.clear(),G=null,_=!1)},s=function(t,s){const i=w.wO(s);if(i){const e=t.LL();if(e.Pft()||e.Lft().includes(i))if(t.jz()){if(i.E5().o2t(t))return e.zft(i),t.Syt(),!0}else if(i.E5()===t)return e.zft(i),t.Syt(),!0}return!1},r=function(t,n){const r=t.LL();if(r.Pft()){r.kft(!1),r.Cft();const i=t.kL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.U5()===n?r.Oft(e):r.Dft(e)}return t.Syt(),!!r.Lft().length}{let i=r.Lft(),e=0;for(let t=0,s=i.length;t<s;++t){const h=i[t];(i[e]=h).U5()===n?r.Oft(h):++e}return R.Lh(i,e),t.Syt(),!!i.length}},R=(d,u,n,C,P,E,A,e,i,b,s,r,self.Bs),l=new R.Ho,M={},x={},T={},w=null,h=(R.a2t=function(t){w=t},self.C5),S=(x.l2t=function(t,s){return R.compare(this.xO().I2(),t,s)},T.l2t=function(t,s){return R.compare(this.x,t,s)},x.u2t=function(t,s){return R.compare(this.xO().E2(),t,s)},T.u2t=function(t,s){return R.compare(this.y,t,s)},x.c2t=function(){return this.xO().hN()},T.c2t=function(){return this.rN()},M.f2t=function(){const t=u(this),s=t.rO(),i=t.iN();return i._l()<0||i.Gl()<0||i.xl()>s.um()||i.Tl()>s.xm()},M.d2t=function(i,e,n){const t=this.LL(),r=t.kL();if(!r.length)return!1;let h=r[0],o=h.xO(),a=h,l=R.Mr(o.I2(),o.E2(),e,n);for(let t=1,s=r.length;t<s;++t){h=r[t],o=h.xO();const u=R.Mr(o.I2(),o.E2(),e,n);(0===i&&u<l||1===i&&u>l)&&(l=u,a=h)}return t.zft(a),!0},x.C2=function(t){const s=this.xO();s.I2()!==t&&(s.C2(t),s.q4())},T.C2=function(t){this.x=+t},x.A2=function(t){const s=this.xO();s.E2()!==t&&(s.A2(t),s.q4())},T.A2=function(t){this.y=+t},x.p2t=function(t,s){const i=this.xO();i.m2t(t,s)||(i.X4(t,s),i.q4())},T.p2t=function(t,s){this.setPosition(t,s)},M.g2t=function(t,s){if(t){const i=d(this),e=t.DL(i);if(e){const[n,r]=e.y2t(s),h=i.xO();h.I2()===n&&h.E2()===r||(h.X4(n,r),h.q4())}}},M.w2t=function(t){if(0!==t){const s=u(this);s.K4(s.S2t()*t,s.v2t()*t),s.q4()}},x.b2t=function(t,s){if(0!==s){const i=this.xO();t=R.Sr(t),i.K4(Math.cos(t)*s,Math.sin(t)*s),i.q4()}},T.b2t=function(t,s){0!==s&&(t=R.Sr(t),this.Z4(Math.cos(t)*s,Math.sin(t)*s))},x.I2=function(){return this.xO().I2()},T.I2=function(){return this.x},x.E2=function(){return this.xO().E2()},T.E2=function(){return this.y},M.ED=function(){return w.ED(d(this))},x.M2t=function(t,s){return R.compare(this.xO().um(),t,s)},T.M2t=function(t,s){return R.compare(this.width,t,s)},x.x2t=function(t,s){return R.compare(this.xO().xm(),t,s)},T.x2t=function(t,s){return R.compare(this.height,t,s)},x.Sm=function(t){const s=this.xO();s.um()!==t&&(s.Sm(t),s.q4())},T.Sm=function(t){this.width=t},x.fm=function(t){const s=this.xO();s.xm()!==t&&(s.fm(t),s.q4())},T.fm=function(t){this.height=t},x.hC=function(t,s){const i=u(this);i.um()===t&&i.xm()===s||(i.hC(t,s),i.q4())},T.hC=function(t,s){this.KL(t,s)},x.um=function(){return this.xO().um()},T.um=function(){return this.width},x.xm=function(){return this.xO().xm()},T.xm=function(){return this.height},M.T2t=function(){return u(this).iN().xl()},M._2t=function(){return u(this).iN().Tl()},M.G2t=function(){return u(this).iN()._l()},M.I2t=function(){return u(this).iN().Gl()},M.C2t=function(){const t=u(this).iN();return(t.xl()+t._l())/2},M.P2t=function(){const t=u(this).iN();return(t.Tl()+t.Gl())/2},M.E2t=function(t,s){return R._r(u(this).iB(),R.Sr(s))<=R.Sr(t)},M.A2t=function(t){return R.Ir(u(this).iB(),R.Sr(t))},M.R2t=function(t,s){const i=R.Sr(t),e=R.Sr(s),n=u(this).iB(),r=!R.Ir(e,i);return r?!(!R.Ir(n,i)&&R.Ir(n,e)):R.Ir(n,i)&&!R.Ir(n,e)},x.sB=function(t){const s=this.xO(),i=R.yr(R.Sr(t));isNaN(i)||s.iB()===i||(s.sB(i),s.q4())},T.sB=function(t){this.sN=t},M.F2t=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.sB(s.iB()+R.Sr(t)),s.q4()}},M.D2t=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.sB(s.iB()-R.Sr(t)),s.q4()}},M.O2t=function(t,s){const i=u(this),e=i.iB(),n=R.Gr(e,R.Sr(s),R.Sr(t));isNaN(n)||e===n||(i.sB(n),i.q4())},M.k2t=function(t,s,i){const e=u(this),n=e.iB(),r=s-e.I2(),h=i-e.E2(),o=Math.atan2(h,r),a=R.Gr(n,o,R.Sr(t));isNaN(a)||n===a||(e.sB(a),e.q4())},M.L2t=function(t,s){const i=u(this),e=i.iB(),n=t-i.I2(),r=s-i.E2(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.sB(h),i.q4())},x.iB=function(){return R.vr(this.xO().iB())},T.iB=function(){return this.sN},M.B2t=function(t,s){return R.compare(R.Vr(100*u(this).OE(),6),t,s)},x.VB=function(){return this.xO().VB()},T.VB=function(){return this.isVisible},M.NB=function(t){const s=u(this);t=2===t?!s.VB():0!==t,s.VB()!==t&&(s.NB(t),w.EO())},M.LE=function(t){const s=R.gr(t/100,0,1),i=u(this);if(i.YN()){if(i.Krt().N2t()===s)return}else if(i.OE()===s)return;i.LE(s),w.EO()},M.W2t=function(t){l.xa(t);const s=u(this);s.aN().fa(l)||(s.lN(l),w.EO())},M.NE=function(){const t=u(this).aN();return R.Ur(t.na(),t.ra(),t.oa(),t.aa())},M.OE=function(){return R.Vr(100*u(this).OE(),6)},M.V2t=function(t){return!!t&&u(this).TO()===t},M.j2t=function(i){const t=this.LL(),e=t.kL();if(!e.length)return!1;let s=e[0],n=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],h=r.xO(),o=n.xO(),a=h.TO().RF(),l=o.TO().RF();0===i?(l<a||a===l&&h._O()>o._O())&&(n=r):(a<l||a===l&&h._O()<o._O())&&(n=r)}return t.zft(n),!0},x.H2t=function(t,s,i){const e=this.xO(),n=0===t?e.R2():e.tN();return R.compare(n,s,i)},T.H2t=function(t,s,i){const e=0===t?this.n5:this.Q4;return R.compare(e,s,i)},x.U2t=function(){this.xO().cN()},T.U2t=function(){this.uN()},x.z2t=function(){this.xO().dN()},T.z2t=function(){this.fN()},M.J2t=function(t){t&&u(this).mN(t)},M.q2t=function(t,s){const i=0===t;if(s){const e=d(this),n=s.$2t(e);n&&e.xO().yN(n,i)}},x.F2=function(t){const s=this.xO();s.R2()!==t&&(s.F2(t),w.EO())},T.F2=function(t){this.n5=t},M.X2t=function(){return u(this).TO().RF()},M.Y2t=function(){return u(this).TO().Kc()},x.Z2t=function(){return this.xO()._O()},T.Z2t=function(){return this.zIndex},x.K2t=function(){return this.xO().R2()},T.K2t=function(){return this.n5},x.Q2t=function(){return this.xO().tN()},T.Q2t=function(){return this.Q4},M.tbt=function(t){const s=d(this),i=s.E5().XL().Cnt(t);if(i){const e=i.RF(),n=s.xO().z4();return n.R6(e)}},M.sbt=function(t,s){const i=d(this),e=i.E5().XL().Cnt(s);if(e){const n=e.RF(),r=1===t,h=i.xO().z4();h.R6(n)!==r&&(h.F6(n,r),h.D6(),w.EO())}},M.ibt=function(t,s,i){const e=d(this),n=e.E5().XL().Cnt(t);if(n){s=Math.floor(s);const r=n.mT().yT(s);if(r){"color"===r?(l.xa(i),i=l):"percent"===r&&(i/=100);const h=n.RF(),o=e.xO().z4(),a=o.k6(h,s,i);a&&o.R6(h)&&w.EO()}}},R.lr(R.Rect)),F=[],v=[],_=!1,G=null,I=!1,D=new Set;M.ebt=function(w){if(this.lf.nbt())return function*(w){if(w){let t=this.lf,s=t.NF(),e=t.lD(),i=e.MD(),n=e.Ldt(),r=n.E5(),h=n.fvt(),o=n.dvt(),a=i.Bj(),l=t._tt(),u=l-1,c=a.mD(),f=i.Nj(c),d=h.get("collmemory"),p=(d||(d=R.lr(R.Ku),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.jf().addEventListener("instancedestroy",t=>E(d,t.I6))),r.LL()),m=w.LL(),g=p.kL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Pft()?(s.r2t(S.xO().TO(),w,S.xO().iN(),F),y=F,s.rbt(S,w,y)):y=m.kL();for(let t=0;t<y.length;++t){const v=y[t];if(s.dk(S,v)||s.hbt(S,v)){let t=A(d,S,v),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const b=!s||i<u;if(C(d,S,v,l),b){const M=c.Lj(),x=(e.Uj(M),r.LL()),T=w.LL();if(x.kft(!1),T.kft(!1),r===w){const _=x.Lft();R.Bh(_),_.push(S),_.push(v),r.Syt()}else{const G=x.Lft(),I=T.Lft();R.Bh(G),R.Bh(I),G.push(S),I.push(v),r.Syt(),w.Syt()}yield*c.uyt(a,f),e.Jj(M)}}else P(d,S,v)}R.Bh(F)}i.Yj()}return!1}.call(this,w);if(w){let t=this.lf,s=t.NF(),e=t.lD(),i=e.MD(),n=e.Ldt(),r=n.E5(),h=n.fvt(),o=n.dvt(),a=i.Bj(),l=t._tt(),u=l-1,c=a.mD(),f=i.Nj(c),d=h.get("collmemory"),p=(d||(d=R.lr(R.Ku),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.jf().addEventListener("instancedestroy",t=>E(d,t.I6))),r.LL()),m=w.LL(),g=p.kL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Pft()?(s.r2t(S.xO().TO(),w,S.xO().iN(),F),y=F,s.rbt(S,w,y)):y=m.kL();for(let t=0;t<y.length;++t){const v=y[t];if(s.dk(S,v)||s.hbt(S,v)){let t=A(d,S,v),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const b=!s||i<u;if(C(d,S,v,l),b){const M=c.Lj(),x=(e.Uj(M),r.LL()),T=w.LL();if(x.kft(!1),T.kft(!1),r===w){const _=x.Lft();R.Bh(_),_.push(S),_.push(v),r.Syt()}else{const G=x.Lft(),I=T.Lft();R.Bh(G),R.Bh(I),G.push(S),I.push(v),r.Syt(),w.Syt()}c.zj(a,f),e.Jj(M)}}else P(d,S,v)}R.Bh(F)}i.Yj()}return!1},M.obt=function(t){return e(d(this),t,0,0)},M.abt=function(t,s,i){return e(d(this),t,s,i)},M.ON=function(){return u(this).ON()},M.Sq=function(){return u(this).Sq()},M.lbt=function(i,e){const t=this.LL(),n=t.kL();if(0===n.length)return!1;let s=i.LL(),r=s.kL();if(s.Pft()){const a=[...this.lf.ubt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.Pft()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const l=n[t];if(1===e)for(const u of l._N())u.cbt(i)&&(null===h||h.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.MN()))continue}else t=l.TN();t.cbt(i)&&(null===h||h.has(t))&&o.add(t)}}return 0!==o.size&&(s.Vft(o),i.Syt(),!0)},M.fbt=function(i,e){const t=this.LL(),n=t.kL();if(0===n.length)return!1;let s=i.LL(),r=s.kL();if(s.Pft()){const a=[...this.lf.ubt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.Pft()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const l=n[t];2!==e||l.Sq()||!l.cbt(i)||null!==h&&!h.has(l)||o.add(l);for(const u of 0===e?l.children():l.EN())2===e&&u.Sq()||u.cbt(i)&&(null===h||h.has(u))&&o.add(u)}return 0!==o.size&&(s.Vft(o),i.Syt(),!0)},M.dbt=function(i,e,n){const t=this.LL(),r=t.kL();if(0===r.length)return!1;let s=i.LL(),h=s.kL();if(s.Pft()){const l=[...this.lf.ubt(i)];0<l.length&&(h=h.concat(l))}if(0===h.length)return!1;const o=s.Pft()?null:new Set(h),a=[];for(let t=0,s=r.length;t<s;++t){const u=r[t];if(0===e){const c=u.PN(n);null!==c&&c.cbt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.cbt(i)){if(0===n){null!==o&&!o.has(f)||a.push(f);break}--n}}return 0!==a.length&&(s.Wft(a),i.Syt(),!0)},M.pbt=function(t,s,i){const e=d(this);switch(t){case 0:default:return R.compare(e.IN(),s,i);case 1:return R.compare(e.mbt(),s,i)}},M.RN=function(t,s,i,e,n,r,h,o,a,l){const u=d(this),c=w.Ndt().E5();for(const f of t.gbt(u,c)){if(!f._L().fL())return;u.RN(f,{LN:s,NN:i,VN:e,HN:n,zN:r,XN:h,qN:o,ZN:a,QN:l})}},M.FN=function(t){const s=d(this),i=w.Ndt().E5();for(const e of t.gbt(s,i))s.FN(e)},M.ybt=function(){const t=d(this);if(t.ON()){const s=t.MN();s.FN(t)}},M.wbt=function(){return d(this).IN()},M.Sbt=function(){return d(this).mbt()},M.vbt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.n6(),i.q4()):i.i6(t,s)},M.h6=function(t,s,i,e,n,r,h,o){const a=u(this),l=a.h6(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,n5:r,u:h,v:o});l&&a.q4()},M.bbt=function(){const t=u(this);return t.a6()?t.l6().nb():0},M.Mbt=function(){const t=u(this);return t.a6()?t.l6().rb():0},M.xbt=function(t){const s=u(this);t=2===t?!s.VB():0!==t,s.VB()!==t&&s.NB(t)},M.v6=function(t,s){this instanceof self.C5?this.sj(t,s):this.v6(t,s)},M.Tbt=function(t,s){this instanceof self.C5?this.ij(t,""+s):this.Tbt(t,""+s)},M._bt=function(t){this instanceof self.C5?this.ej(t):this._bt(t)},M.Gbt=function(){this instanceof self.C5?this.KV():this.y6()},M.Ibt=function(){this instanceof self.C5?this.QV():this.w6()},M.Cbt=function(){return this instanceof self.C5?this.tj():this.Cbt()},M.Pbt=function(t){this instanceof self.C5?this._setEnabled(0!==t):this.Ebt(0!==t)},M.Abt=function(){return this instanceof self.C5?this.Lyt():this.Rbt()},x.Fbt=function(t,s,i){return R.compare(this.JW().Vrt(t),s,i)},T.Fbt=function(t,s,i){return R.compare(n(this).Vrt(t),s,i)},x.Dbt=function(t){return!!this.JW().Vrt(t)},T.Dbt=function(t){return!!n(this).Vrt(t)},M.Obt=function(i,e){const t=this.LL(),n=t.kL();if(!n.length)return!1;let r=this.jz(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=r?a.E5().Vwt(this.jwt()):0,u=a.Vrt(l+e);(null===h||0===i&&u<o||1===i&&u>o)&&(o=u,h=a)}return t.zft(h),!0},M.kbt=function(t){return(this.lf.Ldt().ovt()?r:s)(this,t)},M.TW=function(t){const s=new Set(R.Qh(t)),i=d(this).K5();return s.de(i)},M.Lbt=function(){return d(this).Bbt()},M.Nbt=function(){return d(this).K5().size},M.Wbt=function(t){return d(this).Vbt(t)},M.jbt=function(t,s){const i=R.Qh(s);if(0!==i.length){const e=d(this),n=new Set(e.K5());if(0===t)for(const r of i)n.add(r);else if(1===t)for(const h of i)n.delete(h);e.t4(n)}},M.Hbt=function(){w.L5(d(this))},M.Ubt=function(){return!0},M.zbt=function(){return!0},x.Jbt=function(t,s){this.JW().jrt(t,s)},T.Jbt=function(t,s){n(this).jrt(t,s)},x.qbt=function(t,s){const i=this.JW(),e=i.Vrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.jrt(t,e+s)},T.qbt=function(t,s){const i=n(this),e=i.Vrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.jrt(t,e+s)},x.$bt=function(t,s){const i=this.JW(),e=i.Vrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.jrt(t,e-s))},T.$bt=function(t,s){const i=n(this),e=i.Vrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.jrt(t,e-s))},x.Xbt=function(t,s){this.JW().jrt(t,s?1:0)},T.Xbt=function(t,s){n(this).jrt(t,s?1:0)},x.Ybt=function(t){const s=this.JW();s.jrt(t,0===s.Vrt(t)?1:0)},T.Ybt=function(t){const s=n(this);s.jrt(t,0===s.Vrt(t)?1:0)},M.Zbt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.Kbt(),i.RY("state"),i.j2(s,"state"),w.Qbt("state",{tMt:!0})},M.sMt=function(){return JSON.stringify(d(this).V2("state"))},M.iMt=function(){return d(this).E5().Kc()},M.eMt=function(){let t=w.kdt().M0t(),s=t.NL();for(const i of w.ubt(t))++s;return s},M.nMt=function(){return w.kdt().M0t().LL().kL().length},x.aX=function(){return this.JW().aX()},T.aX=function(){return n(this).aX()},x.U5=function(){return this.JW().U5()},T.U5=function(){return n(this).U5()},M.apt=function(t){const s=d(this);return t.toLowerCase()===w.lD().fpt(s)},M.i4=function(t){const s=d(this);w.lD().i4(s,t)},M.rMt=function(t){return w.lD().B1t().hMt(this.LL().kL(),t),!0},M.oMt=function(){return d(this).J5()},R.aMt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.iX,w=s.$nt,S=s.Xnt,v=Object.assign({},M,2<=i?T:x);n&&(y.l2t=v.l2t,y.u2t=v.u2t,y.c2t=v.c2t,y.f2t=v.f2t,y.d2t=v.d2t,w.C2=v.C2,w.A2=v.A2,w.p2t=v.p2t,w.g2t=v.g2t,w.w2t=v.w2t,w.b2t=v.b2t,S.lMt=v.I2,S.uMt=v.E2,S.dt=v.ED),r&&(y.M2t=v.M2t,y.x2t=v.x2t,w.Sm=v.Sm,w.fm=v.fm,w.hC=v.hC,S.cMt=v.um,S.fMt=v.xm,S.dMt=v.T2t,S.pMt=v._2t,S.mMt=v.G2t,S.gMt=v.I2t,S.yMt=v.C2t,S.wMt=v.P2t),h&&(y.SMt=v.E2t,y.vMt=v.A2t,y.R2t=v.R2t,w.sB=v.sB,w.F2t=v.F2t,w.D2t=v.D2t,w.O2t=v.O2t,w.k2t=v.k2t,w.L2t=v.L2t,S.bMt=v.iB),o&&(y.VB=v.VB,y.B2t=v.B2t,w.NB=v.NB,w.LE=v.LE,w.W2t=v.W2t,S.Opacity=v.OE,S.MMt=v.NE),a&&(y.V2t=v.V2t,y.j2t=v.j2t,y.H2t=v.H2t,w.U2t=v.U2t,w.z2t=v.z2t,w.J2t=v.J2t,w.q2t=v.q2t,w.F2=v.F2,S.X2t=v.X2t,S.Y2t=v.Y2t,S.Z2t=v.Z2t,S.K2t=v.K2t,S.Q2t=v.Q2t),l&&(y.tbt=v.tbt,w.sbt=v.sbt,w.ibt=v.ibt),d&&(y.ON=v.ON,y.Sq=v.Sq,y.lbt=v.lbt,y.fbt=v.fbt,y.dbt=v.dbt,y.pbt=v.pbt,w.RN=v.RN,w.FN=v.FN,w.ybt=v.ybt,S.wbt=v.wbt,S.Sbt=v.Sbt),p&&(w.vbt=v.vbt,w.h6=v.h6,S.bbt=v.bbt,S.Mbt=v.Mbt),u&&(y.VB=v.VB,w.NB=v.xbt,w.xMt=v.v6,w.TMt=v.Tbt,w._Mt=v._bt),c&&(y.GMt=v.Cbt,w.IMt=v.Gbt,w.CMt=v.Ibt),f&&(y.Zu=v.Abt,w.PMt=v.Pbt),m&&(y.ebt=v.ebt,y.obt=v.obt,y.abt=v.abt,s.EMt=b),e||(y.Fbt=v.Fbt,y.Dbt=v.Dbt,y.Obt=v.Obt,y.kbt=v.kbt,y.TW=v.TW,w.Jbt=v.Jbt,w.qbt=v.qbt,w.$bt=v.$bt,w.Xbt=v.Xbt,w.Ybt=v.Ybt,w.jbt=v.jbt,y.Ubt=v.Ubt,y.zbt=v.zbt,w.Hbt=v.Hbt,w.Zbt||(w.Zbt=v.Zbt),S.sMt||(S.sMt=v.sMt),S.eMt=v.eMt,S.nMt=v.nMt,S.AMt=v.aX,S.RMt=v.U5,S.iMt=v.iMt,S.Lbt=v.Lbt,S.Nbt=v.Nbt,S.Wbt=v.Wbt,y.apt=v.apt,w.i4=v.i4,w.rMt=v.rMt),g&&(S.oMt=v.oMt)}}{const Ko=self.Bs;Ko.N1t=class extends Ko.rr{constructor(t){super(),this.$ft=t,this.yf="",this.uR=-1,this.FMt="",this.DMt=!1,this.OMt=null,this.e0t=0,this.Amt=[],this.l0t=null,this.kMt=new Map,this.LMt=null,this.BMt=null,this.NMt=-1,this.kyt=null,this.WMt=null,this.VMt=!1}ur(){this.yf="",this.uR=-1,this.FMt="",this.OMt=null,this.BMt=null,this.kyt=null,this.WMt=null,this.NMt=-1,Ko.Bh(this.Amt),this.l0t&&(this.l0t.clear(),this.l0t=null);for(const t of this.kMt.values())t.ur();this.kMt.clear(),this.LMt=null}G2(){const t=this.$ft,s=t.UO().Vz(),i=t.kdt(),e=(this.OMt=i.mD(),this.e0t=i.m0t()+1,t.Ept(this.OMt));e&&(this.BMt=e,this.kyt=e.Qyt(),this.WMt=e.Kyt().map(t=>t.vet()),e.eyt())&&(this.NMt=e.ewt());for(const r of s){const h=r.LL();h.Pft()&&!this.OMt.Igt(r)||(this.Amt.push(r),this.kMt.set(r,Ko.lr(Ko.jMt,h)))}const n=t.gD();this.l0t=0<n.size?n:null}HMt(t){this.yf="timer",this.G2(),this.uR=this.$ft.UO().FD()+t}UMt(t){this.yf="signal",this.G2(),this.FMt=t.toLowerCase()}hMt(t,s){this.yf="instance-signals",this.G2(),this.FMt=s.toLowerCase(),this.LMt=new Set(t)}zMt(t){this.yf="promise",this.G2(),t.then(()=>this.npt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.npt()})}JMt(){return"timer"===this.yf}ipt(){return"signal"===this.yf}upt(){return"instance-signals"===this.yf}Gpt(){return"promise"===this.yf}ept(){return this.FMt}qMt(){return this.DMt}npt(){this.DMt=!0}cpt(t){this.LMt.delete(t),0===this.LMt.size&&this.npt()}j1t(){return this.JMt()?this.uR<=this.$ft.UO().FD():this.qMt()}$Mt(t){t.u0t(this.OMt,this.e0t);for(const[i,e]of this.kMt.entries()){const n=i.LL();e.u0t(n)}this.l0t&&t.C0t([...this.l0t]);const s=this.BMt;s&&(s.pyt(this.kyt),s.Kyt().map((t,s)=>t.int(this.WMt[s])),s.eyt())&&s.nwt(this.NMt)}H1t(t){this.$Mt(t),this.OMt.nyt(t),this.BMt&&this.BMt.eyt()&&this.BMt.Tyt(this.NMt),this.$ft.D1t(this.Amt),this.VMt=!0}async q1t(t){this.$Mt(t);for(const s of this.OMt.ryt(t))await this.$ft.UO().y1t(s);this.BMt&&this.BMt.eyt()&&this.BMt.Tyt(this.NMt),this.$ft.D1t(this.Amt),this.VMt=!0}U1t(){return this.VMt}Tft(t){for(const s of this.kMt.values())s.Tft(t);if("instance-signals"===this.yf){for(const i of t)this.LMt.delete(i);0===this.LMt.size&&this.npt()}}mq(){const t={},s={wt:this.yf,t:this.uR,st:this.FMt,s:this.DMt,ev:this.OMt.Zz(),sm:this.Amt.map(t=>t.Zz()),dsm:this.l0t?[...this.l0t].map(t=>t.Zz()):null,sols:t};this.OMt.zgt(this.e0t)&&(s.act=this.OMt.Wdt(this.e0t).Zz());for(const[i,e]of this.kMt)t[i.Zz().toString()]=e.mq();return"instance-signals"===this.yf&&(s.pi=[...this.LMt].map(t=>t.U5())),s}static Ipt(t,s){const i=t.UO(),e=t.Xdt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const h=t.Zdt(s.act);if(!h)return null;n=h.RF()}const r=Ko.lr(Ko.N1t,t);r.uR=s.t,s.hasOwnProperty("wt")?r.yf=s.wt:r.yf=-1===r.uR?"signal":"timer",r.FMt=s.st,r.DMt=s.s,r.OMt=e,r.e0t=n;for(const o of s.sm){const a=i.Ej(o);a&&r.Amt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.Ej(l);u&&(r.l0t||(r.l0t=new Set),r.l0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.Ej(d);if(p){const m=Ko.lr(Ko.jMt,null);m.gq(t,f),r.kMt.set(p,m)}}if("instance-signals"===r.yf){r.LMt=new Set;for(const g of s.pi){const y=i.wO(g);y&&r.LMt.add(y)}}return r}}}{const Qo=self.Bs;Qo.jMt=class extends Qo.rr{constructor(t){super(),this.yft=null,this.XMt=!0,this.LU=[],t&&(this.yft=t.E5(),this.XMt=t.Pft(),Qo.jh(this.LU,t.Lft()))}ur(){this.yft=null,Qo.Bh(this.LU)}u0t(t){t.kft(this.XMt),Qo.jh(t.Lft(),this.LU)}Tft(t){Qo.qh(this.LU,t)}mq(){return{sa:this.XMt,insts:this.LU.map(t=>t.U5())}}gq(t,s){const i=t.UO();this.XMt=!!s.sa,Qo.Bh(this.LU);for(const e of s.insts){const n=i.wO(e);n&&this.LU.push(n)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ta=self.Bs;ta.YMt=class extends ta.rr{constructor(t){super(),this.lf=t.runtime,this.ZMt=!!t.Qk,this.KMt=!!t.QMt,this.txt=!!t.rL,this.sxt=!!t.ixt,this.nxt=!!t.oL,this.rxt=!!t.hxt,this.oxt=!!t.dL,this.axt=!!t.eL,this.lxt=!!t.lL,this.uxt=t.cxt,this.fxt=null,this.dxt=new Map,this.pxt=new Map,this.mxt=new Map,this.gxt=new Map,this.yxt=t.wxt,this.Sxt=null}ur(){this.lf=null}UO(){return this.lf}vxt(){}lpt(){return(2<=this.hvt()?this.Sxt:this).constructor}hvt(){return this.uxt}bxt(t=!1){let s=this.yxt;return t&&"function"!=typeof s&&2<=this.hvt()?globalThis.QW:s}tL(){return this.ZMt}iL(){return this.KMt}nL(){return this.axt}uL(){return this.lxt}hL(){return this.txt}Zv(){return this.sxt}aL(){return this.nxt}fL(){return this.rxt}pL(){return this.oxt}Pwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.dxt.get(t);return i||(i=t.bind(s),this.dxt.set(t,i)),i}ivt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.pxt,t),n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n)),n}evt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let n=l(this.mxt,t),r=l(n,i),h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h)),h}nvt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");let r=l(this.gxt,t),h=l(r,i),o=l(h,e),a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a)),a}Mxt(t){if(!this.tL())throw new Error("must be single-global plugin");this.fxt=t}vL(){if(this.tL())return this.fxt;throw new Error("must be single-global plugin")}ML(){if(this.tL())return this.fxt.ML();throw new Error("must be single-global plugin")}xxt(){const t=this.hvt(),s=(ta.Zk.Txt(this,t),this.bxt(!0));if(s){if(this.Sxt=new s,!(this.Sxt instanceof self.$k))throw new TypeError("plugin class must derive from IPlugin")}else this.Sxt=new self.$k;ta.Zk._xt(t)}yL(){return this.Sxt}}}{const sa=self.Bs;sa.Gxt=class extends sa.YMt{constructor(t,s){super(t),this.Ixt=s,this.Cxt=0,this.Pxt=new Map,this.Ext("elem-focused",t=>t.Axt()),this.Ext("elem-blurred",t=>{t&&t.Rxt()})}ur(){super.ur()}Fxt(t){const s=this.Cxt++;return this.Pxt.set(s,t),s}Dxt(t){this.Pxt.delete(t)}Ext(t,i){this.lf.b4(this.Ixt,t,t=>{const s=this.Pxt.get(t.elementId);i(s,t)})}}}{const ia=self.Bs;ia.Oxt=class extends ia.rr{constructor(t){super(),this.yft=t,this.lf=t.UO(),this.kxt=t._L()}ur(){this.yft=null,this.lf=null,this.kxt=null}E5(){return this.yft}UO(){return this.lf}_L(){return this.kxt}tW(){return this.yft.tW()}vxt(){}wvt(t){}e2t(t){}n2t(t){}G$(t){}R$(){}P$(){}K$(t){}Lxt(){}bxt(){return null}Bxt(t,s,i){const e=ia.lr(ia.Event,t,s);e.Nxt=this,i&&Object.assign(e,i),this.E5().OX(e)}}}{const ea=self.Bs;ea.Wxt=class extends ea.rr{constructor(t,s){super(),this._i=t,this.Ixt=s,this.Vxt=null,this.lf=t.UO(),this.yft=this._i.E5(),this.jxt=this.yft.i2t(),this.bY=null,this.xY=null,this.I4=!1,this.P4=!1,this.v0=null,this.AI=!1}ur(){this.AI=!0,this.Hxt(),this.Uxt(),this.bY=null,this.xY=null,this.v0&&(this.v0.ur(),this.v0=null),this._i=null,this.lf=null,this.yft=null,this.jxt=null}cr(){return this.AI}JW(){return this._i}UO(){return this.lf}E5(){return this.yft}_L(){return this.jxt._L()}i2t(){return this.jxt}zxt(){return this._i.SO()}y4(t){return this.lf.y4(t,this._i,null)}Jxt(t){return this.lf.Jxt(t,this._i,null)}S4(t){return this.lf.S4(t,this._i,null)}qxt(t,s){return this.lf.qxt(t,this._i,s)}$xt(t,s){return this.lf.$xt(t,this._i,s)}Xxt(t){return this.lf.Xxt(t)}Yxt(t,s){this.lf.b4(this.Ixt,t,s)}Zxt(t){for(const[s,i]of t)this.Yxt(s,i)}Kxt(t,s){this.lf.ff(this.Ixt,t,s)}Qxt(t,s){return this.lf.RO(this.Ixt,t,s)}tTt(t,s){if(!this.lf.qF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Ixt,handler:t,data:s,responseId:null});this.Kxt(t,s)}sTt(t){if(!t)throw new Error("cannot set empty component id");this.Vxt=t}iTt(){if(this.Vxt)return this.lf.D4(this.Vxt);throw new Error("wrapper extension component id not set")}L4(t,s){if(!this.Vxt)throw new Error("wrapper extension component id not set");this.lf.L4(this.Vxt,t,s)}eTt(t){for(const[s,i]of t)this.L4(s,i)}vj(t,s){if(!this.Vxt)throw new Error("wrapper extension component id not set");this.lf.vj(this.Vxt,t,s)}bj(t,s){if(this.Vxt)return this.lf.bj(this.Vxt,t,s);throw new Error("wrapper extension component id not set")}EZ(){}nTt(){}rTt(){this.I4||(this.bY||(this.bY=()=>this.EZ()),this.lf.jf().addEventListener("tick",this.bY),this.I4=!0)}Hxt(){this.I4&&(this.lf.jf().removeEventListener("tick",this.bY),this.I4=!1)}hTt(){return this.I4}oTt(){this.P4||(this.xY||(this.xY=()=>this.nTt()),this.lf.jf().addEventListener("tick2",this.xY),this.P4=!0)}Uxt(){this.P4&&(this.lf.jf().removeEventListener("tick2",this.xY),this.P4=!1)}aTt(){return this.P4}lTt(){return[]}V2(){return null}j2(t){}Rrt(t){}Brt(t,s){}Rht(t,s,i){if(0!==s){const e=this.Rrt(t);if("number"!=typeof e)throw new Error("expected number");this.Brt(t,e+s,i)}}uTt(t,s,i,e){}cTt(t,...s){t.call(this,...s)}fTt(t,...s){return t.call(this,...s)}bxt(){return null}Bxt(t,s,i){if(this._i.dTt()){const e=this.zxt(),n=ea.lr(ea.Event,t,s);n.I6=e,i&&Object.assign(n,i),e.dispatchEvent(n)}}Zv(){return!1}}}{const na=self.Bs;na.pTt=class extends na.Wxt{constructor(t,s){super(t,s),this.Tst=t.xO(),this.mTt=null,this.gTt=null}ur(){if(this.mTt){const t=this.lf.jf();t.removeEventListener("renderercontextlost",this.mTt),t.removeEventListener("renderercontextrestored",this.gTt),this.mTt=null,this.gTt=null}this.Tst=null,super.ur()}yTt(){this.wTt()}STt(){}vTt(){}wTt(){if(!this.mTt){this.mTt=()=>this.PU(),this.gTt=()=>this.bTt();const t=this.lf.jf();t.addEventListener("renderercontextlost",this.mTt),t.addEventListener("renderercontextrestored",this.gTt)}}PU(){this.STt()}bTt(){this.vTt()}xO(){return this.Tst}mit(){return!1}pit(){if(!this.mit())throw new Error("original size not known");const t=this.MTt();if(t)return t.um()}yit(){if(!this.mit())throw new Error("original size not known");const t=this.MTt();if(t)return t.xm()}MTt(){return null}xTt(){const t=this.MTt();if(t){const s=t.jM();if(s)return[s.um(),s.xm()]}return[100,100]}TTt(){const t=this.MTt();return t?t.LC():null}_Tt(){const t=this.MTt();return t?t.GTt():null}ITt(){const t=this.MTt();return!!t&&t.CTt()}y2t(t){const s=this._i.xO();return[s.I2(),s.E2(),s.tN()]}Lxt(t,s,i){}PTt(t,s){}JJ(){return!0}}}{const ra=self.Bs,ha=ra.lr(ra.Rect);ra.ETt=class extends ra.pTt{constructor(t,s){super(t,s),this.ATt=this._L().Fxt(this),this.RTt=!0,this.FTt=!1,this.DTt=!1,this.OTt=-.2,this.kTt=ra.lr(ra.Rect,0,0,-1,-1);const i=this.lf.Dk();this.LTt=i.kV(),this.BTt=i.LV(),this.NTt=-1,this.WTt=-1,this.VTt=!1,this.rTt()}ur(){this._L().Dxt(this.ATt),this.jTt("destroy"),this.ATt=-1,super.ur()}m6(){if(this.lf.qF())throw new Error("not valid in worker mode");return this.HTt("get-element")}jTt(t,s){(s=s||{}).elementId=this.ATt,this.Kxt(t,s)}HTt(t,s){return(s=s||{}).elementId=this.ATt,this.tTt(t,s)}UTt(t,s){return(s=s||{}).elementId=this.ATt,this.Qxt(t,s)}zTt(t){t=t||{};const s=this.xO();t.elementId=this.ATt,t.isVisible=s.VB(),t.htmlIndex=s.TO().HV(),t.htmlZIndex=s.UV(),Object.assign(t,this.JTt()),this.RTt=!!t.isVisible,this.tTt("create",t),this.qTt(!0)}xbt(t){this.RTt!==(t=!!t)&&(this.RTt=t,this.jTt("set-visible",{isVisible:t}))}EZ(){this.qTt(!1)}$Tt(){const t=this.lf.Dk().XV();return"Android"===ra.li.ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}qTt(u){if(!this.JW().YV()){let t=this.xO(),s=t.TO(),i=t.iN(),[e,n]=s.b5(i.xl(),i.Tl()),[r,h]=s.b5(i._l(),i.Gl()),o=this.lf.Dk(),a=o.Bk(),l=o.Wk();if(t.VB()&&s.VB())if(!this.$Tt()&&(r<=0||h<=0||a<=e||l<=n))this.xbt(!1);else{ha.set(e,n,r,h);const c=o.kV(),f=o.LV(),d=s.HV(),p=t.UV();if(!u&&ha.equals(this.kTt)&&this.LTt===c&&this.BTt===f&&this.NTt===d&&this.WTt===p)this.xbt(!0);else{this.kTt.G(ha),this.LTt=c,this.BTt=f,this.NTt=d,this.WTt=p,this.xbt(!0);let t=null;this.DTt&&(t=s.ZV()+this.OTt),this.jTt("update-position",{left:Math.round(this.kTt.xl()),top:Math.round(this.kTt.Tl()),width:Math.round(this.kTt.width()),height:Math.round(this.kTt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.xbt(!1)}}y6(){this.HTt("focus",{focus:!0})}w6(){this.HTt("focus",{focus:!1})}Axt(){this.FTt=!0}Rxt(){this.FTt=!1}Cbt(){return this.FTt}v6(t,s){this.jTt("set-css-style",{prop:ra.Wo(t),val:s})}Tbt(t,s){this.jTt("set-attribute",{name:t,val:s})}_bt(t){this.jTt("remove-attribute",{name:t})}XTt(){this.VTt||(this.VTt=!0,Promise.resolve().then(()=>{this.VTt=!1,this.jTt("update-state",this.JTt())}))}JTt(){}YTt(){return this.ATt}}}{const oa=self.Bs,aa=self.E6;oa.ZTt=class extends oa.rr{constructor(t){super(),this.lf=t.runtime,this.KTt=oa.lr(oa.hc),this.QTt=oa.lr(oa.hc),this.uxt=t.cxt,this.yxt=t.wxt,this.t_t=null}ur(){this.QTt.ur(),this.KTt.ur(),this.lf=null}UO(){return this.lf}vxt(){}hvt(){return this.uxt}bxt(t=!1){let s=this.yxt;return t&&"function"!=typeof s&&2<=this.hvt()?globalThis.hj:s}s_t(t){this.KTt.uc(t)}eZ(){return this.KTt.cc()}Pz(t){this.QTt.uc(t)}Rz(t){this.QTt.ic(t)}kL(){return this.QTt.cc()}xxt(){const t=this.hvt(),s=(oa.Zk.Txt(this,t),this.bxt(!0));if(s){if(this.t_t=new s,!(this.t_t instanceof aa))throw new TypeError("behavior class must derive from IBehavior")}else this.t_t=new aa;oa.Zk._xt(t)}M6(){return this.t_t}}}{const la=self.Bs;la.i_t=class extends la.rr{constructor(t){super(),this.lf=t.UO(),this.Uwt=t,this.yft=t.E5(),this.e_t=t.x6(),this.e_t.s_t(this.yft)}ur(){this.lf=null,this.Uwt=null,this.yft=null,this.e_t=null}vxt(){}G6(){return this.Uwt}E5(){return this.yft}UO(){return this.lf}x6(){return this.e_t}}}{const ua=self.Bs;ua.n_t=class extends ua.rr{constructor(t,s){super(),this.r_t=t,this.Ixt=s,this._i=t.C6(),this.lf=t.UO(),this.Uwt=t.G6(),this.jxt=this.Uwt.i2t(),this.I4=!1,this.P4=!1,this.wj=!1,this.v0=null}ur(){this.Hxt(),this.Uxt(),this.h_t(),this.v0&&(this.v0.ur(),this.v0=null),this.r_t=null,this._i=null,this.lf=null,this.Uwt=null,this.jxt=null}x6(){return this.Uwt.x6()}o_t(){return this.r_t}C6(){return this._i}E5(){return this._i.E5()}xO(){return this._i.xO()}UO(){return this.lf}G6(){return this.Uwt}i2t(){return this.jxt}zxt(){return this.r_t.zxt()}y4(t){return this.lf.y4(t,this._i,this.Uwt)}Jxt(t){return this.lf.Jxt(t,this._i,this.Uwt)}S4(t){return this.lf.S4(t,this._i,this.Uwt)}a_t(){}EZ(){}nTt(){}l_t(){}rTt(){this.I4||(this.lf.fj(this),this.I4=!0)}Hxt(){this.I4&&(this.lf.dj(this),this.I4=!1)}hTt(){return this.I4}oTt(){this.P4||(this.lf.pj(this),this.P4=!0)}Uxt(){this.P4&&(this.lf.mj(this),this.P4=!1)}aTt(){return this.P4}u_t(){this.wj||(this.lf.gj(this),this.wj=!0)}h_t(){this.wj&&(this.lf.yj(this),this.wj=!1)}c_t(){return this.wj}lTt(){return[]}Yxt(t,s){this.lf.b4(this.Ixt,t,s)}f_t(t,s){}V2(){return null}j2(t){}Rrt(t){}Brt(t,s){}Rht(t,s){if(0!==s){const i=this.Rrt(t);if("number"!=typeof i)throw new Error("expected number");this.Brt(t,i+s)}}uTt(t,s,i,e){}cTt(t,...s){t.call(this,...s)}fTt(t,...s){return t.call(this,...s)}bxt(){return null}Bxt(t,s,i){if(this.r_t.dTt()){const e=this.zxt(),n=ua.lr(ua.Event,t,s);n.d_t=e,n.I6=e.I6,i&&Object.assign(n,i),e.dispatchEvent(n)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Bs),i=(r.nX={},r.Hat={},r.Ns()),e=[],n=[],h=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.Zk=class extends r.rr{constructor(t,s){super(),this.lf=t,this.p_t=[],this.Twt=null,this.m_t=[],this.g_t=new Map,this.y_t=null,this.w_t=null,this.S_t=new Set(s)}v_t(t){const s=t[19],i=this.lf.Cyt(t[0]);if(!i)throw new Error("missing plugin");r.aMt(t,i,s);const e=2<=s?r.YMt:i,n=r.lr(e,{runtime:this.lf,Qk:t[1],QMt:t[2],rL:t[5],oL:t[8],ixt:t[9],hxt:t[13],dL:t[14],eL:t[17],lL:t[18],cxt:s,wxt:2<=s?i:null});n.vxt(),this.p_t.push(n),u.set(i,n)}b_t(){this.Twt=r.lr(r.nX.eX,{runtime:this.lf,Qk:!0}),this.Twt.vxt()}M_t(t){const i=t[1],e=this.lf.Cyt(t[0]);if(!e)throw new Error("missing behavior");this.g_t.set(e,()=>{const t=2<=i?r.ZTt:e,s=r.lr(t,{runtime:this.lf,cxt:i,wxt:2<=i?e:null});s.vxt(),this.m_t.push(s),c.set(e,s),!this.y_t&&r.Hat.solid&&s instanceof r.Hat.solid?this.y_t=s:!this.w_t&&r.Hat.jumpthru&&s instanceof r.Hat.jumpthru&&(this.w_t=s),s.xxt()})}x_t(t){const s=this.g_t.get(t);s&&(s(),this.g_t.delete(t))}static Txt(t,s=1){if(r.Zk.Txt!==o)throw new Error("invalid method");1===s&&e.push(t),n.push(t)}static _xt(t=1){if(r.Zk._xt!==a)throw new Error("invalid method");1===t&&e.pop(),n.pop()}static D5(){if(r.Zk.D5!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static Yk(t){if(r.Zk.Yk!==l)throw new Error("invalid method");if(s(t),0===n.length)throw new Error("no init object set");return n.at(-1)}static T_t(t){h.push(t)}static __t(){h.pop()}static m4(){if(0===h.length)throw new Error("no init properties set");return h.at(-1)}G_t(){for(const t of this.p_t)t.xxt()}static gL(t){return u.get(t)||null}static A6(t){return c.get(t)||null}_wt(){return this.Twt}I_t(){return this.y_t}C_t(){return this.w_t}D4(t){return this.S_t.has(t)}},o=r.Zk.Txt,a=r.Zk._xt,t=r.Zk.D5,l=r.Zk.Yk}{const ca=self.Bs,fa=new Set;ca.P_t=class extends ca.rr{constructor(){super(),this.E_t=0,this.wU="",this.SU=0,this.A_t=0,this.R_t=0,this.Xm=0,this.Ym=0,this.F_t=!1,this.D_t=!1,this.O_t=null,this.k_t="",this.TI=ca.lr(ca.Rect),this.L_t=ca.lr(ca.Ql),this.B_t="",this.N_t=new self.jO(this),fa.add(this)}ur(){this.II(),this.O_t&&0===this.O_t.RU()&&this.O_t.ur(),this.O_t=null,fa.delete(this),this.W_t()}static PU(){for(const t of fa)t.k_t="",t.TI.set(0,0,0,0),t.L_t.vu(t.TI)}V_t(t){this.wU=t[0],this.SU=t[1],this.A_t=t[2],this.R_t=t[3],this.Xm=t[4],this.Ym=t[5],this.F_t=t[6],this.D_t=!0}j_t(t,s){if(this.O_t)throw new Error("already loaded asset");this.wU=s;const i={};return ca.wo(s)&&(i.XH="remote"),this.HO(t,i),this.O_t.KH()}H_t(t,s){if(this.O_t)throw new Error("already loaded asset");this.wU="",this.SU=s.size,this.O_t=ca.lr(ca.YH,t.kF(),{blob:s,size:this.SU,XH:"local"})}U_t(t){if(t===this)throw new Error("cannot replace with self");this.E_t++,this.II(),this.wU=t.wU,this.SU=t.SU,this.A_t=t.A_t,this.R_t=t.R_t,this.Xm=t.Xm,this.Ym=t.Ym,this.F_t=t.F_t,this.D_t=t.D_t,this.O_t=t.O_t,this.k_t=t.k_t,this.TI=t.TI,this.L_t=t.L_t,this.W_t()}ZH(){return this.wU}nc(){return this.SU}z_t(){return this.A_t}J_t(){return this.R_t}CTt(){return this.F_t}um(){return this.Xm}xm(){return this.Ym}q_t(){return this.O_t.um()}$_t(){return this.O_t.xm()}HO(t,s){if(this.O_t)throw new Error("already got asset");s=Object.assign({},s,{url:this.ZH(),size:this.nc()}),this.O_t=t.$H(s)}xU(){return this.O_t&&this.O_t.xU()}async C8(t,s){if(!this.O_t)throw new Error("no asset");if(this.k_t)throw new Error("already loaded texture");const i=this.E_t,e=(this.k_t="loading",await this.O_t.C8(t,s));if(this.E_t!==i)return null;if(!e)return this.k_t="",null;this.k_t="loaded",this.D_t||(this.Xm=e.um(),this.Ym=e.xm(),this.D_t=!0);const n=this.F_t?this.Ym:this.Xm,r=this.F_t?this.Xm:this.Ym;return this.TI.set(this.A_t,this.R_t,this.A_t+n,this.R_t+r),this.TI.Ct(e.um(),e.xm()),this.L_t.vu(this.TI),this.F_t&&this.L_t.Gu(),e}II(){this.k_t&&(this.O_t&&this.O_t.II(),this.k_t="",this.TI.set(0,0,0,0),this.L_t.vu(this.TI))}jM(){return this.O_t&&"loaded"===this.k_t?this.O_t.jM():null}LC(){return this.TI}GTt(){return this.L_t}fV(){return this.N_t}X_t(){return this.O_t}async Y_t(t){t=t||await this.O_t.FU();const s=ca.Ao(this.Xm,this.Ym),i=s.getContext("2d");return this.F_t?(i.rotate(Math.PI/-2),i.translate(-this.Ym,0),i.drawImage(t,this.A_t,this.R_t,this.Ym,this.Xm,0,0,this.Ym,this.Xm)):i.drawImage(t,this.A_t,this.R_t,this.Xm,this.Ym,0,0,this.Xm,this.Ym),s}async Z_t(t){if(!this.B_t){const s=await this.Y_t(t),i=await ca.Ro(s);this.B_t=URL.createObjectURL(i)}return this.B_t}W_t(){this.B_t&&(URL.revokeObjectURL(this.B_t),this.B_t="")}}}{const da=self.Bs;da.K_t=class extends da.rr{constructor(t){super(),this.pr=t[0],this.Q_t=t[1],this.OSt=!!t[2],this.aot=t[3],this.tGt=t[4],this.sGt=!!t[5],this.m7=t[6],this.iGt=t[7].map(t=>da.lr(da.eGt,t)),this.nGt=new self.L6(this)}static rGt(t,s){const i=da.lr(da.K_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.iGt.push(da.eGt.rGt(t)),i}ur(){for(const t of this.iGt)t.ur();da.Bh(this.iGt)}hGt(t){for(const s of this.iGt)s.tW().HO(t)}oGt(s,i){return Promise.all(this.iGt.map(t=>t.tW().C8(s,i)))}aGt(){for(const t of this.iGt)t.tW().II()}Kc(){return this.pr}Zz(){return this.m7}z6(){return this.iGt.length}q6(){return this.iGt}lGt(t){if((t=Math.floor(t))<0||t>=this.iGt.length)throw new RangeError("invalid frame");return this.iGt[t]}uGt(t,s){(s=Math.floor(s))<0?this.iGt.unshift(t):s>=this.iGt.length?this.iGt.push(t):this.iGt.splice(s,0,t)}cGt(t){if((t=Math.floor(t))<0||t>=this.iGt.length)throw new RangeError("invalid frame");this.iGt[t].ur(),this.iGt.splice(t,1)}fGt(i){for(let t=0,s=this.iGt.length;t<s;++t)if(da.vn(this.iGt[t].SW(),i))return t;return-1}dGt(t){if("string"!=typeof t)return t;{const s=this.fGt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}B6(){return this.Q_t}N6(){return this.OSt}W6(){return this.aot}j6(){return this.tGt}U6(){return this.sGt}pGt(){return this.nGt}}}{const pa=self.Bs,ma=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();pa.eGt=class extends pa.rr{constructor(t){super(),this.mGt=pa.lr(pa.P_t),this.mGt.V_t(t),this.gGt=t[7],this.yGt=pa.lr(pa.Qa,t[8],t[9]),this.wGt=t[10].map(t=>pa.lr(pa.SGt,this,t)),this.vGt=new Map;for(const i of this.wGt)this.vGt.set(i.Kc().toLowerCase(),i);this.bGt=null;const s=t[11];6<=s.length&&(this.bGt=pa.lr(pa.Fu,s)),this.Yg=t[12]||"",this.MGt=new self.Q6(this)}static rGt(t){const s=pa.lr(pa.eGt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.mGt.H_t(t,ma),s}ur(){this.bGt&&(this.bGt.ur(),this.bGt=null),this.mGt.ur(),this.mGt=null}tW(){return this.mGt}sW(){return this.gGt}eW(){return this.yGt.nl()}rW(){return this.yGt.hl()}mW(){return this.bGt}dW(t){return this.vGt.get(t.toLowerCase())||null}fW(t){return(t=Math.floor(t))<0||t>=this.wGt.length?null:this.wGt[t]}aW(){return this.wGt.length}SW(){return this.Yg}X6(){return this.MGt}}}{const ga=self.Bs;ga.SGt=class extends ga.rr{constructor(t,s){super(),this.xGt=t,this.pr=s[0],this.TGt=ga.lr(ga.Qa,s[1],s[2])}ur(){}Kc(){return this.pr}I2(){return this.TGt.nl()}E2(){return this.TGt.hl()}_Gt(){return this.TGt}}}{const M=self.Bs,ya=self.C3Debugger,wa=self.xL;M.Hlt=class extends M.rr{constructor(s,t,i){super();const e=s.Cyt(i[1]),[n,r]=(this.lf=s,this.kxt=M.Zk.gL(e),this.jxt=null,this.GGt=e.Instance,this.Xg=t,this.m7=i[11],this.pr=i[0],this.cwt=this.lf.Jdt(i[14]),this.IGt=!!i[9],this.CGt=!!i[2],this.PGt=!!i[10],this.EGt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],AGt:s.Jdt(t[3])})),this.RGt=i[4],this.FGt=i[5],this.KMt=this.kxt.iL(),this.DGt=M.lr(M.Event.jf),this.Z7=null,s.NF().vk());if(this.OGt=M.lr(M.kGt,n,r),this.LGt=!0,this.BGt=null,this.NGt=null,this.WGt=-1,this.VGt=null,this.jGt=null,this.HGt=null,this.UGt=null,this.zGt=null,this.JGt=!1,this.qGt=null,this.$Gt=i[8].map(t=>M.XGt.gx(this,t)),this.YGt=[],this.ZGt=new Map,this.KGt=new Map,this.QGt=new Set,this.tIt=new Map,this.sIt=M.lr(M.gft,this),this.iIt=null,this.eIt=0,this.nIt=!1,this.qGt=null,this.mGt=null,this.rIt=null,this.hIt=null,this.oIt=null,this.aIt=0,this.WSt=new Map,this.VSt=new Map,this.LU=[],this.lIt=new Map,this.uIt=!0,this.kxt.aL()&&(this.Z7=M.lr(M.K7,this,i[12])),i[6]&&(this.mGt=M.lr(M.P_t),this.mGt.V_t(i[6])),i[7]){this.rIt=i[7].map(t=>M.lr(M.K_t,t)),this.hIt=new Map,this.oIt=new Map;for(const a of this.rIt)this.hIt.set(a.Kc().toLowerCase(),a),this.oIt.set(a.Zz(),a)}this.CGt?(this.BGt=[],this.NGt=new Set,this.WGt=this.lf.cIt()):(this.VGt=[],this.jGt=new Set,this.HGt=[],this.UGt=[],this.zGt=[]);const h=this.kxt.hvt();if(h<2&&(this.jxt=M.lr(e.fIt,this,i[15]),!(this.jxt instanceof M.Oxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.dIt=null,this.pIt=null,this.Kq=M.lr(M.Event.jf),M.Zk.Txt(this,h);let o;if(o=2<=h?(o=e.fIt)||globalThis.lV:this.jxt.bxt()){if(this.dIt=new o(h<2?this:null),h<2&&!(this.dIt instanceof wa))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.dIt instanceof globalThis.lV))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.dIt=new wa;if(M.Zk._xt(h),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.jxt.Lxt(u,c,f)}}this.lf.mIt()&&!this.CGt&&!this.PGt&&this.KMt||this.vxt(),this.kxt.tL()&&(this.kxt.Mxt(this),this.gIt(i)),this.yIt=null}static gx(t,s,i){return M.lr(M.Hlt,t,s,i)}ur(){if(this.DGt.ur(),this.DGt=null,this.mGt&&(this.mGt.ur(),this.mGt=null),this.rIt){for(const t of this.rIt)t.ur();M.Bh(this.rIt),this.hIt.clear(),this.oIt.clear()}this.yIt=null,this.sIt.ur(),this.sIt=null,this.WSt.clear(),this.VSt.clear(),this.qGt=null,this.lf=null}wIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.lf.wz(i[t]);this.BGt.push(e),this.NGt.add(e),e.VGt.push(this),e.jGt.add(this)}}SIt(t){this.JGt=!0,this.qGt=t}j5(){return this.JGt}x$(){return this.qGt}vIt(){let t=0;if(!this.CGt)for(const s of this.VGt)for(const i of s.bIt()){const e=i.Kc().toLowerCase();this.ZGt.set(e,i),this.KGt.set(e,t),this.YGt.push(i),++t}for(const n of this.bIt()){const r=n.Kc().toLowerCase();this.ZGt.set(r,n),this.KGt.set(r,t),this.YGt.push(n),++t}for(const h of this.YGt)this.QGt.add(h.x6().constructor);if(!this.CGt&&this.VGt.length){let t=this.lf.MIt(),s=(M.Wh(this.HGt,t,0),M.Wh(this.UGt,t,0),M.Wh(this.zGt,t,0),[]),i=0,e=0,n=0;for(const o of this.VGt){const a=o.jwt(),l=(this.HGt[a]=i,i+=o.xIt(),this.UGt[a]=e,e+=o.TIt(),this.zGt[a]=n,n+=o._It(),o.XL());if(l&&this.Z7)for(const u of l.YL())s.push(u.GIt(this.Z7))}this.Z7&&this.Z7.IIt(s)}}gIt(t){const s=this.lf.CIt(),i=M.lr(M.Instance,{runtime:this.lf,P5:this,uid:s});i.PIt(t[16],[]),this.lf.EIt(s,i),this.LU.push(i)}i2t(){return this.jxt}AIt(){return this.PGt}jf(){return this.DGt}vxt(){this.CGt||(this.jxt?this.jxt.vxt():this.dIt.uV())}RIt(){return 0<this.aIt}async G$(t){this.CGt||(this.aIt++,1===this.aIt&&(this.jxt?await this.jxt.G$(t):await this.dIt.dV(this.lf.Dk().FIt())))}R$(){if(!this.CGt){if(this.aIt--,this.aIt<0)throw new Error("released textures too many times");0===this.aIt&&(this.jxt?this.jxt.R$():this.dIt.pV(this.lf.Dk().FIt()))}}P$(){if(this.CGt)throw new Error("not applicable to family");this.jxt?this.jxt.P$():this.dIt.mV()}async K$(t){this.CGt||(this.jxt?await this.jxt.K$(t):await this.dIt.gV(this.lf.Dk().FIt()))}UO(){return this.lf}_L(){return this.kxt}DIt(){return this.GGt}Kc(){return this.pr}Jdt(){return this.cwt}RF(){return this.Xg}Zz(){return this.m7}jz(){return this.CGt}Cz(){return this.IGt}iL(){return this.KMt}jwt(){return this.WGt}bIt(){return this.$Gt}TIt(){return this.RGt}OIt(t){return t&&this.QGt.has(t)}xIt(){return this.EGt.length}kIt(){return this.EGt.map(t=>t.sid)}LIt(s){return this.EGt.findIndex(t=>t.sid===s)}Zst(s){return this.EGt.findIndex(t=>t.name===s)}BIt(){return this.EGt.map(t=>t.name)}NIt(){return this.EGt.map(t=>t.AGt)}Qst(t){if((t=Math.floor(t))<0||t>=this.EGt.length)throw new RangeError("invalid instance variable index");return this.EGt[t].type}Kst(t){if((t=Math.floor(t))<0||t>=this.EGt.length)throw new RangeError("invalid instance variable index");return this.EGt[t].name}_It(){return this.FGt}WIt(){return this.YGt}Gnt(t){return this.ZGt.get(t.toLowerCase())||null}sit(t){const s=this.KGt.get(t.toLowerCase());return void 0===s?-1:s}XL(){return this.Z7}aL(){return this.kxt.aL()}VIt(){return this.Z7&&this.Z7.jIt()}O1t(){return this.sIt}LL(){return this.sIt.LL()}tW(){return this.mGt}bz(t){this.iIt=t}vz(){return this.iIt}Mz(t){this.eIt=t}HIt(){return this.eIt}UIt(){return this.rIt}zIt(){return this.rIt.length}Qdt(){return this.VGt}o2t(t){return this.jGt.has(t)}cgt(){return this.BGt}Uz(t){return this.NGt.has(t)}qwt(t){return this.UGt[t]}Vwt(t){return this.HGt[t]}Xyt(t){this.tIt.set(t.twt().toLowerCase(),t)}Yyt(t){return!!this.hwt(t)}hwt(t){const s=this.tIt.get(t.toLowerCase());return s&&s.Zu()?s:null}JIt(){return this.rIt}qIt(t){if(this.rIt)return this.hIt.get(t.toLowerCase())||null;throw new Error("no animations")}$It(t){if(this.rIt)return this.oIt.get(t)||null;throw new Error("no animations")}XIt(t){if(this.qIt(t))throw new Error(`animation name '${t}' already exists`);const s=M.K_t.rGt(this.UO(),t);return this.rIt.push(s),this.hIt.set(s.Kc().toLowerCase(),s),this.oIt.set(s.Zz(),s),s}YIt(t){const s=this.qIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.rIt.length)throw new Error("cannot remove last animation");const i=this.rIt.indexOf(s);this.rIt.splice(i,1),this.hIt.delete(s.Kc().toLowerCase()),this.oIt.delete(s.Zz()),s.ur()}ZIt(){if(this.rIt)return this.rIt[0];throw new Error("no animations")}KIt(){return this.ZIt().lGt(0)}QIt(){if(this.rIt){const t=this.KIt().tW();return[t.um(),t.xm()]}return this.mGt?[this.mGt.um(),this.mGt.xm()]:[100,100]}ML(){if(this.kxt.tL())return this.LU[0];throw new Error("not a single-global plugin")}kL(){return this.LU}*instances(){yield*this.LU}*OL(){yield*this.LU,yield*this.lf.ubt(this)}NL(){return this.LU.length}Pz(t){this.LU.push(t)}tCt(){this.uIt=!0}cX(){if(this.uIt&&!this.CGt){let s=this.LU,i=0;for(let t=s.length;i<t;++i)s[i].sCt(i);const t=this.lf.iCt();for(const e of t)e.E5()===this&&e.sCt(i++);this.uIt=!1}}eCt(t){const s=this.LU;if(t<s.length)return s[t];t-=s.length;const i=this.lf.iCt();for(const e of i)if(e.E5()===this){if(0===t)return e;--t}return null}$2t(t){if(t&&t.j5()&&t.E5()!==this)for(const i of t.H5())if(i.E5()===this)return i;const s=this.LL().kL();return s.length?s[0]:null}DL(t){const s=this.LL().kL();return 0<s.length?s[t.aX()%s.length]:null}*gbt(t,s){let i=this.LL().kL(),e=i.length,n=s.LL(),r=s.LL().kL(),h=r.length,o=t.aX(),a=(!s.jz()&&n.Pft()||(o=r.indexOf(t)),Math.ceil(e/h)),l=e%h,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}wvt(t){this.jxt?.wvt(t)}Syt(){if(this.JGt&&!this.CGt){this.cX();const t=this.LL(),s=t.Lft(),i=t.Pft(),e=this.lf.kdt(),n=e&&e.mD()&&e.mD().Jft();for(const r of this.qGt.lX())if(r!==this){r.cX();const h=r.LL();if(h.kft(i),!i){const o=h.Lft();M.Bh(o);for(const a of s)o.push(r.eCt(a.aX()));if(n){const l=t.Bft(),u=h.Bft();M.Bh(u);for(const c of l)u.push(r.eCt(c.aX()))}}}}}xvt(t,s){for(const i of this.x$().lX()){const e=i.LL();t?M.Lh(e.Bft(),s):M.Lh(e.Lft(),s)}}nCt(){return this.OGt}rCt(t){this.LGt=!!t}hCt(){if(this.LGt&&this.KMt){for(const t of this.LU)t.xO().oCt();for(const s of this.lf.iCt())s.E5()===this&&s.xO().oCt();this.LGt=!1}}aCt(s,t,i){if(t){const e=this.lIt.get(t);e&&(e.delete(s),0===e.size)&&this.lIt.delete(t)}if(i){let t=this.lIt.get(i);t||(t=new Set,this.lIt.set(i,t)),t.add(s)}}lCt(){if(this.jz()){const t=new Set;for(const s of this.BGt)for(const i of s.lCt())t.add(i);return t.values()}return this.lIt.keys()}fvt(){return this.WSt||(this.WSt=new Map),this.WSt}dvt(){return this.VSt||(this.VSt=new Map),this.VSt}uCt(){return this.OIt(M.Hat.solid)}cCt(){return this.OIt(M.Hat.jumpthru)}fCt(){return this.OIt(M.Hat.NoSave)}Gz(){return this.OIt(M.Hat.Persist)}mq(){const t={instances:this.LU.map(t=>t.V2())};return this.WSt&&this.WSt.size&&(t.ex=M.Bo(this.WSt)),t}gq(t,e){this.WSt&&(this.WSt.clear(),this.WSt=null);const s=t.ex,n=(s&&(this.WSt=M.No(s)),this.LU),r=t.instances;for(let t=0,s=Math.min(n.length,r.length);t<s;++t)n[t].j2(r[t]);for(let t=r.length,s=n.length;t<s;++t)this.lf.L5(n[t]);for(let i=n.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.iL()||(s=this.lf.sO().d$(t.w.l))){const h=this.lf.Iz(this.iIt||this,s,!1,0,0,!0);h.j2(t),e&&e.add(h)}}this.yIt=r,this.tCt()}dCt(){return this.yIt}pCt(){this.yIt=null}mCt(){for(let t=0,s=this.LU;t<s;++t)this.LU[t].mCt()}SL(){return this.dIt}rD(){return this.Kq}gCt(){return this.pIt}WL(t){this.pIt=t}OX(t){const s=this.lf,i=s.kX()&&!s.lD().zL();i&&ya.StartMeasuringScriptTime(),this.Kq.dispatchEvent(t),i&&ya.AddScriptTime()}}}{const Sa=self.Bs;Sa.yCt=class extends Sa.rr{constructor(t,s){super(),this.lf=t,this.wCt=s;for(const i of this.wCt)i.SIt(this)}ur(){this.lf=null}UO(){return this.lf}M$(){return this.wCt}lX(){return this.wCt}dX(){return this.wCt.some(t=>t.iL())}}}{let S=self.Bs,n=self.C3Debugger,h=S.Zk,o=[],a=0,v=new WeakMap,e=new WeakMap;S.Instance=class extends S.rr{constructor(t){if(S.Zk!==h)throw new Error("invalid addon manager");super(),this.lf=t.runtime,this.SCt=t.P5,this.Tst=null,this.vCt=null,this.bCt=null,this.MCt=0,this.xCt=t.uid,this.TCt=a++,this.Ivt=0,this._Ct=null;const s=S.Qh(t.tags),i=(0<s.length&&(this._Ct=new Set(s)),this.GCt=o,this.ICt=o,this.SCt.WIt()),e=(0<i.length&&(this.ICt=i.map((t,s)=>S.lr(S.CCt,{runtime:this.lf,T6:t,I6:this,index:s}))),this.PCt=this.SCt.j5()?[]:null,this.ECt=-1,this.DGt=null,this._L());if(e.Zv()&&(this.Ivt|=4),e.iL())if(this.Tst=S.lr(S.ACt,this,t.J4),t.RCt)this.Tst.FCt(t.RCt);else{this.Tst.DCt();const[n,r]=this.SCt.QIt();this.Tst.hC(n,r),this.E5().VIt()&&this.Tst.z4().OCt()}t.kCt?this.LCt(t.kCt):this.BCt()}ur(){if(this.bCt&&(this.bCt.O5(),this.bCt=null),0<this.ICt.length){for(const i of this.ICt)i.ur();S.Bh(this.ICt)}this.vCt&&(this.vCt.ur(),this.vCt=null);const t=v.get(this),s=(t&&(t.clear(),v.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.PCt&&S.Bh(this.PCt),this.DGt&&(this.DGt.ur(),this.DGt=null),this._Ct&&this._Ct.clear(),this._Ct=null,this.lf=null,this.SCt=null,0<this.GCt.length&&S.Bh(this.GCt),this.Tst&&(this.Tst.ur(),this.Tst=null)}LCt(t){0<t.length&&(this.GCt=[],S.jh(this.GCt,t))}BCt(){const s=this.SCt.xIt();if(0!==s){this.GCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.GCt.push(i[this.SCt.Qst(t)])}}PIt(t,i){if(this.vCt)throw new Error("already got sdk instance");for(let t=0,s=this.ICt.length;t<s;++t){const e=this.ICt[t];e.PIt(i?i[t]:null)}const s=this._L().hvt();if(s<2){if(this.vCt=S.lr(this.SCt.DIt(),this,t),!(this.vCt instanceof S.Wxt))throw new Error("sdk type must derive from SDKInstanceBase");!this._L().iL()&&this.SCt.gCt()&&this.SO()}else{const n=this._L().bxt();this.NCt(n.Instance,t)}}g6(){return this.vCt??this.bCt}xO(){return this.Tst}UO(){return this.lf}kD(){return this.ECt}q5(){const t=this.ECt;return-1===t?this.UO().kD():t}LD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.ECt=t,this.E5().VIt()&&this.lf.WCt(this,!0)}Y5(){this.ECt=-1,this.E5().VIt()&&this.lf.WCt(this,!1)}eq(){return this.lf.VCt(this)}jf(){return this.DGt||(this.DGt=S.lr(S.Event.jf)),this.DGt}wb(t){this.vCt?this.vCt.wb(t):this.bCt.xV(this.lf.Dk().FIt())}vxt(t){this.vCt.vxt(t)}jCt(){this.Ivt|=2}HCt(){return 0!=(2&this.Ivt)}UCt(){this.Ivt|=1}YV(){return 0!=(1&this.Ivt)}Zv(){return 0!=(4&this.Ivt)||this.vCt.Zv()}zCt(){this.Ivt|=32}$J(){return 0!=(32&this.Ivt)}JCt(){return 0!=(8&this.Ivt)}qCt(t){t?this.Ivt|=8:this.Ivt&=-9}$Ct(){return 0!=(16&this.Ivt)}XCt(t){t?this.Ivt|=16:this.Ivt&=-17}YCt(){return 0!=(64&this.Ivt)}ZCt(t){t?this.Ivt|=64:this.Ivt&=-65}KCt(t,s){t<<=16,s?this.Ivt|=t:this.Ivt&=~t}QCt(t){return 0!=(this.Ivt&t<<16)}MTt(){return this.vCt.MTt()}xTt(){return this.vCt.xTt()}TTt(){return this.vCt.TTt()}_Tt(){return this.vCt._Tt()}ITt(){return this.vCt.ITt()}y2t(t){return this.vCt.y2t(t)}E5(){return this.SCt}JJ(){return this.vCt.JJ()}cbt(t){return t.jz()?t.Uz(this.E5()):this.E5()===t}tPt(n,t,s){const i=(t,s)=>{const i=s||t.E5(),e=n.get(i);e?e.add(t):n.set(i,new Set([t]))};if(i(this,t),this.j5())for(const e of this.H5())i(e);if(s)for(const r of this.EN())i(r)}sPt(){if(!this._L().fL())throw new Error("object does not support scene graph")}ON(){return null!==this.MN()}MN(){const t=this.xO();if(!t)return null;const s=t.MN();return s?s.JW():null}TN(){const t=this.xO();if(!t)return null;const s=t.TN();return s?s.JW():null}*_N(){const t=this.xO();if(t)for(const s of t._N())yield s.JW()}iPt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Sq(){const t=this.xO();return!!t&&t.Sq()}ePt(t){const s=this.xO();if(!s)return[];const i=t.Kc();return s.bX().map(t=>t.JW()).filter(t=>t.E5().Kc()===i)}bX(){const t=this.xO();return t?t.bX().map(t=>t.JW()):[]}*children(){const t=this.xO();if(t)for(const s of t.children())yield s.JW()}*EN(){const t=this.xO();if(t)for(const s of t.EN())yield s.JW()}IN(){const t=this.xO();return t?t.IN():0}nPt(){return[...this._N()].length}mbt(){const t=this.xO();return t?t.mbt():0}PN(t){const s=this.xO();if(!s)return null;const i=s.PN(t);return i?i.JW():null}rPt(){const t=this.xO();if(!t)return NaN;const s=t.MN();return s?s.hPt(t):NaN}oPt(t){for(const s of this.xO().bX())if(s.JW().U5()===t)return!0;return!1}RN(t,s){this.sPt(),t.sPt(),this.xO().RN(t.xO(),s||{})}FN(t){const s=this.xO();s&&s.FN(t.xO())}t6(){const t=this.xO();return!!t&&t.t6()}X$(){const t=this.xO();if(t){const s=t.aPt();if(s)for(const i of s){const e=this.lf.wO(i[2]);if(e){const n=i[3];this.RN(e,{LN:!!(n>>0&1),NN:!!(n>>1&1),VN:!!(n>>2&1),HN:!!(n>>3&1),zN:!!(n>>4&1),QN:!!(n>>5&1),qN:!!(n>>6&1),XN:!!(n>>7&1),ZN:!!(n>>8&1)})}}}}Y$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const n=s.get(e.index);if(n){const r=e.flags;this.RN(n,{LN:!!(r>>0&1),NN:!!(r>>1&1),VN:!!(r>>2&1),HN:!!(r>>3&1),zN:!!(r>>4&1),QN:!!(r>>5&1),qN:!!(r>>6&1),XN:!!(r>>7&1),ZN:!!(r>>8&1)})}}}J5(){const t=this.lf.lPt();return t?t.zlt(this):""}j5(){return null!==this.PCt}uX(t){this.PCt.push(t)}W5(){return this.PCt}uPt(t){return!!this.cPt(t)}cPt(t){const s=this.H5();if(null===s||0===s.length)return!1;for(const i of s)if(i.E5()===t)return i;return null}H5(){return this.PCt}xmt(){for(const t of this.H5())t.E5().LL().Nft(t)}Svt(){for(const t of this.H5())t.E5().LL().Dft(t)}vvt(t){for(const s of this.H5())s.E5().LL().Lft()[t]=s}Mvt(){for(const t of this.H5())t.E5().LL().Oft(t)}bvt(t){for(const s of this.H5())s.E5().LL().Bft()[t]=s}_L(){return this.SCt._L()}sCt(t){this.MCt=t}aX(){return this.SCt.cX(),this.MCt}U5(){return this.xCt}fPt(){return this.TCt}dPt(t){t?this.t4(new Set(t)):this._Ct=null}t4(t){if(0===t.size)this._Ct=null;else{this._Ct?this._Ct.clear():this._Ct=new Set;for(const s of t)this._Ct.add(s)}}K5(){return this._Ct??new Set}Bbt(){return Array.from(this.K5()).join(" ")}Vbt(t){t=Math.floor(t);for(const s of this.K5()){if(0===t)return s;--t}return""}_nt(){return this.ICt}pPt(t){if(t)for(const s of this.ICt)if(s.x6()instanceof t)return s;return null}qat(t){if(!t)return null;const s=this.pPt(t);return s?s.g6():null}Tnt(i){const e=this.ICt;for(let t=0,s=e.length;t<s;++t)if(e[t].G6().Zz()===i)return t;return-1}mPt(){return this.GCt}BIt(){return this.SCt.BIt()}gPt(){return this.GCt.length}Vrt(t){const s=this.GCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}Nwt(t){return this.GCt[t]}yPt(t){const s=this.GCt[t];return 0===this.SCt.Qst(t)?!!s:s}jrt(t,s){const i=this.GCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.SCt.Qst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Fht(t,s){if(0!==s){const i=this.GCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}fvt(){let t=v.get(this);return t||(t=new Map,v.set(this,t)),t}dvt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}wPt(t){const s=this.E5();if(s.rD().qf(t))return!0;for(const i of s.Qdt())if(i.rD().qf(t))return!0;return!!this.lf.rD().qf(t)}UL(){const t=new Set,s=(t.add(this),this.xO());if(s&&s.Sq())for(const i of this.EN())if(t.add(i),i.j5())for(const e of i.H5())t.add(e);if(this.j5())for(const n of this.H5())t.add(n);for(const r of t.values())r.Z$()}SPt(){this.SCt.gCt()&&this.SO();for(const t of this.ICt)t.a_t()}vPt(){this.SPt()}Z$(){if(this.SPt(),this.wPt("instancecreate")){const t=this.E5(),s=new S.Event("instancecreate");s.I6=this.SO(),t.OX(s);for(const i of t.Qdt())i.OX(s);this.lf.OX(s)}this.lf.y4(this._L().lpt().iX.Ubt,this,null)}bPt(){this.lf.y4(this._L().lpt().iX.zbt,this,null)}MPt(t){if(this.bCt){const s=new S.Event("destroy");s.xPt=t,this.OX(s)}if(this.wPt("instancedestroy")){const i=this.E5(),e=new S.Event("instancedestroy");e.I6=this.SO(),e.xPt=t,i.OX(e);for(const n of i.Qdt())n.OX(e);this.lf.OX(e)}}TPt(){return this.vCt?this.vCt.lTt():this.bCt.E4()}V2(t="full",s=null){const i={},e=("full"===t?i.uid=this.U5():i.c3=!0,this.K5());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=v.get(this);if(r&&r.size&&(i.ex=S.Bo(r)),-1!==this.kD()&&(i.mts=this.kD()),0<this.SCt.xIt()){const h={},o=this.SCt.kIt();for(let t=0,s=this.GCt.length;t<s;++t)h[o[t].toString()]=this.GCt[t];i.ivs=h}if(this.ICt.length){const a={};for(const l of this.ICt){const u=l.V2(t);u&&(a[l.G6().Zz().toString()]=u)}i.behs=a}}this.Tst&&(i.w=this.Tst.mq(t,s));const n=this.vCt?this.vCt.V2():this.bCt.A4();return n&&(i.data=n),i}RY(t="full",s){this.Tst&&this.Tst.RY(t)}DY(t,s="full",i=null){this.Tst&&this.Tst.DY(t,s,i)}_Pt(t,s="full",i=null){this.Tst&&this.Tst._Pt(t,s,i)}mCt(){this._L().iL()&&this.Tst.mCt()}j2(s,t="full",i){if("full"===t)this.xCt=s.uid;else if(!s.c3)return;if(this.dPt(s.tags),"visual-state"!==t){let t=v.get(this);t&&(t.clear(),v.delete(this));const n=s.ex,r=(n&&(t=S.No(n),v.set(this,t)),this.ECt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[h,o]of Object.entries(r)){const a=parseInt(h,10),l=this.SCt.LIt(a);if(!(l<0||l>=this.GCt.length)){let t=o;null===t&&(t=NaN),this.GCt[l]=t}}}if(this._L().iL()){const u=s.w;if(u){const c=u.l;if(this.Tst.TO().Zz()!==c){const f=this.Tst.TO(),d=f.rO().d$(c);d?(this.Tst.CO(d),f.Rz(this,!0),d.Pz(this,!0),d.PO(this),this.Tst.q4()):"full"===t&&this.lf.L5(this)}this.Tst.gq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.Tnt(y);w<0||w>=this.ICt.length||this.ICt[w].j2(g,t)}}const e=s.data;e&&(this.vCt?this.vCt.j2(e,t):this.bCt.R4(e))}SO(){return this.bCt||this.NCt()}dTt(){return!!this.bCt}NCt(t,s){const i=this.Tst?t?self.yV:self.c6:t?self.n4:self.C5,e=t||this.vCt.bxt(),n=this.SCt.gCt(),r=n||e||i,h=this._L().hvt();if(S.Zk.Txt(this,h),S.Zk.T_t(s),this.bCt=new r,S.Zk.__t(),S.Zk._xt(h),e&&!(this.bCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const o=e||i;if(!(this.bCt instanceof o))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.bCt}A5(t){if(0!==this.GCt.length){const i={},e=this.SCt.NIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.yPt.bind(this,t),set:S.Instance.prototype.jrt.bind(this,t)};const s=Object.create(Object.prototype,i);t.GPt={value:s,writable:!1}}}R5(t){const s=this.ICt;if(0!==s.length){const i={};for(const n of s)i[n.G6().Jdt()]={value:n.zxt(),writable:!1};const e=Object.create(Object.prototype,i);t.lmt={value:e,writable:!1}}}OX(t){if(this.dTt()){const s=this.SO(),i=(t.I6=s,this.lf),e=i.kX()&&!i.lD().zL();e&&n.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&n.AddScriptTime()}}}}{const va=self.Bs;va.xX=class extends va.rr{constructor(e){super(),this.Y2=e,this.Pmt=null,this.IPt=[],this.CPt=e.um(),this.PPt=e.xm(),this.EPt=1,this.APt=1,this.RPt=0,this.FPt=1,this.DPt=e.OE(),this.OPt=null,this.kPt=null,this.LPt=NaN,this.BPt=!1,this.Mq=NaN,this.xq=NaN,this.NPt=t=>{if(t.I6===this.Pmt.JW()){const s=e.UO(),i=(s.jf().removeEventListener("instancecreate",this.NPt),this.Pmt.JW().g6());this.BPt=!!i.mit(),this.Mq=this.BPt?i.pit():NaN,this.xq=this.BPt?i.yit():NaN}}}ur(){this.Pmt=null,this.OPt=null,this.kPt=null,this.LPt=NaN,this.BPt=!1,this.Mq=NaN,this.xq=NaN,va.Bh(this.IPt)}WPt(t){if(this.FPt=this.Y2.OE(),this.DPt=this.FPt,this.Pmt=t,this.RPt=t?t.iB():0,this.Pmt){const s=this.Y2,i=s.UO(),e=this.Pmt.JW()._L().hvt();if(e<2){const n=this.Pmt.JW().g6();n?(this.BPt=!!n.mit(),this.Mq=this.BPt?n.pit():NaN,this.xq=this.BPt?n.yit():NaN):this.Pmt.JW().YV()||i.jf().addEventListener("instancecreate",this.NPt)}else this.BPt=!1,this.Mq=NaN,this.xq=NaN}else this.BPt=!1,this.Mq=NaN,this.xq=NaN}MN(){return this.Pmt}Sq(){return 0<this.IPt.length}bX(){return this.IPt}VPt(){this.Sq()&&1!==this.IPt.length&&(this.kPt?this.IPt.sort((t,s)=>{const i=this.kPt.get(t.JW()),e=this.kPt.get(s.JW());return va.ge(i)&&va.ge(e)?i-e:0}):this.IPt.sort((t,s)=>{const i=t.Krt().jPt(),e=s.Krt().jPt();return va.ge(i)&&va.ge(e)?i-e:0}))}jPt(){return this.LPt}Qrt(){return this.EPt}HPt(t){this.EPt=t}sht(){return this.APt}UPt(t){this.APt=t}lht(){return this.DPt}N2t(){return this.FPt}zPt(t){this.FPt=t}Zrt(){return 0===this.CPt?Number.EPSILON:this.CPt}tht(){return 0===this.PPt?Number.EPSILON:this.PPt}JPt(){if(this.Y2.jN()){let t=this.Pmt,s=t.um(),i=t.Krt().Zrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.BPt?1+s/this.Mq:s/i}return 1}qPt(){if(this.Y2.UN()){let t=this.Pmt,s=t.xm(),i=t.Krt().tht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.BPt?1+s/this.xq:s/i}return 1}$Pt(){return 0}XPt(){return{sw:this.CPt,sh:this.PPt,sx:this.EPt,sy:this.APt,psa:this.RPt,oo:this.FPt,so:this.DPt,pi:this.Y2.JW().rPt()}}mq(t,s=null){const i=this.XPt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.YPt(t),c:this.ZPt(t)})}KPt(t){let s="";return t.BN()&&(s+="x"),t.WN()&&(s+="y"),t.jN()&&(s+="w"),t.UN()&&(s+="h"),t.JN()&&(s+="a"),t.$N()&&(s+="z"),t.t6()&&(s+="d"),t.YN()&&(s+="o"),t.KN()&&(s+="v"),s}YPt(t){return this.Pmt&&this.Pmt.JW()&&!this.Pmt.JW().YV()?this.QPt(this.Pmt,this.Y2,t):null}ZPt(s){return this.IPt.map(t=>this.QPt(t,t,s)).filter(t=>t)}QPt(t,s,i){const e=t.JW();if(e&&e.YV())return null;const n={};return n.uid=e.U5(),n.f=this.KPt(s),n.offsets=s.tEt(),n.data=va.xX.sEt(e),n.oci=e.E5().RF(),"state"===i?(n.inst=e.V2("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.E5().kL().indexOf(e),n.inst=null),n}gq(t){this.CPt=t.sw,this.PPt=t.sh,this.EPt=t.sx,this.APt=t.sy,this.RPt=t.psa,this.FPt=t.oo,this.DPt=t.so,this.LPt=va.ge(t.pi)?t.pi:NaN}iEt(t,s){if(!t&&!s&&this.OPt)for(const i of this.OPt)i.YV()||i.ON()||i.UO().L5(i);this.OPt=t,this.kPt=s}DY(t,s){const i=this.Y2,e=i.UO(),n=new Set;if(t.p&&!this.Pmt){const o=t.p.uid,a=e.wO(o);if(s?.tMt,a){const l=a.xO();if(a.iPt(i.JW()))this.Pmt=l;else{a.oPt(i.JW().U5())?e.L5(i.JW()):a.RN(i.JW(),this.eEt(t.p.f)),n.has(i)||(i.nEt(t.p.offsets),this.rEt(a,t.p,s)),n.add(i);const u=a.xO();u.Krt().VPt()}}else if(va.ge(t.p.oci)){const c=e.wz(t.p.oci),f=(e._wt(),e.VL(c,i.TO(),0,0,!0));if(s?.tMt,f){const d=this.hEt(t.p,e),p=(d&&f.j2(d),f.xO()),m=(p.TO().jL(f),f.RN(i.JW(),this.eEt(t.p.f)),f.xO());m.Krt().VPt()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.wO(y);w&&r.push(w)}let h=0;for(const S of t.c){const v=S.uid,b=e.wO(v);if(s?.tMt,b){if(this.OPt){if(this.OPt.includes(b)){const _=b;if(_.E5()!==b.E5()){h++;continue}if(_.YV()){h++;continue}const G=t.c[h];if(!s?.tMt&&this.oEt(_,r,i)){this.aEt(h,G,i,n,s),h++;continue}if(_.ON()&&_.MN()!==i.JW()){const I=this.lEt(G,s);this.uEt(I,G,n,s),h++;continue}this.uEt(_.xO(),G,n,s,!0),h++;continue}if(this.OPt[h]){const C=this.OPt[h];if(C.E5()!==b.E5()){h++;continue}if(C.YV()){h++;continue}const P=t.c[h];if(!s?.tMt&&this.oEt(C,r,i)){this.aEt(h,P,i,n,s),h++;continue}if(C.ON()&&C.MN()!==i.JW()){const E=this.lEt(P,s);this.uEt(E,P,n,s),h++;continue}this.uEt(C.xO(),P,n,s,!0),h++;continue}}const M=b.E5(),x=this.cEt(r,M),T=i.JW().ePt(M).length;if(x===T){const A=i.JW().PN(h);if(A){const R=A.xO();R&&(n.has(R)||(R.nEt(S.offsets),this.rEt(A,S,s)),n.add(R))}h++;continue}if(b.ON()&&b.MN()!==i.JW()){const F=this.lEt(S,s);this.uEt(F,S,n,s),h++;continue}this.uEt(b.xO(),S,n,s)}else if(this.OPt&&this.OPt[h]){const D=this.OPt[h],k=e.wz(this.fEt(S));if(D.E5()!==k){h++;continue}if(D.YV()){h++;continue}const O=t.c[h];if(!s?.tMt&&this.oEt(D,r,i)){this.aEt(h,O,i,n,s),h++;continue}if(D.ON()&&D.MN()!==i.JW()){const L=this.lEt(O,s);this.uEt(L,O,n,s),h++;continue}this.uEt(D.xO(),O,n,s)}else{const B=this.lEt(S,s);this.uEt(B,S,n,s)}h++}}oEt(t,s,i){const e=t.E5(),n=this.cEt(s,e),r=i.JW().ePt(e).length;return n===r}aEt(t,s,i,e,n){const r=i.JW().PN(t,s);if(r){const h=r.xO();h&&(e.has(h)||(h.nEt(s.offsets),this.rEt(r,s,n)),e.add(h))}}eEt(t){const s={};return s.LN=t.includes("x"),s.NN=t.includes("y"),s.VN=t.includes("w"),s.HN=t.includes("h"),s.zN=t.includes("a"),s.qN=t.includes("z"),s.QN=t.includes("d"),s.XN=t.includes("o"),s.ZN=t.includes("v"),s}fEt(t){return va.ge(t.oci)?t.oci:t[1]}lEt(e,n){if(va.ge(e.oci)){let t=this.Y2,s=t.UO(),i;if(e.data)i=s.Iz(e.data,t.TO(),!1,0,0,!1,!0);else{const r=s.wz(e.oci);i=s.VL(r,t.TO(),0,0,!0)}if(n?.tMt,i){const h=this.hEt(e,s),o=(h&&i.j2(h),i.xO());return o.TO().jL(i,!0),o}}}uEt(t,s,i,e,n=!0){const r=this.Y2,h=r.RN(t,this.eEt(s.f));h&&n&&(i.has(t)||(t.nEt(s.offsets),this.rEt(t.JW(),s,e)),i.add(t)),this.VPt()}rEt(t,s,i){let e=this.hEt(s,this.Y2.UO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.j2(e))}cEt(t,s){return t.filter(t=>t.E5().Kc()===s.Kc()).length}hEt(t,s){if(va.ge(t.instIndex)){const i=s.wz(t.oci),e=i.dCt();return e?e[t.instIndex]:null}return va.Ge(t.inst)?JSON.parse(t.inst):t.inst||void 0}static sEt(t){let s=t.xO().TO().xz(t.U5());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.bX()]){const n=e.xO();i.push([n.rO().Zz(),n.TO().RF(),e.U5(),va.xX.MX(n),e.E5().j5()?1:0,n._O(),va.xX.sEt(e)])}return va.Ve(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.xX.dEt(),s[0][14][1]=i,s[0][14][2]=t.xO()._O()),s}static MX(t){let s=0;return(s|=Number(t.KN())<<8)|Number(t.YN())<<7|Number(t.$N())<<6|Number(t.t6())<<5|Number(t.JN())<<4|Number(t.UN())<<3|Number(t.jN())<<2|Number(t.WN())<<1|Number(t.BN())<<0}static dEt(t){let s=0;return s,511}}}{let d=self.Bs,t=self.bs,r=(t.Ps,d.lr(d.Rect)),h=d.lr(d.Ql),s=d.lr(d.Event,"bboxchange",!1),f=d.lr(d.Ho,0,0,0,0),u=d.lr(d.Fu),i=d.lr(d.Ho,1,1,1,1),o=d.lr(d.Rect,0,0,-1,-1),n=d.lr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.ACt=class extends d.rr{constructor(t,s){super(),this._i=t,this.yft=t.E5(),this.lf=t.UO(),this.pEt=s,this.yft.aCt(this,null,s),this.mEt=-1,this.gEt=-1,this.Ivt=196635,this.yft._L().hL()&&(this.Ivt|=128),this.tl=NaN,this.sl=NaN,this.c2=NaN,this.yEt=NaN,this.wEt=NaN,this.xM=NaN,this.qo=NaN,this.SEt=NaN,this.vEt=NaN,this.bEt=NaN,this.MEt=NaN,this.xEt=d.lr(d.Rect),this.TEt=d.lr(d.Ql),this._Et=n,this.GEt=o,this.IEt=null,this.CEt=null,this.PEt=null,this.u2=i,this.EEt=i,this.AEt=null,this.REt=null,this._i.E5().VIt()&&(this.REt=d.lr(d.FEt,this._i,this)),this.DEt=null,this.OPt=null,this.kPt=null,this.OEt=-1,this.kEt=null}UCt(){this.Ivt|=256}ur(){if(this.yft.aCt(this,this.pEt,null),this.AEt&&(this.lf.Jv().hS(this.AEt),this.AEt=null),this.IEt=null,this.CEt&&(this.CEt.LEt.ur(),this.CEt=null),this.PEt&&(this.PEt.clear(),this.PEt=null),this.n6(),this.REt&&this.REt.ur(),this.ON()&&this.MN().FN(this),this.Sq()){const t=[...this.bX()];for(const s of t)this.FN(s)}this.BEt(),this.NEt(),g.delete(this),a.delete(this),this._i=null,this.yft=null,this.lf=null,this.pEt=null}FCt(t){if(m=!1,this.X4(t[0],t[1]),this.F2(t[2]),this.hC(t[3],t[4]),this.xM=0,this.hL()?this.sB(t[6]):this.qo=0,f.ja(t[7]),this.WEt(f),this.cht(t[8]),this.dht(t[9]),this.d2(t[10]),this.REt&&this.REt.VEt(t[12]),t[14]&&g.set(this,{jEt:t[14][1],HEt:t[14][2]}),t[15]){const s=t[15],e=(this.i6(s[0],s[1]),this.l6()),n=s[2];for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=r.length;t<s;++t){const h=r[t],o=e.gb(t,i);o.C2(h[0]),o.A2(h[1]),o.F2(h[2]),o.O2(h[3]),o.B2(h[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.lf.lPt();l&&c&&c.Ult(this.JW(),a),u&&c&&c.Ult(this.JW(),i)}m=!0,this.UEt()}DCt(){this.tl=0,this.sl=0,this.c2=0,this.yEt=0,this.wEt=0,this.xM=0,this.qo=0,this.SEt=0,this.vEt=1,this.bEt=0,this.MEt=0,this.UEt()}UO(){return this.lf}E5(){return this.yft}JW(){return this._i}zEt(){return this.JN()?this.JEt(this.MN().qEt()-this.DEt.$Pt()):0}C2(t){if(t=+t,this.BN()){const s=this.DEt,i=t-this.I2(),e=-this.zEt();0==e?this.tl+=i/s.JPt():(this.tl+=Math.cos(e)*i/s.JPt(),this.WN()&&(this.sl+=Math.sin(e)*i/s.qPt()))}else this.tl=t}qrt(t,s=!1){t=+t,!s&&this.BN()?this.C2(this.I2()+t):this.tl+=t}I2(){if(this.BN()){let t=this.tl,s=this.DEt,i=this.MN(),e=this.zEt();return 0===e?t*=s.JPt():(t=t*s.JPt()*Math.cos(e),this.WN()&&(t-=this.sl*s.qPt()*Math.sin(e))),i.I2()+t}return this.tl}A2(t){if(t=+t,this.WN()){const s=this.DEt,i=t-this.E2(),e=-this.zEt();0==e?this.sl+=i/s.qPt():(this.BN()&&(this.tl-=Math.sin(e)*i/s.JPt()),this.sl+=Math.cos(e)*i/s.qPt())}else this.sl=t}$rt(t,s=!1){t=+t,!s&&this.WN()?this.A2(this.E2()+t):this.sl+=t}E2(){if(this.WN()){let t=this.sl,s=this.DEt,i=this.MN(),e=this.zEt();return 0===e?t*=s.qPt():(t=t*s.qPt()*Math.cos(e),this.BN()&&(t+=this.tl*s.JPt()*Math.sin(e))),i.E2()+t}return this.sl}X4(t,s){if(t=+t,s=+s,this.$Et()){const i=this.BN(),e=this.WN(),n=this.DEt,r=t-this.I2(),h=s-this.E2(),o=-this.zEt();if(0==o)i?this.tl+=r/n.JPt():this.tl=t,e?this.sl+=h/n.qPt():this.sl=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.tl+=e?(l*r-a*h)/n.JPt():l*r/n.JPt():this.tl=t,e?this.sl+=i?(a*r+l*h)/n.qPt():l*h/n.qPt():this.sl=s}}else this.tl=t,this.sl=s}XEt(){return[this.I2(),this.E2()]}K4(t,s){t=+t,s=+s,this.$Et()?this.X4(this.I2()+t,this.E2()+s):(this.tl+=t,this.sl+=s)}m2t(t,s){return this.I2()===t&&this.E2()===s}F2(t){if(t=+t,this.$N()&&(t-=this.MN().R2()),this.c2!==t){this.c2=t,this.YEt();const s=this.TO();0!==this.c2&&s.Oz(),s.PO(this)}}YEt(){if(this.UEt(),this.Sq()){const i=this.bX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.$N()&&e.YEt()}}}pht(t){this.F2(this.R2()+t)}R2(){return this.$N()?this.MN().R2()+this.c2:this.c2}tN(){return this.TO().R2()+this.R2()}mit(){const t=this.JW()._L().hvt();return t<2&&this.JW().g6().mit()}Sm(t){if(t=+t,this.jN()){const s=this.um();0===s?this.yEt=Number.EPSILON:this.yEt*=t/s}else this.yEt=t;this.ZEt()}zm(t,s){t=+t,!s&&this.jN()?this.Sm(this.um()+t):this.yEt+=t,this.ZEt()}um(){if(this.jN()){const t=this.MN(),s=t.um(),i=t.Krt().Zrt();return i===Number.EPSILON?(this.Krt().Zrt()+s)*this.yEt:s*this.yEt}return this.yEt}fm(t){if(t=+t,this.UN()){const s=this.xm();0===s?this.wEt=Number.EPSILON:this.wEt*=t/s}else this.wEt=t;this.ZEt()}iht(t,s){t=+t,!s&&this.UN()?this.fm(this.xm()+t):this.wEt+=t,this.ZEt()}xm(){if(this.UN()){const t=this.MN(),s=t.xm(),i=t.Krt().tht();return i===Number.EPSILON?(this.Krt().tht()+s)*this.wEt:s*this.wEt}return this.wEt}hC(t,s){if(t=+t,s=+s,this.jN()){const i=this.um();0===i?this.yEt=Number.EPSILON:this.yEt*=t/i}else this.yEt=t;if(this.UN()){const e=this.xm();0===e?this.wEt=Number.EPSILON:this.wEt*=s/e}else this.wEt=s;this.ZEt()}nc(){return[this.um(),this.xm()]}qJ(){return this.xM}KEt(t){if(t<0)throw new RangeError("invalid depth");this.xM=t}QEt(){if(this.ON()){const t=this.DEt;return Math.min(t.JPt(),t.qPt())}return 1}hL(){return 0!=(128&this.Ivt)}sB(t){t=+t,this.hL()&&(this.JN()&&(t-=this.MN().iB()),t=d.yr(t),this.qo!==t)&&(this.qo=t,this.ZEt())}eht(t){0!=(t=+t)&&this.hL()&&(this.qo=d.yr(this.qo+t),this.ZEt())}ZEt(){if(this.Ivt|=1<<18,this.Sq()){const i=this.bX();for(let t=0,s=i.length;t<s;t++)i[t].ZEt()}}iB(){return this.JN()&&this.hL()?this.JEt(d.yr(this.MN().qEt()+this.qo)):this.qo}qEt(){return this.JN()&&this.hL()?d.yr(this.MN().qEt()+this.qo):this.qo}JEt(t){return this.jN()&&this.TN().um()<0&&(t=d.yr(d.Ar(t,this.TN().iB()+Math.PI))),this.UN()&&this.TN().xm()<0?d.Ar(t,this.TN().iB()):t}tAt(){const t=this.MN();return!!(this.jN()&&t.um()<0)||!!(this.UN()&&t.xm()<0)}sAt(){const t=this.MN();return!!(this.jN()&&t.um()<0&&this.UN()&&t.xm()<0)}iAt(){const t=this.Ivt;if(0!=(t&1<<18)){const s=this.iB();this.SEt=Math.sin(s),this.vEt=Math.cos(s),this.Ivt=-262145&t}}v2t(){return this.iAt(),this.SEt}S2t(){return this.iAt(),this.vEt}cht(t){this.bEt=+t}uht(t){this.bEt+=+t}eW(){return this.bEt}dht(t){this.MEt=+t}fht(t){this.MEt+=+t}rW(){return this.MEt}WEt(t){this.u2.equals(t)||(this.u2===i?(this.u2=d.lr(d.Ho,t),this.EEt=d.lr(d.Ho,t),this.EEt.ba()):t.ga(1,1,1,1)?(this.u2=i,this.EEt=i):(this.u2.set(t),this.EEt.set(t),this.EEt.ba()),this.UEt())}LE(t){if(t=d.gr(+t,0,1),this.YN()){if(this.Krt().N2t()===t)return;this.Krt().zPt(t),t=this.OE()}else if(this.u2.a===t)return;this.eAt(t)}nAt(){if(this.Sq()){const i=this.bX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.eAt(e.OE())}}}eAt(t){f.ea(this.u2),f.a=t,this.WEt(f),this.nAt()}hht(t){this.YN()?this.LE(this.Krt().N2t()+t):this.LE(this.OE()+t)}OE(){return this.YN()?this.MN().OE()*this.Krt().N2t():this.u2.a}lN(t){this.u2.fa(t)||(f.ea(t),f.a=this.OE(),this.WEt(f))}Nrt(t,s,i){f.Xo(t,s,i),this.lN(f)}rAt(t,s,i){0===t&&0===s&&0===i||(f.ea(this.u2),f.r+=t,f.Ha+=s,f.b+=i,this.lN(f))}aN(){return this.u2}sz(){return this.EEt}t6(){return 0!=(512&this.Ivt)}hAt(t){this.oAt(512,t)}BN(){return 0!=(1024&this.Ivt)}aAt(t){this.oAt(1024,t)}WN(){return 0!=(2048&this.Ivt)}$Et(){return 0!=(3072&this.Ivt)}lAt(t){this.oAt(2048,t)}jN(){return 0!=(4096&this.Ivt)}uAt(t){this.oAt(4096,t)}UN(){return 0!=(8192&this.Ivt)}cAt(t){this.oAt(8192,t)}JN(){return 0!=(16384&this.Ivt)}fAt(t){this.oAt(16384,t)}$N(){return 0!=(32768&this.Ivt)}dAt(t){this.oAt(32768,t)}YN(){return 0!=(this.Ivt&1<<22)}pAt(t){this.oAt(1<<22,t)}KN(){return 0!=(this.Ivt&1<<23)}mAt(t){this.oAt(1<<23,t)}gAt(){this.Ivt&=-12647937}RN(t,s){if(t===this)return!1;if(t.ON())return!1;if(this.yAt(t))return!1;if(this.wAt(t))return!1;const i=t.I2(),e=t.E2(),n=t.um(),r=t.xm(),h=t.iB(),o=t.R2(),a=t.OE(),l=(t.SAt(this),t.aAt(s.LN),t.lAt(s.NN),t.uAt(s.VN),t.cAt(s.HN),t.fAt(s.zN),t.dAt(s.qN),t.pAt(s.XN),t.mAt(s.ZN),t.hAt(s.QN),i-this.I2()),u=e-this.E2(),c=-this.iB(),f=Math.cos(c),d=Math.sin(c);if(s.LN&&(s.zN?t.tl=l*f-u*d:t.tl=l,s.VN)){const p=this.um()/this.DEt.Zrt();0!=p&&(t.tl/=p)}if(s.NN&&(s.zN?t.sl=l*d+u*f:t.sl=u,s.HN)){const m=this.xm()/this.DEt.tht();0!=m&&(t.sl/=m)}if(s.VN){const g=this.um();0===g||g===Number.EPSILON?(t.yEt=1,t.DEt.HPt(1)):(t.yEt=n/this.um(),t.DEt.HPt(t.yEt))}if(s.HN){const y=this.xm();0===y||y===Number.EPSILON?(t.wEt=1,t.DEt.UPt(1)):(t.wEt=r/this.xm(),t.DEt.UPt(t.wEt))}return s.zN&&(t.qo=h-this.iB()),s.qN&&(t.c2=o-this.R2()),s.XN&&t.DEt.zPt(a),s.ZN&&t.NB(this.VB()),this.vAt(t),this.q4(),this.nAt(),!0}FN(t){if(t.MN()===this){const s=t.I2(),i=t.E2(),e=t.um(),n=t.xm(),r=t.iB(),h=t.R2(),o=t.OE();t.SAt(null),t.gAt(),t.X4(s,i),t.hC(e,n),t.sB(r),t.F2(h),t.LE(o),this.bAt(t),this.q4()}}MAt(){return this.OEt}xAt(){this.TAt();const t=[...this.children()];for(const i of t)this.FN(i);const s=this.MN();s&&s.FN(this),this.gAt()}TAt(){if(this._At(),!this.OPt){const s=[...this.children()];s.length&&(this.OPt=[],this.kPt=new WeakMap);let t=0;for(const i of s){const e=i.JW();this.OPt.push(e),this.kPt.set(e,t),t++}}const t=this.MN();t&&t.TAt()}_At(){if(-1===this.OEt){const t=[...this._N()];this.OEt=t.length;for(const i of t)i._At();const s=[...this.children()];for(const e of s)e._At()}}NEt(){this.OPt&&(this.OPt.length=0),this.OPt=null,this.kPt=null;const t=this.MN();t&&t.NEt(),this.OEt=-1}ON(){return null!==this.MN()}MN(){const t=this.DEt;return null!==t?t.MN():null}TN(){let t=this;for(;t.ON();)t=t.MN();return t}*_N(){let t=this.MN();for(;t;)yield t,t=t.MN()}iPt(t){return this.bX().includes(t)}Sq(){const t=this.DEt;return null!==t&&t.Sq()}bX(){const t=this.DEt;return null!==t?t.bX():e}children(){return this.bX()}*EN(){for(const t of this.children())yield t,yield*t.EN()}IN(){return this.bX().length}mbt(){return[...this.EN()].length}PN(t){const s=this.bX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}hPt(s){if(s){const i=this.bX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}GAt(t){this.DEt||(this.DEt=d.lr(d.xX,this)),t&&this.DEt.WPt(t)}Krt(){return this.DEt}BEt(){this.DEt&&(this.DEt.ur(),this.DEt=null)}SAt(t){t?(t.GAt(null),this.GAt(t)):(this.DEt&&this.DEt.WPt(null),this.Sq()||this.BEt())}wAt(t){if(!this.ON())return!1;const s=this.MN();return s===t||s.wAt(t)}yAt(t){if(this.iPt(t))return!0;for(const s of this.bX())if(s.yAt(t))return!0;return!1}vAt(t){this.DEt.bX().push(t)}bAt(t){const s=this.DEt.bX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.ON()||this.BEt(),t.Sq()||t.BEt()}aPt(){const t=g.get(this);return t?t.jEt:null}IAt(){const t=g.get(this);return t?t.HEt:NaN}wq(){const t=a.get(this);return d.ge(t)?t:NaN}CAt(t){a.set(this,t)}PAt(){this.oAt(1<<19,!0),this.UEt()}UEt(){if(m){const s=this.lf.Jv();this.AEt&&s.hS(this.AEt);let t;t=0!=(this.Ivt&1<<19)?s.jw()||"<point>":s.Nw()||"<default>",this.AEt=s.iS(t,this.c5(),this.EEt,this.R2())}}tq(){return this.AEt}s9(){return this.u2===i}d2(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.c5()!==t&&(this.Ivt=this.Ivt&~(31<<26)|t<<26,this.UEt())}c5(){return(this.Ivt&31<<26)>>26}CO(t,s){const i=s&&this.pEt!==t;i&&this.Fz(),this.yft.aCt(this,this.pEt,t),this.pEt=t,i&&this.EAt(),0!==this.R2()&&this.pEt.Oz()}TO(){return this.pEt}rO(){return this.TO().rO()}Lz(t){this.mEt=0|t}_O(){return this.pEt.q9(),this.mEt}K9(t){this.gEt=0|t}UV(){return this.pEt.Y9(),this.gEt}DU(){return this.mEt}oAt(t,s){s?this.Ivt|=t:this.Ivt&=~t}VB(){return 0!=(1&this.Ivt)}NB(t){if(this.oAt(1,t),this.Sq())for(const s of this.bX())s.KN()&&s.NB(t)}SN(){return 0!=(8&this.Ivt)}vN(t){t=!!t,this.SN()!==t&&(this.oAt(8,t),t?this.q4():this.AAt())}RAt(t,s){if(this.oAt(32,t),this.PEt&&this.PEt.clear(),s.trim()){this.PEt||(this.PEt=new Set);for(const i of s.split(" "))i&&this.PEt.add(i.toLowerCase())}else this.PEt=null}FAt(t){const s=0!=(32&this.Ivt),i=this.PEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}q4(){if(this.Ivt|=65554,this.yft.rCt(!0),this.lf.EO(),this.pEt.pz()&&(this.DAt(this.xEt,this.TEt,!0),this.Ivt&=-3,this.EAt()),0!=(4&this.Ivt)&&this._i.jf().dispatchEvent(s),null!==this.DEt){const i=this.DEt.bX();for(let t=0,s=i.length;t<s;++t)i[t].q4()}}DAt(t,s,i){const e=this.I2(),n=this.E2(),r=this.um(),h=this.xm(),o=this.iB();t.ml(e-this.bEt*r,n-this.MEt*h,r,h),i&&this.a6()&&this.OAt(t),0===o?s.vu(t):(t.offset(-e,-n),s.Mu(t,this.v2t(),this.S2t()),s.offset(e,n),s.xu(t)),t.normalize()}kAt(){const t=this.Ivt;0!=(2&t)&&(this.DAt(this.xEt,this.TEt,!0),this.Ivt=-3&t)}iN(){return this.kAt(),this.xEt}nN(){return this.kAt(),this.TEt}LAt(t){const s=this.I2(),i=this.E2(),e=Math.round(s)-s,n=Math.round(i)-i;return 0==e&&0==n?t:(h.G(t),h.offset(e,n),h)}BAt(t){this.xEt.G(t),this.TEt.vu(this.xEt),this.Ivt&=-3,this.oCt(),this.EAt()}NAt(t){this.oAt(4,t)}WAt(){return 0!=(4&this.Ivt)}jJ(t,s,i){return s&&0!==this.qJ()?this.zJ(this.TO().UJ()):0===this.R2()||i?t.ql(this.iN()):this.VAt()}VAt(){const t=this.TO(),s=this.tN();return!(s>=t.S9())&&(t.y9(s,r),r.ql(this.iN()))}zJ(t){const s=this.iN(),i=s.xl(),e=s._l(),n=s.Tl(),r=s.Gl(),h=this.tN(),o=h+this.qJ();return t.by(i,n,h,e,r,o)}hN(){const t=this.TO();if(t.A9())return this.zJ(t.UJ());{const s=t.rO();return this.jJ(t.m5(),s.VJ(),s.PB())}}ZJ(t){this.oAt(1<<20,t)}YJ(t){this.oAt(1<<21,t)}jAt(){return 0!=(this.Ivt&1<<20)}HAt(){return 0!=(this.Ivt&1<<21)}UAt(t){this.IEt=t,this.zAt(),this.a6()&&(this.kEt.JAt=null)}qAt(){return this.IEt}$At(){return null!==this.IEt||this.a6()}XAt(){return this.YAt(this.um(),this.xm(),this.iB(),this.v2t(),this.S2t())}ZAt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.YAt(t,s,i,e,n)}YAt(n,r,t,h,o){let s=this.CEt;null===s&&(s={LEt:d.lr(d.Fu),width:NaN,height:NaN,angle:NaN},this.CEt=s);const a=s.LEt;if(s.width!==n||s.height!==r||s.angle!==t){const l=this.IEt;if(this.a6()){let t=this.eW(),s=this.rW(),i=this.l6(),e=this.kEt.JAt;e||(l?(u.G(l),u.offset(t,s)):u.Vu(),e=i.vb(u),this.kEt.JAt=e),i.bb(e,a),a.offset(-t,-s),a.zu(n,r,h,o)}else l?(a.G(l),a.zu(n,r,h,o)):a.Uu(this.nN(),-this.I2(),-this.E2());s.width=n,s.height=r,s.angle=t}return a}zAt(){this.KAt(!0);const t=this.CEt;null!==t&&(t.width=NaN)}i6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.JW()._L().pL())throw new Error("object does not support mesh");this.n6(),this.kEt={QAt:d.lr(d.ey.J2,t,s),t3t:d.lr(d.ey.J2,t,s),JAt:null}}a6(){return null!==this.kEt}l6(){if(this.a6())return this.kEt.QAt;throw new Error("no mesh")}s3t(){if(this.a6())return this.kEt.t3t;throw new Error("no mesh")}i3t(t){this.oAt(65536,t)}e3t(){return 0!=(65536&this.Ivt)}KAt(t){this.oAt(1<<17,t)}n3t(){return 0!=(this.Ivt&1<<17)}OAt(t){const s=this.kEt.QAt,i=Math.min(s.lb(),0),e=Math.min(s.ub(),0),n=Math.max(s.cb(),1),r=Math.max(s.fb(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.Fl((n-1)*h),t.Dl((r-1)*o),this.xM=s.pb()}n6(){this.kEt&&(this.kEt.QAt.ur(),this.kEt.t3t.ur(),this.kEt=null,this.zAt())}h6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let n="relative"===e,r=i.x,h=i.y,o=i.n5,a="number"==typeof i.u?i.u:n?0:-1,l="number"==typeof i.v?i.v:n?0:-1;if(!this.a6())return!1;const u=this.l6(),c=u.gb(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.R2()!==o&&(c.F2(o),f=!0),n&&(r+=t/(u.nb()-1),h+=s/(u.rb()-1)),a=-1!==a||n?(n&&(a+=t/(u.nb()-1)),d.gr(a,0,1)):c.D2(),l=-1!==l||n?(n&&(l+=s/(u.rb()-1)),d.gr(l,0,1)):c.L2(),c.I2()===r&&c.E2()===h&&c.D2()===a&&c.L2()===l?f:(c.C2(r),c.A2(h),c.O2(a),c.B2(l),this.zAt(),!0)}HCt(){return this._i.HCt()}bN(t,s){return!!this.iN().Xl(t,s)&&!!this.nN().Xl(t,s)&&(this.HCt()?this._i.g6().PTt(t,s):!this.$At()||this.XAt().Xl(t-this.I2(),s-this.E2()))}r3t(){return 0!=(16&this.Ivt)}oCt(){if(this.r3t()&&this.SN()&&0==(256&this.Ivt)){const t=this.iN(),s=this.yft.nCt(),i=this._Et;if(r.set(s.ZU(t.xl()),s.KU(t.Tl()),s.ZU(t._l()),s.KU(t.Gl())),!i.equals(r)){const e=this._i;i===n?(s.QU(e,null,r),this._Et=d.lr(d.Rect,r)):(s.QU(e,i,r),i.G(r)),this.Ivt&=-17}}}h3t(){this.Ivt|=16}AAt(){const t=this._Et;t!==n&&(this.yft.nCt().QU(this._i,t,null),this._Et=n)}EAt(){const t=this.TO();if(t.pz()&&0==(256&this.Ivt)){const s=t.e9(),i=this.iN(),e=this.GEt;if(r.set(s.ZU(i.xl()),s.KU(i.Tl()),s.ZU(i._l()),s.KU(i.Gl())),!e.equals(r)){const n=this._i;e===o?(s.QU(n,null,r),this.GEt=d.lr(d.Rect,r)):(s.QU(n,e,r),e.G(r)),t.n9()}}}Fz(){const t=this.GEt;t!==o&&(this.TO().e9().QU(this._i,t,null),this.GEt=o)}X9(){return this.GEt}cN(){const t=this._i,s=this.pEt,i=s.IO();i.length&&i.at(-1)===t||(s.Rz(t,!1),s.Pz(t,!1),this.lf.EO())}dN(){const t=this._i,s=this.pEt,i=s.IO();i.length&&i[0]===t||(s.Rz(t,!1),s.Az(t,!1),this.lf.EO())}mN(t){const s=this._i,i=this.pEt;if(i.rO()!==t.rO())throw new Error("layer from different layout");t!==i&&(i.Rz(s,!0),this.CO(t),t.Pz(s,!0),this.lf.EO())}yN(t,s){let i=this._i,e=!1,n=this.pEt;if(t.U5()!==i.U5()){const r=t.xO();if(!r)throw new Error("expected world instance");const h=r.TO(),o=(n.RF()!==h.RF()&&(n.Rz(i,!0),this.CO(h),h.Pz(i,!0),e=!0),h.sJ(i,t,!!s));(e||o)&&this.lf.EO()}}z4(){return this.REt}o3t(t){this.oAt(64,t)}aJ(){return 0!=(64&this.Ivt)}mq(t,s=null){const i={x:this.I2(),y:this.E2(),w:this.um(),h:this.xm(),l:this.TO().Zz(),zi:this._O()},e=(0!==this.R2()&&(i.ze=this.R2()),0!==this.iB()&&(i.a=this.qEt()),this.s9()||(i.c=this.u2.toJSON()),.5!==this.eW()&&(i.oX=this.eW()),.5!==this.rW()&&(i.oY=this.rW()),0!==this.c5()&&(i.bm=this.c5()),this.VB()||(i.v=this.VB()),this.SN()||(i.ce=this.SN()),this.WAt()&&(i.be=this.WAt()),this.REt&&(i.fx=this.REt.mq()),0!=(32&this.Ivt));return e&&(i.sfi=e),this.PEt&&(i.sft=[...this.PEt].join(" ")),this.DEt&&"visual-state"!==t&&(i.sgi=this.DEt.mq(t,s),g.has(this))&&(i.sgcd=g.get(this).jEt,i.sgzid=g.get(this).HEt),this.a6()&&(i.mesh=this.l6().V2()),i}tEt(){return{x:this.tl,y:this.sl,z:this.c2,w:this.yEt,h:this.wEt,a:this.qo,sgi:this.Krt()?this.Krt().XPt():null}}nEt(t){t&&(this.tl=t.x,this.sl=t.y,this.c2=t.z,this.yEt=t.w,this.wEt=t.h,this.qo=t.a,t.sgi&&this.Krt()&&this.Krt().gq(t.sgi),this.ZEt(),this.q4())}mCt(){this.NEt(),this.xAt(),this.GAt(null),this.DEt&&this.DEt.iEt(this.OPt,this.kPt)}RY(t){"visual-state"!==t&&this.xAt()}DY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ivt)&&this.DEt.DY(t.sgi,i)}_Pt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ivt)&&(this.DEt.iEt(null,null),this.NEt(),this.q4())}gq(t,s){if(m=!1,this.C2(t.x),this.A2(t.y),this.Sm(t.w),this.fm(t.h),this.Lz(t.zi),this.F2(t.hasOwnProperty("ze")?t.ze:0),this.sB(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.ja(t.c):t.hasOwnProperty("o")?(f.ea(this.u2),f.a=t.o):f.$o(1,1,1,1),this.WEt(f),this.cht(t.hasOwnProperty("oX")?t.oX:.5),this.dht(t.hasOwnProperty("oY")?t.oY:.5),this.d2(t.hasOwnProperty("bm")?t.bm:0),this.NB(!t.hasOwnProperty("v")||t.v),this.vN(!t.hasOwnProperty("ce")||t.ce),this.NAt(!!t.hasOwnProperty("be")&&t.be),this.RAt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.REt&&t.hasOwnProperty("fx")&&this.REt.gq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.OPt)for(const i of this.OPt)i.YV()||this.lf.L5(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.GAt(null);const e=this.DEt,n=t.sgi;e.gq(n),e.iEt(this.OPt,this.kPt),t.sgcd&&d.ge(t.sgzid)&&g.set(this,{jEt:t.sgcd,HEt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.i6(r.cols,r.rows),this.l6().j2(r)}else this.n6();this.q4(),m=!0,this.UEt(),"visual-state"!==s&&this.lf.a3t(this.JW(),t)}}}{const ba=self.Bs;ba.XGt=class extends ba.rr{constructor(t,s){super();const i=t.UO(),e=i.Cyt(s[1]),n=(i.l3t().x_t(e),this.lf=i,this.yft=t,this.e_t=ba.Zk.A6(e),this.jxt=null,this.u3t=null,this.GGt=e.Instance,this.m7=s[2],this.pr=s[0],this.cwt=this.lf.Jdt(s[3]),this.e_t.hvt());if(n<2&&(this.jxt=ba.lr(e.fIt,this),!(this.jxt instanceof ba.i_t)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(ba.Zk.Txt(this,n),2<=n){const r=e.fIt??globalThis.oj;if(this.u3t=new r,!(this.u3t instanceof globalThis.oj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.u3t=new globalThis.P6;ba.Zk._xt(n),this.vxt()}static gx(t,s){return ba.lr(ba.XGt,t,s)}ur(){this.lf=null,this.e_t=null,this.jxt&&(this.jxt.ur(),this.jxt=null),this.GGt=null}i2t(){return this.jxt}vxt(){this.jxt?this.jxt.vxt():this.u3t&&this.u3t.uV()}UO(){return this.lf}E5(){return this.yft}x6(){return this.e_t}DIt(){return this.GGt}Kc(){return this.pr}Zz(){return this.m7}_6(){return this.u3t}Jdt(){return this.cwt}}}{const Ma=self.Bs,xa=self.b6;Ma.CCt=class extends Ma.rr{constructor(t){super(),this.lf=t.runtime,this.Uwt=t.T6,this.e_t=this.Uwt.x6(),this._i=t.I6,this.Xg=t.index,this.vCt=null,this.bCt=null,this.e_t.Pz(this._i)}ur(){this.bCt&&(this.bCt.O5(),this.bCt=null),this.e_t.Rz(this._i),this.vCt&&(this.vCt.ur(),this.vCt=null),this.lf=null,this.Uwt=null,this.e_t=null,this._i=null}PIt(t){if(this.vCt)throw new Error("already got sdk instance");const s=this.x6().hvt();if(s<2){if(this.vCt=Ma.lr(this.Uwt.DIt(),this,t),!(this.vCt instanceof Ma.n_t))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.x6().bxt();this.xxt(i.Instance,t)}}g6(){return this.vCt??this.bCt}C6(){return this._i}UO(){return this.lf}G6(){return this.Uwt}x6(){return this.e_t}_rt(){return this.Xg}a_t(){this.vCt?this.vCt.a_t():this.bCt.cj()}f_t(t,s){this.vCt&&this.vCt.f_t(t,s)}TPt(){return this.vCt?this.vCt.lTt():this.bCt.E4()}V2(t="full"){return this.vCt?this.vCt.V2(t):this.bCt.A4(t)}j2(t,s="full"){if(this.vCt)return this.vCt.j2(t,s);this.bCt.R4(t,s)}static c3t(t,s,i){let e=globalThis.aj,n,r;n=s instanceof e?t.mB(s):s.o_t(),r=i instanceof e?t.mB(i):i.o_t();const h=n.C6(),o=r.C6(),a=h.E5().RF(),l=o.E5().RF();if(a!==l)return a-l;const u=h.fPt(),c=o.fPt();return u!==c?u-c:n._rt()-r._rt()}xxt(t,s){const i=xa,e=t??this.vCt.bxt(),n=e||i,r=this.x6().hvt();if(Ma.Zk.Txt(this,r),Ma.Zk.T_t(s),this.bCt=new n,Ma.Zk.__t(),Ma.Zk._xt(r),!e||this.bCt instanceof i)return this.bCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}zxt(){return this.bCt||this.xxt()}dTt(){return!!this.bCt}}}{const Ta=self.Bs;Ta.K7=class extends Ta.rr{constructor(t,s){super(),this.Y2=t,this.f3t=[],this.d3t=[],this.p3t=new Map,this.m3t=[],this.g3t=[],this.y3t=new Set,this.Dv=!0;for(const i of s){const e=Ta.lr(Ta.w3t,this,i,this.f3t.length);this.f3t.push(e),this.p3t.set(e.Kc().toLowerCase(),e),3<=i.length&&this.m3t.push(this.S3t(e,i[2]))}this.UO().v3t(this)}ur(){this.UO().b3t(this);for(const t of this.g3t)t.ur();Ta.Bh(this.g3t),Ta.Bh(this.f3t),Ta.Bh(this.d3t),this.p3t.clear(),Ta.Bh(this.m3t),this.Y2=null}M3t(t){this.y3t.add(t)}x3t(t){this.y3t.delete(t)}T3t(t){t.Rw()&&(this.g3t=this.f3t.map(t=>{const s=t.mT();return 0<s.GetCustomParametersByteSize()?Ta.lr(Ta.ey.WebGPUEffectCustomParamsBuffer,s):null}),this._3t());for(const s of this.y3t)s.T3t(t)}IIt(t){if(t.length){this.f3t=t.concat(this.f3t);for(const s of t)this.p3t.set(s.Kc().toLowerCase(),s);for(let t=0,s=this.f3t.length;t<s;++t)this.f3t[t].Jz(t)}}S3t(t,s){t.G3t(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ta.lr(Ta.Ho);n.ja(e),i[t]=n}}return i}hb(){return this.Y2}UO(){return this.Y2.UO()}D6(){Ta.Bh(this.d3t);let t=!0;for(const s of this.f3t)s.pmt()&&(this.d3t.push(s),s.mT().Kv()||(t=!1));this.Dv=t}YL(){return this.f3t}jIt(){return 0<this.f3t.length}Cnt(t){return this.p3t.get(t.toLowerCase())||null}I3t(t){if((t=Math.floor(+t))<0||t>=this.f3t.length)throw new RangeError("invalid effect type index");return this.f3t[t]}R6(t){return this.I3t(t).pmt()}F6(t,s){this.I3t(t).G3t(s)}i9(){return this.d3t}aJ(){return 0<this.d3t.length}Kv(){return this.Dv}Int(t){return this.m3t[t]}ez(t){return(t<this.g3t.length?this.g3t:this.m3t)[t]}O6(t,s){if(t<0||t>=this.m3t.length)return null;const i=this.m3t[t];return s<0||s>=i.length?null:i[s]}k6(t,s,i){if(t<0||t>=this.m3t.length)return!1;const e=this.m3t[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ta.Ho){if(n.fa(i))return!1;n.ea(i)}else{if(n===i)return!1;e[s]=i}return t<this.g3t.length&&this.g3t[t].SetParameterValue(s,i),!0}_3t(){const i=this.m3t,e=this.g3t;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}static C3t(t){return t&&t instanceof Ta.Ho?{t:"color",v:t.toJSON()}:t}static P3t(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ta.lr(Ta.Ho);return i.ja(t.v),i}}}static E3t(t){return t.map(Ta.K7.C3t)}static A3t(t){return t.map(Ta.K7.P3t)}V2(){return this.f3t.map(t=>({name:t.Kc(),active:t.pmt(),params:Ta.K7.E3t(this.m3t[t.RF()])}))}j2(t){for(const s of t){const i=this.Cnt(s.name);i&&(i.G3t(s.active),this.m3t[i.RF()]=Ta.K7.A3t(s.params))}this.D6(),this._3t()}}}{const _a=self.Bs;_a.w3t=class extends _a.rr{constructor(t,s,i){super(),this.Z7=t,this.cf=s[0],this.pr=s[1],this.Xg=i,this.o2=null,this.a0=!0}ur(){this.Z7=null,this.o2=null}GIt(t){const s=_a.lr(_a.w3t,t,[this.cf,this.pr],-1);return s.o2=this.o2,s.a0=this.a0,s}T3t(t){const s=t.Bw(this.cf);if(!s)throw new Error("failed to find shader program '"+this.cf+"'");this.o2=s}XL(){return this.Z7}Kc(){return this.pr}Jz(t){this.Xg=t}RF(){return this.Xg}hb(){return this.Z7.hb()}UO(){return this.Z7.UO()}G3t(t){this.a0=!!t}pmt(){return this.a0}mT(){return this.o2}R3t(){const i=[];for(let t=0,s=this.o2.gT();t<s;++t){const e=this.o2.yT(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(_a.lr(_a.Ho,1,1,1,1))}}return i}}}{const Ga=self.Bs;Ga.FEt=class extends Ga.rr{constructor(t,s){super(),this._i=t,this.F3t=s,this.Z7=t.E5().XL(),this.D3t=!0,this.rz=!0,this.O3t=!1,this.k3t=!1,this.L3t=!1,this.B3t=!1,this.CF=Ga.lr(Ga.ey._3,t.UO().Dk().Q7(),{d3:(t,s)=>{const i=s.vF(),e=i.xO();t.m2(e.sz()),t.vS(e.tN()),i.wb(t),t.vS(0)},m3:t=>{const s=t.TTt(),[i,e]=t.xTt();return{dF:s,pF:i,mF:e}},g3:t=>this.ez(t)}),this.N3t=[],this.d3t=[],this.Dv=!0,this.m3t=[],this.g3t=[],this.T3t(t.UO().Jv());for(let t=0,s=this.Z7.YL().length;t<s;++t)this.N3t.push(!0);this.D6(),this.Z7.M3t(this)}ur(){this.Z7.x3t(this);for(const t of this.g3t)t&&t.ur();Ga.Bh(this.g3t),this.CF.ur(),this.CF=null,Ga.Bh(this.N3t),Ga.Bh(this.d3t),Ga.Bh(this.m3t),this._i=null,this.Z7=null}T3t(t){t.Rw()&&(this.g3t=this.Z7.YL().map(t=>{const s=t.mT();return 0<s.GetCustomParametersByteSize()?Ga.lr(Ga.ey.WebGPUEffectCustomParamsBuffer,s):null}))}VEt(t){let s=0;for(const i of t)this.m3t.push(this.S3t(s,i)),++s;this._3t(),this.D6()}S3t(t,s){this.N3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ga.lr(Ga.Ho);n.ja(e),i[t]=n}}return i}OCt(){for(const t of this.Z7.YL())this.m3t.push(t.R3t());this._3t()}hb(){return this.Y2}XL(){return this.Z7}AF(){return this.t9(),this.CF}UO(){return this._i.UO()}D6(){Ga.Bh(this.d3t);let t=this.F3t,i=this.Z7.YL(),e=this.d3t,n=this.N3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(n[t]){const h=i[t];e.push(h),h.mT().Kv()||(r=!1)}this.Dv=r,t.o3t(!!e.length),this.D3t=!0}t9(){const t=this._i,s=this.F3t,i=s.s9(),e=t._L().uL(),n=0!==s.iB()||0!==s.TO().iB()||s.um()<0||s.xm()<0,r=t.ITt(),h=t.Zv();(this.D3t||i!==this.rz||e!==this.O3t||n!==this.k3t||r!==this.L3t||h!==this.B3t||this.CF.yR())&&(this.CF.wR(this.d3t.map(t=>t.mT()),{w3:this.d3t.map(t=>t.RF()),S3:!i||h,b3:e,M3:r,x3:n}),this.D3t=!1,this.rz=i,this.O3t=e,this.k3t=n,this.L3t=r,this.B3t=h)}i9(){return this.d3t}Int(t){return this.m3t[t]}ez(t){return(t<this.g3t.length?this.g3t:this.m3t)[t]}O6(t,s){if(t<0||t>=this.m3t.length)return null;const i=this.m3t[t];return s<0||s>=i.length?null:i[s]}k6(t,s,i){if(t<0||t>=this.m3t.length)return!1;const e=this.m3t[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ga.Ho){if(n.fa(i))return!1;n.ea(i)}else{if(n===i)return!1;e[s]=i}return t<this.g3t.length&&this.g3t[t].SetParameterValue(s,i),!0}_3t(){const i=this.m3t,e=this.g3t;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}Kv(){return this.Dv}W3t(){return this.d3t.some(t=>t.mT().s2())}R6(t){return this.N3t[t]}F6(t,s){this.N3t[t]=!!s}YL(){return this.Z7.YL()}mq(){return this.Z7.YL().map(t=>({name:t.Kc(),active:this.N3t[t.RF()],params:Ga.K7.E3t(this.m3t[t.RF()])}))}gq(t){for(const s of t){const i=this.Z7.Cnt(s.name);i&&(this.N3t[i.RF()]=s.active,this.m3t[i.RF()]=Ga.K7.A3t(s.params))}this.D6(),this._3t()}}}{let G=self.Bs,r=[],v=[],h=[],b=G.lr(G.Fu),w=G.lr(G.Fu),M=G.lr(G.Ql),d=G.lr(G.Rect),p=G.lr(G.Rect),m=null,g=null,y=null;G.V3t=class extends G.rr{constructor(t){super(),this.lf=t,this.j3t=0,this.H3t=0,this.U3t=[],this.z3t=0,this.J3t=0,this.q3t=0,this.$3t=0,this.X3t=new self.ck(this)}ur(){this.lf=null}UO(){return this.lf}BF(){return this.X3t}Y3t(){this.J3t=this.z3t,this.z3t=0,this.$3t=this.q3t,this.q3t=0}Z3t(){return this.J3t}K3t(){return this.$3t}Q3t(t,s){const i=t.xO(),e=s.xO();i&&e&&i.SN()&&e.SN()&&this.U3t.push([t,s])}rbt(s,i,e){for(const[n,r]of this.U3t){let t=null;if(s===n)t=r;else{if(s!==r)continue;t=n}t.cbt(i)&&!e.includes(t)&&e.push(t)}}hbt(t,s){if(this.U3t.length)for(const[i,e]of this.U3t)if(t===i&&s===e||t===e&&s===i)return!0;return!1}tRt(){G.Bh(this.U3t)}dk(t,s){if(!t||!s||t===s)return!1;const i=t.xO(),e=s.xO();if(!i.SN()||!e.SN())return!1;this.z3t++;const n=i.TO(),r=e.TO(),h=n.H9(r);return h?this.sRt(i,e):this.iRt(i,e)}sRt(t,s){if(!t.iN().ql(s.iN()))return!1;if(this.q3t++,!t.nN()._u(s.nN()))return!1;if(t.HCt()&&s.HCt())return!1;if(t.HCt())return this.eRt(t,s);if(s.HCt())return this.eRt(s,t);if(!t.$At()&&!s.$At())return!0;const i=t.XAt(),e=s.XAt();return i.Ju(e,s.I2()-t.I2(),s.E2()-t.E2())}iRt(i,e){const t=i.HCt(),s=e.HCt();if(t&&!s)return this.nRt(i,e);if(s&&!t)return this.nRt(e,i);if(s||t)return!1;{const n=i.TO(),r=e.TO(),h=(b.G(i.XAt()),w.G(e.XAt()),b.Bu());for(let t=0,s=h.length;t<s;t+=2){const a=t+1,l=h[t],u=h[a],[c,f]=n.b5(l+i.I2(),u+i.E2());h[t]=c,h[a]=f}const o=w.Bu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.b5(p+e.I2(),m+e.E2());o[t]=g,o[d]=y}return b.ju(),w.ju(),this.q3t++,b.Ju(w,0,0)}}nRt(t,s){const i=t.TO(),e=s.TO(),n=(m=m||G.lr(G.Fu),g=g||G.lr(G.Rect),y=y||G.lr(G.Ql),s.I2()),r=s.E2(),[h,o]=e.b5(n,r),[a,l]=i.y5(h,o),u=a-n,c=l-r;if(g.G(s.iN()),g.offset(u,c),!t.iN().ql(g))return!1;if(y.G(s.nN()),y.offset(u,c),this.q3t++,!t.nN()._u(y))return!1;m.G(s.XAt());const f=m.Bu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.ju(),this.eRt(t,s,a,l,m,g,y)}eRt(t,e,s,i,n,r,h){const o=void 0!==r?r:e.iN(),a=t.I2(),l=t.E2(),u=t.JW().g6(),c=void 0!==s?s:e.I2(),f=void 0!==i?i:e.E2(),d=e.$At(),p=void 0!==h?h:e.nN(),m=v;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.z3t++,o.$l(y,a,l)&&(M.vu(y),M.offset(a,l),M._u(p)))if(d){let t=void 0!==n?n:e.XAt(),s=c,i=f;void 0!==n&&(s=e.I2(),i=e.E2());const w=g.GetPoly();if(w){if(this.q3t++,w.Ju(t,s-(a+y.xl()),i-(l+y.Tl())))return G.Bh(m),!0}else if(b.Uu(M,0,0),b.Ju(t,s,i))return G.Bh(m),!0}else{const S=g.GetPoly();if(!S)return G.Bh(m),!0;if(b.Uu(p,0,0),S.Ju(b,-(a+y.xl()),-(l+y.Tl())))return G.Bh(m),!0}}return G.Bh(m),!1}rRt(t,o,a){const l=t.LL(),s=this.lf.mD();if(!s)throw new Error("cannot call outside event");const u=s.Jft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.$B(),i.set(t,s)),s};if(l.Pft()){a||(l.kft(!1),G.Bh(l.Lft())),u&&G.Bh(l.Bft());for(const e of t.kL()){let n=e.xO(),r=n.TO();if(!(!c(r)||!n.hN())&&o.some(([t,s])=>{const[i,e]=r.y5(t,s,n.tN());return n.bN(i,e)})){if(a)return!1;l.Dft(e)}else u&&l.Oft(e)}}else{let i,e=!1,h=(!u||s.Bgt(this.lf.Ldt())||this.lf.h2t()&&!l.Bft().length&&l.Lft().length?i=l.Lft():(i=l.Bft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],n=t.xO(),r=n.TO();if(!(!c(r)||!n.hN())&&o.some(([t,s])=>{const[i,e]=r.y5(t,s,n.tN());return n.bN(i,e)})){if(a)return!1;e?l.Dft(t):i[h++]=t}else e?i[h++]=t:u&&l.Oft(t)}a||(i.length=h)}return t.Syt(),i.clear(),!!a||l.Eft()}hRt(t,s){if(t)for(const i of s.lCt())if(!t.H9(i))return!1;return!0}r2t(t,s,i,e){if(s.jz())for(const n of s.cgt())this.hRt(t,n)?(n.hCt(),n.nCt().t7(i,e)):G.Xn(e,n.kL());else this.hRt(t,s)?(s.hCt(),s.nCt().t7(i,e)):G.Xn(e,s.kL())}xk(t,s,i,e){for(const n of s)this.r2t(t,n,i,e)}oRt(t,s,i){const e=this.lf.I_t();e&&this.xk(t,e.eZ(),s,i)}aRt(t,s,i){const e=this.lf.C_t();e&&this.xk(t,e.eZ(),s,i)}FAt(t,s){return t.JCt()&&(!s||s.xO().FAt(t.fvt().get("solidTags")))}gk(t){const s=t.xO();this.oRt(s.TO(),s.iN(),r);for(const i of r)if(this.FAt(i,t)&&this.dk(t,i))return G.Bh(r),i;return G.Bh(r),null}lRt(t,s){this.oRt(null,t,r);for(const i of r)if(this.FAt(i,s)&&this.uRt(t,i))return G.Bh(r),i;return G.Bh(r),null}cRt(t,s){let i=null;s&&(i=h,G.Bh(i));const e=t.xO();this.aRt(e.TO(),e.iN(),r);for(const n of r)if(n.$Ct()&&this.dk(t,n)){if(!s)return G.Bh(r),n;i.push(n)}return G.Bh(r),i}fRt(s,i,e,n,r){n=n||50;const h=s.xO(),o=h.I2(),a=h.E2();for(let t=0;t<n;++t)if(h.X4(o+i*t,a+e*t),h.q4(),!this.dk(s,r))return!0;return h.X4(o,a),h.q4(),!1}dRt(s,i,e,n,r,h){n=n||50;let o=s.xO(),a=o.I2(),l=o.E2(),u=null,c=null;for(let t=0;t<n;++t)if(o.X4(a+i*t,l+e*t),o.q4(),!this.dk(s,u))if(u=this.gk(s))c=u;else if(r&&(u=h?this.dk(s,h)?h:null:this.cRt(s))&&(c=u),!u)return c&&this.pRt(s,i,e,c,16,!0),!0;return o.X4(a,l),o.q4(),!1}mRt(i,e,n,t){t=t||50;let r=i.xO(),h=r.I2(),o=r.E2(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.X4(h+e*s*u,o+n*s*u),r.q4(),!this.dk(i,a)){if(!(a=this.gk(i)))return l&&this.pRt(i,e*u,n*u,l,16,!0),!0;l=a}}return r.X4(h,o),r.q4(),!1}pRt(t,s,i,e,n,r){let h=2,o=!1,a=!1,l=t.xO(),u=l.I2(),c=l.E2();for(;h<=n;){const f=1/h;h*=2,l.K4(s*f*(o?1:-1),i*f*(o?1:-1)),l.q4(),this.dk(t,e)||r&&this.gk(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.I2(),c=l.E2())}a&&(l.X4(u,c),l.q4())}gRt(i,t=100){let e=0,n=i.xO(),r=n.I2(),h=n.E2(),o=0,a=this.gk(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,n.X4(Math.floor(r+t*e),Math.floor(h+s*e)),n.q4(),!this.dk(i,a)&&!(a=this.gk(i)))return!0}return n.X4(r,h),n.q4(),!1}yRt(t,s,i,e){const n=t.xO(),r=n.I2(),h=n.E2(),o=Math.max(10,G.br(s,i,r,h)),a=G.Tr(s,i,r,h),l=e||this.gk(t);if(!l)return G.yr(a+Math.PI);let u=l,c=0,f=0,d=G.Sr(5),p;for(p=1;p<36;++p){const T=a-p*d;if(n.X4(s+Math.cos(T)*o,i+Math.sin(T)*o),n.q4(),!this.dk(t,u)&&!(u=e?null:this.gk(t))){c=T;break}}for(36===p&&(c=G.yr(a+Math.PI)),u=l,p=1;p<36;++p){const _=a+p*d;if(n.X4(s+Math.cos(_)*o,i+Math.sin(_)*o),n.q4(),!this.dk(t,u)&&!(u=e?null:this.gk(t))){f=_;break}}if(36===p&&(f=G.yr(a+Math.PI)),n.X4(r,h),n.q4(),f===c)return f;let m=G._r(f,c)/2,g;g=G.Ir(f,c)?G.yr(c+m+Math.PI):G.yr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,x=w-2*b*v;return G.Tr(0,0,M,x)}wRt(t,s,i,e,n){if(!n)return!1;const r=n.xO();if(!r.SN())return!1;if(this.z3t++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.iN().ql(d))return!1;if(n.HCt())return this.SRt(t,s,i,e,n,r);if(this.q3t++,!r.nN().Tu(t,s,i,e))return!1;if(!r.$At())return!0;const h=r.XAt();return h.Tu(r.I2(),r.E2(),t,s,i,e)}SRt(i,e,n,r,t,s){const h=s.I2(),o=s.E2(),a=t.g6(),l=v;p.set(i,e,n,r),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.z3t++,d.$l(c,h,o)&&(M.vu(c),M.offset(h,o),M.Tu(i,e,n,r))){const f=u.GetPoly();if(!f)return G.Bh(l),!0;if(this.q3t++,f.Tu(h+c.xl(),o+c.Tl(),i,e,n,r))return G.Bh(l),!0}}return G.Bh(l),!1}uRt(t,s){if(!s)return!1;const i=s.xO();if(!i.SN())return!1;if(this.z3t++,!i.iN().ql(t))return!1;if(s.HCt())return this.vRt(t,s,i);if(this.q3t++,M.vu(t),!i.nN()._u(M))return!1;if(!i.$At())return!0;const e=b,n=(e.vu(t,i.I2(),i.E2()),i.XAt());return e.Ju(n,0,0)}vRt(i,t,s){const e=s.I2(),n=s.E2(),r=t.g6(),h=v;r.GetCollisionRectCandidates(i,h);for(let t=0,s=h.length;t<s;++t){const o=h[t],a=o.GetRect();if(this.z3t++,i.$l(a,e,n)){const l=o.GetPoly();if(!l)return G.Bh(h),!0;if(this.q3t++,b.vu(i,0,0),l.Ju(b,-(e+a.xl()),-(n+a.Tl())))return G.Bh(h),!0}}return G.Bh(h),!1}bRt(t,s){if(t){const i=t.xO();i.SN()&&(this.z3t++,i.iN().ql(s.rect))&&(t.HCt()?this.MRt(t,i,s):(this.q3t++,i.$At()?s.xRt(t,i.I2(),i.E2(),i.XAt()):s.TRt(t,i.nN())))}}MRt(i,e,n){const r=e.I2(),h=e.E2(),o=v;i.g6().GetCollisionRectCandidates(n.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.z3t++,n.rect.$l(l,r,h)){const u=a.GetPoly();this.q3t++,u?n.xRt(i,r+l.xl(),h+l.Tl(),u):n._Rt(i,e.I2(),e.E2(),l)}}G.Bh(o)}wk(t,s){if(t!==this.j3t||s!==this.H3t){this.j3t=t,this.H3t=s;const i=this.lf.Vz();for(const e of i)if(e.iL()){for(const n of e.OL())n.xO().AAt();e.nCt().GRt(t,s),e.rCt();for(const r of e.OL()){const h=r.xO();h.h3t(),h.oCt()}}}}vk(){return[this.j3t,this.H3t]}IRt(t,s){this.j3t=t,this.H3t=s}}}{const Ia=self.Bs;Ia.kGt=class extends Ia.rr{constructor(t,s){super(),this.qU=t,this.$U=s,this.XU=Ia.lr(Ia.Ku)}ur(){this.XU.ur(),this.XU=null}GRt(t,s){if(!this.XU.sc())throw new Error("grid not empty");this.qU=t,this.$U=s}YU(t,s,i){let e=this.XU.ei(t,s);return e||(i?(e=Ia.lr(Ia.CRt,this,t,s),this.XU.Set(t,s,e),e):null)}ZU(t){const s=Math.floor(t/this.qU);return isFinite(s)?s:0}KU(t){const s=Math.floor(t/this.$U);return isFinite(s)?s:0}QU(e,n,r){if(n)for(let i=n.xl(),t=n._l();i<=t;++i)for(let t=n.Tl(),s=n.Gl();t<=s;++t)if(!r||!r.Xl(i,t)){const h=this.YU(i,t,!1);h&&(h.b0(e),h.sc())&&this.XU.ic(i,t)}if(r)for(let i=r.xl(),t=r._l();i<=t;++i)for(let t=r.Tl(),s=r.Gl();t<=s;++t)n&&n.Xl(i,t)||this.YU(i,t,!0).HU(e)}t7(t,s){let i=this.ZU(t.xl()),e=this.KU(t.Tl()),n=this.ZU(t._l()),r=this.KU(t.Gl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.YU(i,t,!1);h&&h.zU(s)}}}}{const Ca=self.Bs;Ca.CRt=class extends Ca.rr{constructor(t,s,i){super(),this.kU=t,this.tl=s,this.sl=i,this.LU=Ca.lr(Ca.hc)}ur(){this.LU.ur(),this.LU=null,this.kU=null}sc(){return this.LU.sc()}HU(t){this.LU.uc(t)}b0(t){this.LU.ic(t)}zU(t){Ca.Xn(t,this.LU.cc())}}}{const Pa=self.Bs;Pa.PRt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Pa.Rect,this.ERt=2,this.ARt=null,this.RRt=0,this.FRt=0,this.DRt=0,this.ORt=0,this.kRt=0,this.Et=0,this.LRt=1,this.BRt=0,this.NRt=1,this.WRt=0}VRt(){return this.ERt<1+1e-6}l0(){this.ERt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.ERt=2,this.ARt=null,this.RRt=0,this.FRt=0,this.DRt=0,this.ORt=0,this.kRt=0,this.Et=0,this.LRt=1,this.BRt=0,this.NRt=1,this.WRt=0,this}jRt(){if(!1!==this.VRt()){const t=this.dx*this.ERt,s=this.dy*this.ERt,i=Math.hypot(t,s),e=t/i,n=s/i,r=(this.Et=i-1e-6,this.ORt=this.x1+e*this.Et,this.kRt=this.y1+n*this.Et,this.RRt=Math.atan2(this.DRt,this.FRt)+Math.PI/2,this.LRt=Math.cos(this.RRt),this.BRt=Math.sin(this.RRt),e*this.LRt+n*this.BRt);if(this.NRt=e-2*this.LRt*r,this.WRt=n-2*this.BRt*r,0<r){const h=Math.PI;this.RRt=Pa.yr(this.RRt+h),this.LRt=-this.LRt,this.BRt=-this.BRt}}}HRt(t,s,i,e,n){const r=Pa.fh(this.x1,this.y1,this.x2,this.y2,s,i,e,n);0<=r&&r<this.ERt&&(this.ERt=r,this.ARt=t.U5(),this.FRt=s-e,this.DRt=i-n)}_Rt(t,s,i,e){const n=s+e.xl(),r=s+e._l(),h=i+e.Tl(),o=i+e.Gl();this.HRt(t,n,h,r,h),this.HRt(t,r,h,r,o),this.HRt(t,r,o,n,o),this.HRt(t,n,o,n,h)}TRt(t,s){const i=s.ih(),e=s.eh(),n=s.nh(),r=s.rh(),h=s.hh(),o=s.oh(),a=s.ah(),l=s.lh();this.HRt(t,i,e,n,r),this.HRt(t,n,r,h,o),this.HRt(t,h,o,a,l),this.HRt(t,a,l,i,e)}xRt(i,e,n,t){const r=t.Bu();for(let t=0,s=r.length;t<s;t+=2){const h=(t+2)%s,o=r[t]+e,a=r[t+1]+n,l=r[h]+e,u=r[1+h]+n;this.HRt(i,o,a,l,u)}}}}{const x=self.Bs,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Aa=new Set(["high","low"]),Ra=self.bs,Tn=Ra._s,_n=Ra.Ps,Fa=Tn.create(),Da=x.lr(x.Ql),T=x.lr(x.Rect);x.URt=class extends x.rr{constructor(t){super(),this.lf=t,this.zRt=[],this.JRt=!1,this.qRt=null,this.$Rt=null,this.XRt=null,this.YRt="high-performance",this.ZRt=!1,this.KRt=0,this.QRt=0,this.tFt="",this.sFt=0,this.iFt=0,this.eFt=0,this.nFt=0,this.rFt=0,this.hFt=0,this.Ey="normalized",this.oFt=0,this.aFt=1,this.lFt=1e4,this.lw=!0,this.uFt=0,this.K3=0,this.Q3=0,this.cFt="letterbox-scale",this.fFt="letterbox-scale",this.dFt=0,this.pFt=0,this.mFt=Tn.create(),this.gFt="high",this.yFt=this.gFt,this.wFt=!1,this.SFt=[],this.vFt=new Set,this.bFt=self.C3_Shaders,this.MFt=x.lr(x.ey.KA,{$A:()=>[this.TJ(),this._J()],XA:()=>this.xFt(),YA:t=>this.TFt(t),getTime:()=>this.UO().FD(),ZA:()=>this.UO().EO()}),this._Ft=0,this.GFt=0,this.IFt=NaN,this.CFt=null,this.PFt=new Map,this.EFt=NaN,this.AFt=new Map,this.RFt="",this.FFt=1,this.DFt=x.lr(x.Rect),this.OFt="",this.kFt=null,this.LFt=null,this.BFt=0,this.NFt=0,this.WFt=-1,this.VFt=0,this.jFt=t=>this.VFt=t.progress,this.HFt=null,this.UFt={zFt:null,JFt:null,qFt:null},this.$Ft=0,this.XFt=0,this.YFt=0,this.ZFt="fade-in",this.KFt=null,this.QFt=new Promise(t=>this.KFt=t)}tDt(t){this.YRt=t}sDt(t){this.JRt=!!t}iDt(t){this.Ey=t}eDt(){return this.Ey}nDt(t){this.oFt=t}rDt(t,s){this.aFt=t,this.lFt=s}hDt(t){this.ZRt=!!t}async Ao(t){let s=t.canvas,i=(this.zRt.push({canvas:s,oDt:null}),this.lf.b4("runtime","window-resize",t=>this.aDt(t)),this.lf.b4("runtime","fullscreenchange",t=>this.lDt(t)),this.lf.b4("runtime","fullscreenerror",t=>this.uDt(t)),s.addEventListener("webglcontextlost",t=>this.cDt(t)),s.addEventListener("webglcontextrestored",t=>this.fDt(t)),this.wFt=!!t.isFullscreen,this.tFt=t.cssDisplayMode,navigator.gpu&&this.JRt),e=!1;if(i)try{await this.dDt(!0)}catch(t){this.pDt("WebGPU",t),this.$Rt=null}if(!this.Jv())try{await this.mDt(!0)}catch(t){this.pDt("WebGL",t),this.qRt=null}if(this.Jv()||(e=!0),!this.Jv()&&i)try{await this.dDt(!1)}catch(t){this.pDt("WebGPU",t),this.$Rt=null}if(!this.Jv())try{await this.mDt(!1)}catch(t){this.pDt("WebGL",t),this.qRt=null}const n=this.Jv();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.mv(e),this.$Rt&&(this.$Rt.gDt=()=>this.yDt(),this.$Rt.wDt=()=>this.SDt()),"normalized"===this.Ey?n.Cw():(n.Pw(),n.Gw(this.oFt)),this.hC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.T3t()}pDt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async dDt(t){const s={xy:this.aFt,Ty:this.lFt},i={powerPreference:this.YRt,depth:this.lf.E9(),failIfMajorPerformanceCaveat:t,vDt:this.lf.FJ(),bDt:this.lf.MDt(),mP:this.lf.xDt()};this.$Rt=x.lr(x.ey.WebGPURenderer,s),await this.$Rt.gx(this.zRt[0].canvas,i)}async mDt(t){const s={alpha:!0,powerPreference:this.YRt,pP:"xbox-uwp-webview2"!==this.lf.Ek(),depth:this.lf.E9(),mP:this.lf.xDt(),failIfMajorPerformanceCaveat:t,xy:this.aFt,Ty:this.lFt};this.ZRt&&(s.gP=1),this.qRt=x.lr(x.ey.SP,this.zRt[0].canvas,s),await this.qRt.mw()}async TDt(){if(this.bFt){const t=[];for(const[s,i]of Object.entries(this.bFt)){i.src=i._Dt;const e=x.ey.WebGPUShaderProgram.OT();t.push(this.$Rt.bE(Object.assign({lx:e,name:s},i)))}await Promise.all(t)}}async GDt(){if(this.bFt){const s=[];for(const[i,e]of Object.entries(this.bFt)){let t;if(e.IDt&&2<=this.qRt.$b())e.src=e.IDt,t=x.ey.hx.kT();else{if(!e.CDt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.CDt,t=x.ey.hx.OT()}s.push(this.qRt.bE(Object.assign({lx:t,name:i},e)))}await Promise.all(s),this.qRt.ME(),this.qRt.Ww()}this.qRt.OA()&&(this.CFt=x.lr(x.ey.nP,this.qRt))}async T3t(){this.$Rt?await this.TDt():this.qRt&&await this.GDt();const t=this.Jv();t.dv(this.lw),t.OA()&&(this.IFt=0);for(const s of this.lf.PDt()){for(const i of s.YL())i.T3t(t);s.T3t(t),s.D6()}this.XRt=new self.Zj(this.lf,t)}ur(){this.lf=null,this.qRt=null,this.zRt.length=0}qF(){return this.lf.qF()}aDt(t){const s=this.lf;if(!s.EDt()){const i=t.devicePixelRatio,e=(this.qF()&&(self.devicePixelRatio=i),s.ADt(i),this.wFt=!!t.isFullscreen,this.tFt=t.cssDisplayMode,this.hC(t.innerWidth,t.innerHeight),s.EO(),new x.Event("window-resize")),n=(e.data=t,s.jf().Kf(e),new x.Event("resize"));n.RDt=this.Bk(),n.FDt=this.Wk(),n.DDt=this.jk(),n.ODt=this.Uk(),s.OX(n),s.kX()&&(s._1t()||self.C3Debugger.IsDebuggerPaused())&&s.CR()}}lDt(t){this.wFt=!!t.isFullscreen,this.hC(t.innerWidth,t.innerHeight,!0),this.lf.EO()}uDt(t){this.wFt=!!t.isFullscreen,this.hC(t.innerWidth,t.innerHeight,!0),this.lf.EO()}hC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.KRt!==t||this.QRt!==s||i){this.KRt=t,this.QRt=s;const e=this.kDt();"letterbox-scale"===e?this.LDt(t,s):"letterbox-integer-scale"===e?this.BDt(t,s):"off"===e?this.NDt(t,s):this.WDt(t,s),this.VDt(e);for(const{canvas:h}of this.zRt)h.width=this.eFt,h.height=this.nFt;this.lf.ff("canvas","update-size",{marginLeft:this.rFt,marginTop:this.hFt,styleWidth:this.sFt,styleHeight:this.iFt,displayScale:this.ZV()});const n=this.Jv();n.hC(this.eFt,this.nFt,!0);for(const o of this.SFt)n.PA(o);x.Bh(this.SFt),this.jDt();const r=this.lf.nO();r.nY(),r.rY()}}jDt(){this.Jv().Aw(this.mFt,this.TJ()/this._J())}GJ(){return this.mFt}LDt(t,s){const i=this.lf.zk(),e=this.lf.XF(),n=this.lf.ZF(),r=e/n,h=t/s;if(r<h){const o=s*r;this.sFt=Math.round(o),this.iFt=s,this.rFt=Math.floor((t-this.sFt)/2),this.hFt=0}else{const a=t/r;this.sFt=t,this.iFt=Math.round(a),this.rFt=0,this.hFt=Math.floor((s-this.iFt)/2)}this.eFt=Math.round(this.sFt*i),this.nFt=Math.round(this.iFt*i),this.lf.HDt(e,n)}BDt(t,s){let i=this.lf.zk(),e=(1!==i&&(t+=1,s+=1),this.lf.XF()),n=this.lf.ZF(),r=e/n,h=t/s,o;if(r<h){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/n}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.eFt=Math.round(e*o),this.nFt=Math.round(n*o),this.sFt=this.eFt/i,this.iFt=this.nFt/i,this.rFt=Math.max(Math.floor((t-this.sFt)/2),0),this.hFt=Math.max(Math.floor((s-this.iFt)/2),0),this.lf.HDt(e,n)}WDt(t,s){const i=this.lf.zk(),e=(this.sFt=t,this.iFt=s,this.eFt=Math.round(this.sFt*i),this.nFt=Math.round(this.iFt*i),this.rFt=0,this.hFt=0,this.ZV());this.lf.HDt(this.sFt/e,this.iFt/e)}NDt(t,s){const i=this.lf.zk();this.sFt=this.lf.v9(),this.iFt=this.lf.b9(),this.eFt=Math.round(this.sFt*i),this.nFt=Math.round(this.iFt*i),this.UDt()?(this.rFt=Math.floor((t-this.sFt)/2),this.hFt=Math.floor((s-this.iFt)/2)):(this.rFt=0,this.hFt=0),this.lf.HDt(this.lf.v9(),this.lf.b9())}VDt(i){if("high"===this.gFt)this.K3=this.eFt,this.Q3=this.nFt,this.yFt="high";else{let t,s;if(s="off"===this.kDt()?(t=this.lf.v9(),this.lf.b9()):(t=this.lf.XF(),this.lf.ZF()),this.eFt<t||this.nFt<s)this.K3=this.eFt,this.Q3=this.nFt,this.yFt="high";else if(this.K3=t,this.Q3=s,this.yFt="low","scale-inner"===i){const e=t/s,n=this.KRt/this.QRt;n<e?this.K3=this.Q3*n:e<n&&(this.Q3=this.K3/n)}else if("scale-outer"===i){const r=t/s,h=this.KRt/this.QRt;r<h?this.K3=this.Q3*h:h<r&&(this.Q3=this.K3/h)}}}UO(){return this.lf}zDt(){return this.zRt[0].canvas}Q7(){return this.MFt}UDt(){return this.wFt}JDt(){return this.tFt}qDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.cFt=t;const s=this.lf.nO();s.nY(),s.rY()}XV(){return this.cFt}$Dt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.fFt=t;const s=this.lf.nO();s.nY(),s.rY()}XDt(){return this.fFt}kDt(){return this.UDt()?this.XDt():this.XV()}YDt(t){if(!Aa.has(t))throw new Error("invalid fullscreen scaling quality");this.gFt=t,this.lf.nO().nY()}ZDt(){return this.gFt}DJ(){return this.yFt}static KDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}kV(){return this.KRt}LV(){return this.QRt}TJ(){return this.K3}_J(){return this.Q3}dv(t){this.lw=!!t}QDt(t){this.uFt=t}EU(){return this.uFt}tOt(){return this.Jv().OC()}cDt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.SFt=[],this.vFt.clear(),this.MFt.g2(),this.qRt.g2(),this.lf.D$()}yDt(){console.log("[Construct] WebGPU device lost"),this.SFt=[],this.vFt.clear(),this.MFt.g2(),this.lf.D$()}async fDt(t){await this.qRt.w2(),await this.T3t(),await this.lf.sOt(),console.log("[Construct] WebGL context restored")}async SDt(){await this.T3t(),await this.lf.sOt(),console.log("[Construct] WebGPU device restored")}iOt(){return this.qRt}eOt(){return this.$Rt}Jv(){return this.$Rt||this.qRt}FIt(){return this.XRt}Fk(){let t="";return t=this.lf.eOt()?"webgpu":"webgl"+this.lf.iOt().$b(),this.lf.Jv().gv()&&(t+="-software"),t}kk(){return this.lf.eOt()?this.lf.eOt().GetAdapterInfoString():this.lf.iOt().UA()}I5(){return"low"===this.yFt?1/this.lf.zk():this.ZV()}ZV(){const t=this.kDt();if("off"===t||"crop"===t)return 1;const s=this.lf.XF(),i=this.lf.ZF(),e=s/i,n=this.eFt/this.nFt;return"scale-inner"!==t&&e<n||"scale-inner"===t&&n<e?this.iFt/i:this.sFt/s}nq(){return"low"===this.DJ()?1:this.ZV()}iq(){return"low"===this.DJ()?1:this.lf.zk()}nOt(t,s){this.dFt=t,this.pFt=s}L8(s,i,e,t=!0){i=i||this.K3,e=e||this.Q3;const n=i/2+this.dFt,r=e/2+this.pFt;if(t){let t=this.GJ();i===this.K3&&e===this.Q3||(s.Aw(Fa,i/e),t=Fa),s.TE(t)}const h=s.Ow(n,r,s.yw(e),n,r,0,e);s.EE(h)}rOt(t,s=!0){const i=this.Bk(),e=this.Wk(),n=i/2,r=e/2,h=(s&&t.TE(this.GJ()),t.Ow(n,r,t.yw(e),n,r,0,e));t.EE(h)}jk(){return this.eFt}Uk(){return this.nFt}Bk(){return this.sFt}Wk(){return this.iFt}w5(){return this.rFt}S5(){return this.hFt}y$(){return this.zRt.length}hOt(){return"undefined"!=typeof OffscreenCanvas&&this.zDt()instanceof OffscreenCanvas&&("Chromium"!==x.li.yi||124<=x.li.gi)}async N$(e,n=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.zRt.length!==e){let t=this.lf.nO().sO(),s={count:e,layersDomState:t.Yz().filter(t=>t.zB()).map(t=>t.tJ()),immediate:n,marginLeft:this.rFt,marginTop:this.hFt,styleWidth:this.sFt,styleHeight:this.iFt},i;if(i=this.qF()?await this.lf.RO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.zRt.length)this.zRt.length=e;else for(const r of i.addedCanvases){r.width=this.eFt,r.height=this.nFt;const h=this.hOt()?"bitmaprenderer":"2d",o=r.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.zRt.push({canvas:r,oDt:o})}this.lf.EO()}}RX(t){if(!(t>=this.zRt.length)){const s=this.zDt(),i=this.zRt[t].oDt;this.hOt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}OJ(s){s.depth=this.lf.E9();let t=this.SFt,i=t.findIndex(t=>t.ZM(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Jv().TA(s),this.vFt.add(e),e}iz(t){if(!this.vFt.has(t))throw new Error("render target not in use");this.vFt.delete(t),this.SFt.push(t)}xFt(){const t={Pb:this.lf.KF()};return"low"===this.DJ()&&(t.width=this.TJ(),t.height=this._J()),this.OJ(t)}TFt(t){this.iz(t)}*oOt(){for(const t of this.lf.nO().sY())for(const s of t.cB()){const i=this.PFt.get(s);i&&(yield i)}}EJ(t){if(!this.Jv().OA())return null;let s=this.PFt.get(t);return s||(s={J4:t,name:t.Kc(),aOt:x.lr(x.ey.nP,this.qRt),lOt:0,uOt:0,cOt:0},this.PFt.set(t,s)),s.aOt}fOt(){const t=this.Jv();if(t.OA()&&0===this.GFt){this.GFt=t.uv(),this.EFt=NaN;for(const s of this.oOt())s.lOt=NaN}}dOt(){this.qRt&&this.qRt.OA()&&this.pOt(),this.$Rt&&this.$Rt.OA()&&this.mOt()}pOt(){if(isNaN(this.EFt)&&(this.EFt=this.CFt.cP(this._Ft,this.GFt),!isNaN(this.EFt))){if(this.lf.kX())for(const t of this.oOt())if(t.lOt=t.aOt.cP(this._Ft,this.GFt),isNaN(t.lOt))return;if(this.CFt.fP(this.GFt),this.IFt=Math.min(this.EFt,1),this.lf.kX()){const i=new Map;for(const n of this.oOt())n.aOt.fP(this.GFt),n.uOt=Math.min(n.lOt,1),i.set(n.J4,n.uOt);for(const r of this.oOt()){const h=r.J4,o=i.get(h)||0,a=o-h.OB().reduce((t,s)=>t+(i.get(s)||0),0);r.cOt=x.gr(a,0,1)}const s=this.lf.sO(),e=this.IFt-s.Yz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(x.gr(e,0,1),this.IFt,[...this.oOt()])}this._Ft=this.GFt,this.GFt=0}}gOt(){return this.CFt}mOt(){if(0!==this.GFt){for(let t=this._Ft;t<this.GFt;++t){const i=this.AFt.get(t);if(i&&!i.qC())return}let t=this.lf.sO(),h=x.jo(t.c$()+1,0),s=0;for(let t=this._Ft;t<this.GFt;++t){const o=this.AFt.get(t);if(o){let i=o.$C(),e=BigInt(0),n=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(h.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>n&&(n=c),c-u),d=Number(f)/1e9;h[t]+=d}const a=n-e,l=Number(a)/1e9;s+=l}}if(this.IFt=x.gr(s,0,1),this.lf.kX()){const e=t.cB(),n=new Map;for(let t=0,s=Math.min(e.length,h.length-1);t<s;++t){const g=h[t+1];n.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of n){const S=[...y.LB()].reduce((t,s)=>t+(n.get(s)||0),0);p.set(y,S),r.push({name:y.Kc(),cOt:x.gr(w,0,1),uOt:x.gr(S,0,1)})}const m=this.IFt-t.Yz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(x.gr(m,0,1),this.IFt,r)}for(let t=this._Ft;t<this.GFt;++t)this.AFt.delete(t);this._Ft=this.GFt,this.GFt=0}}yOt(t){this.AFt.set(this.$Rt.uv(),t)}UD(){return this.IFt}wOt(t,s,i,e,n,r){return this.RFt=t,this.FFt=s,this.DFt.ml(i,e,n,r),this.kFt||(this.kFt=new Promise(t=>{this.LFt=t})),this.kFt}SOt(){if(this.RFt){let t=this.zDt(),s=this.DFt,i=x.gr(Math.floor(s.xl()),0,t.width),e=x.gr(Math.floor(s.Tl()),0,t.height),n=s.width(),r=(n=0===n?t.width-i:x.gr(Math.floor(n),0,t.width-i),s.height());if(r=0===r?t.height-e:x.gr(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&0<n&&0<r){const h=x.Ao(n,r),o=h.getContext("2d");o.drawImage(t,i,e,n,r,0,0,n,r),t=h}x.Ro(t,this.RFt,this.FFt).then(t=>{this.OFt&&URL.revokeObjectURL(this.OFt),this.OFt=URL.createObjectURL(t),this.kFt=null,this.LFt(this.OFt)}),this.RFt="",this.FFt=1}}vOt(){return this.OFt}bOt(t){t?this.BFt++:this.BFt--}MOt(){return 0<this.BFt}xOt(t){const s=this.Jv();if(2===t)this.HFt=x.lr(x.ey.xv,this.Jv()),this.HFt.kI("Arial"),this.HFt.LI(16),this.HFt.ZI("center"),this.HFt.QI("center"),this.HFt.hC(300,200);else if(0===t){const i=this.lf.TOt();i&&i.C8(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this._Ot("splash-images/splash-logo.svg").then(t=>{"done"===this.ZFt?s.kM(t):this.UFt.zFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.GOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.ZFt?s.kM(t):this.UFt.JFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.GOt("splash-images/splash-website-512.png").then(t=>{"done"===this.ZFt?s.kM(t):this.UFt.qFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async _Ot(t){t=new URL(t,this.lf.IOt()).toString();const s=await x.To(t),i=await this.lf.COt(s,2048,2048);return this.Jv().xA(i,{Fb:"high"})}async GOt(t){t=new URL(t,this.lf.IOt()).toString();const s=await x.To(t);return this.Jv().xA(s,{Fb:"high"})}POt(){this.lf.ff("runtime","hide-cordova-splash")}EOt(){this.NFt=Date.now(),this.lf.jf().addEventListener("loadingprogress",this.jFt),this.WFt=requestAnimationFrame(()=>this.AOt());const t=this.lf.ROt();3!==t&&this.POt()}async FOt(){const t=this.Jv(),s=(this.VFt=1,this.lf.ROt());4===s&&await this.QFt,this.KFt=null,this.QFt=null,-1!==this.WFt&&(cancelAnimationFrame(this.WFt),this.WFt=-1),this.lf.jf().removeEventListener("loadingprogress",this.jFt),this.jFt=null,this.HFt&&(this.HFt.ur(),this.HFt=null),this.lf.DOt(),t.dA(),this.UFt.zFt&&(t.kM(this.UFt.zFt),this.UFt.zFt=null),this.UFt.JFt&&(t.kM(this.UFt.JFt),this.UFt.JFt=null),this.UFt.qFt&&(t.kM(this.UFt.qFt),this.UFt.qFt=null),t.fA(0,0,0,0),t.av(),this.ZFt="done",this._Ft=t.uv(),3===s&&this.POt()}AOt(){if(-1!==this.WFt){const t=this.Jv(),s=(t.dA(),this.WFt=-1,this.lf.kF().eU()),i=this.lf.ROt();if(3!==i&&(this.rOt(t),t.fA(0,0,0,0),t.BE(),t.Ww(),t.WE(null)),0===i)this.OOt(s);else if(1===i)this.kOt(s,120,0);else if(2===i)this.LOt(s);else if(3===i)x.Dh();else{if(4!==i)throw new Error("invalid loader style");this.BOt(s)}t.av(),this.WFt=requestAnimationFrame(()=>this.AOt())}}LOt(t){t?this.HFt.YI(1,0,0):this.HFt.YI(.6,.6,.6),this.HFt.df(Math.round(100*this.VFt)+"%");const s=this.sFt/2,i=this.iFt/2,e=(Da.au(s-150,i-100,150+s,100+i),this.Jv());e.WE(this.HFt.jM()),e.AS(Da,this.HFt.LC())}kOt(t,s,i){const e=this.Jv(),n=(e.Jw(),t?e.kE(1,0,0,1):e.kE(.118,.565,1,1),this.sFt/2),r=this.iFt/2,h=s/2;T.ml(n-h,r-4+i,Math.floor(s*this.VFt),8),e.Rect(T),T.ml(n-h,r-4+i,s,8),T.offset(-.5,-.5),T.kl(.5,.5),e.kE(0,0,0,1),e.kS(T),T.kl(1,1),e.kE(1,1,1,1),e.kS(T)}OOt(t){const s=this.Jv(),i=this.lf.TOt();if(i){const e=i.jM();if(e){const n=e.um(),r=e.xm(),h=this.sFt/2,o=this.iFt/2,a=n/2,l=r/2;Da.au(h-a,o-l,h+a,o+l),s.WE(e),s.Ql(Da),this.kOt(t,n,16+l)}else this.kOt(t,120,0)}else this.kOt(t,120,0)}BOt(t){let s=this.Jv(),i=this.UFt.zFt,e=this.UFt.JFt,n=this.UFt.qFt,r=Date.now(),h=(0===this.$Ft&&(this.NFt=r),this.lf.NOt()||this.lf.WOt()&&!this.lf.VOt()),o=h?0:200,a=h?0:3e3,l=1,u=("fade-in"===this.ZFt?l=Math.min((r-this.NFt)/300,1):"fade-out"===this.ZFt&&(l=Math.max(1-(r-this.YFt)/300,0)),s.Jw(),s.kE(.231*l,.251*l,.271*l,l),T.set(0,0,this.sFt,this.iFt),s.Rect(T),Math.ceil(this.sFt)),c=Math.ceil(this.iFt),f,d;256<this.iFt?(s.kE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),T.ml(0,.8*c-d/2,f,d),s.Rect(T),t?s.kE(l,0,0,l):s.kE(.161*l,.953*l,.816*l,l),f=u*this.VFt,T.ml(.5*u-f/2,.8*c-d/2,f,d),s.Rect(T),s.kE(l,l,l,l),s.Ww(),e&&(f=1.5*x.gr(.22*c,105,.6*u),d=f/8,T.ml(.5*u-f/2,.2*c-d/2,f,d),s.WE(e),s.Rect(T)),i&&(f=Math.min(.395*c,.95*u),d=f,T.ml(.5*u-f/2,.485*c-d/2,f,d),s.WE(i),s.Rect(T)),n&&(f=1.5*x.gr(.22*c,105,.6*u),d=f/8,T.ml(.5*u-f/2,.868*c-d/2,f,d),s.WE(n),s.Rect(T))):(s.kE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),T.ml(0,.85*c-d/2,f,d),s.Rect(T),t?s.kE(l,0,0,l):s.kE(.161*l,.953*l,.816*l,l),f=u*this.VFt,T.ml(.5*u-f/2,.85*c-d/2,f,d),s.Rect(T),s.kE(l,l,l,l),s.Ww(),i&&(f=.55*c,d=f,T.ml(.5*u-f/2,.45*c-d/2,f,d),s.WE(i),s.Rect(T))),this.$Ft++,"fade-in"===this.ZFt&&300<=r-this.NFt&&2<=this.$Ft&&(this.ZFt="wait",this.XFt=r),"wait"===this.ZFt&&r-this.XFt>=a&&1<=this.VFt&&(this.ZFt="fade-out",this.YFt=r),("fade-out"===this.ZFt&&r-this.YFt>=300+o||h&&1<=this.VFt&&r-this.NFt<500)&&this.KFt()}}}{let j=self.Bs,H=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},h=!0;j.jOt=class extends j.rr{constructor(t){t=Object.assign({},i,t),super(),this.HOt=t.messagePort,this.UOt=t.runtimeBaseUrl,this.zOt=t.previewUrl,this.JOt=!!t.headless,this.qOt=!!t.hasDom,this.$Ot=!!t.isInWorker,h=t.ife,this.XOt=!!t.useAudio,this.YOt=t.exportType,this.ZOt=t.isNWjs,this.hH=!!t.isiOSCordova,this.KOt=!!t.isiOSWebView,this.QOt=!!t.isWindowsWebView2,this.tkt=!!t.isAnyWebView2Wrapper,this.skt=!!t.isFBInstantAvailable,this.ikt=!("preview"!==this.YOt||!t.isDebug),this.ekt=this.ikt,this.nkt=this.ikt,this.rkt=0,this.hkt=[],this.okt=[],this.akt=!1,this.lkt="",this.ukt="",this.ckt="",this.fkt="",this.dkt=0,this.pkt=0,this.oR=self.devicePixelRatio,this.mkt=0,this.gkt=0,this.ykt=0,this.wkt=0,this.Skt=0,this.vkt=!1,this.Bg=!0,this.bkt=!1,this.Mkt=!1,this.xkt=!1,this.Tkt=null,this.yU=j.lr(j.iH,this,t),this.bq=j.lr(j.NX,this),this.$ft=j.lr(j.z0t,this),this._kt=j.lr(j.Zk,this,t.wrapperComponentIds),this.Gkt=j.lr(j.V3t,this),this.wQ=j.lr(j.hY,this),this.Ikt=j.lr(j.klt,this),this.Ckt=j.lr(j.Blt,this),this.Klt=j.lr(j.Jlt,this),this.Fg=j.lr(j.bg,{Tg:t=>this.Pkt(t),Gg:t=>this.Ekt(t)}),this.Akt=new Map,this.Rkt=[],this.Fkt=new Map,this.Dkt=new Map,this.Okt=0,this.kkt=[],this.Lkt=new Set,this.Bkt=[],this.Nkt=[],this.Wkt=new Map,this.Vkt=!1,this.jkt=!1,this.Hkt=0,this.Ukt=0,this.zkt=new Map,this.Jkt=new Set,this.qkt=new Set,this.$kt=[],this.Xkt=[],this.Ykt=null,this.Zkt=!1,this.Kkt="vsync",this.Wb="trilinear",this.Qkt=!1,this.tLt=!0,this.sLt=!1,this.iLt=!1,this.eLt=null,this.nLt={rLt:t=>{this.WFt=-1,this.hLt=-1,this.EZ(t)},oLt:t=>{this.hLt=-1,this.EZ(t,!1,"skip-render")},aLt:()=>{this.WFt=-1,this.CR()}},this.WFt=-1,this.hLt=-1,this.lLt=0,this.uLt=0,this.cLt=!1,this.fLt=!1,this.dLt=!1,this.pLt=!0,this.mLt=!0,this.gLt=!1,this.yLt=0,this.wLt=new j.md(1),this.SLt=()=>Math.random(),this.vLt=0,this.bLt=0,this.MLt=0,this.xLt=0,this.TLt=0,this.ECt=1,this._Lt=1/30,this.GLt=0,this.ILt=j.lr(j.x0),this.CLt=j.lr(j.x0),this.PLt=j.lr(j.x0),this.ELt=new Map,this.ALt=-1,this.RLt=0,this.FLt=0,this.DLt=-1,this.OLt=0,this.kLt=0,this.LLt=0,this.BLt=!1,this.NLt="",this.WLt=!1,this.VLt="",this.R4=null,this.jLt="",this.HLt=null,this.ULt=null,this.DGt=j.lr(j.Event.jf),this.zLt=new Map,this.JLt=new Map,this.qLt=0,this.$Lt=!1,this.XLt=!1,this.YLt=!1,this.ZLt=[],this.KLt={pretick:j.lr(j.Event,"pretick",!1),tick:j.lr(j.Event,"tick",!1),tick2:j.lr(j.Event,"tick2",!1),instancecreate:j.lr(j.Event,"instancecreate",!1),instancedestroy:j.lr(j.Event,"instancedestroy",!1),beforelayoutchange:j.lr(j.Event,"beforelayoutchange",!1),layoutchange:j.lr(j.Event,"layoutchange",!1)},this.KLt.instancecreate.I6=null,this.KLt.instancedestroy.I6=null,this.Kq=j.lr(j.Event.jf),this.QLt=null;const s=(t,s)=>j.CCt.c3t(this,t,s);this.tBt=j.lr(j.R0,s),this.sBt=j.lr(j.R0,s),this.iBt=j.lr(j.R0,s),this.eBt=j.lr(j.nBt,this,t.jobScheduler),t.canvas&&(this.Ykt=j.lr(j.URt,this)),this.HOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.b4("runtime","visibilitychange",t=>this.rBt(t)),this.b4("runtime","wrapper-extension-message",t=>this.hBt(t)),this.b4("runtime","opus-decode",t=>this.ek(t.arrayBuffer)),this.b4("runtime","get-remote-preview-status-info",()=>this.oBt()),this.b4("runtime","js-invoke-function",t=>this.Sdt(t)),this.b4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.b4("runtime","offline-audio-render-completed",t=>this.aBt(t)),this.DGt.addEventListener("window-blur",t=>this.lBt(t)),this.DGt.addEventListener("window-focus",()=>this.uBt()),this.wQ.WY(),this.Ckt.WY(),this.cBt=null,this.fBt=new WeakMap,this.dBt={keyboard:null,fO:null,dO:null,pO:null},this.pBt=new WeakMap,this.mBt=[]}static gx(t){return j.lr(j.jOt,t)}ur(){j.Bh(this.Rkt),this.Fkt.clear(),this.Dkt.clear(),this.bq.ur(),this.bq=null,this.$ft.ur(),this.$ft=null,this._kt.ur(),this._kt=null,this.yU.ur(),this.yU=null,this.Gkt.ur(),this.Gkt=null,this.wQ.ur(),this.wQ=null,this.Ikt.ur(),this.Ikt=null,this.Ckt.ur(),this.Ckt=null,this.Klt.ur(),this.Klt=null,this.Fg.ur(),this.Fg=null,this.Ykt&&(this.Ykt.ur(),this.Ykt=null),this.DGt.ur(),this.DGt=null,this.gBt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.yBt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.wBt(t)}}yBt(t){if(this.YLt){const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new j.Event(i);l.data=e,this.DGt.Kf(l)}if(h){const u=new j.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.OX(u)}}const a=this.zLt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.SBt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.SBt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.SBt(o,!1,""+t)}):this.SBt(o,!0,t))}else r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.ZLt.push(t)}SBt(t,s,i){this.HOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}wBt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.JLt.get(s);i?n.resolve(e):n.reject(e),this.JLt.delete(s)}b4(t,s,i){let e=this.zLt.get(t);if(e||(e=new Map,this.zLt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}ff(t,s,i,e){this.HOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}RO(t,s,i,e){const n=this.qLt++,r=new Promise((t,s)=>{this.JLt.set(n,{resolve:t,reject:s})});return this.HOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}vj(t,s,i,e=-1){this.ff("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}bj(t,s,i){const e=this.qLt++,n=new Promise((t,s)=>{this.JLt.set(e,{resolve:t,reject:s})});return this.vj(t,s,i,e),n}hBt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.JLt.get(s);i.resolve(t.params),this.JLt.delete(s)}else this.yBt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}L4(t,s,i){this.b4("wrapper-extension:"+t,s,i)}D4(t){return this._kt.D4(t)}vBt(t){if(!this.kX())throw new Error("not in debug mode");this.ff("runtime","post-to-debugger",t)}async FCt(t){j.a2t(this),this.kX()?await H.FCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.yU.xo("data.json"),this.bBt(),this.eBt.FCt()]);if(await this.MBt(s),await this.xBt(t),this.NOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.iOt()){const i=this.iOt();console.info(`[C3 runtime] Hosted in ${this.qF()?"worker":"DOM"}, rendering with WebGL ${i.$b()} [${i.UA()}]`)}else this.eOt()&&console.info(`[C3 runtime] Hosted in ${this.qF()?"worker":"DOM"}, rendering with WebGPU [${this.eOt().GetAdapterInfoString()}]`);this.Jv().gv()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.YLt=!0;for(const e of this.ZLt)this.yBt(e);j.Bh(this.ZLt),this.Ykt&&this.Ykt.EOt();for(const n of t.runOnStartupFunctions)this.hkt.push(this.TBt(n));if(await Promise.all([this.yU.sU(),...this.hkt]),j.Bh(this.hkt),!this.yU.eU())return this.Ykt&&await this.Ykt.FOt(),await this.DGt.Yf(new j.Event("beforeruntimestart")),await this.dA(),this.HOt.postMessage({type:"runtime-ready"}),this;this.Ykt&&this.Ykt.POt()}async TBt(t){try{await t(this.cBt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async MBt(t){const s=t.project,i=(this.lkt=s[0],this.ukt=s[16],this.ckt=s[31],this.fkt=s[38],s[39]||"loading-logo.png"),e=(this.Qkt=!!s[9],this.dkt=this.ykt=s[10],this.pkt=this.wkt=s[11],this.Gkt.IRt(this.dkt,this.pkt),this.mkt=this.dkt/2,this.gkt=this.pkt/2,this.Kkt=s[37],this.Zkt=!!s[40],this.Wb=s[14],this.bkt=s[15],this.Mkt=s[42],this.xkt=s[17],this.vkt=!!s[18],this.Skt=s[19],this.Ukt=s[21],this.sLt=s[22],this.yU);if(e.RH(s[45]),e.aU(s[7],s[25]),e.DH(s[8]),e.OH(s[32]),e.LH(s[28]),e.rU(s[29]),0===this.Skt){let t;(t="flat"===e.KO()?e.BH()+i:i)&&(this.Tkt=e.$H({url:t}))}this.Ykt&&(this.Ykt.qDt(j.URt.KDt(s[12])),this.Ykt.YDt(s[23]?"high":"low"),this.Ykt.dv(0!==s[24]),this.Ykt.tDt(s[34]),this.Ykt.QDt(s[41]),this.Ykt.sDt(s[13]),this.Ykt.iDt(s[30]),this.Ykt.rDt(s[46],s[47]),this.Ykt.nDt(s[26]),this.Ykt.hDt(s[48]));const n=s[43],r=(n&&await this._Bt(n),this.GBt(),this._kt.b_t(),this.$kt=self.IBt(),s[2]);for(const l of r[1])this._kt.M_t(l);for(const u of r[0])this._kt.v_t(u);this.$kt=self.IBt(),this.CBt(),this._kt.G_t();for(const c of s[3]){const f=j.Hlt.gx(this,this.Rkt.length,c);this.Rkt.push(f),this.Fkt.set(f.Kc().toLowerCase(),f),this.Dkt.set(f.Zz(),f)}for(const d of s[4]){const p=this.Rkt[d[0]];p.wIt(d)}for(const m of s[27]){const g=m.map(t=>this.Rkt[t]);this.kkt.push(j.lr(j.yCt,this,g))}this.PBt();for(const y of this.Rkt)y.vIt();for(const w of s[5])this.bq.gx(w);const h=s[1];if(h){const S=this.bq.YX(h);S&&this.bq.$X(S)}for(const v of s[35])this.Ikt.gx(v);for(const b of s[33])this.wQ.gx(b);for(const M of s[44])this.Ckt.gx(M);this.Ckt.Vlt()||(this.Ckt.ur(),this.Ckt=null);for(const x of s[49])this.Klt.gx(x);this.Klt.Ylt()||(this.Klt.ur(),this.Klt=null);for(const T of s[6])this.$ft.gx(T);this.$ft.Mdt(),this.EBt(),j.Bh(this.$kt),this.qL();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.ff("runtime","set-target-orientation",{targetOrientation:o})}async _Bt(t){const s=t.format;"image-sequence"===s?this.eLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.eLt=new self.C3ExportToGIF(this,t):"webm"===s?this.eLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.eLt=new self.C3ExportToMP4Video(this,t)),this.Kkt="unlimited-frame",this.Ykt.qDt("off"),this.oR=1,self.devicePixelRatio=1,await this.RO("runtime","set-exporting-to-video",{message:this.eLt.GetExportingMessageForPercent(0),duration:this.eLt.sW()})}ROt(){return this.Skt}EDt(){return null!==this.eLt}ABt(){return this.eLt.sW()}RBt(){return this.eLt.GetFramerate()}FBt(){return this.eLt.FCt({width:this.Ykt.jk(),height:this.Ykt.Uk()})}DBt(){const t=this.lLt/this.RBt();return this.eLt.AddFrame(this.Ykt.zDt(),t)}OBt(){this.eLt&&this.eLt.Cit()}aBt(t){this.eLt.OnOfflineAudioRenderCompleted(t)}kBt(){return this.eLt.av()}WOt(){return this.skt}Hg(){return this.Bg}kO(t){this.hkt.push(t)}V$(t){this.akt=!!t}LBt(t){this.akt&&this.okt.push(t)}q$(){return this.okt}cIt(){return this.Okt++}MIt(){return this.Okt}v3t(t){this.Lkt.add(t)}b3t(t){this.Lkt.delete(t)}PDt(){return this.Lkt}async xBt(t){this.Ykt&&(await this.Ykt.Ao(t),this.Ykt.xOt(this.Skt))}async bBt(){const n=this.yU;if(!n.NO("audio/webm; codecs=opus")){let t=null,s=n.FH(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.BBt()&&n.NH()?await n.VH(e):await n._o(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.NBt(t,"opus-decoder-wasm"),await this.WBt([i])}}async ek(t){const s=await this.VBt("OpusDecode",{arrayBuffer:t},[t]);return s}async dA(){this.cLt=!0,this.vLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.vkt){for(const n of this.Rkt)n.jz()||n.AIt()||!n.iL()||n.vxt();(async()=>{await this.yU.sU(),await t,this.Bg=!1,this.jBt()})()}else this.Bg=!1;this.yU.iU(),this.kX()&&H.RuntimeInit(h);for(const r of this.bq.oO())r.fX();this.EDt()&&await this.FBt();const i=this.bq.XX(),e=(await i._$(null,this.Jv()),await i.O$(!0),this.RLt=performance.now(),s(),this.vkt||this.jBt(),await this.RO("runtime","before-start-ticking"));e.isSuspended&&!this.EDt()?(this.yLt++,this.gLt=!0):this.EZ()}jBt(){this.y4(j.nX.eX.iX.HBt,null,null),this.ff("runtime","register-sw")}Cyt(t){t=Math.floor(t);const s=this.$kt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}CBt(){for(const t of self.UBt){const s=j.first(Object.keys(t));this.Xkt.push(s)}}Jdt(t){t=Math.floor(t);const s=this.Xkt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}zBt(){return this.qOt}JBt(){return this.JOt}qF(){return this.$Ot}IOt(){return this.UOt}qBt(){return this.zOt}lD(){return this.$ft}MD(){return this.$ft.MD()}kdt(){return this.$ft.kdt()}mD(){return this.$ft.mD()}Ldt(){return this.$ft.Ldt()}h2t(){return 0===this.kdt().d0t()}Ndt(){return this.$ft.Ndt()}l3t(){return this._kt}_wt(){return this._kt._wt()}wz(t){if((t=Math.floor(t))<0||t>=this.Rkt.length)throw new RangeError("invalid index");return this.Rkt[t]}$Bt(t){return this.Fkt.get(t.toLowerCase())||null}Ej(t){return this.Dkt.get(t)||null}qnt(t){const s=j.Zk.gL(t);return s?s.vL():null}Vz(){return this.Rkt}*XBt(){for(const t of this.Rkt)t.jz()||(yield*t.instances())}jf(){return this.DGt}rD(){return this.Kq}OX(t){t.runtime=this.Kk();const s=this.kX()&&!this.$ft.zL();s&&H.StartMeasuringScriptTime(),this.Kq.dispatchEvent(t),s&&H.AddScriptTime()}Q$(t){return t.runtime=this.Kk(),this.Kq.Yf(t)}XF(){return this.dkt}ZF(){return this.pkt}YBt(t,s){if(this.dkt!==t||this.pkt!==s){this.dkt=t,this.pkt=s;const i=this.nO();i.nY(),i.rY()}}v9(){return this.ykt}b9(){return this.wkt}HDt(t,s){if(this.ykt!==t||this.wkt!==s){this.ykt=t,this.wkt=s;const i=this.nO();i.nY(),i.rY()}}ADt(t){this.EDt()||(this.oR=t)}zk(){return this.oR}yJ(){return this.mkt}wJ(){return this.gkt}Dk(){return this.Ykt}TJ(){return this.Ykt?this.Ykt.TJ():this.ykt}_J(){return this.Ykt?this.Ykt._J():this.wkt}I5(){return this.Ykt?this.Ykt.I5():1}ZV(){return this.Ykt?this.Ykt.ZV():1}nq(){return this.Ykt?this.Ykt.nq():1}iq(){return this.Ykt?this.Ykt.iq():1}w5(){return this.Ykt?this.Ykt.w5():0}S5(){return this.Ykt?this.Ykt.S5():0}ZBt(){return this.Ykt?this.Ykt.Bk():0}KBt(){return this.Ykt?this.Ykt.Wk():0}XV(){return this.Ykt?this.Ykt.XV():"off"}OJ(t){return this.Ykt?this.Ykt.OJ(t):null}iz(t){this.Ykt&&this.Ykt.iz(t)}FJ(){return this.bkt}MDt(){return this.Mkt}xDt(){return this.xkt}UD(){return this.Ykt?this.Ykt.UD():NaN}UM(){return"nearest"!==this.KF()}JD(){return this.Kkt}qD(t){this.Kkt!==t&&(this.Kkt=t,-1!==this.WFt||-1!==this.hLt)&&(this.QBt(),this.t5t())}KF(){return this.Wb}mIt(){return this.vkt}TOt(){return this.Tkt}DOt(){this.Tkt&&(this.Tkt.II(),this.Tkt.ur(),this.Tkt=null)}nO(){return this.bq}sO(){return this.bq.sO()}itt(){return this.wQ}s5t(){return this.Ikt}lPt(){return this.Ckt}vut(){return this.Klt}kF(){return this.yU}$H(t){return this.yU.$H(t)}VL(t,s,i,e,n,r){if(r&&this.Ckt){if(t instanceof j.Hlt&&t.jz()){const o=t.cgt(),a=Math.floor(this.tO()*o.length);return this.VL(o[a],s,i,e,n,r)}const h=this.Ckt.jlt(t,r);if(h){const l=this.Iz(h,s,!1,i,e,!1,n,void 0,n);return this.Ckt.Ult(l,r),l}}return this.Iz(t,s,!1,i,e,!1,n,void 0,n)}Iz(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof j.Hlt){if((u=t).jz()){const v=u.cgt(),b=Math.floor(this.tO()*v.length);u=v[b]}l=u.vz()}else l=t,u=this.wz(l[1]);const c=u._L().iL();if(this.Bg&&c&&!u.AIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.zkt.has(l[2])?l[2]:this.Ukt++;const p=l?l[0]:null,m=j.lr(j.Instance,{runtime:this,P5:u,J4:s,RCt:p,kCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.zkt.set(d,m);let g=null,y=(c&&(g=m.xO(),void 0!==e&&void 0!==n&&(g.C2(e),g.A2(n)),u.rCt(!0)),s&&(a||s.Pz(m,!0),s.rO().I$(u)),this.Hkt++,!0);if(o){const M=o.E5();if(M.j5()&&u.j5()){const x=u.x$(),T=M.x$();x===T&&(y=!1)}}if(u.j5()&&!i&&!r&&y){const _=new Set;for(const G of u.x$().lX())if(G!==u){const I=this.i5t(G,g,_);if(I){const C=this.Iz(I,f,!1,g?g.I2():e,g?g.E2():n,!0,!1,void 0,a);m.uX(C)}else{const B=this.Iz(G,f,!1,g?g.I2():e,g?g.E2():n,!0,!1,void 0,a);m.uX(B)}}for(const P of m.H5()){P.uX(m);for(const E of m.H5())P!==E&&P.uX(E)}}if(c&&!i&&h&&this.e5t(m,p,g,s,e,n,a),u.j5()&&!i&&!r&&h)for(const A of m.H5()){const R=A.xO();if(R){const N=A._L(),F=A.E5().vz()[0];N.iL()?this.e5t(A,F,R,s,R.I2(),R.E2(),a):this.e5t(A,F,R,s,void 0,void 0,a)}}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const D=g.TN(),W=e-g.I2()+D.I2(),V=n-g.E2()+D.E2();D.X4(W,V)}u.tCt();const k=l?j.Yh(l[5]):null,L=l?l[4].map(t=>j.Yh(t)):null,w=c&&p&&p[13];if(w&&m.jCt(),m.PIt(k,L),w){const O=p[13];m.g6().Lxt(O[2],O[0],O[1])}this.Nkt.push(m),this.Vkt=!0,this.kX()&&H.InstanceCreated(m);const S=this.KLt.instancecreate;return S.I6=m,this.DGt.dispatchEvent(S),m}hEt(t){const s=t[0],i=t[1],e=t[2],n=t[6];if(n)return n;const r=this.bq.ZX(s),h=r.TO(i);return h.xz(e)}i5t(t,s,i){const e=s?.aPt()??[];for(const n of e){const r=this.hEt(n),h=!!n[4],o=this.wz(r[1]);if(!i.has(r)&&t===o&&h)return i.add(r),r}}e5t(a,t,s,l,u,c,f){const i=s.IAt(),e=s.aPt();if(a.xO().CAt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],n=!!g[4],r=g[5],h=g[6],o;if(h)o=h;else{const v=this.bq.ZX(t),b=v.TO(s);o=b.xz(i)}const y=this.wz(o[1]),w=a.uPt(y),S=d.has(y);if(w&&!S&&n){const M=a.cPt(y),x=(M.xO().FCt(o[0]),u+o[0][0]-p),T=c+o[0][1]-m;M.xO().X4(x,T),M.xO().CAt(r),a.RN(M,{LN:!!(e>>0&1),NN:!!(e>>1&1),VN:!!(e>>2&1),HN:!!(e>>3&1),zN:!!(e>>4&1),QN:!!(e>>5&1),qN:!!(e>>6&1),XN:!!(e>>7&1),ZN:!!(e>>8&1)}),d.add(y)}else{const _=u+o[0][0]-p,G=c+o[0][1]-m,I=this.Iz(o,l,!1,_,G,!1,!0,a,f);I.xO().CAt(r),a.RN(I,{LN:!!(e>>0&1),NN:!!(e>>1&1),VN:!!(e>>2&1),HN:!!(e>>3&1),zN:!!(e>>4&1),QN:!!(e>>5&1),qN:!!(e>>6&1),XN:!!(e>>7&1),ZN:!!(e>>8&1)})}}}}L5(i){if(!this.Jkt.has(i)){let t=i.E5(),s=this.Wkt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.Wkt.set(t,s);if(this.kX()&&H.InstanceDestroyed(i),i.UCt(),this.Vkt=!0,i.j5())for(const e of i.H5())this.L5(e);for(const n of i.children())n.t6()&&this.L5(n);if(!this.bq.JL()&&!this.BLt){const r=this.lD();r.HL(!0),i.bPt(),r.HL(!1)}i.MPt(this.bq.JL())}}qL(){this.Vkt&&(this.jkt=!0,this.n5t(),this.r5t(),this.jkt=!1,this.Vkt=!1,this.EO())}n5t(){for(const t of this.Nkt){const s=t.E5();s.Pz(t);for(const i of s.Qdt())i.Pz(t),i.tCt()}j.Bh(this.Nkt)}r5t(){this.DGt.Of(!0);for(const[t,s]of this.Wkt.entries())this.h5t(t,s),s.clear();this.Wkt.clear(),this.DGt.Of(!1)}h5t(t,s){for(const i of s){const e=this.KLt.instancedestroy,n=(e.I6=i,this.DGt.dispatchEvent(e),this.zkt.delete(i.U5()),this.ELt.delete(i),i.xO());n&&(n.AAt(),n.Fz(),n.UCt()),this.Jkt.add(i),this.Hkt--}j.qh(t.kL(),s),t.tCt(),this.qkt.add(t);for(const r of t.Qdt())j.qh(r.kL(),s),r.tCt(),this.qkt.add(r);if(t._L().iL()){const h=new Set([...s].map(t=>t.xO().TO()));for(const o of h)o.J9(s)}}iCt(){return this.Nkt}*ubt(t){for(const s of this.iCt())t.jz()?s.E5().o2t(t)&&(yield s):s.E5()===t&&(yield s)}CIt(){return this.Ukt++}EIt(t,s){this.zkt.set(t,s)}_j(t){this.mLt!==(t=!!t)&&(this.mLt=!!t,this.mLt)&&this.gLt&&(this.Cj(!1),this.gLt=!1)}Gj(){return this.mLt}D$(){this.DGt.dispatchEvent(j.lr(j.Event,"renderercontextlost")),this.Cj(!0);for(const s of this.Rkt)!s.jz()&&s.RIt()&&s.R$();const t=this.sO();t&&t.D$(),j.P_t.PU(),j.YH.PU()}async sOt(){await this.sO()._$(null,this.Jv()),this.DGt.dispatchEvent(j.lr(j.Event,"renderercontextrestored")),this.Cj(!1),this.EO()}rBt(t){if(this.mLt){const s=t.hidden;this.Cj(s),(this.gLt=s)||this.EO()}}lBt(t){this.NOt()&&this.sLt&&!j.li.vi&&!t.data.parentHasFocus&&(this.Cj(!0),this.iLt=!0)}uBt(){this.iLt&&(this.Cj(!1),this.iLt=!1)}t5t(){const t=this.nLt;"vsync"===this.Kkt?-1===this.WFt&&(this.WFt=self.requestAnimationFrame(t.rLt)):"unlimited-tick"===this.Kkt?(-1===this.hLt&&(this.hLt=j.uo(t.oLt)),-1===this.WFt&&(this.WFt=self.requestAnimationFrame(t.aLt))):-1===this.hLt&&(this.hLt=j.uo(t.rLt))}QBt(){-1!==this.WFt&&(self.cancelAnimationFrame(this.WFt),this.WFt=-1),-1!==this.hLt&&(j.co(this.hLt),this.hLt=-1)}PD(){return 0<this.yLt}Cj(t){if(!this.EDt()){const s=this.PD(),i=(this.yLt+=t?1:-1,this.yLt<0&&(this.yLt=0),this.PD());if(!s&&i)console.log("[Construct] Suspending"),this.QBt(),this.DGt.dispatchEvent(j.lr(j.Event,"suspend")),this.y4(j.nX.eX.iX.o5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.bLt=e,this.RLt=e,this.ALt=0,this.FLt=0,this.DLt=0,this.OLt=0,this.LLt=0,this.kLt=0,this.DGt.dispatchEvent(j.lr(j.Event,"resume")),this.y4(j.nX.eX.iX.a5t,null,null),this._1t()||this.EZ(e)}}}fj(t){this.tBt.uc(t)}gj(t){this.sBt.uc(t)}pj(t){this.iBt.uc(t)}dj(t){this.tBt.b0(t)}yj(t){this.sBt.b0(t)}mj(t){this.iBt.b0(t)}l5t(){const t=globalThis.aj;this.tBt.fd(!0);for(const s of this.tBt)s instanceof t?s.G4():s.EZ();this.tBt.fd(!1)}u5t(){const t=globalThis.aj;this.sBt.fd(!0);for(const s of this.sBt)s instanceof t?s.Sj():s.l_t();this.sBt.fd(!1)}c5t(){const t=globalThis.aj;this.iBt.fd(!0);for(const s of this.iBt)s instanceof t?s.C4():s.nTt();this.iBt.fd(!1)}*f5t(){const s=globalThis.aj;this.tBt.fd(!0);for(const i of this.tBt){let t;t=i instanceof s?i.G4():i.EZ(),j.Vo(t)&&(yield*t)}this.tBt.fd(!1)}*d5t(){const s=globalThis.aj;this.sBt.fd(!0);for(const i of this.sBt){let t;t=i instanceof s?i.Sj():i.l_t(),j.Vo(t)&&(yield*t)}this.sBt.fd(!1)}*p5t(){const s=globalThis.aj;this.iBt.fd(!0);for(const i of this.iBt){let t;t=i instanceof s?i.C4():i.nTt(),j.Vo(t)&&(yield*t)}this.iBt.fd(!1)}async EZ(a,t,s){this.dLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.nO(),f=this.Dk();if(this.cLt&&(!this.PD()||t||l)){let t=performance.now(),s=(this.fLt=!0,this.m5t(a||0),this.DLt++,this.g5t(),this.y5t()),i=(this.nbt()&&await s,this.DGt.Zf(this.KLt.pretick)),e=(i instanceof Promise&&await i,this.w5t()),n=(this.nbt()&&await e,this.S5t()&&await this.v5t(),c.lO()&&await this.b5t(),this.M5t()),r=(this.nbt()&&await n,c.sO()),h=r.w$(),o=!1;if(-1!==h&&(r.S$(),f.y$()!==h)){const d=this.Dk().N$(h);this.qF()&&(o=!0,await d)}this.ff("canvas","update-html-layer-dom-state",{layersDomState:r.Yz().filter(t=>t.zB()).map(t=>t.tJ())}),u&&this.CR(),o&&this.ff("canvas","cleanup-html-layers"),this.EDt()&&(await this.DBt(),this.FD()>=this.ABt())?this.kBt():(this.PD()||l||this.t5t(),this.lLt++,this.uLt++,this.fLt=!1,this.kLt+=performance.now()-t)}}async y5t(){const t=this.$ft,s=this.kX();this.qL(),t.HL(!0),this.d1t(this.sO()),s&&H.StartMeasuringTime(),this.nbt()?await t.J1t():t.V1t(),s&&H.AddEventsTime(),this.p1t(),t.HL(!1),this.qL(),t.HL(!0)}async w5t(){const t=this.kX(),s=this.nbt(),i=this.DGt,e=this.KLt,n=this.QLt;t&&H.StartMeasuringTime(),s?await this.x5t(this.f5t()):this.l5t(),s?await this.x5t(this.d5t()):this.u5t(),t&&H.AddBehaviorTickTime(),t&&H.StartMeasuringTime(),s?await this.T5t(e.tick):i.dispatchEvent(e.tick),t&&H.AddPluginTickTime(),this.$ft.HL(!1),this.OX(n.tick)}async M5t(){const t=this.$ft,s=this.DGt,i=this.KLt,e=this.kX(),n=this.nbt();e&&H.StartMeasuringTime(),n?await t.m1t(this.bq):t.f1t(this.bq),e&&H.AddEventsTime(),this.Gkt.tRt(),this.g5t(),this.pLt=!1,t.HL(!0),e&&H.StartMeasuringTime(),n?await this.x5t(this.p5t()):this.c5t(),e&&H.AddBehaviorTickTime(),e&&H.StartMeasuringTime(),n?await this.T5t(i.tick2):s.dispatchEvent(i.tick2),e&&H.AddPluginTickTime(),t.HL(!1),n&&await t.G1t()}g5t(){if(0!==this.Jkt.size){const t=this.DGt;t.Of(!0);for(const s of this.qkt)s.O1t().Tft(this.Jkt);this.qkt.clear(),this.$ft.$1t(this.Jkt);for(const i of this.Jkt)i.ur();this.Jkt.clear(),t.Of(!1)}}async b5t(){let t=this.nO(),s=0;for(;t.lO()&&s++<10;)await this._5t(t.eY())}m5t(t){let s=0;if(this.EDt())s=1/this.RBt(),this.MLt=s,this.xLt=s;else if(0!==this.bLt){const i=Math.max(t-this.bLt,0);.5<(s=i/1e3)&&(s=0),this.MLt=s,this.xLt=j.gr(s,this.GLt,this._Lt)}this.bLt=t,this.TLt=this.xLt*this.ECt,this.ILt.uc(this.TLt),this.CLt.uc(s*this.ECt),this.PLt.uc(this.xLt);for(const[e,n]of this.ELt)n.uc(this.xLt*e.kD());this.Ykt&&this.Ykt.dOt(),1e3<=t-this.RLt&&(this.RLt+=1e3,1e3<=t-this.RLt&&(this.RLt=t),this.FLt=this.ALt,this.ALt=0,this.OLt=this.DLt,this.DLt=0,this.LLt=Math.min(this.kLt/1e3,1),this.kLt=0,this.Ykt&&this.Ykt.fOt(),this.Gkt.Y3t(),this.kX())&&H.Update1sPerfStats()}WCt(t,s){if(s){if(!this.ELt.has(t)){const i=j.lr(j.x0);i.C0(this.ILt),this.ELt.set(t,i)}}else this.ELt.delete(t)}VCt(t){const s=this.ELt.get(t);return s?s.ei():this.FD()}async _5t(t){const s=this.DGt,i=this.nO(),e=i.sO();await e.pX(),e.F$(t,this.Jv()),e===t&&this.$ft.yX(),this.Gkt.tRt(),this.g5t(),s.dispatchEvent(this.KLt.beforelayoutchange),j.Lf.t0(!0),await t._$(e,this.Jv()),j.Lf.t0(!1),await t.O$(!1),s.dispatchEvent(this.KLt.layoutchange),this.EO(),this.pLt=!0,this.qL(),this.OBt()}EO(){this.tLt=!0}iOt(){return this.Ykt?this.Ykt.iOt():null}eOt(){return this.Ykt?this.Ykt.eOt():null}Jv(){return this.Ykt?this.Ykt.Jv():null}CR(){const i=this.Ykt;if(i&&!i.tOt()){const e=this.Jv(),t=e.OA(),n=t&&e.yv(),r=t&&e.Rw();if(n&&e.bA(),this.tLt||this.EDt()){const h=this.bq.sO(),o=(this.ALt++,e.dA(),this.kX());o&&H.StartMeasuringTime(),this.tLt=!1;let t=null,s=(n&&(t=i.gOt().lP(),e.DA(t)),null);r&&(s=e.StartFrameTiming(2*(1+h.c$())),e.StartMeasuringRenderPassTime(0,1)),this.E9()&&"low"===i.DJ()?e.GE(i.TJ(),i._J()):e.IE(),this.G5t(this.Jv(),h),t&&e.kA(t),r&&(e.StopMeasuringRenderPassTime(),this.Ykt.yOt(s)),e.av(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),i&&i.SOt()}else e.cv()}}IX(t){return"low"===this.Dk().DJ()||t.yv()&&(this.FJ()||this.E9())}G5t(s,i){s.Ww(),s.UE(),s.kE(1,1,1,1),s._A(null),s.WE(null),s.mA(this.E9()),this.IX(s)&&i._X(s);const e=i.y$();for(let t=1;t<e;++t)i.AX(s,t),s.Rw()&&s.Restart();this.IX(s)||i._X(s),i.EX(s)}y4(t,s,i){if(!this.cLt)return!1;let e=!this.fLt&&!this.$ft.E1t(),n=0;e&&(n=performance.now());const r=this.kX(),h=(r&&this.jj(!1),this.$ft.S1t(this.bq,t,s,i));if(e){const o=performance.now()-n;this.kLt+=o,r&&H.AddTriggersTime(o)}return r&&this.jj(!0),h}Jxt(t,s,i){if(!this.nbt())return this.y4(t,s,i);if(this._1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.fLt||this.$ft.E1t())return this.$ft.M1t(this.bq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async S4(t,s,i){if(!this.nbt())return this.y4(t,s,i);if(!this.cLt)return!1;if(this._1t())return this.$ft.x1t(t,s,i);if(!this.sO())return this.$ft.v1t(t,s,i);let e=performance.now(),n=this.$ft.M1t(this.bq,t,s,i),r=n.next();for(;!r.done;)await this.y1t(r.value),r=n.next();return this.PD()||this.$ft.E1t()||(await this.$ft.G1t(),this.dLt&&!this.fLt&&this.t5t()),this.kLt+=performance.now()-e,r.value}qxt(t,s,i){const e=this.kX(),n=(e&&this.jj(!1),this.$ft.I1t(this.bq,t,s,i));return e&&this.jj(!0),n}$xt(t,s,i){return this.$ft.C1t(this.bq,t,s,i)}Xxt(t){return this.wLt.uc(t)}d1t(t){this.Bkt.push(t)}p1t(){if(!this.Bkt.length)throw new Error("layout stack empty");this.Bkt.pop()}bO(){return this.Bkt.length?this.Bkt.at(-1):this.sO()}ED(t){return t&&-1!==t.kD()?this.xLt*t.kD():this.TLt}CZ(){return this.TLt}PZ(){return this.xLt}RD(){return this.MLt}kD(){return this.ECt}LD(t){(isNaN(t)||t<0)&&(t=0),this.ECt=t}YD(t){this.GLt=Math.max(t,0)}XD(){return this.GLt}QD(t){this._Lt=Math.max(t,0)}KD(){return this._Lt}BD(){return this.FLt}WD(){return this.OLt}jD(){return this.LLt}I5t(){return this.vLt}FD(){return this.ILt.ei()}C5t(){return this.CLt.ei()}OD(){return this.PLt.ei()}_tt(){return this.lLt}P5t(){return this.uLt}E5t(){return this.Hkt}HF(){return this.lkt}zF(){return this.ukt}A5t(){return this.ckt}R5t(){return this.fkt}wO(t){if(this.BLt)throw new Error("cannot call while loading state - wait until afterload event");return this.zkt.get(t)||null}hX(){this.zkt.clear();for(const t of this.Rkt)if(!t.jz())for(const s of t.kL())this.zkt.set(s.U5(),s)}NOt(){return"preview"===this.YOt}kX(){return this.ikt}Ek(){return this.YOt}Ak(){return"nwjs"===this.Ek()||this.ZOt}VOt(){return"cordova"===this.YOt}F5t(){return"Android"===j.li.ci&&("cordova"===this.YOt||"playable-ad-single-file"===this.YOt||"playable-ad-zip"===this.YOt||"instant-games"===this.YOt)}BBt(){return this.hH}D5t(){return this.KOt}Rk(){return this.QOt}O5t(){return this.tkt}NF(){return this.Gkt}I_t(){return this._kt.I_t()}C_t(){return this._kt.C_t()}E9(){return this.Zkt}k5t(){return this.Jv().bw(this.b9())}yw(t){return this.Jv().yw(t||this.b9())}L5t(){return this.pLt}B5t(t){this.Qkt!==(t=!!t)&&(this.Qkt=t,this.nO().rY(),this.EO())}tD(){return this.Qkt}N5t(t){if(!this.Akt.has(t)){const i=()=>this.W5t(t);this.Akt.set(t,i),t.jf().addEventListener("animationframeimagechange",i)}const s=this.Fg.Ig(t);return s.jg()||s.Ug().then(()=>this.EO()),s}W5t(t){this.Fg.Ag(t)}Pkt(t){const s=[];for(const i of t.UIt())for(const e of i.q6()){const n=e.tW();s.push({source:e,width:n.um(),height:n.xm(),tag:e.SW()})}return{Wg:s}}async Ekt(t){const s=j.lr(j.md),i=[],n=new Map;for(const h of t.UIt())for(const o of h.q6()){const a=o.tW().X_t();n.has(a)||(n.set(a,null),i.push(s.uc(async()=>{const t=await a.FU();n.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.UIt())for(const u of l.q6())e.push(s.uc(async()=>{const t=u.tW(),s=n.get(t.X_t()),i=await t.Y_t(s),e=await createImageBitmap(i);return{Jg:e}}));const r=await Promise.all(e);for(const c of n.values())c instanceof ImageBitmap&&c.close&&c.close();return{Wg:r}}V5t(t){this.NLt=t,this.WLt=!1}j5t(){this.NLt="",this.WLt=!0}H5t(t){this.VLt=t}Zbt(t){this.R4=t}U5t(){return this.jLt}S5t(){return!!(this.NLt||this.WLt||this.VLt||null!==this.R4)}async v5t(){if(this.NLt&&(this.qL(),await this.z5t(this.NLt),this.J5t()),this.VLt&&(await this.q5t(this.VLt),this.J5t(),this.kX())&&H.StepIfPausedInDebugger(),this.WLt){const t=await this.$5t();this.jLt=t,await this.S4(j.nX.eX.iX.X5t,null),this.jLt="",this.J5t()}if(null!==this.R4){this.qL();try{await this.Y5t(this.R4),this.jLt=this.R4,await this.S4(j.nX.eX.iX.Z5t,null),this.jLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.S4(j.nX.eX.iX.K5t,null)}this.J5t()}}J5t(){this.NLt="",this.WLt=!1,this.VLt="",this.R4=null}qk(){return this.HLt||(this.HLt=localforage.Li({name:"c3-localstorage-"+this.A5t(),description:this.HF()})),this.HLt}Q5t(){return this.ULt||(this.ULt=localforage.Li({name:"c3-savegames-"+this.A5t(),description:this.HF()})),this.ULt}async z5t(t){const s=await this.$5t();try{await this.Q5t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.jLt=s,await this.S4(j.nX.eX.iX.X5t,null),this.jLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.S4(j.nX.eX.iX.t4t,null)}}async q5t(t){try{const s=await this.Q5t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.Y5t(s),this.jLt=s,await this.S4(j.nX.eX.iX.Z5t,null),this.jLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.S4(j.nX.eX.iX.K5t,null)}}async $5t(){const t={c3save:!0,version:1,rt:{time:this.FD(),timeRaw:this.C5t(),walltime:this.OD(),timescale:this.kD(),tickcount:this._tt(),next_uid:this.Ukt,running_layout:this.sO().Zz(),start_time_offset:Date.now()-this.vLt},types:{},layouts:{},events:this.$ft.mq(),timelines:this.wQ.mq(),user_script_data:null};for(const i of this.Rkt)i.jz()||i.fCt()||(t.types[i.Zz().toString()]=i.mq());for(const e of this.bq.oO())t.layouts[e.Zz().toString()]=e.mq();const s=this.s4t("save");return s.saveData=null,await this.Q$(s),t.user_script_data=s.saveData,JSON.stringify(t)}$$(){return this.BLt}async Y5t(t){const s=this.nO(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.Kbt(),this.DGt.dispatchEvent(j.lr(j.Event,"beforeload"));for(const a of this.XBt()){const l=a.E5();l.fCt()||a.RY()}let e=i.rt,n=(this.ILt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.CLt.Set(e.timeRaw),this.PLt.Set(e.walltime),this.ECt=e.timescale,this.lLt=e.tickcount,this.vLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.BLt=!0);if(n!==this.sO().Zz()){const u=s.ZX(n);if(!u)return;await this._5t(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.ZX(d);p&&p.gq(f)}const h=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.Ej(y);!w||w.jz()||w.fCt()||w.gq(g,h)}for(const S of this.bq.oO())for(const v of S.fB())v.yq();if(this.qL(),this.hX(),this.BLt=!1,r){for(const b of this.XBt())b.X$();for(const[M,x]of Object.entries(i.types)){const T=parseInt(M,10),_=this.Ej(T);!_||_.jz()||_.fCt()||_.mCt(x)}}this.Ukt=e.next_uid,this.$ft.gq(i.events);for(const G of this.Rkt)if(!G.jz()&&G.j5())for(const I of G.kL()){const C=I.aX();for(const P of G.x$().lX())if(P!==G){const E=P.kL();if(C<0||C>=E.length)throw new Error("missing sibling instance");I.uX(E[C])}}this.wQ.gq(i.timelines),s.nY(),s.rY();for(const A of h)A.vPt();this.Qbt(),this.DGt.dispatchEvent(j.lr(j.Event,"afterload")),this.OX(this.s4t("afterload"));for(const[R,F]of Object.entries(i.types)){const D=parseInt(R,10),O=this.Ej(D);O&&O.pCt()}const o=this.s4t("load");o.saveData=i.user_script_data,await this.Q$(o),this.EO()}i4t(t,s){return t.xO().MAt()-s.xO().MAt()}a3t(t,s){t.xO()&&!this.pBt.has(t)&&(this.pBt.set(t,s),this.mBt.push(t))}Kbt(){this.pBt=new WeakMap,j.Bh(this.mBt)}Qbt(t="full",s=null){this.mBt.sort(this.i4t);for(const i of this.mBt)i.DY(this.pBt.get(i),t,s);for(const e of this.mBt)e._Pt(this.pBt.get(e),t,s);this.Kbt()}async WBt(t){const s=await Promise.all(t.map(async t=>{const s=this.VOt()&&this.yU.NH();if(s||"playable-ad-single-file"===this.Ek()){const i=await this.yU.To(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.eBt.e4t(s)}n4t(t,s){this.eBt.r4t(t,s)}NBt(t,s){this.eBt.h4t(t,s)}VBt(t,s,i,e){return this.eBt.VBt(t,s,i,null,null,e)}o4t(t,s,i,e){return this.eBt.o4t(t,s,i,e)}a4t(){return this.eBt.l4t()}gO(t,s){this.ff("runtime","invoke-download",{url:t,filename:s})}async COt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.qF()){const h=await this.RO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?self.createImageBitmap(o,r):o}}async u4t(t){return this.qF()?this.RO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}c4t(){this.$Lt||(this.$Lt=!0,this.ff("runtime","enable-device-orientation"))}f4t(){this.XLt||(this.XLt=!0,this.ff("runtime","enable-device-motion"))}tO(){return this.SLt()}d4t(t){this.SLt=t}oBt(){const t=this.Jv();return{fps:this.BD(),tps:this.WD(),cpu:this.jD(),gpu:this.UD(),layout:this.sO()?this.sO().Kc():"",renderer:t.yv()?t.UA():t.GetAdapterInfoString()}}_1t(){return!!this.kX()&&H._1t()}y1t(t){return this.nbt()?H.y1t(t):Promise.resolve()}Qgt(){return!!this.nbt()&&H.BreakNext()}p4t(t){this.ekt=!!t,this.m4t()}g4t(){return this.ekt}nbt(){return this.nkt}jj(t){t?this.rkt--:this.rkt++,this.m4t()}m4t(){this.nkt=this.kX()&&this.ekt&&0===this.rkt}ymt(){return this.kX()&&H.ymt()}PJ(){return this.kX()&&this.Jv().OA()&&H.PJ()}async x5t(t){if(t)for(const s of t)await this.y1t(s)}T5t(t){return this.x5t(this.DGt.Qf(t))}Sdt(t){return this.$ft.Sdt(t.name,t.params)}DO(t){if(this.qF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Kk(){return this.cBt}s4t(t){const s=j.lr(j.Event,t,!1);return s.runtime=this.cBt,s}GBt(){this.cBt=new self.FF(this),this.QLt={tick:this.s4t("tick")}}PBt(){const t={};for(const s of this.Rkt)t[s.Jdt()]={value:s.SL(),enumerable:!0,writable:!1};this.cBt.hD(t)}EBt(){const t={};for(const s of this.lD().t1t())t[s.Jdt()]=s.qdt();this.cBt.oD(t)}cO(){return this.dBt}GL(t,s){this.fBt.set(t,s)}mB(t){return this.fBt.get(t)}Mk(t){if(!(t instanceof self.xL))throw new TypeError("expected IObjectClass");const s=this.mB(t);if(s&&s instanceof j.Hlt)return s;throw new Error("invalid IObjectClass")}FL(t){if(!(t instanceof self.C5))throw new TypeError("expected IInstance");const s=this.mB(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}MO(t){if(!(t instanceof self.c6))throw new TypeError("expected IWorldInstance");const s=this.mB(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=j.jOt.gx,self.C3_InitRuntime=(t,s)=>t.FCt(s)}{const Oa=self.Bs;Oa.nBt=class extends Oa.rr{constructor(t,s){super(),this.lf=t,this.y4t=new Map,this.w4t=0,this.S4t=s.inputPort,s.outputPort.onmessage=t=>this.v4t(t),this.b4t=s.maxNumWorkers,this.M4t=1,this.x4t=!1,this.T4t=!1}async FCt(){}l4t(){return this.b4t}e4t(t){this.S4t.postMessage({type:"_import_scripts",scripts:t})}r4t(t,s){this.S4t.postMessage({type:"_send_blob",blob:t,id:s})}h4t(t,s){this.S4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}VBt(t,s,i,e,n,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.w4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.y4t.set(h,{resolve:t,progress:e,reject:s,_4t:!1,maxWorkerNum:r})});return n&&n.S0(()=>this.G4t(h)),this.S4t.postMessage(o,i),this.I4t(),a}o4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n=this.w4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:n,params:s,transferables:i};this.S4t.postMessage(r,i)}G4t(t){const s=this.y4t.get(t);s&&(s._4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.S4t.postMessage({type:"_cancel",jobId:t}))}v4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.C4t(e,s.result);break;case"progress":this.P4t(e,s.progress);break;case"error":this.E4t(e,s.error);break;case"ready":this.A4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}C4t(t,s){const i=this.y4t.get(t);if(!i)throw new Error("invalid job ID");i._4t||i.resolve(s),this.y4t.delete(t)}P4t(t,s){const i=this.y4t.get(t);if(!i)throw new Error("invalid job ID");!i._4t&&i.progress&&i.progress(s)}E4t(t,s){const i=this.y4t.get(t);if(!i)throw new Error("invalid job ID");i._4t||i.reject(s),this.y4t.delete(t)}A4t(){this.x4t&&(this.x4t=!1,this.M4t++,this.M4t<this.b4t?this.I4t():this.S4t.postMessage({type:"_no_more_workers"}))}R4t(){let t=0,s=[...this.y4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async I4t(){if(!(this.M4t>=this.b4t||this.x4t||this.T4t||this.R4t()<=this.M4t))try{this.x4t=!0;const t=await this.lf.RO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.v4t(t)}catch(t){this.T4t=!0,this.x4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.M4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.skymen_BetterOutline={CDt:"uniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nfor (int j=0; j<PASSES; j++) {\nif (j >= passes ) break;\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i=0; i<SAMPLES; i++ ){\nif (i >= int(samples)) break;\nangle += 1.0/(clamp(samples, 0.0, float(SAMPLES))/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture2D( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = mix( vec4(0.0), color, outlineAlpha );\nmediump vec4 tex0 = texture2D( samplerFront, vTex );\ngl_FragColor = mix(fragColor, tex0, tex0.a);\n}",IDt:"#version 300 es\nin mediump vec2 vTex;\nout lowp vec4 outColor;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform highmedp float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nint sampleCount = int(clamp(samples, 0.0, float(SAMPLES)));\nfor (int j = 0; j <= passes; j++) {\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i = 0; i < sampleCount; i++ ) {\nangle += 1.0/(float(sampleCount)/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = mix( vec4(0.0), color, outlineAlpha );\nmediump vec4 tex0 = texture( samplerFront, vTex );\noutColor = mix(fragColor, tex0, tex0.a);\n}",_Dt:"%%FRAGMENTINPUT_STRUCT%%\n/* input struct contains the following fields:\nfragUV : vec2<f32>\nfragPos : vec4<f32>\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n*/\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\noutlinecolor : vec3<f32>,\nwidth : f32,\nprecisionStep : f32,\nsamples : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n/* c3Params struct contains the following fields:\nsrcStart : vec2<f32>,\nsrcEnd : vec2<f32>,\nsrcOriginStart : vec2<f32>,\nsrcOriginEnd : vec2<f32>,\nlayoutStart : vec2<f32>,\nlayoutEnd : vec2<f32>,\ndestStart : vec2<f32>,\ndestEnd : vec2<f32>,\ndevicePixelRatio : f32,\nlayerScale : f32,\nlayerAngle : f32,\nseconds : f32,\nzNear : f32,\nzFar : f32,\nisSrcTexRotated : u32\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_linearizeDepth(depthSample : f32) -> f32\n*/\n/*\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_grayscale(rgb : vec3<f32>) -> f32\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n*/\nconst PI:f32 = 3.14159265359;\nconst SAMPLES:i32 = 96;\nconst PASSES:i32 = 64;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar outlineAlpha: f32 = 0.0;\nvar actualWidth: vec2<f32>;\nvar widthCopy: f32 = shaderParams.width;\nvar color: vec4<f32> = vec4<f32>(shaderParams.outlinecolor.x, shaderParams.outlinecolor.y, shaderParams.outlinecolor.z, 1.0);\nvar angle: f32;\nlet layoutSize: vec2<f32> = abs(vec2<f32>(c3Params.layoutEnd.x - c3Params.layoutStart.x, c3Params.layoutEnd.y - c3Params.layoutStart.y));\nlet texelSize: vec2<f32> = abs(c3Params.srcOriginEnd - c3Params.srcOriginStart) / layoutSize;\nvar fragColor: vec4<f32>;\nvar testPoint: vec2<f32>;\nvar sampledAlpha: f32;\nlet passes: u32 = u32(clamp(shaderParams.width / shaderParams.precisionStep, 1.0, f32(SAMPLES)));\nlet sampleCount: u32 = u32(clamp(shaderParams.samples, 0.0, f32(SAMPLES)));\nfor (var j: u32 = 0u; j <= passes; j = j + 1u) {\nwidthCopy = mix(0.0, shaderParams.width, f32(j) / f32(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor (var i: u32 = 0u; i < sampleCount; i = i + 1u) {\nangle = angle + 1.0 / (f32(sampleCount) / 2.0) * PI;\ntestPoint = input.fragUV + actualWidth * vec2<f32>(cos(angle), sin(angle));\nsampledAlpha = textureSample(textureFront, samplerFront, testPoint).a; // Assuming 'samplerFrontSampler' is the sampler associated with 'samplerFront'\noutlineAlpha = max(outlineAlpha, sampledAlpha);\n}\n}\nfragColor = mix( vec4(0.0), color, outlineAlpha );\nvar tex0 : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV );\nvar output : FragmentOutput;\noutput.color = mix(fragColor, tex0, tex0.a);\nreturn output;\n}",Vv:!1,Hv:!1,Iv:50,Pv:50,Av:!0,Fv:!0,Ov:!1,Lv:!1,Nv:!1,parameters:[["outlinecolor",0,"color"],["width",0,"float"],["precisionStep",0,"float"],["samples",0,"float"]]};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const n=""+i,r=""+e;return n<r?-1:r<n?1:0}},v=(S,self.Bs),i=null,e="",n="",r=[],h="",o="",a="",b=v.lr(v.U0t);v.nX.eX=class extends v.YMt{constructor(t){super(t),this.N0t=this.lf.lD().Wj(),this._ft=this.lf.lD().MD(),this.F4t=0,this.D4t=0,this.O4t=new Map}ur(){super.ur()}EO(){this.lf.EO()}y4(t){this.lf.y4(t,null,null)}k4t(t,s){return i&&t===e&&s===n||(i=new RegExp(t,s),e=t,n=s),i.lastIndex=0,i}L4t(t,s,i){if(t!==h||s!==o||i!==a){const e=this.k4t(s,i);r=t.match(e),h=t,o=s,a=i}return r}async B4t(t,s){if(s.length){this.F4t+=s.length;const i=[];for(const e of s)i.push(t.I$(e));await v.ho(i,()=>{this.D4t++}),this.D4t++,this.D4t===this.F4t&&(this.D4t=0,this.F4t=0,this.lf.y4(v.nX.eX.iX.N4t,null,null))}}W4t(t,s){for(const i of s)0===i.NL()&&t.A$(i)}V4t(){return b}j4t(s){const i=this.lf.lD(),t=i.MD(),e=t.Bj(),n=e.mD(),r=n.Lj(),h=e._0t(),o=t.Nj(n),a=i.Wj(),l=a.Nj();if(l.j0t(s),h)for(let t=0;t<s&&!l.Xj();++t)i.Uj(r),l.qj(t),n.zj(e,o),i.Jj(r);else for(let t=0;t<s&&!l.Xj();++t)l.qj(t),n.zj(e,o);return t.Yj(),a.Yj(),!1}*H4t(s){const i=this.lf.lD(),t=i.MD(),e=t.Bj(),n=e.mD(),r=n.Lj(),h=e._0t(),o=t.Nj(n),a=i.Wj(),l=a.Nj();if(l.j0t(s),h)for(let t=0;t<s&&!l.Xj();++t)i.Uj(r),l.qj(t),yield*n.uyt(e,o),i.Jj(r);else for(let t=0;t<s&&!l.Xj();++t)l.qj(t),yield*n.uyt(e,o);return t.Yj(),a.Yj(),!1}U4t(){const s=this.lf.lD(),t=s.MD(),i=t.Bj(),e=i.mD(),n=e.Lj(),r=i._0t(),h=t.Nj(e),o=s.Wj(),a=o.Nj();if(r)for(let t=0;!a.Xj();++t)s.Uj(n),a.qj(t),e.zj(i,h)||a.MW(),s.Jj(n);else for(let t=0;!a.Xj();++t)a.qj(t),e.zj(i,h)||a.MW();return t.Yj(),o.Yj(),!1}*z4t(){const s=this.lf.lD(),t=s.MD(),i=t.Bj(),e=i.mD(),n=e.Lj(),r=i._0t(),h=t.Nj(e),o=s.Wj(),a=o.Nj();if(r)for(let t=0;!a.Xj();++t){s.Uj(n),a.qj(t);const l=yield*e.uyt(i,h);l||a.MW(),s.Jj(n)}else for(let t=0;!a.Xj();++t){a.qj(t);const u=yield*e.uyt(i,h);u||a.MW()}return t.Yj(),o.Yj(),!1}J4t(t,s,i){const e=this.lf.lD(),n=e.MD(),r=n.Bj(),h=r.mD(),o=h.Lj(),a=r._0t(),l=n.Nj(h),u=e.Wj(),c=u.Nj();if(c.Vj(t),c.j0t(i),i<s)if(a)for(let t=s;t>=i&&!c.Xj();--t)e.Uj(o),c.qj(t),h.zj(r,l),e.Jj(o);else for(let t=s;t>=i&&!c.Xj();--t)c.qj(t),h.zj(r,l);else if(a)for(let t=s;t<=i&&!c.Xj();++t)e.Uj(o),c.qj(t),h.zj(r,l),e.Jj(o);else for(let t=s;t<=i&&!c.Xj();++t)c.qj(t),h.zj(r,l);return n.Yj(),u.Yj(),!1}*q4t(t,s,i){const e=this.lf.lD(),n=e.MD(),r=n.Bj(),h=r.mD(),o=h.Lj(),a=r._0t(),l=n.Nj(h),u=e.Wj(),c=u.Nj();if(c.Vj(t),c.j0t(i),i<s)if(a)for(let t=s;t>=i&&!c.Xj();--t)e.Uj(o),c.qj(t),yield*h.uyt(r,l),e.Jj(o);else for(let t=s;t>=i&&!c.Xj();--t)c.qj(t),yield*h.uyt(r,l);else if(a)for(let t=s;t<=i&&!c.Xj();++t)e.Uj(o),c.qj(t),yield*h.uyt(r,l),e.Jj(o);else for(let t=s;t<=i&&!c.Xj();++t)c.qj(t),yield*h.uyt(r,l);return n.Yj(),u.Yj(),!1}$4t(i){const t=i.LL(),s=t.kL();if(0!==s.length){const e=this.lf.lD(),n=e.MD(),r=n.Bj(),h=r.mD(),o=h.Lj(),a=r._0t(),l=n.Nj(h),u=e.Wj(),c=u.Nj(),f=i.j5(),d=b.Nj();if(v.jh(d,s),c.j0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.Xj();++t){e.Uj(o);const p=d[t];i.LL().Nft(p),f&&p.xmt(),c.qj(t),h.zj(r,l),e.Jj(o)}else{t.kft(!1);const m=t.Lft();v.Bh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.Xj();++t){const g=d[t];m[0]=g,f&&g.xmt(),c.qj(t),h.zj(r,l)}}n.Yj(),u.Yj(),v.Bh(d),b.Yj()}return!1}*X4t(i){const t=i.LL(),s=t.kL();if(0!==s.length){const e=this.lf.lD(),n=e.MD(),r=n.Bj(),h=r.mD(),o=h.Lj(),a=r._0t(),l=n.Nj(h),u=e.Wj(),c=u.Nj(),f=i.j5(),d=b.Nj();if(v.jh(d,s),c.j0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.Xj();++t){e.Uj(o);const p=d[t];i.LL().Nft(p),f&&p.xmt(),c.qj(t),yield*h.uyt(r,l),e.Jj(o)}else{t.kft(!1);const m=t.Lft();v.Bh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.Xj();++t){const g=d[t];m[0]=g,f&&g.xmt(),c.qj(t),yield*h.uyt(r,l)}}n.Yj(),u.Yj(),v.Bh(d),b.Yj()}return!1}Y4t(i,t){const s=i.LL(),e=s.kL();if(0!==e.length){const n=this.lf.lD(),r=n.MD(),h=n.Ldt(),o=r.Bj(),a=o.mD(),l=a.Lj(),u=o._0t(),c=r.Nj(a),f=n.Wj(),d=f.Nj(),p=i.j5(),m=b.Nj();v.Bh(m),d.j0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h._vt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.Xj();++t){n.Uj(l);const g=m[t][0];i.LL().Nft(g),p&&g.xmt(),d.qj(t),a.zj(o,c),n.Jj(l)}else{s.kft(!1);const y=s.Lft();v.Bh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.Xj();++t){const w=m[t][0];y[0]=w,p&&w.xmt(),d.qj(t),a.zj(o,c)}}r.Yj(),f.Yj(),v.Bh(m),b.Yj()}return!1}*Z4t(i,t){const s=i.LL(),e=s.kL();if(0!==e.length){const n=this.lf.lD(),r=n.MD(),h=n.Ldt(),o=r.Bj(),a=o.mD(),l=a.Lj(),u=o._0t(),c=r.Nj(a),f=n.Wj(),d=f.Nj(),p=i.j5(),m=b.Nj();v.Bh(m),d.j0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h._vt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.Xj();++t){n.Uj(l);const g=m[t][0];i.LL().Nft(g),p&&g.xmt(),d.qj(t),yield*a.uyt(o,c),n.Jj(l)}else{s.kft(!1);const y=s.Lft();v.Bh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.Xj();++t){const w=m[t][0];y[0]=w,p&&w.xmt(),d.qj(t),yield*a.uyt(o,c)}}r.Yj(),f.Yj(),v.Bh(m),b.Yj()}return!1}K4t(t,s){let i=this.O4t.get(t);if(!i){if(!s)return null;i={Q4t:null,tNt:new Map},this.O4t.set(t,i)}return i}sNt(t,s,i,e,n){s.dD().Gyt(i,s.wD()),e&&t.Jj(n)}*iNt(t,s,i,e,n){yield*s.dD().Iyt(i,s.wD()),e&&t.Jj(n)}}}{const ka=self.Bs;ka.nX.eX.fIt=class extends ka.rr{constructor(t){super(),this.yft=t,this.lf=t.UO(),this.kxt=t._L()}vxt(){}ur(){this.yft=null,this.lf=null,this.kxt=null}}}{const La=self.Bs;La.nX.eX.Instance=class extends La.rr{constructor(t,s){super(),this._i=t,this.yft=this._i.E5(),this.jxt=this.yft.i2t(),this.lf=this._i.UO()}ur(){this._i=null,this.yft=null,this.jxt=null,this.lf=null}}}{const _=self.Bs,Ba=[];_.nX.eX.iX={eNt(){return!0},sX(){return!0},mX(){return!0},o5t(){return!0},a5t(){return!0},PD(){return this.lf.PD()},ogt(){const t=this.lf.kdt();return!t.v0t()&&!t.w0t()},nNt(){let t=this.lf.Ldt(),s=t.fvt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.lf._tt();return s.set("TriggerOnce_lastTick",e),this.lf.L5t()||i!==e-1},rNt(t){const s=this.lf.Ldt(),i=s.fvt(),e=i.get("Every_lastTime")||0,n=this.lf.FD(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=n?(i.set("Every_lastTime",e+r),n>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",n),i.set("Every_seconds",t),!0):(n<e-.1&&i.set("Every_lastTime",n),!1)},xpt(t){const s=this.lf.lD().n1t(t);return s&&s.xpt()},NOt(){return this.lf.NOt()},vi(){return _.li.vi},HBt(){return!0},hNt(){return!0},oNt(){return!0},X5t(){return!0},t4t(){return!0},Z5t(){return!0},K5t(){return!0},aNt(t){return!!this.lf.wO(t)},lNt(t){switch(t){case 0:return"browser"===_.li.wi;case 1:return"iOS"===_.li.ci;case 2:return"Android"===_.li.ci;case 8:return"cordova"===_.li.wi;case 9:return"scirra-arcade"===this.lf.Ek();case 10:return"nwjs"===_.li.wi;case 13:return"windows-uwp"===this.lf.Ek();default:return!1}},uNt(t,s,i){const e=this.k4t(s,i);return e.test(t)},cNt(t,s,i){return _.compare(t,s,i)},fNt(t,s,i){return s<=t&&t<=i},dNt(t,s,i){return _.compare(t.vet(),s,i)},pNt(t){return!!t.vet()},mNt(t,s){const i=this.lf.FD();if(0!==t)return _.compare(i,t,s);{const e=this.lf.Ldt(),n=e.fvt();return!n.get("CompareTime_executed")&&s<=i&&(n.set("CompareTime_executed",!0),!0)}},gNt(t){return isNaN(t)},SMt(t,s,i){return _._r(_.Sr(t),_.Sr(i))<=_.Sr(s)},vMt(t,s){return _.Ir(_.Sr(t),_.Sr(s))},R2t(t,s,i){let e=_.Sr(t),n=_.Sr(s),r=_.Sr(i),h=!_.Ir(r,n);return h?!(!_.Ir(e,n)&&_.Ir(e,r)):_.Ir(e,n)&&!_.Ir(e,r)},yNt(t,s){return"number"==typeof t?0===s:1===s},wNt(t){return!!t},spt(t){return t.toLowerCase()===this.lf.lD().rpt()},SNt(t,i,e,n){if(!t)return!1;let s=this.V4t(),r=s.Nj(),h=t.LL(),o=(_.jh(r,h.kL()),h.Pft()&&_.Bh(h.Bft()),this.lf.Ldt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o._vt(1,t),n=o._vt(3,t),_.compare(i,e,n)?++a:h.Oft(u)}_.Lh(r,a),h.Wft(r);const l=!!r.length;return _.Bh(r),s.Yj(),t.Syt(),l},vNt(t,s){if(!t)return!1;let i=this.V4t(),e=i.Nj(),n=t.LL(),r=(_.jh(e,n.kL()),n.Pft()&&_.Bh(n.Bft()),this.lf.Ldt()),h=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[h]=a,r._vt(1,t)?++h:n.Oft(a)}_.Lh(e,h),n.Wft(e);const o=!!e.length;return _.Bh(e),i.Yj(),t.Syt(),o},bNt(t,i,e){if(!t)return!1;const s=t.LL(),n=s.kL();if(0===n.length)return!1;let r=this.lf.Ldt(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t];e=r._vt(2,t),(null===h||0===i&&e<o||1===i&&e>o)&&(o=e,h=a)}return s.zft(h),t.Syt(),!0},MNt(t,s){if(!t)return!1;const i=t.LL(),e=i.kL();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.zft(n),t.Syt(),!0},xNt(t){if(!t)return!1;const s=t.LL(),i=s.kL(),e=Math.floor(this.lf.tO()*i.length);if(e>=i.length)return!1;const n=i[e];return s.zft(n),t.Syt(),!0},TNt(t){if(!t)return!1;if(!t.NL())return!1;const s=t.LL();return s.kft(!0),t.Syt(),!0},_Nt(t,i,e){if(!t)return!1;const n=t.LL(),s=n.kL(),r=this.lf.mD(),h=r.Jft(),o=this.lf.Ldt().ovt();n.Pft()?(_.jh(Ba,s),n.Cft(),n.kft(!1)):h?(_.jh(Ba,n.Bft()),_.Bh(n.Bft())):(_.jh(Ba,n.Lft()),_.Bh(n.Lft()));for(let t=0,s=Ba.length;t<s;++t){const a=Ba[t];_.xor(a.xO().bN(i,e),o)?n.Dft(a):n.Oft(a)}return t.Syt(),_.xor(!!n.Lft().length,o)},GNt(s){if(!s)return!1;let i=s.jz(),e=null,n=this.lf.iCt();for(let t=n.length-1;0<=t;--t){const r=n[t];if(i){if(r.E5().o2t(s)){e=r;break}}else if(r.E5()===s){e=r;break}}if(!e){const h=s.kL();h.length&&(e=h.at(-1))}if(!e)return!1;const t=s.LL();return t.zft(e),s.Syt(),!0},INt(t){return this.lf.nbt()?this.H4t(t):this.j4t(t)},CNt(){return this.lf.nbt()?this.z4t():this.U4t()},PNt(t,s,i){return this.lf.nbt()?this.q4t(t,s,i):this.J4t(t,s,i)},dd(t){return this.lf.nbt()?this.X4t(t):this.$4t(t)},ENt(t,s,i){return this.lf.nbt()?this.Z4t(t,i):this.Y4t(t,i)},ANt(t){return!!t&&t.VB()},RNt(t){return!!t&&t.$B()},FNt(t){return!!t&&t.zB()},DNt(t){return!!t&&!t.NL()},ONt(t,s,i){return!!t&&_.compare(100*t.OE(),s,i)},kNt(t){const s=this.lf.sO();return!!s&&s.f$(t)},N4t(){return!0},LNt(){return 0<this.F4t},BNt(t,s){const i=this.lf.lPt();return!!i&&!!s&&!!i.jlt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},g=function(t,s){return t[1]-s[1]};m,g;const Na=self.Bs,Wa=[],Va=[],ja=Na.lr(Na.Rect),Ha=Na.lr(Na.Ho),Ua=[];Na.nX.eX.$nt={NNt(t,s){t.int(s)},WNt(t,s){t.me()&&"number"!=typeof s&&(s=parseFloat(s)),t.int(t.vet()+s)},VNt(t,s){t.me()&&t.int(t.vet()-s)},jNt(t,s){t.int(!!s)},HNt(t){t.int(!t.vet())},UNt(t){t.int(t.Odt())},zNt(t){this.lf.lD().i1t(t)},JNt(t,s,i,e,n,r){if(t&&s){const h=this.lf.VL(t,s,i,e,n,r);if(h){n&&s.jL(h);const o=this.lf.lD(),a=(o.HL(!0),h.UL(),o.HL(!1),new Map);h.tPt(a,t,n);for(const[l,u]of a)l.LL().Vft(u)}}},qNt(t,s,i,e,n,r){if(t&&s){const h=this.lf.$Bt(t);h&&Na.nX.eX.$nt.JNt.call(this,h,s,i,e,n,r)}},Wz(n,r,h,o,a,t,l,u,c,f,d){if(n){let s=this.lf.bO(),i=s;if(t){const p=this.lf.nO().YX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.TO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.TO(u))){ja.set(r,h,o,a);const m=i.Wz(n,ja,e,t,c,f,d);n.LL().Wft(m),n.Syt()}}}},$Nt(){const t=this.N0t;t.O0t()&&t.F0t().MW()},Tpt(t,s){const i=this.lf.lD().n1t(t);i&&(0===s?i.Tpt(!1):1===s?i.Tpt(!0):i.Tpt(!i.xpt()))},XNt(t){this.lf.LD(t)},YNt(t,s){if(s<0&&(s=0),t){const i=t.LL(),e=i.kL();for(const n of e)n.LD(s)}},ZNt(t){if(t){const s=t.LL(),i=s.kL();for(const e of i)e.Y5()}},Rh(t){if(!(t<0))return this.lf.lD().B1t().HMt(t),!0},ID(t){return this.lf.lD().B1t().UMt(t),!0},KNt(){const t=this.lf.lD();return t.B1t().zMt(t.tpt()),!0},_D(t){this.lf.lD()._D(t)},async wOt(t,s,i,e,n,r){const h=this.lf.Dk();h&&(this.EO(),await h.wOt(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.lf.S4(Na.nX.eX.iX.hNt,null))},QNt(t,s){if(!(t<=0||s<=0)){this.lf.HDt(t,s),this.lf.bO().hq();const i=this.lf.Dk();i&&("off"!==i.kDt()&&this.lf.YBt(t,s),i.hC(i.kV(),i.LV(),!0),this.lf.EO())}},t6t(t){const s=this.lf.Dk();s&&"off"!==s.kDt()&&(s.YDt(0!==t?"high":"low"),s.hC(s.kV(),s.LV(),!0))},Oit(t){this.lf.V5t(t)},s6t(){this.lf.j5t()},i6t(t){this.lf.H5t(t)},e6t(t){this.lf.Zbt(t)},n6t(t){},r6t(){for(const t of this.lf.nO().oO())t.TX()},h6t(t){this.lf.B5t(0!==t)},o6t(t,s){this.lf.QD(1/t),this.lf.YD(1/s)},a6t(t,s){this.lf.YD(t),this.lf.QD(s)},l6t(t){this.lf.qD(["vsync","unlimited-tick","unlimited-frame"][t])},u6t(t,i){if(t){const s=t.LL(),e=s.kL(),n=Wa,r=Va,h=this.lf.bO(),o=t.jz(),a=t.jwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.xO();if(u){let t;t=o?l.Vrt(i+l.E5().Vwt(a)):l.Vrt(i),n.push([u.TO().RF(),u._O()]),r.push([l,t])}}if(n.length){n.sort(m),r.sort(g);let i=!1;for(let t=0,s=n.length;t<s;++t){const c=r[t][0],f=h.GO(n[t][0]),d=n[t][1],p=f.IO();p[d]!==c&&((p[d]=c).xO().CO(f,!0),f.PO(c),i=!0)}i&&this.lf.EO(),Na.Bh(Wa),Na.Bh(Va)}}},wk(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.lf.NF().wk(t,s)},c6t(t){if(!this.lf.Hg()){const s=this.lf.nO();s.lO()||s.uO(t)}},f6t(t){if(!this.lf.Hg()){const s=this.lf.nO();if(!s.lO()){const i=s.YX(t);i&&s.uO(i)}}},d6t(t){if(!this.lf.Hg()){const s=this.lf.nO();if(!s.lO()){const i=s.oO(),e=i.indexOf(s.sO());if((!t||0!==e)&&(t||e!==i.length-1)){const n=i[e+(t?-1:1)];s.uO(n)}}}},p6t(){if(!this.lf.Hg()){const t=this.lf.nO();t.lO()||(t.uO(t.sO()),this.lf.lD().a1t())}},m6t(t,s){t&&t.NB(s)},g6t(t,s){t&&t.HB(s)},y6t(t,s){t&&t.JB(s)},w6t(t,s){t&&t.LE(s/100)},S6t(t,s){t&&t.XB(s)},v6t(t,s){t&&t.ZB(s)},b6t(t,s){t&&t.sB(Na.Sr(+s))},M6t(t,s,i){t&&(t.d5(!0),t.eB(s),t.rB(i))},x6t(t){t&&t.d5(!1)},T6t(t,s,i){t&&t.M9(s/100,i/100)},_6t(t,s){t&&t.F2(+s)},G6t(t,s){if(t){Ha.xa(s),Ha.gr();const i=t.f5();i.fa(Ha)||(i.ea(Ha),this.EO())}},I6t(t,s){t&&t.h5(s)},C6t(t,s){t&&t.d2(s)},P6t(t,s,i){if(t){const e=t.XL(),n=e.Cnt(i);if(n){const r=1===s;n.pmt()!==r&&(n.G3t(r),t.D6(),this.lf.EO())}}},E6t(t,s,i,e){if(t){const n=t.XL(),r=n.Cnt(s);if(r){i=Math.floor(i);const h=r.mT().yT(i);if(h){"color"===h?(Ha.xa(e),e=Ha):"percent"===h&&(e/=100);const o=n.k6(r.RF(),i,e);o&&r.pmt()&&this.lf.EO()}}}},A6t(t,s){t&&t.l5(s)},R6t(t){this.lf.bO().QL(+t)},F6t(t){this.lf.bO().sB(Na.Sr(+t))},D6t(t,s){const i=this.lf.bO(),e=i.XL(),n=e.Cnt(s);if(n){const r=1===t;n.pmt()!==r&&(n.G3t(r),i.D6(),this.lf.EO())}},O6t(t,s,i){const e=this.lf.bO(),n=e.XL(),r=n.Cnt(t);if(r){s=Math.floor(s);const h=r.mT().yT(s);if(h){"color"===h?(Ha.xa(i),i=Ha):"percent"===h&&(i/=100);const o=n.k6(r.RF(),s,i);o&&r.pmt()&&this.lf.EO()}}},k6t(t,s){const i=this.lf.bO();i.TB(t/100,s/100)},L6t(t){const s=this.lf.bO();0===t?s.IB():s.CB()},B6t(t){const s=this.lf.bO();s.eB(t)},N6t(t){const s=this.lf.bO();s.rB(t)},W6t(t,s){const i=this.lf.bO();i.eB(t),i.rB(s)},V6t(t){if(t){const s=t.$2t();if(s){const i=s.xO();if(i){const e=this.lf.bO();e.eB(i.I2()),e.rB(i.E2())}}}},gB(t,s,i){const e=this.lf.bO();try{e.gB(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},wB(t,s,i){if(t){const e=this.lf.bO();try{e.wB(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},vB(t){if(t){const s=this.lf.bO();s.vB(t)}},MB(){this.lf.bO().MB()},async j6t(t){const s=this.lf.sO();if(s&&t&&!this.lf.Hg()){const i=t.jz()?t.cgt():[t];await this.B4t(s,i)}},async H6t(t){await Na.nX.eX.$nt.j6t.call(this,this.lf.$Bt(t))},U6t(t){const s=this.lf.sO();if(s&&t){const i=t.jz()?t.cgt():[t];this.W4t(s,i)}},z6t(t){Na.nX.eX.$nt.U6t.call(this,this.lf.$Bt(t))},J6t(){const t=this.lf.sO();if(t){const s=t.T$();this.W4t(t,s)}},async q6t(t){const s=this.lf.sO();t&&s&&!this.lf.Hg()&&await this.B4t(s,t.b$())},async $6t(t){const s=this.lf.sO(),i=this.lf.nO().YX(t);i&&s&&!this.lf.Hg()&&await this.B4t(s,i.b$())},TD(t){const s=this._ft.bD();if(s)switch(s.xD()){case 1:"number"==typeof t&&s.TD(t);break;case 2:"string"==typeof t&&s.TD(t);break;case 3:s.TD(t)}},X6t(t,s,i){const e=this.K4t(t.toLowerCase(),!0),n=e.tNt,r=s.toLowerCase(),h=(n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Na.first(n.values())||e.Q4t);if(h){const o=0!==h.SD(),a=0!==i.SD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}n.set(r,i)},Y6t(t,s){const i=this.K4t(t.toLowerCase(),!0),e=(i.Q4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Na.first(i.tNt.values())||i.Q4t);if(e){const n=0!==e.SD(),r=0!==s.SD();if(n!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.Q4t=s},Z6t(t,s,i){const e=this.lf,n=e.nbt()?Ua:null,r=(i=Math.floor(i),this.K4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.tNt.get(s.toLowerCase());if(!h){if(!r.Q4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.Q4t,i=0}if(!h.Zu())return n;if(0!==h.SD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.lD(),a=o.mD(),l=a.pD(),u=0<l.length,c=(u&&(h.wD()?o.Uj(l):o.k1t(l)),[]),f=o.Ept(a);if(f){const p=f.Rpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].vet())}const d=h.Rpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Odt());return e.nbt()?this.iNt(o,h,c,u,l):this.sNt(o,h,c,u,l)}}}{const I=self.Bs;I.nX.eX.Xnt={K6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.lf.tO()*t:this.lf.tO()*(s-t)+t},Gwt(...t){const s=Math.floor(this.lf.tO()*t.length);return t[s]},Q6t(t,...s){return"number"!=typeof t&&(t=0),s[t=I.gr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},tWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},sWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(I.Sr(t))},cos(t){return Math.cos(I.Sr(t))},tan(t){return Math.tan(I.Sr(t))},asin(t){return I.vr(Math.asin(t))},acos(t){return I.vr(Math.acos(t))},atan(t){return I.vr(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},gr(t,s,i){return I.gr(t,s,i)},Et(t,s,i,e){return I.br(t,s,i,e)},angle(t,s,i,e){return I.vr(I.Tr(t,s,i,e))},kt(t,s,i){return I.kt(t,s,i)},Rr(t,s,i){return I.Rr(t,s,i)},Dr(t,s,i,e){return I.Dr(t,s,i,e)},Or(t,s,i,e,n){return I.Or(t,s,i,e,n)},kr(t,s,i){return I.kr(t,s,i)},iWt(t,s){return I.vr(I._r(I.Sr(t),I.Sr(s)))},eWt(t,s,i){return I.vr(I.Cr(I.Sr(t),I.Sr(s),i))},nWt(t,s,i){return I.vr(I.Gr(I.Sr(t),I.Sr(s),I.Sr(i)))},rWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},hWt(t,s){return(t|=0)^1<<(0|s)},oWt(t,s){return(t|=0)&1<<(0|s)?1:0},aWt(){return"\n"},lWt(t){return"string"==typeof t?t.toUpperCase():""},uWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},cWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},fWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(I.fe(s),"i")):-1},dWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(I.fe(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(I.fe(s),"gi"),i):"string"==typeof t?t:""},pWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},mWt(t,s,i){const e=this.k4t(s,i);return t?t.search(e):-1},gWt(t,s,i,e){const n=this.k4t(s,i);return t?t.replace(n,e):""},yWt(t,s,i){const e=this.L4t(t.toString(),s,i);return e?e.length:0},wWt(t,s,i,e){e=Math.floor(e);const n=this.L4t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},SWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},vWt(t){return encodeURIComponent(t)},bWt(t){return decodeURIComponent(t)},dt(){return this.lf.CZ()},timescale(){return this.lf.kD()},MWt(){return(Date.now()-this.lf.I5t())/1e3},xWt(){return Date.now()},time(){return this.lf.FD()},tickcount(){return this.lf._tt()},TWt(){return this.lf.E5t()},fps(){return this.lf.BD()},_Wt(){return this.lf.jD()},GWt(){return this.lf.UD()},IWt(){return this.lf.Dk().jk()},CWt(){return this.lf.Dk().Uk()},PWt(){return this.lf.XF()},EWt(){return this.lf.ZF()},AWt(){return this.lf.XF()},RWt(){return this.lf.ZF()},FWt(){return this.lf.bO().nB()},DWt(){return this.lf.bO().hB()},OWt(){return this.lf.bO().Kc()},kWt(){return this.lf.bO().tB()},LWt(){return I.vr(this.lf.bO().iB())},BWt(){return this.lf.bO().um()},NWt(){return this.lf.bO().xm()},WWt(){return 100*this.lf.bO().m9()},VWt(){return 100*this.lf.bO().g9()},jWt(t){const s=this.lf.bO().TO(t);return s?s.p9().xl():0},HWt(t){const s=this.lf.bO().TO(t);return s?s.p9().Tl():0},UWt(t){const s=this.lf.bO().TO(t);return s?s.p9()._l():0},zWt(t){const s=this.lf.bO().TO(t);return s?s.p9().Gl():0},JWt(t){const s=this.lf.bO().TO(t);return s?s.p9().width():0},qWt(t){const s=this.lf.bO().TO(t);return s?s.p9().height():0},$Wt(t){const s=this.lf.bO().TO(t);if(s){const i=s.p9();return(i.xl()+i._l())/2}return 0},XWt(t){const s=this.lf.bO().TO(t);if(s){const i=s.p9();return(i.Tl()+i.Gl())/2}return 0},YWt(t,s,i){const e=this.lf.bO().TO(t);return e?e.y5(s,i)[0]:0},ZWt(t,s,i){const e=this.lf.bO().TO(t);return e?e.y5(s,i)[1]:0},KWt(t,s,i){const e=this.lf.bO().TO(t);return e?e.b5(s,i)[0]:0},QWt(t,s,i){const e=this.lf.bO().TO(t);return e?e.b5(s,i)[1]:0},tVt(t,s,i,e){const n=this.lf.bO(),r=n.TO(t),h=n.TO(s);if(!r||!h||r===h)return i;const[o,a]=r.b5(i,e);return h.y5(o,a)[0]},sVt(t,s,i,e){const n=this.lf.bO(),r=n.TO(t),h=n.TO(s);if(!r||!h||r===h)return e;const[o,a]=r.b5(i,e);return h.y5(o,a)[1]},iVt(t){const s=this.lf.bO().TO(t);return s?s.YB():0},eVt(t){const s=this.lf.bO().TO(t);return s?I.vr(s.QB()):0},nVt(t){const s=this.lf.bO().TO(t);return s?100*s.OE():0},rVt(t){const s=this.lf.bO().TO(t);return s?s.KB():0},hVt(t){const s=this.lf.bO().TO(t);return s?s.nB():0},oVt(t){const s=this.lf.bO().TO(t);return s?s.hB():0},aVt(t){const s=this.lf.bO().TO(t);return s?100*s.s5():0},lVt(t){const s=this.lf.bO().TO(t);return s?100*s.e5():0},uVt(t){const s=this.lf.bO().TO(t);return s?s.R2():0},cVt(t){const s=this.lf.bO().TO(t);return s?s.RF():-1},fVt(){const t=this.lf.Dk();return t?t.vOt():""},dVt(t){const s=this.N0t;if(!s.O0t())return 0;if(t){const i=s.L0t(t);return i?i.RF():0}return s.F0t().RF()},pVt(){return this.lf.U5t()},mVt(t,s,...i){const e=this.K4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.tNt.get(s.toLowerCase());if(!n){if(!e.Q4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.Q4t}const r=n.SD(),h=n.cD();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Zu())return h;const o=this.lf,a=o.lD(),l=a.mD(),u=l.pD(),c=0<u.length,f=(c&&(n.wD()?a.Uj(u):a.k1t(u)),n.Rpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Odt());const d=n.dD(),p=d.yD(d.pD(),n.wD(),r,h,...i);return c&&a.Jj(u),p},gVt(){return this.lf.kF().nU()},yVt(){return 0===this.F4t?1:this.D4t/this.F4t},renderer(){return this.lf.eOt()?"webgpu":"webgl"},wVt(){return this.lf.eOt()?this.lf.eOt().GetAdapterInfoString():this.lf.iOt().UA()},SVt(){let t=this.lf.Jv().vv();return Math.round(100*t/1048576)/100},vVt(t,s,i){return I.Hr(t,s,i)},bVt(t,s,i){return I.zr(t/100,s/100,i/100)},MVt(t,s,i,e){return I.Ur(t/100,s/100,i/100,e/100)},xVt(t,s,i){return I.zr(t/255,s/255,i/255)},TVt(t,s,i,e){return I.Ur(t/255,s/255,i/255,e/255)},_Vt(){return this.lf.HF()},GVt(){return this.lf.zF()},IVt(){return this.lf.mD().u$().Kc()},CVt(){return this.lf.mD().Pgt()}}}{const za=self.Bs;za.nX.Touch=class extends za.YMt{constructor(t){super(t)}ur(){super.ur()}}}{let i=function(){return s.ML().g6()};i;const Ja=self.Bs,qa=self.$s;Ja.nX.Touch.fIt=class extends Ja.Oxt{constructor(t){super(t)}ur(){super.ur()}vxt(){}bxt(){return self.PVt}};let s=null;self.PVt=class extends self.xL{constructor(t){super(t),(s=t).UO().cO().dO=this}requestPermission(t){qa.Ie(t);const s=i();if("orientation"===t)return s.EVt(0);if("motion"===t)return s.EVt(1);throw new Error("invalid type")}}}{const C=self.Bs;C.nX.Touch.Instance=class extends C.Wxt{constructor(t,s){super(t,"touch"),this.AVt=new Map,this.RVt=!1,this.FVt=!1,this.DVt=0,this.OVt=0,this.kVt=0,this.LVt=0,this.BVt=0,this.NVt=0,this.WVt=0,this.VVt=0,this.jVt=0,this.HVt=0,this.UVt=0,this.zVt=0,this.JVt=0,this.qVt=0,this.$Vt=0,this.XVt=0,this.YVt=0,this.ZVt=[],s&&(this.RVt=s[0]),this.Yxt("permission-result",t=>this.KVt(t));const i=this.UO().jf();this.v0=new C.y0(C.c0.g0(i,"pointerdown",t=>this.QVt(t.data)),C.c0.g0(i,"pointermove",t=>this.tjt(t.data)),C.c0.g0(i,"pointerup",t=>this.sjt(t.data,!1)),C.c0.g0(i,"pointercancel",t=>this.sjt(t.data,!0)),C.c0.g0(i,"deviceorientation",t=>this.ijt(t.data)),C.c0.g0(i,"deviceorientationabsolute",t=>this.ejt(t.data)),C.c0.g0(i,"devicemotion",t=>this.njt(t.data)),C.c0.g0(i,"tick2",t=>this.TY()))}ur(){this.AVt.clear(),super.ur()}QVt(t){if("mouse"===t.pointerType){if(!this.RVt)return;this.FVt=!0}const s=t.pointerId;if(!this.AVt.has(s)){const i=t.pageX-this.lf.w5(),e=t.pageY-this.lf.S5(),n=performance.now(),r=this.AVt.size,h=(this.UVt=r,this.zVt=s,C.lr(C.nX.Touch.rjt));h.FCt(n,i,e,s,r),this.AVt.set(s,h),this.y4(C.nX.Touch.iX.hjt),this.y4(C.nX.Touch.iX.ojt),this.qVt=i,this.$Vt=e,this.YVt=0,this.y4(C.nX.Touch.iX.ajt)}}tjt(t){if("mouse"!==t.pointerType||this.FVt){const s=this.AVt.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.u3()<2)){const e=t.pageX-this.lf.w5(),n=t.pageY-this.lf.S5();s.QU(i,e,n,t.width,t.height,t.pressure)}}}}sjt(t,s){if("mouse"===t.pointerType){if(!this.FVt)return;this.FVt=!1}const i=performance.now(),e=t.pointerId,n=this.AVt.get(e);if(n){if(this.UVt=n.ljt(),this.zVt=n.YW(),!s){const r=t.pageX-this.lf.w5(),h=t.pageY-this.lf.S5();this.qVt=r,this.$Vt=h,this.YVt=1,this.y4(C.nX.Touch.iX.ajt)}if(this.y4(C.nX.Touch.iX.ujt),this.y4(C.nX.Touch.iX.cjt),!s){const o=n.fjt(i);"single-tap"===o?(this.y4(C.nX.Touch.iX.djt),this.qVt=n.I2(),this.$Vt=n.E2(),this.y4(C.nX.Touch.iX.pjt)):"double-tap"===o&&(this.y4(C.nX.Touch.iX.mjt),this.qVt=n.I2(),this.$Vt=n.E2(),this.y4(C.nX.Touch.iX.gjt))}n.ur(),this.AVt.delete(e)}}EVt(i){return this.tTt("request-permission",{type:i}),new Promise((t,s)=>{this.ZVt.push({type:i,resolve:t,reject:s})})}KVt(t){const s=t.result,i=t.type,e=(this.JVt=i,this.ZVt.filter(t=>t.type===i));for(const n of e)n.resolve(s?"granted":"denied");this.ZVt=this.ZVt.filter(t=>t.type!==i),s?(this.y4(C.nX.Touch.iX.yjt),0===i?this.lf.c4t():this.lf.f4t()):this.y4(C.nX.Touch.iX.wjt)}ijt(t){"number"==typeof t.webkitCompassHeading?this.DVt=t.webkitCompassHeading:t.absolute&&(this.DVt=t.alpha),this.OVt=t.alpha,this.kVt=t.beta,this.LVt=t.gamma}ejt(t){this.DVt=t.alpha}njt(t){const s=t.acceleration,i=(s&&(this.BVt=s.x,this.NVt=s.y,this.WVt=s.z),t.accelerationIncludingGravity);i&&(this.VVt=i.x,this.jVt=i.y,this.HVt=i.z)}TY(){let t=performance.now(),s=0;for(const i of this.AVt.values())i.u3()<=t-50&&i.Sjt(t),i.vjt(t)&&(this.UVt=i.ljt(),this.zVt=i.YW(),this.XVt=s,this.y4(C.nX.Touch.iX.bjt),this.qVt=i.I2(),this.$Vt=i.E2(),this.y4(C.nX.Touch.iX.Mjt),this.XVt=0),++s}xjt(t){t=Math.floor(t);for(const s of this.AVt.values()){if(0===t)return s;--t}return null}Tjt(t,s){return 0<=t&&0<=s&&t<this.lf.ZBt()&&s<this.lf.KBt()}lTt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.AVt.values()].map(t=>({name:"$"+t.YW(),value:t.I2()+", "+t.E2()}))}]}}}{const $a=self.Bs;$a.nX.Touch.iX={ojt(){return!0},cjt(){return!0},_jt(){return 0<this.AVt.size},ajt(t,s){return!!t&&s===this.YVt&&!!this.Tjt(this.qVt,this.$Vt)&&this.lf.NF().rRt(t,[[this.qVt,this.$Vt]],!1)},Gjt(t){if(!t)return!1;const s=this.lf.Ldt(),i=s.ovt(),e=[...this.AVt.values()].filter(t=>this.Tjt(t.I2(),t.E2())).map(t=>[t.I2(),t.E2()]);return $a.xor(this.lf.NF().rRt(t,e,i),i)},Ijt(t,s,i){const e=this.xjt(t);return!!e&&$a.compare(e.B6(),s,i)},Cjt(){return!0},Pjt(){return!0},Ejt(t,s,i){this.lf.c4t();let e;return e=0===t?this.OVt:1===t?this.kVt:this.LVt,$a.compare(e,s,i)},Ajt(t,s,i){this.lf.f4t();let e;return e=0===t?this.VVt:1===t?this.jVt:2===t?this.HVt:3===t?this.BVt:4===t?this.NVt:this.WVt,$a.compare(e,s,i)},hjt(t){return(t=Math.floor(t))===this.UVt},ujt(t){return(t=Math.floor(t))===this.UVt},Rjt(t){return t=Math.floor(t),this.AVt.size>=t+1},bjt(){return!0},djt(){return!0},mjt(){return!0},Mjt(t){return!!t&&!!this.Tjt(this.qVt,this.$Vt)&&this.lf.NF().rRt(t,[[this.qVt,this.$Vt]],!1)},pjt(t){return!!t&&!!this.Tjt(this.qVt,this.$Vt)&&this.lf.NF().rRt(t,[[this.qVt,this.$Vt]],!1)},gjt(t){return!!t&&!!this.Tjt(this.qVt,this.$Vt)&&this.lf.NF().rRt(t,[[this.qVt,this.$Vt]],!1)},yjt(t){return this.JVt===t},wjt(t){return this.JVt===t}}}{const Xa=self.Bs;Xa.nX.Touch.$nt={Fjt(t){this.EVt(t)}}}{const Ya=self.Bs;Ya.nX.Touch.Xnt={Djt(){return this.AVt.size},lMt(t){const s=this.xjt(this.XVt);return s?s.Ojt(this.lf.bO(),t,!0):0},uMt(t){const s=this.xjt(this.XVt);return s?s.Ojt(this.lf.bO(),t,!1):0},kjt(t,s){const i=this.xjt(t);return i?i.Ojt(this.lf.bO(),s,!0):0},Ljt(t,s){const i=this.xjt(t);return i?i.Ojt(this.lf.bO(),s,!1):0},Bjt(t,s){const i=this.AVt.get(t);return i?i.Ojt(this.lf.bO(),s,!0):0},Njt(t,s){const i=this.AVt.get(t);return i?i.Ojt(this.lf.bO(),s,!1):0},Wjt(){const t=this.xjt(0);return t?t.I2():0},Vjt(){const t=this.xjt(0);return t?t.E2():0},jjt(t){const s=this.xjt(t);return s?s.I2():0},Hjt(t){const s=this.xjt(t);return s?s.E2():0},Ujt(t){const s=this.AVt.get(t);return s?s.I2():0},zjt(t){const s=this.AVt.get(t);return s?s.E2():0},Jjt(t){const s=this.xjt(t);return s?s.B6():0},qjt(t){const s=this.AVt.get(t);return s?s.B6():0},$jt(t){const s=this.xjt(t);return s?Ya.vr(s.iB()):0},Xjt(t){const s=this.AVt.get(t);return s?Ya.vr(s.iB()):0},Yjt(){return this.lf.c4t(),this.DVt},Zjt(){return this.lf.c4t(),this.OVt},Kjt(){return this.lf.c4t(),this.kVt},Qjt(){return this.lf.c4t(),this.LVt},t8t(){return this.lf.f4t(),this.VVt},s8t(){return this.lf.f4t(),this.jVt},i8t(){return this.lf.f4t(),this.HVt},e8t(){return this.lf.f4t(),this.BVt},n8t(){return this.lf.f4t(),this.NVt},r8t(){return this.lf.f4t(),this.WVt},h8t(){return this.UVt},o8t(){return this.zVt},a8t(t){const s=this.AVt.get(t);return s?s.um():0},l8t(t){const s=this.AVt.get(t);return s?s.xm():0},u8t(t){const s=this.AVt.get(t);return s?s.c8t():0}}}{let h=self.Bs,s=-1e3,i=-1e3,e=-1e4;h.nX.Touch.rjt=class extends h.rr{constructor(){super(),this.f8t=0,this.S_=0,this.vLt=0,this.uR=0,this.d8t=0,this.p8t=0,this.m8t=0,this.tl=0,this.sl=0,this.g8t=0,this.y8t=0,this.Xm=0,this.Ym=0,this.w8t=0,this.S8t=!1,this.v8t=!1}ur(){}FCt(t,s,i,e,n){this.f8t=e,this.S_=n,this.uR=t,this.d8t=t,this.vLt=t,this.p8t=s,this.m8t=i,this.tl=s,this.sl=i,this.g8t=s,this.y8t=i}QU(t,s,i,e,n,r){this.d8t=this.uR,this.uR=t,this.g8t=this.tl,this.y8t=this.sl,this.tl=s,this.sl=i,this.Xm=e,this.Ym=n,this.w8t=r,!this.v8t&&15<=h.br(this.p8t,this.m8t,this.tl,this.sl)&&(this.v8t=!0)}YW(){return this.f8t}ljt(){return this.S_}u3(){return this.uR}Sjt(t){this.d8t=t}I2(){return this.tl}E2(){return this.sl}B6(){const t=h.br(this.tl,this.sl,this.g8t,this.y8t),s=(this.uR-this.d8t)/1e3;return 0<s?t/s:0}iB(){return h.Tr(this.g8t,this.y8t,this.tl,this.sl)}um(){return this.Xm}xm(){return this.Ym}c8t(){return this.w8t}vjt(t){return!this.S8t&&500<=t-this.vLt&&!this.v8t&&h.br(this.p8t,this.m8t,this.tl,this.sl)<15&&(this.S8t=!0)}fjt(t){return!this.S8t&&t-this.vLt<=333&&!this.v8t&&h.br(this.p8t,this.m8t,this.tl,this.sl)<15?t-e<=666&&h.br(s,i,this.tl,this.sl)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.tl,i=this.sl,e=t,"single-tap"):""}Ojt(t,s,i){if(void 0===s){const e=t.GO(0);return e.lq(this.tl,this.sl)[i?0:1]}{const n=t.TO(s);return n?n.y5(this.tl,this.sl)[i?0:1]:0}}}}{const Za=self.Bs,Ka=[];Za.nX.Audio=class extends Za.YMt{constructor(t){super(t)}b8t(t){Ka.push(t)}static async M8t(){await Promise.all(Ka),Za.Bh(Ka)}ur(){super.ur()}}}{let s=function(){return i.ML().g6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const Qa=self.Bs,tl=self.$s;Qa.nX.Audio.fIt=class extends Qa.Oxt{constructor(t){super(t)}ur(){super.ur()}vxt(){}bxt(){return self.x8t}};let i=null;self.x8t=class extends self.xL{constructor(t){super(t),i=t}get T8t(){return t().GetAudioContextExtern()}get _8t(){return t().GetDestinationNodeExtern()}get isSilent(){return s().G8t()}set isSilent(t){s().I8t(t)}get masterVolume(){return s().C8t()}set masterVolume(t){tl.xe(t),s().P8t(t)}E8t(){s().A8t()}}}{const sl=self.Bs,il=["interactive","balanced","playback"];sl.nX.Audio.Instance=class extends sl.Wxt{constructor(t,s){super(t,"audio"),this.R8t=0,this.F8t=[],this.D8t=!0,this.O8t=0,this.k8t=0,this.L8t=!1,this.B8t=1,this.N8t=1,this.W8t=[this.lf.v9()/2,this.lf.b9()/2,600],this.V8t=[0,0,-1],this.j8t=[0,1,0],this.H8t=600,this.U8t=1e4,this.z8t=1,this.J8t=null,this.q8t=-1,this.$8t=1,this.X8t=!1,this.Y8t=0,this.Z8t="suspended",this.K8t=0,this.Q8t=new Map,this.tHt=0,this.sHt=0,this.iHt=new Map,this.eHt=new Map;let i="interactive";s&&(this.O8t=s[0],this.k8t=s[1],this.L8t=s[2],i=il[s[3]],this.D8t=s[4],this.B8t=s[5],this.N8t=s[6],this.W8t[2]=s[7],this.H8t=s[8],this.U8t=s[9],this.z8t=s[10]),this.nHt=[],this.rHt=[],this.hHt=[],this.Zxt([["state",t=>this.oHt(t)],["audiocontext-state",t=>this.aHt(t)],["fxstate",t=>this.lHt(t)],["trigger",t=>this.uHt(t)],["buffer-metadata",t=>this.cHt(t)]]);const e=this.UO().jf(),n=(this.v0=new sl.y0(sl.c0.g0(e,"instancedestroy",t=>this.fHt(t.I6)),sl.c0.g0(e,"afterload",()=>this.DY()),sl.c0.g0(e,"suspend",()=>this.dHt()),sl.c0.g0(e,"resume",()=>this.pHt())),"Safari"===sl.li.di),r=this.lf.D5t(),h=this.lf.kF().NH(),o="playable-ad-single-file"===this.lf.Ek(),a=n||r||h||o;this.lf.kO(this.Qxt("create-audio-context",{preloadList:this.lf.kF().pU().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.O8t,latencyHint:i,panningModel:this.B8t,distanceModel:this.N8t,refDistance:this.H8t,maxDistance:this.U8t,rolloffFactor:this.z8t,listenerPos:this.W8t,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.Y8t=t.sampleRate,this.Z8t=t.audioContextState,this.K8t=t.outputLatency})),this.rTt()}ur(){this.J8t=null,super.ur()}mHt(t){return this.D8t?t.split(" ").filter(t=>!!t):t?[t]:[]}gHt(s,t){for(const i of t){let t=!1;for(const e of s)if(sl.vn(e,i)){t=!0;break}if(!t)return!1}return!0}yHt(t,s){return this.gHt(t,this.mHt(s))}b8t(t){this._L().b8t(t)}fHt(t){this.J8t===t&&(this.J8t=null)}wHt(t){return Math.pow(10,t/20)}SHt(t){const s=this.wHt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}vHt(t){return Math.log(t)/Math.log(10)*20}bHt(t){return this.vHt(Math.max(Math.min(t,1),0))}dHt(){this.L8t||this.Kxt("set-suspended",{isSuspended:!0})}pHt(){this.L8t||this.Kxt("set-suspended",{isSuspended:!1})}oHt(t){const s=t.tickCount,i=(this.K8t=t.outputLatency,this.nHt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.nHt=t.audioInstances,this.hHt=t.analysers,0<i.length&&sl.Xn(this.nHt,i)}cHt(t){this.iHt.set(t.originalUrl,{duration:t.duration})}aHt(t){this.Z8t=t.audioContextState}nrt(){return this.lf.EDt()?"running":this.Z8t}lHt(t){this.rHt=t.fxstate}MHt(t){const s=this.mHt(t);for(const i of this.nHt)if(this.gHt(i.tags,s))return i;return null}xHt(t){const s=this.mHt(t);return this.nHt.some(t=>this.gHt(t.tags,s)&&t.isPlaying)}THt(t,s,i,e,n){if(this.xHt(s))return null;const r=this.iHt.get(t),h={tags:this.mHt(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.nHt.push(h),h}_Ht(t){const s=this.mHt(t);for(const i of this.nHt)this.gHt(i.tags,s)&&(i.isPlaying=!1)}async uHt(t){const s=t.type,i=(this.F8t=t.tags,t.aiid);if("ended"===s){for(const e of this.nHt)if(e.aiid===i){e.isPlaying=!1;break}await this.S4(sl.nX.Audio.iX.GHt)}else"fade-ended"===s&&await this.S4(sl.nX.Audio.iX.IHt)}CHt(t){return this.yHt(this.F8t,t)}EZ(){const t={timeScale:this.lf.kD(),gameTime:this.lf.C5t(),instPans:this.PHt(),tickCount:this.lf.P5t()};if(this.J8t){const s=this.J8t.xO();this.W8t[0]=s.I2(),this.W8t[1]=s.E2(),t.listenerPos=this.W8t,t.listenerOrientation=[...this.V8t,...this.j8t]}this.Kxt("tick",t)}EHt(t,s,i,e,n){if(0!==i){const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r,a=(s-=n)*r,l=t*h,u=s*h;t=l-a,s=u+o,t+=e,s+=n}return[t,s]}PHt(){return this.nHt.filter(t=>-1!==t.uid).map(t=>this.lf.wO(t.uid)).filter(t=>t).map(t=>{const s=t.xO(),i=s.TO().iB(),[e,n]=this.EHt(s.I2(),s.E2(),-i,this.W8t[0],this.W8t[1]);return{uid:t.U5(),x:e,y:n,z:s.tN(),angle:s.iB()-i}})}AHt(t,s){for(const i of this.hHt)if(i.index===s&&sl.vn(i.tag,t))return i;return null}RHt(t){for(const s of this.mHt(t)){const i=s.toLowerCase();this.Q8t.set(i,(this.Q8t.get(i)||0)+1)}}G8t(){return this.X8t}I8t(t){this.X8t!==(t=!!t)&&(this.X8t=t,this.Kxt("set-silent",{isSilent:t}))}C8t(){return this.$8t}P8t(t){this.$8t!==t&&(this.$8t=t,this.Kxt("set-master-volume",{vol:t}))}A8t(){this.Kxt("stop-all");for(const t of this.nHt)t.isPlaying=!1}FHt(t){return!t.hasOwnProperty("placeholder")&&3!==this.k8t&&!(t.isMusic&&1===this.k8t||!t.isMusic&&2===this.k8t)}V2(){return{isSilent:this.X8t,masterVolume:this.$8t,listenerZ:this.W8t[2],listenerForwardVec:this.V8t,listenerUpVec:this.j8t,listenerUid:this.J8t?this.J8t.U5():-1,remoteUrls:[...this.eHt.entries()],playing:this.nHt.filter(t=>this.FHt(t)),effects:this.rHt,analysers:this.hHt}}j2(t){if(this.X8t=t.isSilent,this.$8t=t.masterVolume,this.W8t[2]=t.listenerZ,this.J8t=null,this.q8t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.V8t=t.listenerForwardVec:this.V8t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.j8t=t.listenerUpVec:this.j8t=[0,1,0],this.eHt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.eHt.set(s,i);this.nHt=t.playing;for(const e of this.nHt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.rHt=t.effects,this.hHt=t.analysers}DY(){if(-1!==this.q8t&&(this.J8t=this.lf.wO(this.q8t),this.q8t=-1,this.J8t)){const t=this.J8t.xO();this.W8t[0]=t.I2(),this.W8t[1]=t.E2()}for(const s of this.nHt){const i=this.lf.kF().dU(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.rHt))for(const n of e)if(n.hasOwnProperty("bufferOriginalUrl")){const r=this.lf.kF().dU(n.bufferOriginalUrl);r&&(n.bufferUrl=r.url,n.bufferType=r.type)}this.Kxt("load-state",{saveLoadMode:this.k8t,timeScale:this.lf.kD(),gameTime:this.lf.C5t(),listenerPos:this.W8t,listenerOrientation:[...this.V8t,...this.j8t],isSilent:this.X8t,masterVolume:this.$8t,playing:this.nHt.filter(t=>null!==t.bufferUrl),effects:this.rHt})}lTt(){const t=[];for(const[i,e]of Object.entries(this.rHt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.nHt.length},...this.nHt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const el=self.Bs;el.nX.Audio.iX={GHt(t){return this.CHt(t)},IHt(t){return this.CHt(t)},DHt(){return this.sHt===this.tHt},OHt(){return!0},kHt(){return this.G8t()},LHt(){for(const t of this.nHt)if(t.isPlaying)return!0;return!1},BHt(t){return this.xHt(t)}}}{const P=self.Bs,nl=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];P.nX.Audio.$nt={Play(t,s,i,e,n){const r=P.nX.Audio.$nt.NHt.call(this,t,s,i,e,n);return this.b8t(r),r},rrt(t,s,i,e){P.nX.Audio.$nt.NHt.call(this,t,0,s,0,i,e)},async NHt(t,s,i,e,n,r){if(!this.X8t){const h=t[1],o=this.lf.kF().dU(t[0]);if(o){const a=this.R8t,l=(this.R8t=0,this.THt(t[0],n,h,0!==s,this.SHt(i)));try{await this.Qxt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.mHt(n),isLooping:0!==s,vol:this.SHt(i),stereoPan:P.gr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.lf.P5t())}}}},async WHt(t,s,i,e,n,r,h,o,a,l,u){if(!this.X8t){const c=t[1],f=this.lf.kF().dU(t[0]);if(f){const d=this.R8t,p=(this.R8t=0,this.THt(t[0],u,c,0!==s,this.SHt(i)));try{await this.Qxt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.mHt(u),isLooping:0!==s,vol:this.SHt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:n,z:r,angle:P.Sr(h),innerAngle:P.Sr(o),outerAngle:P.Sr(a),outerGain:this.SHt(l)}})}finally{p&&(p.placeholder=this.lf.P5t())}}}},async VHt(t,s,i,e,n,r,h,o){if(!this.X8t&&e){const a=e.$2t();if(a&&a.xO()){const l=a.xO(),u=l.TO().iB(),[c,f]=this.EHt(l.I2(),l.E2(),-u,this.W8t[0],this.W8t[1]),d=t[1],p=this.lf.kF().dU(t[0]);if(p){const m=this.R8t,g=(this.R8t=0,this.THt(t[0],o,d,0!==s,this.SHt(i)));try{await this.Qxt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.mHt(o),isLooping:0!==s,vol:this.SHt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.tN(),angle:l.iB()-u,innerAngle:P.Sr(n),outerAngle:P.Sr(r),outerGain:this.SHt(h),uid:a.U5()}})}finally{g&&(g.placeholder=this.lf.P5t())}}}}},async jHt(t,s,i,e,n,r){if(!this.X8t){const h=1===t,o=this.lf.kF().dU(s)||this.eHt.get(s.toLowerCase());if(o){const a=this.R8t,l=(this.R8t=0,this.THt(s,r,h,0!==i,this.SHt(e)));try{await this.Qxt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.mHt(r),isLooping:0!==i,vol:this.SHt(e),stereoPan:P.gr(n/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.lf.P5t())}}}},async HHt(t,s,i,e,n,r,h,o,a,l,u,c){if(!this.X8t){const f=1===t,d=this.lf.kF().dU(s)||this.eHt.get(s.toLowerCase());if(d){const p=this.R8t,m=(this.R8t=0,this.THt(s,c,f,0!==i,this.SHt(e)));try{await this.Qxt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.mHt(c),isLooping:0!==i,vol:this.SHt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:n,y:r,z:h,angle:P.Sr(o),innerAngle:P.Sr(a),outerAngle:P.Sr(l),outerGain:this.SHt(u)}})}finally{m&&(m.placeholder=this.lf.P5t())}}}},async UHt(t,s,i,e,n,r,h,o,a){if(!this.X8t&&!this.X8t&&n){const l=n.$2t();if(l&&l.xO()){const u=l.xO(),c=u.TO().iB(),[f,d]=this.EHt(u.I2(),u.E2(),-c,this.W8t[0],this.W8t[1]),p=1===t,m=this.lf.kF().dU(s)||this.eHt.get(s.toLowerCase());if(m){const g=this.R8t,y=(this.R8t=0,this.THt(s,a,p,0!==i,this.SHt(e)));try{await this.Qxt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.mHt(a),isLooping:0!==i,vol:this.SHt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.tN(),angle:u.iB()-c,innerAngle:P.Sr(r),outerAngle:P.Sr(h),outerGain:this.SHt(o),uid:l.U5()}})}finally{y&&(y.placeholder=this.lf.P5t())}}}}},zHt(t,s){this.Kxt("set-looping",{tags:this.mHt(t),isLooping:0===s})},JHt(t,s){this.Kxt("set-muted",{tags:this.mHt(t),isMuted:0===s})},irt(t,s){this.Kxt("set-volume",{tags:this.mHt(t),vol:this.SHt(s)})},qHt(t,s,i,e){this.Kxt("fade-volume",{tags:this.mHt(t),vol:this.SHt(s),duration:i,stopOnEnd:0===e})},$Ht(t,s){this.Kxt("set-stereo-pan",{tags:this.mHt(t),p:P.gr(s/100,-1,1)})},async XHt(t){const s=t[1],i=this.lf.kF().dU(t[0]);i&&(this.tHt++,await this.Qxt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.sHt++)},async YHt(t,s){const i=1===t,e=this.lf.kF().dU(s)||this.eHt.get(s.toLowerCase());e&&(this.tHt++,await this.Qxt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.sHt++)},FW(t,s){this.Kxt("set-playback-rate",{tags:this.mHt(t),rate:Math.max(s,0)})},MW(t){this._Ht(t),this.Kxt("stop",{tags:this.mHt(t)})},ZHt(){this.A8t()},KHt(t,s){this.Kxt("set-paused",{tags:this.mHt(t),paused:0===s})},QHt(t,s){this.Kxt("seek",{tags:this.mHt(t),pos:s})},tUt(t){2===t&&(t=this.G8t()?1:0),this.I8t(0===t)},sUt(t){const s=this.SHt(t);this.P8t(s)},iUt(t,s,i,e,n,r,h){const o=nl[s];this.RHt(t),this.Kxt("add-effect",{type:"filter",tags:this.mHt(t),params:[o,i,e,n,r,P.gr(h/100,0,1)]})},eUt(t,s,i,e){this.RHt(t),this.Kxt("add-effect",{type:"delay",tags:this.mHt(t),params:[s,this.SHt(i),P.gr(e/100,0,1)]})},nUt(t,s,i,e,n,r){this.RHt(t),this.Kxt("add-effect",{type:"flanger",tags:this.mHt(t),params:[s/1e3,i/1e3,e,n/100,P.gr(r/100,0,1)]})},rUt(t,s,i,e,n,r,h){this.RHt(t),this.Kxt("add-effect",{type:"phaser",tags:this.mHt(t),params:[s,i,e,n,r,P.gr(h/100,0,1)]})},hUt(t,s,i,e){const n=this.lf.kF().dU(s[0]);n&&(this.RHt(t),this.Kxt("add-effect",{type:"convolution",tags:this.mHt(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,P.gr(e/100,0,1)]}))},oUt(t,s){this.RHt(t),this.Kxt("add-effect",{type:"gain",tags:this.mHt(t),params:[this.SHt(s)]})},aUt(t,s){this.RHt(t),this.Kxt("add-effect",{type:"stereopan",tags:this.mHt(t),params:[P.gr(s/100,-1,1)]})},lUt(t){this.RHt(t),this.Kxt("add-effect",{type:"gain",tags:this.mHt(t),params:[0]})},uUt(t,s,i){this.RHt(t),this.Kxt("add-effect",{type:"tremolo",tags:this.mHt(t),params:[s,P.gr(i/100,0,1)]})},cUt(t,s,i){this.RHt(t),this.Kxt("add-effect",{type:"ringmod",tags:this.mHt(t),params:[s,P.gr(i/100,0,1)]})},fUt(t,s,i,e,n,r){this.RHt(t),this.Kxt("add-effect",{type:"distortion",tags:this.mHt(t),params:[this.wHt(s),this.wHt(i),e,this.wHt(n),P.gr(r/100,0,1)]})},dUt(t,s,i,e,n,r){this.RHt(t),this.Kxt("add-effect",{type:"compressor",tags:this.mHt(t),params:[s,i,e,n/1e3,r/1e3]})},pUt(t,s,i){this.RHt(t),this.Kxt("add-effect",{type:"analyser",tags:this.mHt(t),params:[s,i]})},mUt(t){const s=this.mHt(t);for(const i of s)this.Q8t.set(i.toLowerCase(),0);this.Kxt("remove-effects",{tags:s}),this.rHt={}},k6(t,s,i,e,n,r){this.Kxt("set-effect-param",{tags:this.mHt(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},gUt(t){if(t){const s=t.$2t();s&&s.xO()&&(this.J8t=s)}},yUt(t){this.W8t[2]=t},wUt(t,s,i,e,n,r){this.V8t[0]=t,this.V8t[1]=s,this.V8t[2]=-i,this.j8t[0]=e,this.j8t[1]=n,this.j8t[2]=-r},SUt(t){this.R8t=Math.max(t,0)},vUt(t){const s=t[1],i=this.lf.kF().dU(t[0]);i&&this.Kxt("unload",{url:i.url,type:i.type,isMusic:s})},bUt(t,s){const i=1===t,e=this.lf.kF().dU(s)||this.eHt.get(s.toLowerCase());e&&this.Kxt("unload",{url:e.url,type:e.type,isMusic:i})},MUt(){this.Kxt("unload-all")},xUt(t,s,i){this.eHt.set(i.toLowerCase(),{url:t,type:s})}}}{const rl=self.Bs;rl.nX.Audio.Xnt={TUt(t){const s=this.MHt(t);return s?s.duration:0},Knt(t){const s=this.MHt(t);return s?s.playbackTime:0},ert(t){const s=this.MHt(t);return s?s.playbackRate:0},Qnt(t){const s=this.MHt(t);return s?this.bHt(s.volume):0},_Ut(){return this.bHt(this.C8t())},GUt(t){return this.Q8t.get(t.toLowerCase())||0},IUt(t,s){const i=this.AHt(t,Math.floor(s));return i?i.binCount:0},CUt(t,s,i){const e=this.AHt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},PUt(t,s){const i=this.AHt(t,Math.floor(s));return i?i.peak:0},EUt(t,s){const i=this.AHt(t,Math.floor(s));return i?i.rms:0},AUt(){return this.Y8t},RUt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},FUt(){return this.K8t},DUt(t,s){return 0==(t=rl.gr(+t,0,100)/100)?-1/0:t<.1?this.bHt(rl.kt(0,this.SHt(s),10*t)):rl.kt(s,0,(t-.1)/.9)}}}{const hl=self.Bs;hl.nX.OUt=class extends hl.YMt{constructor(t){super(t)}ur(){super.ur()}}}{const ol=self.Bs;ol.nX.OUt.fIt=class extends ol.Oxt{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const al=self.Bs;al.nX.OUt.Instance=class extends al.Wxt{constructor(t,s){super(t,"localstorage"),this.kUt="",this.h_="",this.LUt=[],this.BUt="",this.NUt=!1,this.WUt=0,this.VUt=0,this.jUt=!1,s&&(this.jUt=s[0]);const i=this.lf.qk();this.Jk=null,this.jUt?this.Jk=i.Li({Bi:!0}):this.Jk=i,this.HUt=new Map,this.UUt=!1,this.lf.kO(this.G2())}async G2(){const t=await Promise.race([this.Qxt("init"),al.Rh(3e3)]);t&&(this.NUt=t.isPersistent)}ur(){super.ur()}async zUt(t){this.BUt=this.JUt(t),await this.S4(al.nX.OUt.iX.qUt)}JUt(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}lTt(){return this.UUt||this.$Ut(),[{title:"plugins.localstorage.name",properties:[...this.HUt.entries()].map(s=>({name:"$"+s[0],value:s[1],XUt:t=>this.Jk.setItem(s[0],t)}))}]}async $Ut(){this.UUt=!0;try{const i=await this.Jk.keys(),e=(i.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0}),await Promise.all(i.map(t=>this.Jk.getItem(t))));this.HUt.clear();for(let t=0,s=i.length;t<s;++t)this.HUt.set(i[t],e[t])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.UUt=!1}}}}{const ll=self.Bs;ll.nX.OUt.iX={YUt(t){return this.kUt===t},ZUt(){return!0},KUt(t){return this.kUt===t},QUt(){return!0},t7t(t){return this.kUt===t},s7t(){return!0},i7t(){return!0},e7t(){return!0},qUt(){return!0},n7t(t){return this.kUt===t},r7t(t){return this.kUt===t},h7t(t,s){return ll.compare(this.kUt,t,s)},o7t(t,s){return ll.compare(this.h_,t,s)},a7t(){return 0<this.VUt},l7t(){return 0<this.WUt},u7t(){return!0},c7t(){return!0},f7t(){return this.NUt}}}{let i=function(t){return"string"==typeof t||"number"==typeof t};i;const ul=self.Bs;ul.nX.OUt.$nt={async d7t(t,s){this.VUt++;try{const i=await this.Jk.setItem(t,s);await this.Xxt(async()=>{this.kUt=t,this.h_=i,await this.S4(ul.nX.OUt.iX.ZUt),await this.S4(ul.nX.OUt.iX.YUt)})}catch(t){await this.zUt(t)}finally{this.VUt--,0===this.VUt&&await this.S4(ul.nX.OUt.iX.u7t)}},async p7t(t,s){if(s){const i=s.$2t(this._i);if(i){const e=i.g6();if(e){const n=e.GetArrayBufferReadOnly();this.VUt++;try{await this.Jk.setItem(t,n),await this.Xxt(async()=>{this.kUt=t,this.h_="",await this.S4(ul.nX.OUt.iX.ZUt),await this.S4(ul.nX.OUt.iX.YUt)})}catch(t){await this.zUt(t)}finally{this.VUt--,0===this.VUt&&await this.S4(ul.nX.OUt.iX.u7t)}}}}},async m7t(t){this.WUt++;try{const s=await this.Jk.getItem(t);await this.Xxt(async()=>{this.kUt=t,this.h_=i(s)?s:"",await this.S4(ul.nX.OUt.iX.QUt),await this.S4(ul.nX.OUt.iX.KUt)})}catch(t){await this.zUt(t)}finally{this.WUt--,0===this.WUt&&await this.S4(ul.nX.OUt.iX.c7t)}},async g7t(s,t){if(t){const i=t.$2t(this._i);if(i){const e=i.g6();this.WUt++;try{let t=await this.Jk.getItem(s);t=t instanceof ArrayBuffer?t:new ArrayBuffer(0),await this.Xxt(async()=>{this.h_="",this.kUt=s,e.SetArrayBufferTransfer(t),await this.S4(ul.nX.OUt.iX.QUt),await this.S4(ul.nX.OUt.iX.KUt)})}catch(t){await this.zUt(t)}finally{this.WUt--,0===this.WUt&&await this.S4(ul.nX.OUt.iX.c7t)}}}},async y7t(t){try{const s=await this.Jk.getItem(t);await this.Xxt(async()=>{this.kUt=t,null==s?(this.h_="",await this.S4(ul.nX.OUt.iX.r7t)):(this.h_=i(s)?s:"",await this.S4(ul.nX.OUt.iX.n7t))})}catch(t){await this.zUt(t)}},async ef(t){try{await this.Jk.removeItem(t),await this.Xxt(async()=>{this.kUt=t,this.h_="",await this.S4(ul.nX.OUt.iX.s7t),await this.S4(ul.nX.OUt.iX.t7t)})}catch(t){await this.zUt(t)}},async w7t(){try{await this.Jk.clear(),await this.Xxt(async()=>{this.kUt="",this.h_="",ul.Bh(this.LUt),await this.S4(ul.nX.OUt.iX.i7t)})}catch(t){await this.zUt(t)}},async S7t(){try{const t=await this.Jk.keys();await this.Xxt(async()=>{this.LUt=t,await this.S4(ul.nX.OUt.iX.e7t)})}catch(t){await this.zUt(t)}},async v7t(){const t=await this.Qxt("request-persistent");t.isOk&&(this.NUt=t.isPersistent)},b7t(s){if(this.jUt){let t;try{t=JSON.parse(s)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}t&&t["is-c3-storage"]&&Array.isArray(t.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.Jk.ki(new Map(t.items))}}}}{const cl=self.Bs;cl.nX.OUt.Xnt={M7t(){return this.h_},Key(){return this.kUt},x7t(){return this.LUt.length},T7t(t){return(t=Math.floor(t))<0||t>=this.LUt.length?"":this.LUt[t]},_7t(){return this.BUt},G7t(){return this.jUt?JSON.stringify({"is-c3-storage":!0,items:[...this.Jk.Oi()]}):""}}}{const fl=self.Bs;fl.nX.Ant=class extends fl.YMt{constructor(t){super(t)}ur(){super.ur()}}}{const dl=self.Bs,pl=self.$s,ml=[],gl=(dl.nX.Ant.fIt=class extends dl.Oxt{constructor(t){super(t),this.rIt=t.UIt()}ur(){dl.Bh(this.rIt),super.ur()}vxt(){for(const t of this.rIt)t.hGt(this.lf)}G$(s){const i={Pb:this.lf.KF()};return Promise.all(this.rIt.map(t=>t.oGt(s,i)))}R$(){for(const t of this.rIt)t.aGt()}P$(){this.I7t()}I7t(){for(const t of this.yft.OL())t.g6().C7t()}wvt(t){dl.nX.Ant.EMt(this,t)}e2t(t){ml.push({Nxt:null,P7t:!1,instances:[]})}E7t(t,s,i){const e=ml.at(-1);e.Nxt=t,e.P7t=i,e.instances.push(s)}n2t(t){const s=ml.pop(),i=s.Nxt,e=s.P7t;if(i){const n=new Map;for(const r of s.instances)r.tPt(n,i,e);for(const[h,o]of n)h.LL().Vft(o)}}A7t(t){const s=this.E5().XIt(t),i=this.UO(),e=s.lGt(0);return e.tW().C8(i.Jv(),{Pb:i.KF()}).then(()=>this.I7t()),s}R7t(t){for(const s of this.yft.OL())s.g6().F7t(t);this.E5().YIt(t)}D7t(t,s){const i=this.yft.qIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.dGt(s);e<0&&(e+=i.z6()+1);const n=dl.eGt.rGt(this.UO()),r=(i.uGt(n,e),this.UO());n.tW().C8(r.Jv(),{Pb:r.KF()}).then(()=>this.I7t());for(const h of this.yft.OL())h.g6().O7t();return n}k7t(t,s){const i=this.yft.qIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.z6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.dGt(s);e<0&&(e+=i.z6()),i.cGt(e);for(const n of this.yft.OL())n.g6().O7t()}bxt(){return self.L7t}},new WeakMap);self.L7t=class extends self.xL{constructor(t){super(t),gl.set(this,t.i2t())}B7t(t){pl.Ie(t);const s=gl.get(this).E5().qIt(t);return s?s.pGt():null}N7t(){return gl.get(this).E5().JIt().map(t=>t.pGt())}W7t(t){return pl.Ie(t),gl.get(this).A7t(t).pGt()}V7t(t){pl.Ie(t),gl.get(this).R7t(t)}j7t(t,s){if(pl.Ie(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return gl.get(this).D7t(t,s).X6()}H7t(t,s){if(pl.Ie(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");gl.get(this).k7t(t,s)}}}{const E=self.Bs,yl=self.$s,wl=E.lr(E.Rect),Sl=E.lr(E.Ql),vl=E.lr(E.Qa),A=(E.nX.Ant.Instance=class extends E.pTt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[0],e=s[1],n=s[2],r=s[3]),this.U7t=this.yft.qIt(e)||this.yft.UIt()[0],this.z7t=E.gr(n,0,this.U7t.z6()-1),this.J7t=this.U7t.lGt(this.z7t);const h=this.J7t.tW(),o=(this.q7t=h.jM(),this.$7t=h.LC(),this.X7t=h.GTt(),this.wTt(),t.KCt(2,!0),t.KCt(1,0<=this.U7t.B6()),this.Y7t=Math.abs(this.U7t.B6()),this.Z7t=this.U7t.j6(),this.K7t=E.lr(E.x0),this.Q7t=0,this.tzt=0,this.szt="",this.izt=-1,this.ezt="",this.nzt=0,this.xO());this.rzt=o.nN(),o.NB(i),o.vN(r),o.cht(this.J7t.eW()),o.dht(this.J7t.rW()),o.UAt(this.J7t.mW()),o.q4(),1===this.yft.zIt()&&1===this.yft.UIt()[0].z6()||0===this.Y7t||this.rTt()}ur(){this.U7t=null,this.J7t=null,this.q7t=null,this.K7t=null,super.ur()}MTt(){return this.J7t.tW()}mit(){return!0}PU(){this.q7t=null}bTt(){this.C7t()}wb(t){const s=this.q7t;if(null!==s){t.WE(s);const i=this.xO();i.a6()?this.hzt(i,t):this.ozt(i,t)}}ozt(t,s){let i=this.rzt;this.lf.tD()&&(i=t.LAt(i)),s.YE(i,this.X7t)}hzt(s,t){const i=s.s3t();if(s.e3t()){s.DAt(wl,Sl,!1);let t=Sl;this.lf.tD()&&(t=s.LAt(t)),i.yb(s.l6(),t,this.X7t),s.i3t(!1)}i.wb(t)}azt(){return this.K7t.ei()}lzt(){return this._i.QCt(2)}uzt(t){this._i.KCt(2,t)}czt(){return this._i.QCt(1)}fzt(t){this._i.KCt(1,t)}dzt(){return this._i.QCt(4)}pzt(t){this._i.KCt(4,t)}EZ(){this.ezt&&this.mzt(),0<=this.izt&&this.gzt();const t=this.Y7t;if(this.lzt()&&0!==t){const s=this.lf.ED(this._i),i=(this.K7t.uc(s),this.azt()),e=this.J7t,n=e.sW()/t;if(!(i<this.Q7t+n)){const r=this.U7t,h=this.Z7t,o=r.z6(),a=r.W6(),l=r.N6(),u=r.U6(),c=(this.czt()?this.z7t++:this.z7t--,this.Q7t+=n,this.z7t>=o&&(u?(this.fzt(!1),this.z7t=o-2):!l&&(this.tzt++,this.tzt>=a)?this.yzt(!1):this.z7t=h),this.z7t<0&&(u?(this.z7t=1,this.fzt(!0),l||(this.tzt++,this.tzt>=a&&this.yzt(!0))):!l&&(this.tzt++,this.tzt>=a)?this.yzt(!0):this.z7t=h),this.z7t=E.gr(this.z7t,0,o-1),r.lGt(this.z7t));i>this.Q7t+c.sW()/t&&(this.Q7t=i),this.wzt(e,c)}}else this.Hxt()}yzt(t){this.z7t=t?0:this.U7t.z6()-1,this.uzt(!1),this.szt=this.U7t.Kc(),this.pzt(!0),this.Bxt("animationend",!1,{animationName:this.szt}),this.y4(E.nX.Ant.iX.Szt),this.y4(E.nX.Ant.iX.vzt),this.pzt(!1),this.tzt=0}wzt(i,e,t){if(i!==e){const s=this.xO(),n=i.tW(),r=e.tW(),h=n.um(),o=n.xm(),a=r.um(),l=r.xm(),u=(t&&t.onFrameChange?t.onFrameChange(s,h,o,a,l):(h!==a&&s.Sm(s.um()*(a/h)),o!==l&&s.fm(s.xm()*(l/o))),s.cht(e.eW()),s.dht(e.rW()),s.UAt(e.mW()),s.q4(),this.J7t=e,this.q7t=r.jM(),this.$7t=r.LC(),this.X7t=r.GTt(),this.JW()._nt());for(let t=0,s=u.length;t<s;++t)u[t].f_t(i,e);this.Bxt("framechange",!1,{animationName:this.U7t.Kc(),bzt:this.z7t}),this.y4(E.nX.Ant.iX.Mzt),this.lf.EO()}}xzt(t){this.uzt(!0),this.Q7t=this.azt(),1===t&&0!==this.z7t&&(this.izt=0,this.dzt()||this.gzt()),this.rTt()}Tzt(t,s,i){this.ezt=t,this.nzt=s,this.rTt(),!i&&this.dzt()||this.mzt()}_zt(){return this.U7t}Gzt(){return this.ezt||this.U7t.Kc()}F7t(t){E.vn(t,this.Gzt())&&this.Tzt(this.yft.ZIt().Kc(),1,!0)}Izt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.yft.qIt(this.Gzt());if(!s)return;if(-1===(t=s.fGt(t)))return}isFinite(t)&&(this.izt=t,this.dzt()||this.gzt())}O7t(){if(!this.ezt&&-1===this.izt){const t=this.J7t,s=this.U7t.lGt(E.gr(this.z7t,0,this.U7t.z6()-1));t!==s&&this.wzt(t,s),1<this.U7t.z6()&&0<this.Y7t&&this.rTt()}}Czt(){return this.z7t}Pzt(){return this.J7t.SW()}Ezt(t){this.Y7t=Math.abs(t),this.fzt(0<=t),0<this.Y7t&&this.rTt()}Azt(){return this.czt()?this.Y7t:-this.Y7t}Rzt(t){"string"==typeof t&&-1===(t=this.U7t.fGt(t))||(t=E.gr(Math.floor(t),0,this.U7t.z6()-1),this.Z7t=t)}Fzt(){return this.Z7t}mzt(t){const s=this.J7t,i=this.yft.qIt(this.ezt);if(this.ezt="",i&&(i!==this.U7t||!this.lzt())){this.U7t=i,this.fzt(0<=i.B6()),this.Y7t=Math.abs(i.B6()),this.Z7t=i.j6(),this.z7t=E.gr(this.z7t,0,this.U7t.z6()-1),1===this.nzt&&(this.z7t=0),this.uzt(!0),this.Q7t=this.azt();const e=this.U7t.lGt(this.z7t);this.wzt(s,e,t)}}gzt(t){const s=this.J7t,i=this.z7t;if(this.z7t=E.gr(Math.floor(this.izt),0,this.U7t.z6()-1),this.izt=-1,t||i!==this.z7t){const e=this.U7t.lGt(this.z7t);this.wzt(s,e),this.Q7t=this.azt()}}C7t(){const t=this.J7t.tW();this.q7t=t.jM(),this.$7t=t.LC(),this.X7t=t.GTt(),this.xO().i3t(!0)}jM(){return this.q7t}LC(){return this.$7t}GTt(){return this.X7t}aW(){return this.J7t.aW()}y2t(t){let s=this.J7t,i=this.xO(),e=null;if("string"==typeof t)e=s.dW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.fW(t-1)}let n=i.tN();if(!e)return[i.I2(),i.E2(),n];if(vl.G(e._Gt()),i.a6()){const[r,h,o]=i.l6().Tb(vl.nl(),vl.hl());vl.set(r,h),n+=o}return vl.offset(-s.eW(),-s.rW()),vl.scale(i.um(),i.xm()),vl.rotate(i.iB()),vl.offset(i.I2(),i.E2()),[vl.nl(),vl.hl(),n]}Dzt(){return this.xO().XAt().Nu()}Ozt(t){t=Math.floor(t);const s=this.xO(),i=s.XAt(),e=i.Nu();if((t=t===e?0:t)<0||e<=t)return[0,0];const n=i.Bu();return[n[2*t+0]+s.I2(),n[2*t+1]+s.E2()]}lTt(){const s=E.nX.Ant.$nt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.U7t.Kc(),XUt:t=>this.cTt(s.kzt,t,0)},{name:t+".current-frame",value:this.z7t,XUt:t=>this.cTt(s.Lzt,t)},{name:t+".is-playing",value:this.lzt(),XUt:t=>t?this.cTt(s.Bzt,0):this.cTt(s.Nzt)},{name:t+".speed",value:this.Y7t,XUt:t=>this.cTt(s.Wzt,t)},{name:t+".repeats",value:this.tzt,XUt:t=>this.tzt=t}]}]}V2(){const t={a:this.U7t.Zz()},s=(0!==this.Q7t&&(t.fs=this.Q7t),this.azt()),i=(0!==s&&(t.at=s),0!==this.z7t&&(t.f=this.z7t),0!==this.Y7t&&(t.cas=this.Y7t),1!==this.tzt&&(t.ar=this.tzt),0!==this.Z7t&&(t.rt=this.Z7t),this.lzt()||(t.ap=this.lzt()),this.czt()||(t.af=this.czt()),this.xO());return i.SN()&&(t.ce=i.SN()),t}j2(t){const s=this.E5().$It(t.a),i=(s&&(this.U7t=s),this.Q7t=t.hasOwnProperty("fs")?t.fs:0,this.K7t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.z7t=E.gr(i,0,this.U7t.z6()-1),this.Y7t=t.hasOwnProperty("cas")?t.cas:0,this.tzt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),n=(this.Z7t=E.gr(e,0,this.U7t.z6()-1),this.uzt(!t.hasOwnProperty("ap")||!!t.ap),this.fzt(!t.hasOwnProperty("af")||!!t.af),this.U7t.lGt(this.z7t)),r=(this.J7t=n,this.C7t(),this.xO());r.cht(n.eW()),r.dht(n.rW()),r.UAt(n.mW()),r.vN(!!t.ce),this.lzt()&&this.rTt()}Rrt(t){const s=this.xO();switch(t){case 3:return s.SN();case 2:return E.gr(this.z7t,0,this.U7t.z6()-1);case 1:return this.U7t.Kc()}}Brt(t,s,i){const e=this.xO();switch(t){case 3:e.vN(!!s);break;case 2:{this.uzt(!1);const n=this.U7t.z6()-1,r=s=E.gr(s,0,n),h=this.U7t.lGt(this.z7t),o=this.U7t.lGt(r);this.wzt(h,o,i),this.z7t=E.gr(r,0,n);break}case 1:{this.ezt=s,this.mzt(i);const a=this.U7t.z6();1<a&&0<this.U7t.B6()?this.rTt():this.Hxt();break}}}bxt(){return self.Vzt}},new WeakMap),bl=new Map([["current-frame",0],["beginning",1]]);self.Vzt=class extends self.c6{constructor(){super(),A.set(this,self.C5.F5().g6())}oW(){return A.get(this).aW()}lW(t){return this.uW(t)[0]}cW(t){return this.uW(t)[1]}jzt(t){return this.uW(t)[2]}uW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return A.get(this).y2t(t)}pW(){return A.get(this).Dzt()}gW(t){return yl.xe(t),A.get(this).Ozt(t)[0]}wW(t){return yl.xe(t),A.get(this).Ozt(t)[1]}yW(t){return yl.xe(t),A.get(this).Ozt(t)}Hzt(){A.get(this).uzt(!1)}Uzt(t="current-frame"){yl.Ie(t);const s=bl.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).xzt(s)}zzt(t,s="beginning"){yl.Ie(t),yl.Ie(s);const i=bl.get(s);if(void 0===i)throw new Error("invalid mode");const e=A.get(this);if(!e.E5().qIt(t))throw new Error(`animation name "${t}" does not exist`);e.Tzt(t,i)}B7t(t){yl.Ie(t);const s=A.get(this).E5().qIt(t);return s?s.pGt():null}get animation(){return A.get(this)._zt().pGt()}get animationName(){return A.get(this).Gzt()}set bzt(t){yl.xe(t),A.get(this).Izt(t)}get bzt(){return A.get(this).Czt()}set Jzt(t){yl.Ie(t),A.get(this).Izt(t)}get Jzt(){return A.get(this).Pzt()}set qzt(t){yl.xe(t),A.get(this).Ezt(t)}get qzt(){return A.get(this).Azt()}set $zt(t){yl.xe(t),A.get(this).Rzt(t)}get $zt(){return A.get(this).Fzt()}get imageWidth(){return A.get(this).MTt().um()}get imageHeight(){return A.get(this).MTt().xm()}Xzt(){const t=A.get(this).MTt();return[t.um(),t.xm()]}async Yzt(t){yl.rn(t,Blob);const s=A.get(this),i=s.UO(),e=s.MTt(),n=E.lr(E.P_t);if(n.H_t(i,t),await n.C8(i.Jv(),{Pb:i.KF()}),s.cr())n.ur();else{e.U_t(n);const r=s.i2t();r.I7t(),r.E5().jf().dispatchEvent(new E.Event("animationframeimagechange")),i.EO()}}Zzt(t,s){yl.Ie(s),A.get(this).xO().RAt(!!t,s)}}}{const Ml=self.Bs;Ml.nX.Ant.iX={Kzt(t){return Ml.vn(this.Gzt(),t)},Qzt(t,s){return Ml.compare(this.z7t,t,s)},t9t(t,s){if("string"!=typeof s)return!1;const i=this.J7t.SW();return Ml.compare(i.toLowerCase(),t,s.toLowerCase())},s9t(t,s){return Ml.compare(this.Azt(),t,s)},vzt(t){return Ml.vn(this.szt,t)},Szt(){return!0},Mzt(){return!0},i9t(){return this.xO().um()<0},e9t(){return this.xO().xm()<0},n9t(){return!0},r9t(){return!0},SN(){return this.xO().SN()}}}{const xl=self.Bs;xl.nX.Ant.$nt={h9t(t,s,i,e,n){if(t&&s){const[r,h]=this.y2t(i),o=this.lf.VL(t,s,r,h,e,n);if(o){if(e&&s.jL(o),t._L().hL()){const l=o.xO();l.sB(this.xO().iB()),l.q4()}const a=this.lf.lD();a.HL(!0),o.UL(),a.HL(!1),t!==this.lf.Ndt().E5()&&this.jxt.E7t(t,o,e)}}},Nzt(){this.uzt(!1)},Bzt(t){this.xzt(t)},kzt(t,s){this.Tzt(t,s)},Lzt(t){this.Izt(t)},Wzt(t){this.Ezt(t)},o9t(t){this.Rzt(t)},a9t(s,t){try{0===s?this.i2t().A7t(t):this.i2t().R7t(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},l9t(s,t,i){try{0===s?this.i2t().D7t(t,i):this.i2t().k7t(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},u9t(t){const s=this.xO(),i=s.um(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Sm(e),s.q4())},c9t(t){const s=this.xO(),i=s.xm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.fm(e),s.q4())},QL(t){const s=this.J7t,i=s.tW(),e=this.xO(),n=e.um()<0?-1:1,r=e.xm()<0?-1:1,h=i.um()*t*n,o=i.xm()*t*r;e.um()===h&&e.xm()===o||(e.hC(h,o),e.q4())},async f9t(t,s,i){const e=this.J7t,n=e.tW(),r=this.xO(),h=this.lf,o=this.jxt;if(n.ZH()===t)0===s&&(r.hC(n.um(),n.xm()),r.q4()),this.y4(xl.nX.Ant.iX.n9t);else{const a=xl.lr(xl.P_t);try{if(await a.j_t(h,t),!a.xU())throw new Error("image failed to load");if(this.cr())return void a.ur();await a.C8(h.Jv(),{Pb:h.KF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.cr()||this.y4(xl.nX.Ant.iX.r9t))}this.cr()?a.ur():(n.U_t(a),o.I7t(),o.E5().jf().dispatchEvent(new xl.Event("animationframeimagechange")),h.EO(),0===s&&(r.hC(n.um(),n.xm()),r.q4()),await this.S4(xl.nX.Ant.iX.n9t))}},d9t(t){this.xO().vN(t)},RAt(t,s){this.xO().RAt(0===t,s)},p9t(t){this.xO().d2(t),this.lf.EO()}}}{const Tl=self.Bs;Tl.nX.Ant.Xnt={m9t(){return this.Czt()},g9t(){return this.Pzt()},y9t(){return this.U7t.z6()},w9t(){return this.U7t.Kc()},S9t(){return this.Azt()},v9t(){return this.U7t.B6()},b9t(t){return this.y2t(t)[0]},M9t(t){return this.y2t(t)[1]},x9t(t){return this.y2t(t)[2]},T9t(){return this.aW()},_9t(){return this.MTt().um()},G9t(){return this.MTt().xm()},I9t(t){return this.Ozt(t)[0]},C9t(t){return this.Ozt(t)[1]},P9t(){return this.Dzt()}}}{const _l=self.Bs;_l.nX.Text=class extends _l.YMt{constructor(t){super(t)}ur(){super.ur()}}}{const Gl=self.Bs;Gl.nX.Text.fIt=class extends Gl.Oxt{constructor(t){super(t)}ur(){super.ur()}vxt(){}G$(t){}R$(){}}}{const Il=self.Bs,Cl=self.$s,Pl=[0,0,0],El=["left","center","right"],Al=["top","center","bottom"],Rl=["ltr","rtl"],Fl=["word","cjk","character"],Dl=new Il.Rect,Ol=new Il.Ql,kl=new Il.Ho,Ll=Il.lr(Il.Qa),Bl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),R=(Il.nX.Text.Instance=class extends Il.pTt{constructor(t,s){if(super(t),this.uf="",this.E9t=!0,this.A9t="Arial",this.R9t=12,this.F9t=0,this.UG=!1,this.zG=!1,this.u2=Il.lr(Il.Ho),this.ZG=0,this.KG=0,this.sI="word",this.iI=0,this.D9t="auto",this.O9t=1,this.k9t=null,this.L9t="",this.B9t=!1,this.N9t=!1,this.W9t=null,this.V9t=-1,this.j9t=-1,this.H9t=0,this.U9t=Il.lr(Il.ey.xv,this.lf.Jv(),{timeout:5}),this.U9t.EI=()=>this.lf.EO(),this.z9t=()=>this.J9t(),this.q9t=!1,s){this.uf=s[0],this.E9t=!!s[1],this.A9t=s[2],this.R9t=s[3],this.F9t=s[4],this.UG=!!s[5],this.zG=!!s[6],this.ZG=s[8],this.KG=s[9],this.sI=Fl[s[10]],this.iI=s[11],this.$9t(this.lf.Ej(s[12]));const i=s[7];this.u2.Xo(i[0],i[1],i[2]),this.xO().NB(s[13]),this.N9t=!!s[15]}this.X9t(),this.Y9t()}ur(){this.$9t(null),this.Z9t(),this.W9t&&(this.W9t.ur(),this.W9t=null),this.U9t.ur(),this.U9t=null,super.ur()}X9t(){const t=this.U9t;t.df(this.uf),t.DI(this.E9t),this.U9t.LG()&&this.k9t?this.U9t.om(this.UO().N5t(this.k9t)):this.U9t.om(null),t.OI("nearest"!==this.lf.KF()),t.kI(this.A9t),t.WI(this.F9t),t.jI(this.UG),t.UI(this.zG),t.m2(this.u2),t.ZI(El[this.ZG]),t.QI(Al[this.KG]),t.sC(this.sI),t.eC(Rl[this.iI])}K9t(){let t=this.xO(),s=(this.U9t.LI(this.R9t),this.U9t.NI(t.QEt()),t.TO()),i;"auto"===this.D9t?i=s.cJ(t.tN()):"fixed"===this.D9t&&(i=this.O9t),t.a6()&&i!==this.U9t.oC()&&t.i3t(!0),this.U9t.hC(t.um(),t.xm(),i)}$9t(t){t&&(t.jz()||t._L().constructor!==Il.nX.Ant)||t!==this.k9t&&(this.k9t&&this.k9t.jf().removeEventListener("animationframeimagechange",this.z9t),this.k9t=t,this.k9t&&this.k9t.jf().addEventListener("animationframeimagechange",this.z9t),this.X9t(),this.B9t=!1,this.lf.EO())}J9t(){this.lf.W5t(this.k9t),this.lf.EO(),this.q9t=!0}Y9t(){if(this.N9t){let t=this.uf;this.E9t&&(t=Il.Fn.Qp(t)),this.W9t?this.W9t.df(t):this.W9t=Il.lr(Il.hf,this.lf,t)}else this.W9t&&(this.W9t.ur(),this.W9t=null)}wb(t){const s=this.xO(),i=(this.K9t(),this.q9t&&(this.q9t=!1,this.U9t.LG())&&this.k9t&&this.U9t.om(this.UO().N5t(this.k9t)),this.U9t.jM());if(i){const e=s.TO();if(0===s.iB()&&0===e.iB()&&0===s.tN()&&!s.a6()&&e.P9()){const n=s.nN(),[r,h]=e._5(n.ih(),n.eh()),[o,a]=e._5(n.hh(),n.oh()),l=r-Math.round(r),u=h-Math.round(h),[c,f]=(Dl.set(r,h,o,a),Dl.offset(-l,-u),Ol.vu(Dl),t.tA(t.SA()));this.lf.Dk().L8(t,c,f),t.WE(i),t.AS(Ol,this.U9t.LC()),e.N8(t)}else t.WE(i),s.a6()?this.hzt(s,t):this.ozt(s,t)}}ozt(t,s){let i=t.nN();this.lf.tD()&&(i=this.Q9t(i)),s.AS(i,this.U9t.LC())}hzt(s,t){const i=s.s3t();if(s.e3t()){s.DAt(Dl,Ol,!1);let t=Ol;this.lf.tD()&&(t=this.Q9t(t)),i.yb(s.l6(),t,this.U9t.LC()),s.i3t(!1)}i.wb(t)}Q9t(t){const s=t.ih()-Math.round(t.ih()),i=t.eh()-Math.round(t.eh());return 0==s&&0==i?t:(Ol.G(t),Ol.offset(-s,-i),Ol)}xTt(){const t=this.U9t.jM();return t?[t.um(),t.xm()]:[100,100]}TTt(){return this.U9t.LC()}ITt(){return!1}V2(){const t={t:this.uf,c:this.u2.toJSON(),fn:this.A9t,ps:this.R9t};return this.E9t&&(t.bbc=this.E9t),0!==this.ZG&&(t.ha=this.ZG),0!==this.KG&&(t.va=this.KG),"word"!==this.sI&&(t.wr=this.sI),0!==this.F9t&&(t.lho=this.F9t),this.UG&&(t.b=this.UG),this.zG&&(t.i=this.zG),-1!==this.j9t&&(t.tw={st:this.V9t,en:this.j9t,l:this.H9t}),this.k9t&&(t.ioc=this.k9t.Zz()),"fixed"===this.D9t&&(t.fs=this.O9t),t}j2(t){if(this.Z9t(),this.uf=t.t,this.u2.ja(t.c),this.A9t=t.fn,this.R9t=t.ps,this.E9t=!!t.hasOwnProperty("bbc")&&t.bbc,this.ZG=t.hasOwnProperty("ha")?t.ha:0,this.KG=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.sI="boolean"==typeof s?s?"word":"character":s}else this.sI="word";if(this.F9t=t.hasOwnProperty("lho")?t.lho:0,this.UG=!!t.hasOwnProperty("b")&&t.b,this.zG=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.V9t=i.st,this.j9t=i.en,this.H9t=i.l}if(t.hasOwnProperty("ioc")){const e=this.UO().Ej(t.ioc);e&&this.$9t(e)}else this.$9t(null);t.hasOwnProperty("fs")?(this.D9t="fixed",this.O9t=t.fs):this.D9t="auto",this.X9t(),this.Y9t(),this.B9t=!1,-1!==this.j9t&&this.rTt()}Rrt(t){switch(t){case 0:return this.rC();case 1:return this.E9t;case 2:return this.tJt();case 3:return this.sJt();case 4:return this.iJt();case 5:return this.eJt();case 6:return this.nJt();case 7:return Pl[0]=this.u2.na(),Pl[1]=this.u2.ra(),Pl[2]=this.u2.oa(),Pl;case 8:return this.rJt();case 9:return this.hJt();case 10:return this.oJt();case 15:return this.aJt()}}Brt(t,s){switch(t){case 0:this.lJt(s);break;case 1:this.E9t!==!!s&&(this.E9t=!!s,this.X9t());break;case 2:this.uJt(s);break;case 3:this.cJt(s);break;case 4:this.fJt(s);break;case 5:this.dJt(s);break;case 6:this.pJt(s);break;case 7:const i=this.u2,e=s;i.na()===e[0]&&i.ra()===e[1]&&i.oa()===e[2]||(this.u2.Xo(e[0],e[1],e[2]),this.X9t());break;case 8:this.mJt(s);break;case 9:this.gJt(s);break;case 10:this.yJt(s)}}uTt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.u2.Yo(s,i,e),this.X9t())}lJt(t){this.uf!==t&&(this.uf=t,this.U9t.df(t),this.Y9t(),this.B9t=!1,this.lf.EO())}rC(){return this.uf}wJt(t,s){this.K9t(),this.lJt(t),this.V9t=this.lf.OD(),this.j9t=this.V9t+s/this.JW().q5(),this.H9t=this.U9t.cC(),this.U9t.JI(0),this.rTt()}Z9t(){this.V9t=-1,this.j9t=-1,this.H9t=0,this.U9t.JI(-1),this.Hxt()}SJt(){-1!==this.j9t&&(this.Z9t(),this.y4(Il.nX.Text.iX.vJt),this.lf.EO())}uJt(t){this.A9t!==t&&(this.A9t=t,this.U9t.kI(t),this.lf.EO())}tJt(){return this.A9t}dJt(t){this.UG!==(t=!!t)&&(this.UG=t,this.U9t.jI(t),this.lf.EO())}eJt(){return this.UG}pJt(t){this.zG!==(t=!!t)&&(this.zG=t,this.U9t.UI(t),this.lf.EO())}nJt(){return this.zG}cJt(t){this.R9t!==t&&(this.R9t=t,this.lf.EO())}sJt(){return this.R9t}bJt(t){this.u2.fa(t)||(this.u2.ea(t),this.U9t.m2(this.u2),this.lf.EO())}MJt(){return this.u2}fJt(t){this.F9t!==t&&(this.F9t=t,this.X9t(),this.lf.EO())}iJt(){return this.F9t}mJt(t){this.ZG!==t&&(this.ZG=t,this.X9t(),this.lf.EO())}rJt(){return this.ZG}gJt(t){this.KG!==t&&(this.KG=t,this.X9t(),this.lf.EO())}hJt(){return this.KG}xJt(t){this.yJt(Fl[t])}yJt(t){this.sI!==t&&(this.sI=t,this.X9t(),this.lf.EO())}oJt(){return this.sI}TJt(t){this.iI!==t&&(this.iI=t,this.X9t(),this.lf.EO())}_Jt(){return this.iI}GJt(t){this.N9t=!!t,this.Y9t()}aJt(){return this.N9t}IJt(t){this.D9t!==t&&(this.D9t=t,this.lf.EO())}CJt(){return this.D9t}PJt(t){this.O9t!==t&&(this.O9t=t,"fixed"===this.D9t)&&this.lf.EO()}EJt(){return this.O9t}AJt(){return this.K9t(),this.U9t.aC()}RJt(){return this.K9t(),this.U9t.uC()}FJt(t,s){this.K9t();const i=this.xO(),e=(Ll.set(t-i.I2(),s-i.E2()),Ll.rotate(-i.iB()),Ll.offset(i.um()*i.eW(),i.xm()*i.rW()),Ll.Ct(i.um(),i.xm()),Ll.scale(this.U9t.um(),this.U9t.xm()),this.U9t.dC(Ll.nl(),Ll.hl()));if(e){const n=e.ug("tag");if(n)return n.param}return""}DJt(t,s,i){const e=this.FJt(s,i);return e&&Il.vn(t,e)}OJt(t,s){this.K9t(),s=Math.floor(s);const i=this.U9t.mC(t,s);if(!i)return null;const e=this.xO(),n=this.U9t.XI(),r=i.rg(),h=i.og()-(i.xm()-i._m())*n,o=i.um()*n/this.U9t.um()*e.um(),a=i.xm()*n/this.U9t.xm()*e.xm();return Ll.set(r,h),Ll.Ct(this.U9t.um(),this.U9t.xm()),Ll.scale(e.um(),e.xm()),Ll.offset(-e.um()*e.eW(),-e.xm()*e.rW()),Ll.rotate(e.iB()),Ll.offset(e.I2(),e.E2()),{x:Ll.nl(),y:Ll.hl(),width:o,height:a}}kJt(t){return this.K9t(),this.U9t.gC(t)}LJt(t){let s=Bl.get(t);return null===s?"":`</${s||"span"||"span"}>`}BJt(t,s){let i=Bl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async NJt(){if(!this.B9t){let t=new Il.Fn(this.uf,{Op:!0}).Jp(),s=new Map,n='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.tJt()}';`),this.eJt()&&i.push("font-weight: bold;"),this.nJt()&&i.push("font-style: italic;"),"character"===this.oJt()&&i.push("word-break: break-all;"),n+=` style="${i.join(" ")}">`,this.k9t?this.UO().N5t(this.k9t):null);if(this.k9t){const o=Il.lr(Il.md),a=[],l=new Map;for(const c of t)if(c.vm()){const f=c.yg(r);if(f){const d=f.Kg(),p=d.tW().X_t();l.has(p)||(l.set(p,null),a.push(o.uc(async()=>{const t=await p.FU();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.vm()){const g=m.yg(r);if(g){const y=g.Kg(),w=y.tW().X_t();u.push(o.uc(async()=>{const t=await y.tW().Z_t(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const h=new Map;for(const v of t){let e=v.dg(),t=[...h.keys()];t.reverse();for(const b of t)e.has(b)&&e.get(b)===h.get(b)||(h.delete(b),n+=this.LJt(b));for(const[M,x]of e)h.has(M)||(h.set(M,x),n+=this.BJt(M,x));if(v.wm()&&(n+=Il.tp(Il.K1(v.Lm().join("")),"\n","<br>")),v.vm()&&r){const T=v.yg(r);if(T){const _=s.get(T);if(_){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.lf.KF()&&t.push("image-rendering: pixelated"),n+=`<img class="c3-text-icon" data-icon="${v.gg()}" width="${T.um()}" height="${T.xm()}" style="${t.join(";")}" src="${_}">`}}}}const e=[...h.keys()];e.reverse();for(const G of e)n+=this.LJt(G);n+="</span>",this.L9t=n,this.B9t=!0}return this.L9t}EZ(){const s=this.lf.OD();if(s>=this.j9t)this.Z9t(),this.y4(Il.nX.Text.iX.vJt),this.lf.EO();else{let t=Il.Fr(this.V9t,this.j9t,s,0,this.H9t);(t=Math.floor(t))!==this.U9t.qI()&&(this.U9t.JI(t),this.lf.EO())}}lTt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.rC(),XUt:t=>this.lJt(t)},{name:t+".properties.font.name",value:this.tJt(),XUt:t=>this.uJt(t)},{name:t+".properties.size.name",value:this.sJt(),XUt:t=>this.cJt(t)},{name:t+".properties.line-height.name",value:this.iJt(),XUt:t=>this.fJt(t)},{name:t+".properties.bold.name",value:this.eJt(),XUt:t=>this.dJt(t)},{name:t+".properties.italic.name",value:this.nJt(),XUt:t=>this.pJt(t)}]}]}bxt(){return self.WJt}},new WeakMap),Nl=new Map([["left",0],["center",1],["right",2]]),Wl=new Map([["top",0],["center",1],["bottom",2]]),Vl=["ltr","rtl"];new Set(["auto","fixed"]);self.WJt=class extends self.c6{constructor(){super(),R.set(this,self.C5.F5().g6())}get text(){return R.get(this).rC()}set text(t){Cl.Ie(t);const s=R.get(this);s.Z9t(),s.lJt(t)}VJt(t,s){Cl.Ie(t),Cl.xe(s);const i=R.get(this);i.Z9t(),i.wJt(t,s)}jJt(){R.get(this).SJt()}set j8(t){Cl.Ie(t),R.get(this).uJt(t)}get j8(){return R.get(this).tJt()}set U8(t){R.get(this).dJt(t)}get U8(){return R.get(this).eJt()}set z8(t){R.get(this).pJt(t)}get z8(){return R.get(this).nJt()}set H8(t){Cl.xe(t),R.get(this).cJt(t)}get H8(){return R.get(this).sJt()}set HJt(t){if(Cl.je(t),t.length<3)throw new Error("expected 3 elements");kl.Xo(t[0],t[1],t[2]),R.get(this).bJt(kl)}get HJt(){const t=R.get(this).MJt();return[t.na(),t.ra(),t.oa()]}set lineHeight(t){Cl.xe(t),R.get(this).fJt(t)}get lineHeight(){return R.get(this).iJt()}set X8(t){Cl.Ie(t);const s=Nl.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).mJt(s)}get X8(){return El[R.get(this).rJt()]}set verticalAlign(t){Cl.Ie(t);const s=Wl.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).gJt(s)}get verticalAlign(){return Al[R.get(this).hJt()]}set Y8(t){if(!Fl.includes(t))throw new Error("invalid mode");R.get(this).yJt(t)}get Y8(){return R.get(this).oJt()}set Z8(t){Cl.Ie(t);const s=Vl.indexOf(t);if(-1===s)throw new Error("invalid text direction");R.get(this).TJt(s)}get Z8(){return Vl[R.get(this)._Jt()]}set UJt(t){R.get(this).GJt(!!t)}get UJt(){return R.get(this).aJt()}zJt(t){Cl.xe(t);const s=R.get(this);s.IJt("fixed"),s.PJt(t)}JJt(){R.get(this).IJt("auto")}get tH(){return R.get(this).AJt()}get sH(){return R.get(this).RJt()}qJt(){const t=R.get(this);return[t.AJt(),t.RJt()]}$Jt(t,s,i){return Cl.Ie(t),Cl.xe(s),Cl.xe(i),R.get(this).DJt(t,s,i)}XJt(t,s){return Cl.xe(t),Cl.xe(s),R.get(this).FJt(t,s)}YJt(t,s=0){return Cl.Ie(t),Cl.xe(s),R.get(this).OJt(t,s)}ZJt(t){return Cl.Ie(t),R.get(this).kJt(t)}KJt(t){const s=R.get(this),i=s.UO().Mk(t);s.$9t(i)}QJt(){return R.get(this).NJt()}}}{const jl=self.Bs;jl.nX.Text.iX={tqt(t,s){return s?this.uf===t:jl.vn(this.uf,t)},sqt(){return-1!==this.j9t},vJt(){return!0},iqt(t,s,i){return this.DJt(t,s,i)}}}{const Hl=self.Bs,Ul=Hl.lr(Hl.Ho);Hl.nX.Text.$nt={df(t){this.Z9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.lJt(t.toString())},eqt(t){this.Z9t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.lJt(this.uf+t)},nqt(t,s){this.Z9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.wJt(t.toString(),s)},rqt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.A9t&&i===this.UG&&e===this.zG||(this.uJt(t),this.dJt(i),this.pJt(e))},LI(t){this.cJt(t)},hqt(t){Ul.xa(t),Ul.gr(),this.bJt(Ul)},oqt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},p9t(t){this.xO().d2(t),this.lf.EO()},aqt(){this.SJt()},WI(t){this.fJt(t)},lqt(t){this.mJt(t)},uqt(t){this.gJt(t)},cqt(t){this.xJt(t)},eC(t){this.TJt(t)},fqt(t){this.$9t(t)},dqt(){return this.NJt()},pqt(t){this.GJt(t)},mqt(t,s){this.IJt(["auto","fixed"][t]),this.PJt(s)}}}{const zl=self.Bs;zl.nX.Text.Xnt={Text(){return this.uf},gqt(){return this.E9t?zl.Fn.Qp(this.uf):this.uf},yqt(){return this.A9t},wqt(){return this.R9t},Sqt(){return this.AJt()},vqt(){return this.RJt()},bqt(){return this.F9t},Mqt(t,s){return this.FJt(t,s)},xqt(t){return this.kJt(t)},Tqt(t,s){const i=this.OJt(t,s);return i?i.x:0},_qt(t,s){const i=this.OJt(t,s);return i?i.y:0},Gqt(t,s){const i=this.OJt(t,s);return i?i.width:0},Iqt(t,s){const i=this.OJt(t,s);return i?i.height:0},Cqt(){return this.L9t}}}{let h=function(t){t&&t.close&&t.close()};h;const Jl=self.Bs;Jl.nX.video=class extends Jl.Gxt{constructor(t){super(t,"video"),this.Pqt=!1,this.Eqt={},this.Aqt=-1,this.Rqt=new Map,this.lf.kO(this.lf.RO("video","init",{isInWorker:this.lf.qF()}).then(t=>{this.Pqt=t.postImageBitmaps,this.Eqt=t.supportedFormats})),this.Ext("playback-event",(t,s)=>t.Fqt(s)),this.lf.b4("video","state",t=>this.oHt(t))}ur(){super.ur()}Dqt(){return this.Pqt}Oqt(t){return!!this.Eqt[t]}oHt(t){const s=t.sequenceNumber;if(s<=this.Aqt)for(const i of Object.values(t.videoData))h(i.imageBitmap);else{this.Aqt=s;for(const e of this.Rqt.values())h(e.imageBitmap);this.Rqt.clear();for(const[n,r]of Object.entries(t.videoData))this.Rqt.set(parseInt(n,10),r)}}kqt(t){this.Rqt.delete(t)}Lqt(t){return this.Rqt.get(t)||null}}}{const ql=self.Bs;ql.nX.video.fIt=class extends ql.Oxt{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const $l=self.Bs,Xl=$l.lr($l.Rect),Yl=$l.lr($l.Ql),Zl=["webm-vp8","webm-vp9","webm-av1","mp4-h264","mp4-h265","mp4-av1"];$l.nX.video.Instance=class extends $l.ETt{constructor(t,s){super(t,"video"),this.Bqt="",this.Nqt="mp4-h264",this.Wqt="",this.Vqt="webm-vp9",this.jqt=2,this.L8t=!1,this.Hqt=!1,this.Uqt=null,this.zqt=-1,this.Jqt=0,this.RQ=!1,this.qqt=!1,this.$qt=!1,this.OSt=!1,this.Xqt=!1,this.Unt=0,s&&(this.Bqt=s[0],this.Nqt=Zl[s[1]],this.Wqt=s[2],this.Vqt=Zl[s[3]],this.jqt=s[4],this.L8t=s[5],this.xO().NB(s[6]));const i=this.lf.jf();this.v0=new $l.y0($l.c0.g0(i,"renderercontextlost",()=>this.D$()),$l.c0.g0(i,"suspend",()=>this.dHt()),$l.c0.g0(i,"resume",()=>this.pHt())),this.zTt({src:this.Yqt(),autoplay:this.jqt})}ur(){this._L().kqt(this.YTt()),this.Zqt(),super.ur()}Kqt(t,s,i){if(this.Uqt){if(this.Uqt.um()===s||this.Uqt.xm()===i)return;this.Zqt()}this.Uqt=t.RM(s,i,{Pb:this.lf.KF(),Rb:!1})}Zqt(){this.Uqt&&(this.lf.Jv().kM(this.Uqt),this.Uqt=null)}JTt(){return{}}wHt(t){return Math.pow(10,t/20)}SHt(t){const s=this.wHt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}vHt(t){return Math.log(t)/Math.log(10)*20}bHt(t){return this.vHt(Math.max(Math.min(t,1),0))}Yqt(){let t="",s=this._L();return s.Oqt(this.Nqt)&&this.Bqt?t=this.Bqt:s.Oqt(this.Vqt)&&this.Wqt&&(t=this.Wqt),t&&($l.So(t)?this.lf.kF().QO(t):t)}D$(){this.Uqt=null}async Fqt(t){const s=t.type;5===s?this.Qqt(!0):2===s?(this.Qqt(!1),this.$qt=!0,this.qqt=!1):6===s&&(this.Qqt(!1),this.qqt=!0,this.$qt=!1),this.zqt=s,await this.S4($l.nX.video.iX.t$t)}Qqt(t){this.RQ=!!t,this.RQ?(this.rTt(),this.qqt=!1,this.$qt=!1):this.Hxt()}dHt(){this.L8t||this.RQ&&(this.Hqt=!0,this.jTt("pause"))}pHt(){this.L8t||this.Hqt&&(this.jTt("play"),this.Hqt=!1)}wb(a){let l=this.xO(),u=0,c=0,f=null,d=this._L().Dqt();if(d){const t=this.s$t();if(!t)return;f=t.imageBitmap,t.imageBitmap=null,u=t.videoWidth,c=t.videoHeight}else{const s=self.C3Video_GetElement(this.YTt());if(!s)return;u=s.videoWidth,c=s.videoHeight,f=s}if(!(u<=0||c<=0)){this.Kqt(a,u,c),f&&(a.kC(f,this.Uqt),d)&&f.close&&f.close();let t=u/c,s=l.um(),i=l.xm(),e=s/i,n=0,r=0,h=0,o=0;t<e?(h=i*t,o=i,n=Math.max(Math.floor((s-h)/2),0)):(h=s,o=s/t,r=Math.max(Math.floor((i-o)/2),0)),a.WE(this.Uqt),Xl.ml(l.I2()+n,l.E2()+r,h,o),Yl.vu(Xl),a.Ql(Yl)}}EZ(){this.lf.EO()}s$t(){return this._L().Lqt(this.YTt())}}}{const Kl=self.Bs;Kl.nX.video.iX={IsPlaying(){return this.RQ},BW(){return this.qqt},i$t(){return this.$qt},e$t(){return this.Xqt},t$t(t){return this.zqt===t}}}{const Ql=self.Bs,tu=["webm-vp8","webm-vp9","webm-av1","mp4-h264","mp4-h265","mp4-av1"];Ql.nX.video.$nt={n$t(t,s){this.Bqt=t,this.Nqt="webm-vp8",this.Wqt=s,this.Vqt="mp4-h264",this.jTt("set-source",{src:this.Yqt()}),this.Zqt()},r$t(t,s,i,e){this.Bqt=t,this.Nqt=tu[s],this.Wqt=i,this.Vqt=tu[e],this.jTt("set-source",{src:this.Yqt()}),this.Zqt()},h$t(t){this.jTt("set-playback-time",{time:t})},FW(t){this.jTt("set-playback-rate",{rate:t})},zHt(t){this.OSt!==(t=0!==t)&&(this.OSt=t,this.jTt("set-looping",{isLooping:t}))},JHt(t){this.Xqt!==(t=0!==t)&&(this.Xqt=t,this.jTt("set-muted",{isMuted:t}))},irt(t){this.Unt!==t&&(this.Unt=t,this.jTt("set-volume",{volume:this.SHt(t)}))},o$t(){this.jTt("pause")},Play(){this.HTt("play")}}}{const su=self.Bs;su.nX.video.Xnt={Knt(){const t=this.s$t();return t?t.currentTime:0},ert(){const t=this.s$t();return t?t.playbackRate:1},TUt(){const t=this.s$t();return t?t.duration:0},Qnt(){return this.Unt},a$t(){const t=this.s$t();return t?t.videoWidth:0},l$t(){const t=this.s$t();return t?t.videoHeight:0}}}{const iu=self.Bs;iu.Hat.u$t=class extends iu.ZTt{constructor(t){super(t)}ur(){super.ur()}}}{const eu=self.Bs;eu.Hat.u$t.fIt=class extends eu.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const nu=self.Bs,ru=self.$s,hu=self.b6,ou=(nu.Hat.u$t.Instance=class extends nu.n_t{constructor(t,s){super(t),this.c$t=0,this.f$t=0,this.d$t=0,this.p$t=!0,this.m$t=!0,this.g$t=!1,this.y$t=0,this.w$t=nu.lr(nu.x0),this.S$t=this._i.xO().OE()||1,s&&(this.c$t=s[0],this.f$t=s[1],this.d$t=s[2],this.p$t=!!s[3],this.m$t=!!s[4],this.y$t=this.m$t?0:3),this.m$t&&(0===this.c$t?(this.y$t=1,0===this.f$t&&(this.y$t=2)):(this._i.xO().LE(0),this.lf.EO())),this.rTt()}ur(){super.ur()}V2(){return{fit:this.c$t,wt:this.f$t,fot:this.d$t,d:this.p$t,s:this.y$t,st:this.w$t.ei(),mo:this.S$t}}j2(t){this.c$t=t.fit,this.f$t=t.wt,this.d$t=t.fot,this.p$t=t.d,this.y$t=t.s,this.w$t.Set(t.st),this.S$t=t.mo,3===this.y$t?this.Hxt():this.rTt()}EZ(){const t=this.lf.ED(this._i),s=(this.w$t.uc(t),this._i.xO());0===this.y$t&&(s.LE(this.w$t.ei()/this.c$t*this.S$t),this.lf.EO(),s.OE()>=this.S$t)&&(s.LE(this.S$t),this.y$t=1,this.w$t.l0(),this.Bxt("fadeinend"),this.y4(nu.Hat.u$t.iX.v$t)),1===this.y$t&&this.w$t.ei()>=this.f$t&&(this.y$t=2,this.w$t.l0(),this.Bxt("waitend"),this.y4(nu.Hat.u$t.iX.b$t)),2===this.y$t&&(0!==this.d$t?(s.LE(this.S$t-this.w$t.ei()/this.d$t*this.S$t),this.lf.EO(),s.OE()<=0&&(this.y$t=3,this.w$t.l0(),this.Bxt("fadeoutend"),this.y4(nu.Hat.u$t.iX.M$t),this.p$t)&&this.lf.L5(this._i)):(this.y$t=3,this.w$t.l0())),3===this.y$t&&this.Hxt()}x$t(){this.m$t||this.g$t||(this.S$t=this._i.xO().OE()||1,this.g$t=!0),3===this.y$t&&this.dA()}T$t(){this.dA()}dA(){this.y$t=0,this.w$t.l0(),0===this.c$t?(this.y$t=1,0===this.f$t&&(this.y$t=2)):(this._i.xO().LE(0),this.lf.EO()),this.rTt()}_$t(t){this.c$t=Math.max(t,0)}G$t(){return this.c$t}I$t(t){this.f$t=Math.max(t,0)}C$t(){return this.f$t}P$t(t){this.d$t=Math.max(t,0)}E$t(){return this.d$t}Rrt(t){switch(t){case 0:return this.G$t();case 1:return this.C$t();case 2:return this.E$t();case 3:return this.p$t}}Brt(t,s){switch(t){case 0:this._$t(s);break;case 1:this.I$t(s);break;case 2:this.P$t(s);break;case 3:this.p$t=!!s}}lTt(){const t="behaviors.fade";return[{title:"$"+this.G6().Kc(),properties:[{name:t+".properties.fade-in-time.name",value:this.G$t(),XUt:t=>this._$t(t)},{name:t+".properties.wait-time.name",value:this.C$t(),XUt:t=>this.I$t(t)},{name:t+".properties.fade-out-time.name",value:this.E$t(),XUt:t=>this.P$t(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.y$t]]}]}]}bxt(){return self.A$t}},new WeakMap);self.A$t=class extends hu{constructor(){super(),ou.set(this,hu.F5().g6())}R$t(){ou.get(this).x$t()}F$t(){ou.get(this).T$t()}set D$t(t){ru.xe(t),ou.get(this)._$t(t)}get D$t(){return ou.get(this).G$t()}set O$t(t){ru.xe(t),ou.get(this).I$t(t)}get O$t(){return ou.get(this).C$t()}set k$t(t){ru.xe(t),ou.get(this).P$t(t)}get k$t(){return ou.get(this).E$t()}}}{const au=self.Bs;au.Hat.u$t.iX={M$t(){return!0},v$t(){return!0},b$t(){return!0}}}{const lu=self.Bs;lu.Hat.u$t.$nt={L$t(){this.x$t()},B$t(){this.T$t()},N$t(t){this._$t(t)},W$t(t){this.I$t(t)},V$t(t){this.P$t(t)}}}{const uu=self.Bs;uu.Hat.u$t.Xnt={j$t(){return this.G$t()},H$t(){return this.C$t()},U$t(){return this.E$t()}}}{const cu=self.Bs;cu.Hat.jat=class extends cu.ZTt{constructor(t){super(t)}ur(){super.ur()}}}{const fu=self.Bs;fu.Hat.jat.fIt=class extends fu.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const du=self.Bs,pu=du.Hat.jat;pu.Instance=class extends du.n_t{constructor(t,s){super(t),this.z$t=!1,this.Lu=!0,s&&(this.z$t=!1,this.Lu=!!s[0]),this.J$t=new Map,this.q$t=[],this.$$t=new Map,this.X$t=null,this.Y$t=null,this.Z$t=null,this.K$t=null,this.Q$t="",this.tXt=[],this.FY=t=>this.DY(),this.UO().jf().addEventListener("afterload",this.FY)}ur(){this.UO().jf().removeEventListener("afterload",this.FY),this.FY=null,this.X$t&&(this.sXt(this.X$t),this.X$t=null),this.iXt(),this.eXt=null,this.nXt(),this.q$t=null,this.rXt(),this.$$t=null,this.tXt=null,super.ur()}$at(t){this.tXt.push(t)}Xat(){this.tXt.pop()}hXt(){return this.tXt[this.tXt.length-1]}PMt(t){this.Lu=!!t,t?this.$$t&&this.$$t.size&&this.oTt():this.Uxt();for(const s of this.oXt())t?this.aXt(s)&&s.xW():((s.IsPlaying()||s.Itt())&&this.lXt(s),s.MW());t&&this.nXt()}Zu(){return this.Lu}lXt(t){this.q$t.push(t)}aXt(t){return this.q$t.includes(t)}nXt(){du.Bh(this.q$t)}uXt(){return this.X$t}jst(){const t=this.C6();return!!t&&!t.YV()}cXt(t,s,i=!1){const e=s?this.fXt(s,i):this.oXt(i);if(e&&e.length)for(const n of e)if(n.TW(t))return n}dXt(t,s){for(const i of this.J$t.values())for(const e of i)if(!e.vW()&&e.TW(t)&&s(e))return!0;for(const n of this.$$t.values())for(const r of n)if(!r.vW()&&r.TW(t)&&s(r))return!0;return!1}pXt(t){for(const s of this.J$t.values())for(const i of s)if(!i.vW()&&t(i))return!0;for(const e of this.$$t.values())for(const n of e)if(!n.vW()&&t(n))return!0;return!1}mXt(t,s){return this.cXt(t,s,!0)}*gXt(t,s,i=!1){const e=s?this.fXt(s,i):this.oXt(i);if(e&&e.length)for(const n of e)n.TW(t)&&(yield n)}*yXt(t,s){yield*this.gXt(t,s,!0)}fXt(i,t){if(t){let t=this.J$t.get(i),s=this.$$t.get(i);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.vW())}{let t=this.J$t.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.vW())}}oXt(t){if(t){const s=[...this.J$t.values()].flat(),i=[...this.$$t.values()].flat();return s.concat(i).filter(t=>t).filter(t=>!t.vW())}{const e=[...this.J$t.values()].flat();return e.filter(t=>t).filter(t=>!t.vW())}}wXt(){return this.oXt(!0)}V2(t=0){return{s:!1,e:!!this.Lu,at:this.SXt(),dt:this.vXt(),wt:this.bXt(),ft:this.MXt()}}j2(t,s="full"){t&&(this.Y$t=t.at,this.Z$t=t.dt,this.K$t=t.wt,this.Q$t=t.ft,this.z$t=!1,this.Lu=!!t.e,"state"===s)&&this.DY()}DY(){const t=this.UO().itt();if(this.xXt(this.Y$t,this.J$t,t),this.Z$t){du.Bh(this.q$t);for(const s of this.Z$t)this.TXt(this.q$t,s,t)}this.xXt(this.K$t,this.$$t,t),this.X$t=this._Xt(this.Q$t,t),this.Lu?this.$$t&&this.$$t.size&&this.oTt():this.Uxt()}xXt(s,i,e){if(s)for(const n in s){let t=i.get(n);t?du.Bh(t):t=[];const r=s[n];for(const h of r){const o=this.TXt(t,h.name,e);if(o)this.GXt(h.name,h,e);else{const a=du.Iht.Kat({runtime:this.UO(),json:h});du.Iht.hit(a,this.C6().U5()),a.Pat(t=>this.IXt(t)),e.cZ(a),this.TXt(t,a,e)}}i.set(n,t)}}_Xt(t,s){return s.aZ(t)}TXt(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this._Xt(s,i);if(e)return!!t.push(e)}return!1}GXt(t,s,i){if("string"==typeof t){const e=this._Xt(t,i);e&&(e.gq(s),du.Iht.hit(e,this.C6().U5()))}else t.gq(s),du.Iht.hit(t,this.C6().U5())}SXt(){const t={};for(const[s,i]of this.J$t)t[s]=i.filter(t=>!t.vW()).map(t=>t.mq());return t}vXt(){return this.q$t.filter(t=>!t.vW()).map(t=>t.Kc())}bXt(){const t={};for(const[s,i]of this.$$t)t[s]=i.map(t=>t.mq());return t}MXt(){return this.X$t?this.X$t.Kc():""}nTt(){this.rXt()}CXt(t){const s=pu.EXt.PXt(t.property,t.elt,t.nlt,t.ease,t.resultMode,this.C6()),i=pu.RXt.AXt(t.property),e=(pu.RXt.FXt(i)||this.DXt(t.property),du.Iht.Kat({runtime:this.UO(),id:i,tags:t.tags,time:t.time,I6:this.C6(),tlt:!!t.tlt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,Qat:s}));return e.Pat(t=>this.IXt(t)),this.OXt(e,t.property),e}kXt(t){const s=t.YW();if(this.J$t.has(s)){const i=this.J$t.get(s);if(i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}HW(t,s=!1){this.kXt(t),t.vW()||this.LXt(t)||(t.MW(s),this.BXt(t))}DXt(t,s=!1){if(du.ge(t)){const i=pu.RXt.AXt(t);if(this.J$t.has(i)){const e=this.J$t.get(i),n=this.uXt();for(const r of e)r===n||r.vW()||this.LXt(r)||(r.MW(s),r.ur());du.Bh(e)}}else{const h=this.uXt();for(const o of this.oXt())o===h||o.vW()||this.LXt(o)||(o.MW(s),o.ur());for(const a of this.J$t.keys())du.Bh(this.J$t.get(a)),this.J$t.delete(a);this.J$t.clear()}}sXt(t){this.HW(t,!0)}iXt(){this.DXt(NaN,!0)}Rrt(t){if(0===t)return this.Lu}Brt(t,s){0===t&&(this.Lu=!!s)}NXt(t){const s=t.JW(),i=s._nt();for(const e of i){const n=e.G6();if(n.DIt()===this.constructor)return n}}y4(t,s,i,e){return this.lf?super.y4(t):s.y4(t,i,e)}IXt(t){this.X$t=t,pu.iX.WXt(t);let s,i;if(this.UO())s=this._i,i=this.lf,this.y4(pu.iX.VXt),this.y4(pu.iX.jXt),this.HW(t);else{if(!(s=t.JW()))return;if(s&&s.YV())return;i=s.UO();const e=this.NXt(t);this.y4(pu.iX.VXt,i,s,e),this.y4(pu.iX.jXt,i,s,e),t.MW()}this.X$t=null,pu.iX.WXt(null),t.$W()&&i.L5(s)}OXt(t,s){const i=pu.RXt.AXt(s),e=(this.J$t.has(i)||this.J$t.set(i,[]),this.J$t.get(i));e.push(t)}BXt(t){const s=t.YW();this.$$t.has(s)||this.$$t.set(s,[]),this.$$t.get(s).push(t),this.aTt()||this.oTt()}LXt(t){const s=t.YW();return!!this.$$t.has(s)&&this.$$t.get(s).includes(t)}rXt(){if(this.$$t.size){for(const t of this.$$t.values()){for(const s of t)s.vW()||s.ur();du.Bh(t)}this.$$t.clear(),this.aTt()&&this.Uxt()}}lTt(){return[{title:"$"+this.G6().Kc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Zu(),XUt:t=>this.PMt(t)}]}]}bxt(){return self.HXt}}}{let i=self.Bs,s=null;i.Hat.jat.iX={Vat(){return!0},Uat(t){const s=this.hXt();return!!s&&s.TW(t)},zat(t){const s=this.hXt();return!!s&&(s.ytt()===t||2===t)},Jat(t,s){const i=this.hXt();return!!i&&(i.ytt()===s||2===s)&&i.TW(t)},WXt(t){s=t},VXt(t){return s.TW(t)},jXt(){return!0},IsPlaying(t){return this.dXt(t,i.Iht.IsPlaying)},LHt(){return this.pXt(i.Iht.IsPlaying)},BW(t){return this.dXt(t,i.Iht.BW)},UXt(){return this.pXt(i.Iht.BW)},U6(t,s){return 0===s?this.dXt(t,i.Iht.Yat):1===s&&this.dXt(t,i.Iht.Zat)},zXt(t){return 0===t?this.pXt(i.Iht.Yat):1===t&&this.pXt(i.Iht.Zat)}}}{const mu=self.Bs,gu=self.mc,yu=mu.Hat.jat;yu.$nt={PMt(t){this.PMt(!!t)},async JXt(...t){if(this.Zu()&&this.jst()){const s=this.CXt(yu.$Xt.qXt(this,...t));s.Play()&&await s.kW()}},async XXt(...t){if(this.Zu()&&this.jst()){const s=this.CXt(yu.$Xt.YXt(this,...t));s.Play()&&await s.kW()}},async ZXt(...t){if(this.Zu()&&this.jst()){const s=this.CXt(yu.$Xt.KXt(this,...t));s.Play()&&await s.kW()}},QXt(t){if(this.Zu()&&this.jst())for(const s of this.gXt(t))s.MW()},tYt(){if(this.Zu()&&this.jst())for(const t of this.oXt())t.MW()},sYt(t){if(this.Zu()&&this.jst())for(const s of this.gXt(t))s.xW()},iYt(){if(this.Zu()&&this.jst())for(const t of this.oXt())t.xW()},eYt(t){if(this.Zu()&&this.jst())for(const s of this.gXt(t))this.HW(s)},nYt(){if(this.Zu()&&this.jst())for(const t of this.oXt())this.HW(t)},rYt(t,s,i){if(this.Zu()&&this.jst()){const e=mu.Hat.jat.RXt.hYt(s);for(const n of this.gXt(t))n.Dat([e]),n.Oat(i,e)}},oYt(t,s,i,e){if(this.Zu()&&this.jst()){const n=mu.Hat.jat.RXt.aYt(s);for(const r of this.gXt(t))r.Dat(n),r.Oat(i,n[0]),r.Oat(e,n[1])}},lYt(t,s){if(this.Zu()&&this.jst())for(const i of this.gXt(t,"value"))i.Rat(s,"value")},uYt(t,s){if(this.Zu()&&this.jst())for(const i of this.gXt(t,"value"))i.Dat(["value"]),i.Oat(s,"value")},cYt(t,s){if(this.Zu()&&this.jst()){const i=gu.Dc(s);for(const e of this.gXt(t))e.zW(i)}},fYt(t){if(this.Zu()&&this.jst()){const s=gu.Dc(t);for(const i of this.oXt())i.zW(s)}},dYt(t,s){if(this.Zu()&&this.jst())for(const i of this.gXt(t))i._W(s)},pYt(t){if(this.Zu()&&this.jst())for(const s of this.oXt())s._W(t)},mYt(t,s){if(this.Zu()&&this.jst())for(const i of this.gXt(t))i.FW(s)},gYt(t){if(this.Zu()&&this.jst())for(const s of this.oXt())s.FW(t)},yYt(t,s){if(this.Zu()&&this.jst())for(const i of this.gXt(t))i.XW(!!s)},wYt(t){if(this.Zu()&&this.jst())for(const s of this.oXt())s.XW(!!t)}}}{const wu=self.Bs;wu.Hat.jat.Xnt={SYt(t){const s=this.mXt(t);return s?s.u3():0},vYt(t){const s=this.mXt(t);return s?s.u3()/s.IW():0},ert(t){const s=this.mXt(t);return s?s.DW():0},bYt(t){const s=this.mXt(t,"value");return s?s.KW("value").ZW():0},Lbt(){let t=this.uXt();return(t=t||this.hXt())?t.btt():""}}}{const Su=self.Bs,vu=self.mc,bu=["position","size","scale"],Mu=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],xu=["value"],Tu=[].concat(bu).concat(Mu).concat(xu),_u={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Gu=Object.assign({},Tu.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),_u);Su.Hat.jat.RXt=class{constructor(){}static MYt(){return[...vu.Tc()]}static Dc(t){return[...vu.Tc()][t]}static AXt(t){return Tu[t]}static xYt(t){return Tu.indexOf(t)}static TYt(t){return bu[t]}static hYt(t){return Mu[t]}static _Yt(t){return xu[t]}static GYt(t){return _u[t]}static aYt(t){return Su.Ge(t)?Gu[t]:Gu[Tu[t]]}static IYt(t){return!!_u[t]}static CYt(t){return"offsetColor"===t}static PYt(t){return"offsetAngle"===t}static EYt(t){return"offsetOpacity"===t}static FXt(t){return"value"===t}}}{const Iu=self.Bs,Cu=Iu.Hat.jat,Pu=new Map;Cu.EXt=class{constructor(){}static PXt(t,s,i,e,n,r){0===Pu.size&&this.AYt();let h=Cu.FYt.RYt(t),o=Pu.get(h);return Iu.ge(t)&&(t=Cu.RXt.AXt(t)),this.DYt(o,t,s,i,e,n,r)}static OYt(t,s){const i=Iu.Hat.jat.PXt(t);return i.kYt(s)}static AYt(){const t=Cu.FYt,s=Cu.LYt;this.BYt(t.NYt,this.WYt,s.VYt),this.BYt(t.COLOR,this.jYt,s.HYt),this.BYt(t.UYt,this.zYt,s.JYt),this.BYt(t.qYt,this.$Yt,s.VYt),this.BYt(t.XYt,this.YYt,s.VYt)}static BYt(t,s,i){Pu.set(t,this.ZYt(t,s,i))}static ZYt(t,s,i){return{name:t,KYt:s,kYt:i}}static DYt(t,s,i,e,n,r,h){return t.KYt(s,t.kYt(i),t.kYt(e),n,r,h)}static WYt(t,i,e,n,r,s){const h=Cu.RXt.GYt(t);return h.map((t,s)=>({slt:"world-instance",property:t,type:"float",valueType:"numeric",elt:i[s],nlt:e[s],ease:Cu.RXt.Dc(n),resultMode:r}))}static jYt(t,s,i,e,n,r){return Iu.nX.Text&&r._L()instanceof Iu.nX.Text?{slt:"plugin",ilt:[7],property:"color",type:"color",valueType:"color",elt:s,nlt:i,ease:Cu.RXt.Dc(e),resultMode:n}:{slt:"world-instance",property:t,type:"color",valueType:"color",elt:s,nlt:i,ease:Cu.RXt.Dc(e),resultMode:n}}static zYt(t,s,i,e,n,r){return{slt:"world-instance",property:t,type:"angle",valueType:"angle",elt:s,nlt:i,ease:Cu.RXt.Dc(e),resultMode:n}}static YYt(t,s,i,e,n,r){return{slt:"world-instance",property:t,type:"float",valueType:"numeric",elt:s,nlt:i,ease:Cu.RXt.Dc(e),resultMode:n}}static $Yt(t,s,i,e,n,r){return{slt:"value",property:t,type:"float",valueType:"numeric",elt:s,nlt:i,ease:Cu.RXt.Dc(e),resultMode:n}}}}{const Eu=self.Bs,Au=Eu.Hat.jat,Ru={resultMode:"absolute"},Fu=Object.assign({},Ru,{tags:"",property:"",time:0,ease:0,tlt:0,loop:!1,pingPong:!1,repeatCount:1}),Du=Object.assign({},Fu,{initialValueMode:"current-state",elt:0,nlt:0}),Ou=Object.assign({},Fu,{initialValueMode:"current-state",elt:[0,0],nlt:[0,0]}),ku=Object.assign({},Fu,{initialValueMode:"current-state",elt:[0,0,0],nlt:[0,0,0]}),Lu=Object.assign({},Du,{initialValueMode:"start-value"});Au.$Xt=class{constructor(){}static QYt(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.ease=e,t.tlt=n,t.loop=r,t.pingPong=h,t.repeatCount=o}static qXt(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:Au.RXt.hYt(i),c=Au.RXt.CYt(u)?ku:Du;return this.QYt(c,s,n,r,h,o,a,l),Au.RXt.CYt(u)?(ku.nlt[0]=Eu.Jr(e),ku.nlt[1]=Eu.qr(e),ku.nlt[2]=Eu.$r(e),ku.property=Au.RXt.xYt(u)):Au.RXt.EYt(u)?Du.nlt=e/100:Du.nlt=e,c.property=Au.RXt.xYt(u),c}static YXt(t,s,i,e,n,r,h,o,a,l,u){this.QYt(Ou,s,r,h,o,a,l,u);const c="string"==typeof i?i:Au.RXt.TYt(i);return Ou.nlt[0]=e,Ou.nlt[1]=n,Ou.property=Au.RXt.xYt(c),Ou}static KXt(t,s,i,e,n,r,h,o,a,l){return this.QYt(Lu,s,n,r,h,o,a,l),Lu.elt=i,Lu.nlt=e,Lu.property=Au.RXt.xYt("value"),Lu}}}{const Bu=self.Bs,Nu=Bu.Hat.jat,Wu=[];Nu.FYt=class{constructor(){}static RYt(t){if(0===Wu.length){const s=Wu;s.push({dP:Nu.RXt.IYt,result:this.NYt}),s.push({dP:Nu.RXt.CYt,result:this.COLOR}),s.push({dP:Nu.RXt.PYt,result:this.UYt}),s.push({dP:Nu.RXt.FXt,result:this.qYt}),s.push({dP:()=>!0,result:this.XYt})}Bu.ge(t)&&(t=Bu.Hat.jat.RXt.AXt(t));for(const i of Wu)if(i.dP(t))return i.result}static get NYt(){return"pair"}static get COLOR(){return"color"}static get UYt(){return"angle"}static get qYt(){return"value"}static get XYt(){return"other"}}}{const Vu=self.Bs,ju=Vu.Hat.jat;ju.LYt=class{constructor(){}static JYt(t){const s=Vu.Sr(parseFloat(t));return Vu.yr(s)}static HYt(t){return t.slice(0)}static VYt(t){return t}}}{let l=function(t){Uu.Ie(t);let s=Ju.Sc(t),i;if(-1===(i=s?Ju.Oc(s,null):Ju.Oc(t,null)))throw new Error(`invalid ease name '${t}'`);return i},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const Hu=self.Bs,Uu=self.$s,zu=self.b6,Ju=self.mc,qu=Hu.Hat.jat,$u=new WeakMap,Xu=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),Yu={tags:"",tZt:!1,loop:!1,pingPong:!1,repeatCount:1,elt:0},Zu={jW:l};self.HXt=class extends zu{constructor(){super(),$u.set(this,zu.F5().g6())}sZt(t,s,i,e,n){const r=$u.get(this);if(!r.Zu()||!r.jst())return null;const h=Xu.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?Uu.ye(s):(Uu.je(s),"two"===h.type?(Uu.ye(s[0]),Uu.ye(s[1])):"color"===h.type&&(Uu.ye(s[0]),Uu.ye(s[1]),Uu.ye(s[2]))),"angle"===t?s=Hu.vr(s):"opacity"===t?s*=100:"color"===t&&(s=Hu.zr(s[0],s[1],s[2]));const o=l(e);Uu.xe(i),n=Object.assign({},Yu,n),"value"===h.type&&Uu.ye(n.elt),u(n.tags,!0);let a;if("one"===h.type||"color"===h.type?a=r.CXt(qu.$Xt.qXt(r,n.tags,h.name,s,i,o,!!n.tZt,!!n.loop,!!n.pingPong,n.repeatCount)):"two"===h.type?a=r.CXt(qu.$Xt.YXt(r,n.tags,h.name,s[0],s[1],i,o,!!n.tZt,!!n.loop,!!n.pingPong,n.repeatCount)):"value"===h.type&&(a=r.CXt(qu.$Xt.KXt(r,n.tags,n.elt,s,i,o,!!n.tZt,!!n.loop,!!n.pingPong,n.repeatCount))),a.Play())return a.rlt(r,Zu);throw new Error("failed to start tween")}*iZt(){const t=$u.get(this);for(const s of t.oXt())yield s.rlt(t,Zu)}*eZt(t){u(t);const s=$u.get(this);for(const i of s.gXt(t))yield i.rlt(s,Zu)}get isEnabled(){return $u.get(this).Zu()}set isEnabled(t){$u.get(this).PMt(t)}}}{const Ku=self.Bs;Ku.Hat.nZt=class extends Ku.ZTt{constructor(t){super(t),this.rZt=0,this.hZt=0,this.oZt=0,this.aZt=0}ur(){super.ur()}lZt(t){this.rZt=t}uZt(){return this.rZt}cZt(t){this.hZt=t}fZt(){return this.hZt}dZt(t){this.oZt=t}pZt(){return this.oZt}mZt(t){this.aZt=t}gZt(){return this.aZt}}}{const Qu=self.Bs;Qu.Hat.nZt.fIt=class extends Qu.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const tc=self.Bs;tc.Hat.nZt.Instance=class extends tc.n_t{constructor(t,s){super(t),this.Lyt=!0,s&&(this.Lyt=s[0]),this.Lyt&&this.oTt()}ur(){super.ur()}V2(){const t=this.x6();return{e:this.Lyt,smg:t.uZt(),ss:t.fZt(),se:t.pZt(),smd:t.gZt()}}j2(t){const s=this.x6();s.lZt(t.smg),s.cZt(t.ss),s.dZt(t.se),s.mZt(t.smd),this.Lyt=t.e,this.Lyt?this.oTt():this.Uxt()}Ebt(t){this.Lyt=!!t,this.Lyt?this.oTt():this.Uxt()}Zu(){return this.Lyt}nTt(){if(this.Zu()){this.lf.ED(this._i);let s=this.x6(),t=s.kL(),i=0,e=0,n=0;for(const l of t){const u=l.pPt(tc.Hat.nZt);if(u&&u.g6().Zu()){const c=l.xO();i+=c.I2(),e+=c.E2(),++n}}let r=this._i.xO().rO(),h=this.lf.FD(),o=0,a=0;if(h>=s.fZt()&&h<s.pZt()){let t=s.uZt()*Math.min(this.lf.kD(),1);0===s.gZt()&&(t*=1-(h-s.fZt())/(s.pZt()-s.fZt()));const f=this.lf.tO()*Math.PI*2,d=this.lf.tO()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.eB(i/n+o),r.rB(e/n+a)}}Rrt(t){if(0===t)return this.Lyt}Brt(t,s){0===t&&(this.Lyt=!!s,this.Lyt?this.oTt():this.Uxt())}lTt(){return[{title:"$"+this.G6().Kc(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.Zu(),XUt:t=>this.Ebt(t)}]}]}}}{const sc=self.Bs;sc.Hat.nZt.iX={Zu(){return this.Zu()}}}{const ic=self.Bs;ic.Hat.nZt.$nt={yZt(t,s,i){const e=this.x6();e.lZt(t),e.cZt(this.lf.FD()),e.dZt(this.lf.FD()+s),e.mZt(i)},PMt(t){this.Ebt(0!==t)}}}{const ec=self.Bs;ec.Hat.nZt.Xnt={}}{const nc=self.Bs;nc.Hat.wZt=class extends nc.ZTt{constructor(t){super(t);const s=this.lf.jf();this.v0=new nc.y0(nc.c0.g0(s,"pointerdown",t=>this.QVt(t.data)),nc.c0.g0(s,"pointermove",t=>this.tjt(t.data)),nc.c0.g0(s,"pointerup",t=>this.sjt(t.data,!1)),nc.c0.g0(s,"pointercancel",t=>this.sjt(t.data,!0)))}ur(){this.v0.ur(),this.v0=null,super.ur()}QVt(t){"mouse"===t.pointerType&&0!==t.button||this.SZt(t.pointerId.toString(),t.pageX-this.lf.w5(),t.pageY-this.lf.S5())}tjt(t){0!=(1&t.lastButtons)&&0==(1&t.buttons)?this.vZt(t.pointerId.toString()):this.bZt(t.pointerId.toString(),t.pageX-this.lf.w5(),t.pageY-this.lf.S5())}sjt(t,s){"mouse"===t.pointerType&&0!==t.button||this.vZt(t.pointerId.toString())}async SZt(t,s,i){let e=this.kL(),n=null,r=null,h=0,o=0;for(const a of e){const l=a.qat(nc.Hat.wZt);if(l.Zu()&&!l.MZt()&&!a.YV()){const u=a.xO(),c=u.TO(),[f,d]=c.y5(s,i,u.tN());if(c.$B()&&u.bN(f,d))if(n){const p=n.xO();(c.RF()>p.TO().RF()||c.RF()===p.TO().RF()&&u._O()>p._O())&&(n=a,r=l,h=f,o=d)}else n=a,r=l,h=f,o=d}}n&&await r.xZt(t,h,o)}bZt(t,s,i){const e=this.kL();for(const n of e){const r=n.qat(nc.Hat.wZt);if(r.Zu()&&r.MZt()&&(!r.MZt()||r.TZt()===t)){const h=n.xO(),o=h.TO(),[a,l]=o.y5(s,i,h.tN());r._Zt(a,l)}}}async vZt(t){const s=this.kL();for(const i of s){const e=i.qat(nc.Hat.wZt);e.MZt()&&e.TZt()===t&&await e.GZt()}}}}{const rc=self.Bs;rc.Hat.wZt.fIt=class extends rc.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const hc=self.Bs,oc=self.b6,ac=(hc.Hat.wZt.Instance=class extends hc.n_t{constructor(t,s){super(t),this.IZt=!1,this.CZt=0,this.PZt=0,this.EZt="<none>",this.AZt=0,this.Lyt=!0,s&&(this.AZt=s[0],this.Lyt=s[1])}ur(){super.ur()}V2(){return{a:this.AZt,e:this.Lyt}}j2(t){this.AZt=t.a,this.Lyt=t.e,this.IZt=!1}Ebt(t){this.Lyt=!!t,this.Lyt||(this.IZt=!1)}Zu(){return this.Lyt}RZt(t){this.AZt=t}FZt(){return this.AZt}DZt(){this.IZt&&this.GZt()}MZt(){return this.IZt}TZt(){return this.EZt}async xZt(t,s,i){const e=this.xO();this.CZt=s-e.I2(),this.PZt=i-e.E2(),this.IZt=!0,this.EZt=t,this.Bxt("dragstart"),await this.S4(hc.Hat.wZt.iX.OZt)}_Zt(t,s){const i=this.xO(),e=t-this.CZt,n=s-this.PZt;0===this.AZt?i.I2()===e&&i.E2()===n||(i.X4(e,n),i.q4()):1===this.AZt?i.I2()!==e&&(i.C2(e),i.q4()):2===this.AZt&&i.E2()!==n&&(i.A2(n),i.q4())}async GZt(){this.IZt=!1,this.Bxt("drop"),await this.S4(hc.Hat.wZt.iX.kZt)}Rrt(t){switch(t){case 0:return this.FZt();case 1:return this.Zu()}}Brt(t,s){switch(t){case 0:this.RZt(s);break;case 1:this.Ebt(!!s)}}lTt(){let t="behaviors.dragndrop",s=t+".properties.axes",i="";return 0===this.AZt?i=s+".items.both":1===this.AZt?i=s+".items.horizontal-only":2===this.AZt&&(i=s+".items.vertical-only"),[{title:"$"+this.G6().Kc(),properties:[{name:t+".debugger.is-dragging",value:this.MZt()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.Zu(),XUt:t=>this.Ebt(t)}]}]}bxt(){return self.LZt}},new WeakMap),lc=["both","horizontal","vertical"];self.LZt=class extends oc{constructor(){super(),ac.set(this,oc.F5().g6())}set axes(t){const s=lc.indexOf(t);if(-1===s)throw new Error("invalid axes");ac.get(this).RZt(s)}get axes(){return lc[ac.get(this).FZt()]}BZt(){ac.get(this).DZt()}get NZt(){return ac.get(this).MZt()}get isEnabled(){return ac.get(this).Zu()}set isEnabled(t){ac.get(this).Ebt(t)}}}{const uc=self.Bs;uc.Hat.wZt.iX={MZt(){return this.MZt()},OZt(){return!0},kZt(){return!0},Zu(){return this.Zu()}}}{const cc=self.Bs;cc.Hat.wZt.$nt={PMt(t){this.Ebt(!!t)},WZt(t){this.RZt(t)},VZt(){this.DZt()}}}{const fc=self.Bs;fc.Hat.wZt.Xnt={}}{const dc=self.Bs;dc.Hat.jZt=class extends dc.ZTt{constructor(t){super(t)}ur(){super.ur()}}}{const pc=self.Bs;pc.Hat.jZt.fIt=class extends pc.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const mc=self.Bs,gc=self.$s,yc=self.b6,F=(mc.Hat.jZt.Instance=class extends mc.n_t{constructor(t,s){super(t),this.HZt=!1,this.UZt=!1,this.zZt=!1,this.JZt=!1,this.qZt=!1,this.$Zt=!1,this.XZt=!1,this.YZt=!1,this.ZZt=!1,this.CZt=0,this.PZt=0,this.KZt=200,this.QZt=600,this.tKt=500,this.sKt=3,this.iKt=3,this.eKt=!1,this.nKt=!0,this.Lyt=!0,s&&(this.KZt=s[0],this.QZt=s[1],this.tKt=s[2],this.sKt=s[3],this.iKt=s[4],this.eKt=!!s[5],this.nKt=!!s[6],this.Lyt=!!s[7]),this.Lyt&&this.rTt(),this.nKt&&this.rKt()}rKt(){if(!this.v0){const t=this.lf.jf();this.v0=new mc.y0(mc.c0.g0(t,"keydown",t=>this.hKt(t.data)),mc.c0.g0(t,"keyup",t=>this.oKt(t.data)),mc.c0.g0(t,"window-blur",()=>this.aKt()),mc.c0.g0(t,"keyboard-blur",()=>this.aKt()))}}lKt(){this.v0&&(this.v0.ur(),this.v0=null)}ur(){super.ur()}V2(){return{dx:this.CZt,dy:this.PZt,e:this.Lyt,ms:this.KZt,acc:this.QZt,dec:this.tKt,d:this.sKt,am:this.iKt,dc:this.nKt,ii:this.qZt}}j2(t){this.CZt=t.dx,this.PZt=t.dy,this.Ebt(t.e),this.KZt=t.ms,this.QZt=t.acc,this.tKt=t.dec,this.sKt=t.d,this.iKt=t.am,this.nKt=t.dc,this.qZt=t.ii,this.HZt=!1,this.UZt=!1,this.zZt=!1,this.JZt=!1,this.$Zt=!1,this.XZt=!1,this.YZt=!1,this.ZZt=!1,this.nKt?this.rKt():this.lKt()}hKt(t){switch(t.key){case"ArrowLeft":this.zZt=!0;break;case"ArrowUp":this.HZt=!0;break;case"ArrowRight":this.JZt=!0;break;case"ArrowDown":this.UZt=!0}}oKt(t){switch(t.key){case"ArrowLeft":this.zZt=!1;break;case"ArrowUp":this.HZt=!1;break;case"ArrowRight":this.JZt=!1;break;case"ArrowDown":this.UZt=!1}}aKt(){this.HZt=!1,this.UZt=!1,this.zZt=!1,this.JZt=!1}EZ(){let m=this.lf.ED(this._i),g=this.lf.NF(),t=this.zZt||this.YZt,s=this.JZt||this.ZZt,i=this.HZt||this.$Zt,e=this.UZt||this.XZt;if(this.YZt=!1,this.ZZt=!1,this.$Zt=!1,this.XZt=!1,this.Lyt){let p=g.gk(this._i);if(!p||(g.Q3t(this._i,p),g.gRt(this._i))){this.qZt&&(t=s=i=e=!1),0===this.sKt?t=s=!1:1===this.sKt&&(i=e=!1),(t=2===this.sKt&&(i||e)?s=!1:t)===s&&(this.CZt<0?this.CZt=Math.min(this.CZt+this.tKt*m,0):0<this.CZt&&(this.CZt=Math.max(this.CZt-this.tKt*m,0))),i===e&&(this.PZt<0?this.PZt=Math.min(this.PZt+this.tKt*m,0):0<this.PZt&&(this.PZt=Math.max(this.PZt-this.tKt*m,0)));let f=0,d=0;if(t&&!s&&(f=0<this.CZt?-(this.QZt+this.tKt):-this.QZt),s&&!t&&(f=this.CZt<0?this.QZt+this.tKt:this.QZt),i&&!e&&(d=0<this.PZt?-(this.QZt+this.tKt):-this.QZt),e&&!i&&(d=this.PZt<0?this.QZt+this.tKt:this.QZt),this.CZt+=f*m,this.PZt+=d*m,0!==this.CZt||0!==this.PZt){let e=Math.hypot(this.CZt,this.PZt),t=Math.atan2(this.PZt,this.CZt),s=this.KZt*Math.cos(t),i=this.KZt*Math.sin(t),n=(e>this.KZt&&(e=this.KZt,this.CZt=s,this.PZt=i),this._i.xO()),r=n.I2(),h=n.E2(),o=n.iB(),a=Math.abs(s)*m,l=Math.abs(i)*m,u=mc.gr(this.CZt*m+.5*f*m*m,-a,a),c=mc.gr(this.PZt*m+.5*d*m*m,-l,l);if(this.eKt){if(n.K4(u,c),n.q4(),p=g.gk(this._i)){g.Q3t(this._i,p);let t=Math.atan2(this.PZt,this.CZt)+Math.PI/2,s=!1,i=(n.um()+n.xm())/4;if(g.mRt(this._i,Math.cos(t),Math.sin(t),Math.max(2.5*e*m,i))){s=!0;const S=n.I2(),v=n.E2(),b=e*m,M=mc.br(r,h,S,v);if(1.01*b<M){const x=b/M,T=mc.kt(r,S,x),_=mc.kt(h,v,x);if(n.X4(T,_),n.q4(),p=g.gk(this._i)){const G=mc.Tr(r,h,S,v)+Math.PI/2,I=Math.cos(G),C=Math.sin(G),P=(n.um()+n.xm())/2/10;g.mRt(this._i,I,C,Math.max(P,1))||(n.X4(r,h),n.q4(),s=!1)}}}if(!s){const E=Math.hypot(u,c),A=-u/E,R=-c/E;this.CZt=0,this.PZt=0,g.dRt(this._i,A,R,Math.max(2.5*e*m,i))||(n.X4(r,h),n.q4())}}}else n.qrt(u),n.q4(),(p=g.gk(this._i))&&(g.dRt(this._i,this.CZt<0?1:-1,0,Math.max(Math.abs(Math.floor(u)),1))||(n.C2(r),n.q4()),this.CZt=0,g.Q3t(this._i,p)),n.$rt(c),n.q4(),(p=g.gk(this._i))&&(g.dRt(this._i,0,this.PZt<0?1:-1,Math.max(Math.abs(Math.floor(c)),1))||(n.A2(h),n.q4()),this.PZt=0,g.Q3t(this._i,p));const y=mc.Vr(this.CZt,6),w=mc.Vr(this.PZt,6);0===y&&0===w||!this._i._L().hL()||(1===this.iKt?n.sB(mc.Sr(90*Math.round(mc.vr(Math.atan2(w,y))/90))):2===this.iKt?n.sB(mc.Sr(45*Math.round(mc.vr(Math.atan2(w,y))/45))):3===this.iKt&&n.sB(Math.atan2(w,y))),n.q4(),n.iB()!=o&&(p=g.gk(this._i))&&(n.sB(o),n.q4(),g.Q3t(this._i,p))}}}}Rrt(t){switch(t){case 0:return this.uKt();case 1:return this.cKt();case 2:return this.fKt();case 3:return this.sKt;case 4:return this.iKt;case 5:return this.eKt;case 6:return this.dKt();case 7:return this.Rbt()}}Brt(t,s){switch(t){case 0:this.pKt(s);break;case 1:this.mKt(s);break;case 2:this.gKt(s);break;case 3:this.sKt=s;break;case 4:this.iKt=s;break;case 5:this.eKt=!!s;break;case 6:this.yKt(!!s);break;case 7:this.Ebt(!!s)}}wKt(){this.CZt=0,this.PZt=0}SKt(){this.CZt*=-1,this.PZt*=-1}vKt(){const t=Math.hypot(this.CZt,this.PZt);t>this.KZt&&this.bKt(t)}bKt(t){t=mc.gr(t,0,this.KZt);const s=Math.atan2(this.PZt,this.CZt);this.CZt=t*Math.cos(s),this.PZt=t*Math.sin(s)}MKt(){return Math.hypot(this.CZt,this.PZt)}pKt(t){this.KZt=Math.max(t,0)}uKt(){return this.KZt}mKt(t){this.QZt=Math.max(t,0)}cKt(){return this.QZt}gKt(t){this.tKt=Math.max(t,0)}fKt(){return this.tKt}xKt(){return Math.atan2(this.PZt,this.CZt)}TKt(t){this.CZt=t,this.vKt()}_Kt(){return this.CZt}GKt(t){this.PZt=t,this.vKt()}IKt(){return this.PZt}CKt(t){if(this.Lyt)switch(t){case 0:this.YZt=!0;break;case 1:this.ZZt=!0;break;case 2:this.$Zt=!0;break;case 3:this.XZt=!0}}yKt(t){this.nKt!==(t=!!t)&&(this.nKt=t,this.nKt?this.rKt():(this.lKt(),this.aKt()))}dKt(){return this.nKt}PKt(t){this.qZt=!!t}EKt(){return this.qZt}Ebt(t){this.Lyt=!!t,this.Lyt?this.rTt():(this.YZt=!1,this.ZZt=!1,this.$Zt=!1,this.XZt=!1,this.Hxt())}Rbt(){return this.Lyt}AKt(t){this.eKt=!!t}RKt(){return this.eKt}lTt(){const t="behaviors.eightdir";return[{title:"$"+this.G6().Kc(),properties:[{name:t+".debugger.vector-x",value:this._Kt(),XUt:t=>this.TKt(t)},{name:t+".debugger.vector-y",value:this.IKt(),XUt:t=>this.GKt(t)},{name:t+".debugger.speed",value:this.MKt(),XUt:t=>this.bKt(t)},{name:t+".debugger.angle-of-motion",value:mc.vr(this.xKt())},{name:t+".properties.max-speed.name",value:this.uKt(),XUt:t=>this.pKt(t)},{name:t+".properties.acceleration.name",value:this.cKt(),XUt:t=>this.mKt(t)},{name:t+".properties.deceleration.name",value:this.fKt(),XUt:t=>this.gKt(t)},{name:t+".properties.allow-sliding.name",value:this.RKt(),XUt:t=>this.AKt(t)},{name:t+".properties.enabled.name",value:this.Rbt(),XUt:t=>this.Ebt(t)}]}]}bxt(){return self.FKt}},new WeakMap),wc=new Map([["left",0],["right",1],["up",2],["down",3]]);self.FKt=class extends yc{constructor(){super(),F.set(this,yc.F5().g6())}stop(){F.get(this).wKt()}reverse(){F.get(this).SKt()}DKt(t){gc.Ie(t);const s=wc.get(t);if("number"!=typeof s)throw new Error("invalid control");F.get(this).CKt(s)}get speed(){return F.get(this).MKt()}set speed(t){gc.xe(t),F.get(this).bKt(t)}get OKt(){return F.get(this).uKt()}set OKt(t){gc.xe(t),F.get(this).pKt(t)}get acceleration(){return F.get(this).cKt()}set acceleration(t){gc.xe(t),F.get(this).mKt(t)}get kKt(){return F.get(this).fKt()}set kKt(t){gc.xe(t),F.get(this).gKt(t)}get LKt(){return F.get(this)._Kt()}set LKt(t){gc.xe(t),F.get(this).TKt(t)}get BKt(){return F.get(this).IKt()}set BKt(t){gc.xe(t),F.get(this).GKt(t)}NKt(t,s){gc.xe(t),gc.xe(s);const i=F.get(this);i.TKt(t),i.GKt(s)}WKt(){const t=F.get(this);return[t._Kt(),t.IKt()]}get VKt(){return F.get(this).dKt()}set VKt(t){F.get(this).yKt(!!t)}get jKt(){return F.get(this).EKt()}set jKt(t){F.get(this).PKt(!!t)}get HKt(){return F.get(this).RKt()}set HKt(t){F.get(this).AKt(!!t)}get isEnabled(){return F.get(this).Rbt()}set isEnabled(t){F.get(this).Ebt(!!t)}}}{const Sc=self.Bs;Sc.Hat.jZt.iX={UKt(){return 1e-10<this.MKt()},zKt(t,s){return Sc.compare(this.MKt(),t,s)},Zu(){return this.Rbt()},JKt(){return this.RKt()}}}{const vc=self.Bs;vc.Hat.jZt.$nt={MW(){this.wKt()},qKt(){this.SKt()},$Kt(t){this.PKt(t)},XKt(t){this.bKt(t)},YKt(t){this.pKt(t)},ZKt(t){this.mKt(t)},KKt(t){this.gKt(t)},QKt(t){this.CKt(t)},PMt(t){this.Ebt(t)},tQt(t){this.TKt(t)},sQt(t){this.GKt(t)},iQt(t){this.yKt(!!t)},eQt(t){this.AKt(t)}}}{const bc=self.Bs;bc.Hat.jZt.Xnt={nQt(){return this.MKt()},rQt(){return this.uKt()},hQt(){return this.cKt()},oQt(){return this.fKt()},aQt(){return bc.vr(this.xKt())},lQt(){return this._Kt()},uQt(){return this.IKt()}}}{const Mc=self.Bs;Mc.Hat.bound=class extends Mc.ZTt{constructor(t){super(t)}ur(){super.ur()}}}{const xc=self.Bs;xc.Hat.bound.fIt=class extends xc.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const Tc=self.Bs;Tc.Hat.bound.Instance=class extends Tc.n_t{constructor(t,s){super(t),this.cQt=0,s&&(this.cQt=s[0]),this.oTt()}ur(){super.ur()}V2(){return{m:this.cQt}}j2(t){this.cQt=t.m}nTt(){let t=this._i.xO(),s=t.iN(),i=t.rO(),e=!1;0===this.cQt?(t.I2()<0&&(t.C2(0),e=!0),t.E2()<0&&(t.A2(0),e=!0),t.I2()>i.um()&&(t.C2(i.um()),e=!0),t.E2()>i.xm()&&(t.A2(i.xm()),e=!0)):(s.xl()<0&&(t.qrt(-s.xl()),e=!0),s.Tl()<0&&(t.$rt(-s.Tl()),e=!0),s._l()>i.um()&&(t.qrt(-(s._l()-i.um())),e=!0),s.Gl()>i.xm()&&(t.$rt(-(s.Gl()-i.xm())),e=!0)),e&&t.q4()}Rrt(t){if(0===t)return this.cQt}Brt(t,s){0===t&&(this.cQt=s)}}}{const _c=self.Bs;_c.Hat.bound.iX={}}{const Gc=self.Bs;Gc.Hat.bound.$nt={}}{const Ic=self.Bs;Ic.Hat.bound.Xnt={}}{const Cc=self.Bs;Cc.Hat.fQt=class extends Cc.ZTt{constructor(t){super(t)}ur(){super.ur()}}}{const Pc=self.Bs;Pc.Hat.fQt.fIt=class extends Pc.i_t{constructor(t){super(t)}ur(){super.ur()}vxt(){}}}{const Ec=self.Bs;Ec.Hat.fQt.Instance=class extends Ec.n_t{constructor(t,s){super(t),this.dQt=null,this.pQt=-1,this.cQt="",this.mQt=new Set,this.gQt=0,this.yQt=0,this.wQt=0,this.CZt=0,this.PZt=0,this.SQt=0,this.vQt=0,this.bQt=0,this.MQt=0,this.xQt=0,this.p$t=!1,s&&(this.p$t=s[0]);const i=this.lf.jf();this.v0=new Ec.y0(Ec.c0.g0(i,"instancedestroy",t=>this.fHt(t.I6)),Ec.c0.g0(i,"afterload",t=>this.DY()))}ur(){this.dQt=null,super.ur()}TQt(t){t?(this.dQt=t,this.oTt()):(this.dQt=null,this.Uxt())}_Qt(t,s,i){if(t){const e=t.$2t(this._i);if(e){this.cQt=s,this.TQt(e);const n=this._i.xO(),r=e.xO();if("properties"===this.cQt){const h=this.mQt;h.clear();for(const o of i)h.add(o);this.CZt=n.I2()-r.I2(),this.PZt=n.E2()-r.E2(),this.bQt=n.iB()-r.iB(),this.xQt=n.iB(),this.MQt=n.R2()-r.R2(),h.has("x")&&h.has("y")&&(this.yQt=Ec.Tr(r.I2(),r.E2(),n.I2(),n.E2())-r.iB(),this.gQt=Ec.br(r.I2(),r.E2(),n.I2(),n.E2())),h.has("width-abs")?this.SQt=n.um()-r.um():h.has("width-scale")&&(this.SQt=n.um()/r.um()),h.has("height-abs")?this.vQt=n.xm()-r.xm():h.has("height-scale")&&(this.vQt=n.xm()/r.xm())}else this.gQt=Ec.br(r.I2(),r.E2(),n.I2(),n.E2())}}}V2(){const t=this.mQt,s=this.cQt,i={uid:this.dQt&&!this.dQt.YV()?this.dQt.U5():-1,m:s,d:this.p$t};return"rope"===s||"bar"===s?i.pd=this.gQt:"properties"===s&&(i.ps=[...this.mQt],t.has("imagepoint")?i.ip=this.wQt:t.has("x")&&t.has("y")?(i.pa=this.yQt,i.pd=this.gQt):(t.has("x")&&(i.dx=this.CZt),t.has("y")&&(i.dy=this.PZt)),t.has("angle")&&(i.da=this.bQt,i.lka=this.xQt),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.SQt),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.vQt),t.has("z"))&&(i.dz=this.MQt),i}j2(t){const s=t.m,i=this.mQt;if(i.clear(),this.pQt=t.uid,"number"==typeof s)this.GQt(t);else if(this.cQt=s,t.hasOwnProperty("d")&&(this.p$t=!!t.d),"rope"===s||"bar"===s)this.gQt=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.wQt=t.ip:i.has("x")&&i.has("y")?(this.yQt=t.pa,this.gQt=t.pd):(i.has("x")&&(this.CZt=t.dx),i.has("y")&&(this.PZt=t.dy)),i.has("angle")&&(this.bQt=t.da,this.xQt=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.SQt=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.vQt=t.dh),i.has("z")&&(this.MQt=t.dz)}}GQt(t){const s=this.mQt,i=t.msa,e=t.tsa,n=t.pa,r=t.pd,h=t.m;switch(h){case 0:this.cQt="properties",s.add("x").add("y").add("angle"),this.yQt=n,this.gQt=r,this.bQt=i-e,this.xQt=t.lka;break;case 1:this.cQt="properties",s.add("x").add("y"),this.yQt=n,this.gQt=r;break;case 2:this.cQt="properties",s.add("angle"),this.bQt=i-e,this.xQt=t.lka;break;case 3:this.cQt="rope",this.gQt=t.pd;break;case 4:this.cQt="bar",this.gQt=t.pd}}DY(){-1===this.pQt?this.TQt(null):(this.TQt(this.lf.wO(this.pQt)),this.pQt=-1)}fHt(t){this.dQt===t&&(this.TQt(null),this.p$t)&&this.lf.L5(this._i)}nTt(){const r=this.dQt;if(r&&!r.YV()){let i=r.xO(),t=this._i,e=t.xO(),s=this.cQt,n=!1;if("rope"===s||"bar"===s){const h=Ec.br(e.I2(),e.E2(),i.I2(),i.E2());if(h>this.gQt||"bar"===s&&h<this.gQt){const o=Ec.Tr(i.I2(),i.E2(),e.I2(),e.E2());e.X4(i.I2()+Math.cos(o)*this.gQt,i.E2()+Math.sin(o)*this.gQt),n=!0}}else{let t=this.mQt,s=0;if(t.has("imagepoint")){const[a,l]=r.y2t(this.wQt);e.m2t(a,l)||(e.X4(a,l),n=!0)}else if(t.has("x")&&t.has("y")){const u=i.I2()+Math.cos(i.iB()+this.yQt)*this.gQt,c=i.E2()+Math.sin(i.iB()+this.yQt)*this.gQt;e.m2t(u,c)||(e.X4(u,c),n=!0)}else s=i.I2()+this.CZt,t.has("x")&&s!==e.I2()&&(e.C2(s),n=!0),s=i.E2()+this.PZt,t.has("y")&&s!==e.E2()&&(e.A2(s),n=!0);t.has("angle")&&(this.xQt!==e.iB()&&(this.bQt=Ec.yr(this.bQt+(e.iB()-this.xQt))),(s=Ec.yr(i.iB()+this.bQt))!==e.iB()&&(e.sB(s),n=!0),this.xQt=e.iB()),t.has("width-abs")&&(s=i.um()+this.SQt)!==e.um()&&(e.Sm(s),n=!0),t.has("width-scale")&&(s=i.um()*this.SQt)!==e.um()&&(e.Sm(s),n=!0),t.has("height-abs")&&(s=i.xm()+this.vQt)!==e.xm()&&(e.fm(s),n=!0),t.has("height-scale")&&(s=i.xm()*this.vQt)!==e.xm()&&(e.fm(s),n=!0),t.has("z")&&(s=i.R2()+this.MQt)!==e.R2()&&(e.F2(s),this.lf.EO())}n&&e.q4()}}lTt(){const t="behaviors.pin.debugger";return[{title:"$"+this.G6().Kc(),properties:[{name:t+".is-pinned",value:!!this.dQt},{name:t+".pinned-uid",value:this.dQt?this.dQt.U5():0}]}]}}}{const Ac=self.Bs;Ac.Hat.fQt.iX={IQt(){return!!this.dQt},CQt(){return this.p$t}}}{const Rc=self.Bs;Rc.Hat.fQt.$nt={PQt(t,s){this._Qt(t,0===s?"rope":"bar")},EQt(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this._Qt(t,"properties",o)},AQt(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.wQt=s,this._Qt(t,"properties",h)},RQt(t){"rope"!==this.cQt&&"bar"!==this.cQt||(this.gQt=Math.max(t,0))},FQt(t){this.p$t=t},DQt(){this.TQt(null),this.cQt="",this.mQt.clear(),this.wQt=""},fQt(t,s){switch(s){case 0:this._Qt(t,"properties",["x","y","angle"]);break;case 1:this._Qt(t,"properties",["x","y"]);break;case 2:this._Qt(t,"properties",["angle"]);break;case 3:this._Qt(t,"rope");break;case 4:this._Qt(t,"bar")}}}}{const Fc=self.Bs;Fc.Hat.fQt.Xnt={OQt(){return this.dQt?this.dQt.U5():-1}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.Kwt=[()=>1,()=>-10,()=>0,()=>"",t=>{const s=t.aSt(0);return()=>.7*s.Dwt()},()=>.05,()=>.1,t=>{const s=t.aSt(0);return()=>s.Wwt()},()=>.5,()=>-40,()=>11,()=>10,()=>8,()=>6,()=>5,()=>4,()=>2,()=>3,()=>7,()=>9,()=>12,()=>13,()=>14,()=>15,()=>16,()=>17,()=>18,()=>-1,()=>19,()=>-30,()=>"Song",()=>112,()=>800,()=>270,()=>428,()=>1e3,()=>"UI",t=>{const s=t.aSt(0);return()=>1.7*s.Dwt()},()=>.7,t=>{const s=t.aSt(0).Zwt();return()=>i("$",s.vet())},t=>{const s=t.aSt(0).Zwt();return()=>s.vet()},()=>"TotalScore",t=>{const s=t.aSt(0).Zwt();return()=>s.vet()/3e3*384.335086},t=>{const s=t.aSt(0);return()=>s.Dwt()},()=>"BestScore",()=>3e3,()=>384.335086,()=>750,()=>1500,()=>2250,t=>{const s=t.aSt(0);return()=>1.3*s.Dwt()},()=>.2,()=>"Videos",()=>"Cafe.mp4",()=>"Te.mp4",()=>"Arrastra las TAZAS a la cafetera para preparar el CAF que necesites.",()=>"Toca la PAVA para calentar agua y luego servirla en la TAZA.",()=>"Serv los JUGOS en los VASOS. Algunos jugos necesitan mezclarse en la LICUADORA.",()=>"BEBIDAS",()=>"Comida.mp4",()=>"Horno.mp4",()=>"Snack.mp4",()=>"Ubica un PLATO en la bandeja y luego podrs colocar la COMIDA.",()=>"Algunas COMIDAS debern ser calentadas en el HORNO.",()=>"El pedido tambin podr ir acompaado de un SNACK.",()=>"COMIDAS",()=>"Basura.mp4",()=>"Lavar.mp4",()=>"Si armaste mal un PEDIDO, lo pods tirar en el TACHO DE BASURA.",()=>"A medida que uses la VAJILLA, la vas a tener que LAVAR tocando la CANILLA.",()=>"EXTRAS",()=>"JUGAR",()=>"Camera Scrolling",t=>{const s=t.aSt(0).Cwt();return()=>s()},t=>{const s=t.aSt(0).Cwt();return()=>100*s(0)},()=>808.372039,()=>903.84397,()=>684.101333,()=>940.641964,t=>{const s=t.aSt(0).Cwt();return()=>100*-s(0)},()=>269.95663,()=>141.12004456878796,()=>397.66,()=>"Unique Elements",t=>{const s=t.aSt(0);return()=>1.3*s.Wwt()},()=>"Invisible Elements Drag",()=>"Bandeja 1 Invisible Elements",()=>"Drink",()=>20,()=>"T_Drink_Coffee_Empty_Cup",()=>"VasoDeVidrio",()=>"Dish",()=>"Food",()=>"DonaBlanca",()=>"T_Desert_Donut_",()=>"T_Desert_Donut_2",()=>"T_Desert_Cheesecake_Slice",()=>"T_Desert_Croissant",()=>"T_Desert_Muffin",()=>"Snack",()=>"T_Desert_Cookie_2",()=>"T_Desert_Cookie_",()=>"GalletitaRoja",()=>"T_Desert_Chocolate_Ball_",()=>"BetterOutline",()=>"Bandeja 2 Invisible Elements2",()=>"Drink2",()=>"Dish2",()=>"Food2",()=>"Snack2",()=>"Bandeja",()=>"BANDEJA 1",()=>"Bandeja2",t=>{const s=t.aSt(0);return()=>s.Bwt()},()=>1e10,()=>"BANDEJA2",()=>"Bandeja3",()=>"Horno",t=>{const s=t.aSt(0);return()=>s.Dwt(0)},t=>{const s=t.aSt(0),i=t.aSt(1);return()=>s.Bwt()/i.Bwt()*50},()=>"Juice",()=>"Juice Bandeja 1",()=>"Juice Bandeja 2",()=>"Cups",()=>"Left Coffee",t=>{const s=t.aSt(0);return()=>s.Dwt(1)},()=>"Right Coffee",()=>"Tea",()=>"Tea Bandeja 1",()=>"Tea Bandeja 2",()=>"Licuadora",t=>{const s=t.aSt(0),i=t.aSt(1);return()=>s.Bwt()+i.Wwt()},()=>"Licuadora Bandeja 1",()=>"Licuadora Bandeja 2",()=>"Lavamanos",()=>"Funciones",t=>{const s=t.aSt(0).Zwt(),i=t.aSt(1).Zwt();return()=>s.vet()/i.vet()*50},t=>{const s=t.aSt(0);return()=>.95*s.Dwt()},()=>624.892228,()=>229.071031,()=>62.882342,()=>427.602908,()=>"T_Prop_Plate_Small",()=>1031.426879,()=>528.247905,()=>357.921919,()=>269.739532,()=>181.557145,()=>"Pedidos",t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(0,4))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(1,4))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(3,7))},()=>60,t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(4,7))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(0,6))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(5,9))},()=>50,t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(1,10))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(1,9))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(7,12))},()=>40,t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(7,10))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(7,9))},t=>{const s=t.aSt(0).Cwt();return()=>Math.floor(s(10,15))},()=>30,()=>"Pedido2",()=>859.406757,()=>"Bebida",()=>828.298585,t=>{const s=t.aSt(0).Zwt();return()=>s.vet()-25},()=>"Comida",()=>879.93254,t=>{const s=t.aSt(0).Zwt();return()=>s.vet()-30},()=>895,t=>{const s=t.aSt(0).Zwt();return()=>s.vet()-15},()=>-2,()=>-3,()=>"1",t=>{const s=t.aSt(0),i=t.aSt(1);return()=>50-s.Bwt()/i.Bwt()*50},()=>"2",()=>"3"]}var t=self.Bs;self.IBt=function(){return[t.nX.Touch,t.nX.Audio,t.nX.OUt,t.nX.Ant,t.Hat.u$t,t.Hat.jat,t.Hat.nZt,t.Hat.wZt,t.Hat.jZt,t.Hat.bound,t.Hat.fQt,t.nX.Text,t.nX.video,t.nX.eX.iX.sX,t.nX.eX.iX.pNt,t.nX.Ant.$nt.Lzt,t.nX.Touch.iX.ajt,t.nX.Ant.iX.Dbt,t.nX.Audio.$nt.Play,t.nX.Ant.$nt.Xbt,t.Hat.jat.$nt.XXt,t.nX.Ant.Xnt.cMt,t.nX.Ant.Xnt.fMt,t.nX.eX.$nt.Rh,t.Hat.wZt.iX.OZt,t.nX.Ant.$nt.QL,t.Hat.wZt.iX.kZt,t.nX.Ant.iX.obt,t.nX.Ant.$nt.p2t,t.nX.Ant.iX.V2t,t.nX.eX.iX.ogt,t.nX.eX.iX.dd,t.nX.Ant.$nt.NB,t.nX.eX.iX.dNt,t.nX.eX.$nt.VNt,t.nX.eX.$nt.NNt,t.nX.eX.$nt.WNt,t.Hat.u$t.$nt.N$t,t.Hat.u$t.$nt.L$t,t.nX.eX.$nt.c6t,t.nX.eX.$nt.HNt,t.nX.Audio.$nt.JHt,t.nX.eX.iX.xpt,t.nX.eX.$nt.jNt,t.nX.Text.$nt.NB,t.nX.Text.$nt.df,t.nX.OUt.$nt.d7t,t.nX.Ant.$nt.hC,t.nX.Text.Xnt.cMt,t.nX.Text.Xnt.fMt,t.nX.video.$nt.zHt,t.nX.video.$nt.r$t,t.nX.video.$nt.NB,t.nX.video.$nt.Hbt,t.nX.Text.$nt.Hbt,t.nX.Touch.iX.ojt,t.nX.Touch.Xnt.lMt,t.nX.Touch.iX.cjt,t.Hat.fQt.$nt.AQt,t.Hat.jZt.$nt.tQt,t.nX.Touch.Xnt.Jjt,t.nX.Ant.$nt.Jbt,t.nX.Ant.iX.Fbt,t.Hat.wZt.$nt.PMt,t.nX.eX.$nt.qNt,t.Hat.wZt.iX.MZt,t.nX.Ant.$nt.sbt,t.Hat.fQt.$nt.DQt,t.nX.Ant.$nt.J2t,t.Hat.fQt.iX.IQt,t.nX.Ant.$nt.Hbt,t.nX.Ant.$nt.g2t,t.nX.Ant.Xnt.b9t,t.nX.Ant.Xnt.M9t,t.nX.eX.iX.eNt,t.nX.Ant.$nt.qbt,t.nX.eX.Xnt.dt,t.nX.Ant.iX.VB,t.nX.Touch.iX.pjt,t.nX.OUt.$nt.y7t,t.nX.eX.Xnt.random,t.nX.Ant.$nt.F2,t.nX.OUt.iX.n7t,t.nX.OUt.Xnt.M7t]},self.UBt=[{kQt:0},{Audio:0},{LQt:0},{Body:0},{BQt:0},{NQt:0},{WQt:0},{VQt:0},{jQt:0},{HQt:0},{UQt:0},{zQt:0},{JQt:0},{qQt:0},{$Qt:0},{XQt:0},{YQt:0},{ZQt:0},{KQt:0},{QQt:0},{tts:0},{sts:0},{its:0},{ets:0},{nts:0},{rts:0},{hts:0},{ots:0},{ats:0},{lts:0},{uts:0},{cts:0},{fts:0},{dts:0},{pts:0},{gts:0},{yts:0},{wts:0},{Sts:0},{vts:0},{bts:0},{Mts:0},{xts:0},{Tts:0},{_ts:0},{Gts:0},{Its:0},{Cts:0},{Pts:0},{Ets:0},{Ats:0},{Rts:0},{Fts:0},{Dts:0},{Ots:0},{kts:0},{Lts:0},{Bts:0},{Nts:0},{Wts:0},{Vts:0},{jts:0},{Hts:0},{Uts:0},{zts:0},{Jts:0},{qts:0},{$ts:0},{Xts:0},{Yts:0},{Zts:0},{Kts:0},{Qts:0},{tss:0},{sss:0},{iss:0},{ess:0},{nss:0},{rss:0},{hss:0},{oss:0},{ass:0},{lss:0},{uss:0},{css:0},{fss:0},{Ant:0},{dss:0},{pss:0},{mss:0},{gss:0},{yss:0},{wss:0},{Sss:0},{vss:0},{bss:0},{Mss:0},{type:0},{name:0},{xss:0},{show:0},{Tss:0},{_ss:0},{Gss:0},{Iss:0},{Css:0},{Pss:0},{Ess:0},{Ass:0},{duration:0},{elapsedTime:0},{Rss:0},{Fss:0},{value:0},{Dss:0},{Oss:0},{kss:0},{Lss:0},{Bss:0},{Nss:0},{Wss:0},{Vss:0},{jss:0},{Hss:0},{Uss:0},{zss:0},{Jss:0},{qss:0},{$ss:0},{Xss:0},{Yss:0},{Zss:0},{"8Direcciones":0},{Kss:0},{Qss:0},{tis:0},{sis:0},{iis:0},{eis:0},{nis:0},{ris:0},{his:0},{ois:0},{ais:0},{lis:0},{uis:0},{cis:0},{fis:0},{dis:0},{pis:0},{mis:0},{gis:0},{yis:0},{wis:0},{Sis:0},{vis:0},{bis:0},{Mis:0},{xis:0},{Tis:0},{_is:0},{Gis:0},{Iis:0},{Cis:0},{Pis:0},{Eis:0},{Ais:0},{Ris:0},{Fis:0},{filled:0},{Dis:0},{Ois:0},{kis:0},{Lis:0},{Bis:0},{Nis:0},{Wis:0},{Vis:0},{jis:0},{His:0},{Uis:0},{zis:0},{position:0},{Jis:0},{qis:0},{$is:0},{Xis:0},{Yis:0},{Zis:0},{Kis:0},{Qis:0},{tes:0},{ses:0},{ies:0},{ees:0},{nes:0},{res:0},{hes:0},{oes:0},{aes:0},{les:0},{ues:0},{ces:0},{fes:0},{des:0},{pes:0},{mes:0},{ges:0},{yes:0},{wes:0},{Ses:0},{ves:0},{bes:0},{Mes:0},{xes:0},{Tes:0},{_es:0},{Ges:0},{Ies:0},{Ces:0},{Pes:0},{Ees:0},{Aes:0},{Res:0},{Fes:0},{Des:0},{Oes:0},{kes:0},{Les:0},{Bes:0},{Nes:0},{Wes:0},{Ves:0},{jes:0},{Hes:0},{Memory:0},{Ues:0},{zes:0},{Jes:0},{qes:0},{$es:0},{Xes:0},{Yes:0},{Zes:0},{Kes:0},{Qes:0},{tns:0},{sns:0},{ins:0},{ens:0},{nns:0},{rns:0},{hns:0},{ons:0},{ans:0},{lns:0},{uns:0},{NZt:0},{cns:0},{fns:0},{dns:0},{pns:0},{mns:0},{gns:0},{yns:0},{paused:0},{wns:0},{memory:0},{Sns:0},{vns:0},{bns:0},{Mns:0},{xns:0},{Tns:0},{_ns:0},{Gns:0},{Ins:0},{Cns:0},{Pns:0},{Ens:0},{Ans:0},{Rns:0},{Fns:0},{Dns:0},{Ons:0},{kns:0},{Lns:0},{Bns:0}],self.Nns={kQt:class extends self.C5{},Audio:class extends self.C5{},LQt:class extends self.C5{},BQt:class extends self.Vzt{},UQt:class extends self.Vzt{},zQt:class extends self.Vzt{},JQt:class extends self.Vzt{},qQt:class extends self.Vzt{},$Qt:class extends self.Vzt{},XQt:class extends self.Vzt{},YQt:class extends self.Vzt{},ZQt:class extends self.Vzt{},KQt:class extends self.Vzt{},QQt:class extends self.Vzt{},tts:class extends self.Vzt{},sts:class extends self.Vzt{},its:class extends self.Vzt{},ets:class extends self.Vzt{},nts:class extends self.Vzt{},rts:class extends self.Vzt{},hts:class extends self.Vzt{},ots:class extends self.Vzt{},ats:class extends self.Vzt{},lts:class extends self.Vzt{},uts:class extends self.Vzt{},cts:class extends self.Vzt{},fts:class extends self.Vzt{},dts:class extends self.Vzt{},pts:class extends self.Vzt{},gts:class extends self.Vzt{},yts:class extends self.Vzt{},wts:class extends self.Vzt{},Sts:class extends self.Vzt{},bts:class extends self.Vzt{},Mts:class extends self.Vzt{},xts:class extends self.Vzt{},Tts:class extends self.Vzt{},_ts:class extends self.Vzt{},Gts:class extends self.Vzt{},Its:class extends self.Vzt{},Cts:class extends self.Vzt{},Pts:class extends self.Vzt{},Ets:class extends self.Vzt{},Ats:class extends self.Vzt{},Rts:class extends self.Vzt{},Fts:class extends self.Vzt{},Dts:class extends self.Vzt{},Ots:class extends self.Vzt{},kts:class extends self.Vzt{},Lts:class extends self.Vzt{},Bts:class extends self.Vzt{},Wts:class extends self.Vzt{},Vts:class extends self.Vzt{},jts:class extends self.Vzt{},Hts:class extends self.Vzt{},Uts:class extends self.Vzt{},zts:class extends self.Vzt{},Jts:class extends self.Vzt{},qts:class extends self.Vzt{},$ts:class extends self.Vzt{},Xts:class extends self.Vzt{},Yts:class extends self.Vzt{},Zts:class extends self.Vzt{},Kts:class extends self.Vzt{},Qts:class extends self.Vzt{},tss:class extends self.Vzt{},sss:class extends self.Vzt{},iss:class extends self.Vzt{},ess:class extends self.Vzt{},nss:class extends self.Vzt{},rss:class extends self.Vzt{},hss:class extends self.Vzt{},oss:class extends self.Vzt{},ass:class extends self.Vzt{},lss:class extends self.Vzt{},uss:class extends self.Vzt{},css:class extends self.Vzt{},fss:class extends self.Vzt{},Ant:class extends self.Vzt{},dss:class extends self.Vzt{},pss:class extends self.Vzt{},mss:class extends self.Vzt{},gss:class extends self.Vzt{},yss:class extends self.Vzt{},wss:class extends self.Vzt{},Gss:class extends self.Vzt{},Iss:class extends self.Vzt{},Css:class extends self.Vzt{},Pss:class extends self.Vzt{},Fss:class extends self.Vzt{},Dss:class extends self.Vzt{},Oss:class extends self.Vzt{},kss:class extends self.Vzt{},Lss:class extends self.Vzt{},Bss:class extends self.Vzt{},Nss:class extends self.Vzt{},Wss:class extends self.Vzt{},Vss:class extends self.Vzt{},jss:class extends self.Vzt{},Hss:class extends self.Vzt{},Uss:class extends self.Vzt{},zss:class extends self.Vzt{},Jss:class extends self.Vzt{},qss:class extends self.Vzt{},$ss:class extends self.Vzt{},Xss:class extends self.Vzt{},Qss:class extends self.Vzt{},tis:class extends self.Vzt{},sis:class extends self.Vzt{},iis:class extends self.Vzt{},eis:class extends self.Vzt{},nis:class extends self.Vzt{},ois:class extends self.Vzt{},ais:class extends self.Vzt{},mis:class extends self.Vzt{},gis:class extends self.Vzt{},yis:class extends self.Vzt{},wis:class extends self.Vzt{},Sis:class extends self.Vzt{},vis:class extends self.Vzt{},bis:class extends self.Vzt{},Mis:class extends self.Vzt{},xis:class extends self.Vzt{},Tis:class extends self.Vzt{},_is:class extends self.Vzt{},Gis:class extends self.Vzt{},Iis:class extends self.Vzt{},Cis:class extends self.Vzt{},Pis:class extends self.Vzt{},Eis:class extends self.Vzt{},Ais:class extends self.Vzt{},Ris:class extends self.Vzt{},Fis:class extends self.Vzt{},Dis:class extends self.Vzt{},Ois:class extends self.Vzt{},kis:class extends self.Vzt{},Lis:class extends self.Vzt{},Bis:class extends self.Vzt{},Nis:class extends self.Vzt{},Wis:class extends self.Vzt{},Vis:class extends self.Vzt{},jis:class extends self.Vzt{},His:class extends self.Vzt{},Uis:class extends self.Vzt{},$is:class extends self.Vzt{},Xis:class extends self.Vzt{},Yis:class extends self.Vzt{},Zis:class extends self.Vzt{},Kis:class extends self.Vzt{},Qis:class extends self.Vzt{},tes:class extends self.Vzt{},ses:class extends self.Vzt{},ies:class extends self.Vzt{},ees:class extends self.Vzt{},nes:class extends self.Vzt{},res:class extends self.Vzt{},hes:class extends self.Vzt{},oes:class extends self.Vzt{},aes:class extends self.Vzt{},les:class extends self.WJt{},ues:class extends self.Vzt{},ces:class extends self.Vzt{},fes:class extends self.Vzt{},des:class extends self.Vzt{},pes:class extends self.Vzt{},mes:class extends self.Vzt{},ges:class extends self.c6{},yes:class extends self.c6{},wes:class extends self.WJt{},Ses:class extends self.WJt{},ves:class extends self.WJt{},bes:class extends self.c6{},Mes:class extends self.c6{},xes:class extends self.WJt{},Tes:class extends self.WJt{},_es:class extends self.WJt{},Ges:class extends self.WJt{},Ies:class extends self.c6{},Ces:class extends self.WJt{},Pes:class extends self.c6{},Ees:class extends self.WJt{},Aes:class extends self.Vzt{},Res:class extends self.WJt{},Fes:class extends self.WJt{},Des:class extends self.WJt{},Oes:class extends self.WJt{},kes:class extends self.WJt{},Les:class extends self.WJt{},Bes:class extends self.WJt{},Nes:class extends self.WJt{},Wes:class extends self.WJt{},Ves:class extends self.WJt{},jes:class extends self.Vzt{},Hes:class extends self.Vzt{},Memory:class extends self.Vzt{},Ues:class extends self.Vzt{},zes:class extends self.Vzt{},Jes:class extends self.Vzt{},qes:class extends self.Vzt{},$es:class extends self.WJt{},Xes:class extends self.WJt{},Yes:class extends self.Vzt{},Zes:class extends self.Vzt{},Kes:class extends self.Vzt{},Qes:class extends self.WJt{},tns:class extends self.Vzt{},sns:class extends self.Vzt{},ins:class extends self.Vzt{},ens:class extends self.Vzt{},nns:class extends self.Vzt{},rns:class extends self.Vzt{},hns:class extends self.Vzt{}},runOnStartup(async t=>{t.addEventListener("beforeprojectstart",()=>(async t=>{t.addEventListener("tick",()=>{})})(t))});self.Bs.Wns={};